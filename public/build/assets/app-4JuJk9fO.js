function lX(b,x){return function(){return b.apply(x,arguments)}}const{toString:nQ}=Object.prototype,{getPrototypeOf:Nq}=Object,IL=(b=>x=>{const k=nQ.call(x);return b[k]||(b[k]=k.slice(8,-1).toLowerCase())})(Object.create(null)),im=b=>(b=b.toLowerCase(),x=>IL(x)===b),FL=b=>x=>typeof x===b,{isArray:KT}=Array,yM=FL("undefined");function oQ(b){return b!==null&&!yM(b)&&b.constructor!==null&&!yM(b.constructor)&&_u(b.constructor.isBuffer)&&b.constructor.isBuffer(b)}const uX=im("ArrayBuffer");function sQ(b){let x;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?x=ArrayBuffer.isView(b):x=b&&b.buffer&&uX(b.buffer),x}const rQ=FL("string"),_u=FL("function"),dX=FL("number"),LL=b=>b!==null&&typeof b=="object",aQ=b=>b===!0||b===!1,kL=b=>{if(IL(b)!=="object")return!1;const x=Nq(b);return(x===null||x===Object.prototype||Object.getPrototypeOf(x)===null)&&!(Symbol.toStringTag in b)&&!(Symbol.iterator in b)},cQ=im("Date"),iQ=im("File"),lQ=im("Blob"),uQ=im("FileList"),dQ=b=>LL(b)&&_u(b.pipe),fQ=b=>{let x;return b&&(typeof FormData=="function"&&b instanceof FormData||_u(b.append)&&((x=IL(b))==="formdata"||x==="object"&&_u(b.toString)&&b.toString()==="[object FormData]"))},mQ=im("URLSearchParams"),[gQ,hQ,pQ,bQ]=["ReadableStream","Request","Response","Headers"].map(im),vQ=b=>b.trim?b.trim():b.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function wM(b,x,{allOwnKeys:k=!1}={}){if(b===null||typeof b>"u")return;let D,$;if(typeof b!="object"&&(b=[b]),KT(b))for(D=0,$=b.length;D<$;D++)x.call(null,b[D],D,b);else{const H=k?Object.getOwnPropertyNames(b):Object.keys(b),Z=H.length;let J;for(D=0;D<Z;D++)J=H[D],x.call(null,b[J],J,b)}}function fX(b,x){x=x.toLowerCase();const k=Object.keys(b);let D=k.length,$;for(;D-- >0;)if($=k[D],x===$.toLowerCase())return $;return null}const ow=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,mX=b=>!yM(b)&&b!==ow;function uq(){const{caseless:b}=mX(this)&&this||{},x={},k=(D,$)=>{const H=b&&fX(x,$)||$;kL(x[H])&&kL(D)?x[H]=uq(x[H],D):kL(D)?x[H]=uq({},D):KT(D)?x[H]=D.slice():x[H]=D};for(let D=0,$=arguments.length;D<$;D++)arguments[D]&&wM(arguments[D],k);return x}const yQ=(b,x,k,{allOwnKeys:D}={})=>(wM(x,($,H)=>{k&&_u($)?b[H]=lX($,k):b[H]=$},{allOwnKeys:D}),b),CQ=b=>(b.charCodeAt(0)===65279&&(b=b.slice(1)),b),wQ=(b,x,k,D)=>{b.prototype=Object.create(x.prototype,D),b.prototype.constructor=b,Object.defineProperty(b,"super",{value:x.prototype}),k&&Object.assign(b.prototype,k)},xQ=(b,x,k,D)=>{let $,H,Z;const J={};if(x=x||{},b==null)return x;do{for($=Object.getOwnPropertyNames(b),H=$.length;H-- >0;)Z=$[H],(!D||D(Z,b,x))&&!J[Z]&&(x[Z]=b[Z],J[Z]=!0);b=k!==!1&&Nq(b)}while(b&&(!k||k(b,x))&&b!==Object.prototype);return x},SQ=(b,x,k)=>{b=String(b),(k===void 0||k>b.length)&&(k=b.length),k-=x.length;const D=b.indexOf(x,k);return D!==-1&&D===k},EQ=b=>{if(!b)return null;if(KT(b))return b;let x=b.length;if(!dX(x))return null;const k=new Array(x);for(;x-- >0;)k[x]=b[x];return k},_Q=(b=>x=>b&&x instanceof b)(typeof Uint8Array<"u"&&Nq(Uint8Array)),TQ=(b,x)=>{const D=(b&&b[Symbol.iterator]).call(b);let $;for(;($=D.next())&&!$.done;){const H=$.value;x.call(b,H[0],H[1])}},kQ=(b,x)=>{let k;const D=[];for(;(k=b.exec(x))!==null;)D.push(k);return D},OQ=im("HTMLFormElement"),AQ=b=>b.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(k,D,$){return D.toUpperCase()+$}),BY=(({hasOwnProperty:b})=>(x,k)=>b.call(x,k))(Object.prototype),RQ=im("RegExp"),gX=(b,x)=>{const k=Object.getOwnPropertyDescriptors(b),D={};wM(k,($,H)=>{let Z;(Z=x($,H,b))!==!1&&(D[H]=Z||$)}),Object.defineProperties(b,D)},DQ=b=>{gX(b,(x,k)=>{if(_u(b)&&["arguments","caller","callee"].indexOf(k)!==-1)return!1;const D=b[k];if(_u(D)){if(x.enumerable=!1,"writable"in x){x.writable=!1;return}x.set||(x.set=()=>{throw Error("Can not rewrite read-only method '"+k+"'")})}})},MQ=(b,x)=>{const k={},D=$=>{$.forEach(H=>{k[H]=!0})};return KT(b)?D(b):D(String(b).split(x)),k},PQ=()=>{},NQ=(b,x)=>b!=null&&Number.isFinite(b=+b)?b:x,tq="abcdefghijklmnopqrstuvwxyz",$Y="0123456789",hX={DIGIT:$Y,ALPHA:tq,ALPHA_DIGIT:tq+tq.toUpperCase()+$Y},BQ=(b=16,x=hX.ALPHA_DIGIT)=>{let k="";const{length:D}=x;for(;b--;)k+=x[Math.random()*D|0];return k};function $Q(b){return!!(b&&_u(b.append)&&b[Symbol.toStringTag]==="FormData"&&b[Symbol.iterator])}const IQ=b=>{const x=new Array(10),k=(D,$)=>{if(LL(D)){if(x.indexOf(D)>=0)return;if(!("toJSON"in D)){x[$]=D;const H=KT(D)?[]:{};return wM(D,(Z,J)=>{const ge=k(Z,$+1);!yM(ge)&&(H[J]=ge)}),x[$]=void 0,H}}return D};return k(b,0)},FQ=im("AsyncFunction"),LQ=b=>b&&(LL(b)||_u(b))&&_u(b.then)&&_u(b.catch),pX=((b,x)=>b?setImmediate:x?((k,D)=>(ow.addEventListener("message",({source:$,data:H})=>{$===ow&&H===k&&D.length&&D.shift()()},!1),$=>{D.push($),ow.postMessage(k,"*")}))(`axios@${Math.random()}`,[]):k=>setTimeout(k))(typeof setImmediate=="function",_u(ow.postMessage)),HQ=typeof queueMicrotask<"u"?queueMicrotask.bind(ow):typeof process<"u"&&process.nextTick||pX,Ue={isArray:KT,isArrayBuffer:uX,isBuffer:oQ,isFormData:fQ,isArrayBufferView:sQ,isString:rQ,isNumber:dX,isBoolean:aQ,isObject:LL,isPlainObject:kL,isReadableStream:gQ,isRequest:hQ,isResponse:pQ,isHeaders:bQ,isUndefined:yM,isDate:cQ,isFile:iQ,isBlob:lQ,isRegExp:RQ,isFunction:_u,isStream:dQ,isURLSearchParams:mQ,isTypedArray:_Q,isFileList:uQ,forEach:wM,merge:uq,extend:yQ,trim:vQ,stripBOM:CQ,inherits:wQ,toFlatObject:xQ,kindOf:IL,kindOfTest:im,endsWith:SQ,toArray:EQ,forEachEntry:TQ,matchAll:kQ,isHTMLForm:OQ,hasOwnProperty:BY,hasOwnProp:BY,reduceDescriptors:gX,freezeMethods:DQ,toObjectSet:MQ,toCamelCase:AQ,noop:PQ,toFiniteNumber:NQ,findKey:fX,global:ow,isContextDefined:mX,ALPHABET:hX,generateString:BQ,isSpecCompliantForm:$Q,toJSONObject:IQ,isAsyncFn:FQ,isThenable:LQ,setImmediate:pX,asap:HQ};function Xn(b,x,k,D,$){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=b,this.name="AxiosError",x&&(this.code=x),k&&(this.config=k),D&&(this.request=D),$&&(this.response=$,this.status=$.status?$.status:null)}Ue.inherits(Xn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ue.toJSONObject(this.config),code:this.code,status:this.status}}});const bX=Xn.prototype,vX={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(b=>{vX[b]={value:b}});Object.defineProperties(Xn,vX);Object.defineProperty(bX,"isAxiosError",{value:!0});Xn.from=(b,x,k,D,$,H)=>{const Z=Object.create(bX);return Ue.toFlatObject(b,Z,function(ge){return ge!==Error.prototype},J=>J!=="isAxiosError"),Xn.call(Z,b.message,x,k,D,$),Z.cause=b,Z.name=b.name,H&&Object.assign(Z,H),Z};const VQ=null;function dq(b){return Ue.isPlainObject(b)||Ue.isArray(b)}function yX(b){return Ue.endsWith(b,"[]")?b.slice(0,-2):b}function IY(b,x,k){return b?b.concat(x).map(function($,H){return $=yX($),!k&&H?"["+$+"]":$}).join(k?".":""):x}function zQ(b){return Ue.isArray(b)&&!b.some(dq)}const UQ=Ue.toFlatObject(Ue,{},null,function(x){return/^is[A-Z]/.test(x)});function HL(b,x,k){if(!Ue.isObject(b))throw new TypeError("target must be an object");x=x||new FormData,k=Ue.toFlatObject(k,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Vt,Se){return!Ue.isUndefined(Se[Vt])});const D=k.metaTokens,$=k.visitor||Be,H=k.dots,Z=k.indexes,ge=(k.Blob||typeof Blob<"u"&&Blob)&&Ue.isSpecCompliantForm(x);if(!Ue.isFunction($))throw new TypeError("visitor must be a function");function Re(Ht){if(Ht===null)return"";if(Ue.isDate(Ht))return Ht.toISOString();if(!ge&&Ue.isBlob(Ht))throw new Xn("Blob is not supported. Use a Buffer instead.");return Ue.isArrayBuffer(Ht)||Ue.isTypedArray(Ht)?ge&&typeof Blob=="function"?new Blob([Ht]):Buffer.from(Ht):Ht}function Be(Ht,Vt,Se){let sn=Ht;if(Ht&&!Se&&typeof Ht=="object"){if(Ue.endsWith(Vt,"{}"))Vt=D?Vt:Vt.slice(0,-2),Ht=JSON.stringify(Ht);else if(Ue.isArray(Ht)&&zQ(Ht)||(Ue.isFileList(Ht)||Ue.endsWith(Vt,"[]"))&&(sn=Ue.toArray(Ht)))return Vt=yX(Vt),sn.forEach(function(Q,Kt){!(Ue.isUndefined(Q)||Q===null)&&x.append(Z===!0?IY([Vt],Kt,H):Z===null?Vt:Vt+"[]",Re(Q))}),!1}return dq(Ht)?!0:(x.append(IY(Se,Vt,H),Re(Ht)),!1)}const pt=[],Xt=Object.assign(UQ,{defaultVisitor:Be,convertValue:Re,isVisitable:dq});function bn(Ht,Vt){if(!Ue.isUndefined(Ht)){if(pt.indexOf(Ht)!==-1)throw Error("Circular reference detected in "+Vt.join("."));pt.push(Ht),Ue.forEach(Ht,function(sn,En){(!(Ue.isUndefined(sn)||sn===null)&&$.call(x,sn,Ue.isString(En)?En.trim():En,Vt,Xt))===!0&&bn(sn,Vt?Vt.concat(En):[En])}),pt.pop()}}if(!Ue.isObject(b))throw new TypeError("data must be an object");return bn(b),x}function FY(b){const x={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(b).replace(/[!'()~]|%20|%00/g,function(D){return x[D]})}function Bq(b,x){this._pairs=[],b&&HL(b,this,x)}const CX=Bq.prototype;CX.append=function(x,k){this._pairs.push([x,k])};CX.toString=function(x){const k=x?function(D){return x.call(this,D,FY)}:FY;return this._pairs.map(function($){return k($[0])+"="+k($[1])},"").join("&")};function WQ(b){return encodeURIComponent(b).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function wX(b,x,k){if(!x)return b;const D=k&&k.encode||WQ,$=k&&k.serialize;let H;if($?H=$(x,k):H=Ue.isURLSearchParams(x)?x.toString():new Bq(x,k).toString(D),H){const Z=b.indexOf("#");Z!==-1&&(b=b.slice(0,Z)),b+=(b.indexOf("?")===-1?"?":"&")+H}return b}class LY{constructor(){this.handlers=[]}use(x,k,D){return this.handlers.push({fulfilled:x,rejected:k,synchronous:D?D.synchronous:!1,runWhen:D?D.runWhen:null}),this.handlers.length-1}eject(x){this.handlers[x]&&(this.handlers[x]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(x){Ue.forEach(this.handlers,function(D){D!==null&&x(D)})}}const xX={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ZQ=typeof URLSearchParams<"u"?URLSearchParams:Bq,jQ=typeof FormData<"u"?FormData:null,GQ=typeof Blob<"u"?Blob:null,qQ={isBrowser:!0,classes:{URLSearchParams:ZQ,FormData:jQ,Blob:GQ},protocols:["http","https","file","blob","url","data"]},$q=typeof window<"u"&&typeof document<"u",fq=typeof navigator=="object"&&navigator||void 0,KQ=$q&&(!fq||["ReactNative","NativeScript","NS"].indexOf(fq.product)<0),YQ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",XQ=$q&&window.location.href||"http://localhost",JQ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$q,hasStandardBrowserEnv:KQ,hasStandardBrowserWebWorkerEnv:YQ,navigator:fq,origin:XQ},Symbol.toStringTag,{value:"Module"})),Fl={...JQ,...qQ};function QQ(b,x){return HL(b,new Fl.classes.URLSearchParams,Object.assign({visitor:function(k,D,$,H){return Fl.isNode&&Ue.isBuffer(k)?(this.append(D,k.toString("base64")),!1):H.defaultVisitor.apply(this,arguments)}},x))}function eee(b){return Ue.matchAll(/\w+|\[(\w*)]/g,b).map(x=>x[0]==="[]"?"":x[1]||x[0])}function tee(b){const x={},k=Object.keys(b);let D;const $=k.length;let H;for(D=0;D<$;D++)H=k[D],x[H]=b[H];return x}function SX(b){function x(k,D,$,H){let Z=k[H++];if(Z==="__proto__")return!0;const J=Number.isFinite(+Z),ge=H>=k.length;return Z=!Z&&Ue.isArray($)?$.length:Z,ge?(Ue.hasOwnProp($,Z)?$[Z]=[$[Z],D]:$[Z]=D,!J):((!$[Z]||!Ue.isObject($[Z]))&&($[Z]=[]),x(k,D,$[Z],H)&&Ue.isArray($[Z])&&($[Z]=tee($[Z])),!J)}if(Ue.isFormData(b)&&Ue.isFunction(b.entries)){const k={};return Ue.forEachEntry(b,(D,$)=>{x(eee(D),$,k,0)}),k}return null}function nee(b,x,k){if(Ue.isString(b))try{return(x||JSON.parse)(b),Ue.trim(b)}catch(D){if(D.name!=="SyntaxError")throw D}return(0,JSON.stringify)(b)}const xM={transitional:xX,adapter:["xhr","http","fetch"],transformRequest:[function(x,k){const D=k.getContentType()||"",$=D.indexOf("application/json")>-1,H=Ue.isObject(x);if(H&&Ue.isHTMLForm(x)&&(x=new FormData(x)),Ue.isFormData(x))return $?JSON.stringify(SX(x)):x;if(Ue.isArrayBuffer(x)||Ue.isBuffer(x)||Ue.isStream(x)||Ue.isFile(x)||Ue.isBlob(x)||Ue.isReadableStream(x))return x;if(Ue.isArrayBufferView(x))return x.buffer;if(Ue.isURLSearchParams(x))return k.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),x.toString();let J;if(H){if(D.indexOf("application/x-www-form-urlencoded")>-1)return QQ(x,this.formSerializer).toString();if((J=Ue.isFileList(x))||D.indexOf("multipart/form-data")>-1){const ge=this.env&&this.env.FormData;return HL(J?{"files[]":x}:x,ge&&new ge,this.formSerializer)}}return H||$?(k.setContentType("application/json",!1),nee(x)):x}],transformResponse:[function(x){const k=this.transitional||xM.transitional,D=k&&k.forcedJSONParsing,$=this.responseType==="json";if(Ue.isResponse(x)||Ue.isReadableStream(x))return x;if(x&&Ue.isString(x)&&(D&&!this.responseType||$)){const Z=!(k&&k.silentJSONParsing)&&$;try{return JSON.parse(x)}catch(J){if(Z)throw J.name==="SyntaxError"?Xn.from(J,Xn.ERR_BAD_RESPONSE,this,null,this.response):J}}return x}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Fl.classes.FormData,Blob:Fl.classes.Blob},validateStatus:function(x){return x>=200&&x<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ue.forEach(["delete","get","head","post","put","patch"],b=>{xM.headers[b]={}});const oee=Ue.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),see=b=>{const x={};let k,D,$;return b&&b.split(`
`).forEach(function(Z){$=Z.indexOf(":"),k=Z.substring(0,$).trim().toLowerCase(),D=Z.substring($+1).trim(),!(!k||x[k]&&oee[k])&&(k==="set-cookie"?x[k]?x[k].push(D):x[k]=[D]:x[k]=x[k]?x[k]+", "+D:D)}),x},HY=Symbol("internals");function fM(b){return b&&String(b).trim().toLowerCase()}function OL(b){return b===!1||b==null?b:Ue.isArray(b)?b.map(OL):String(b)}function ree(b){const x=Object.create(null),k=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let D;for(;D=k.exec(b);)x[D[1]]=D[2];return x}const aee=b=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(b.trim());function nq(b,x,k,D,$){if(Ue.isFunction(D))return D.call(this,x,k);if($&&(x=k),!!Ue.isString(x)){if(Ue.isString(D))return x.indexOf(D)!==-1;if(Ue.isRegExp(D))return D.test(x)}}function cee(b){return b.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(x,k,D)=>k.toUpperCase()+D)}function iee(b,x){const k=Ue.toCamelCase(" "+x);["get","set","has"].forEach(D=>{Object.defineProperty(b,D+k,{value:function($,H,Z){return this[D].call(this,x,$,H,Z)},configurable:!0})})}class Ll{constructor(x){x&&this.set(x)}set(x,k,D){const $=this;function H(J,ge,Re){const Be=fM(ge);if(!Be)throw new Error("header name must be a non-empty string");const pt=Ue.findKey($,Be);(!pt||$[pt]===void 0||Re===!0||Re===void 0&&$[pt]!==!1)&&($[pt||ge]=OL(J))}const Z=(J,ge)=>Ue.forEach(J,(Re,Be)=>H(Re,Be,ge));if(Ue.isPlainObject(x)||x instanceof this.constructor)Z(x,k);else if(Ue.isString(x)&&(x=x.trim())&&!aee(x))Z(see(x),k);else if(Ue.isHeaders(x))for(const[J,ge]of x.entries())H(ge,J,D);else x!=null&&H(k,x,D);return this}get(x,k){if(x=fM(x),x){const D=Ue.findKey(this,x);if(D){const $=this[D];if(!k)return $;if(k===!0)return ree($);if(Ue.isFunction(k))return k.call(this,$,D);if(Ue.isRegExp(k))return k.exec($);throw new TypeError("parser must be boolean|regexp|function")}}}has(x,k){if(x=fM(x),x){const D=Ue.findKey(this,x);return!!(D&&this[D]!==void 0&&(!k||nq(this,this[D],D,k)))}return!1}delete(x,k){const D=this;let $=!1;function H(Z){if(Z=fM(Z),Z){const J=Ue.findKey(D,Z);J&&(!k||nq(D,D[J],J,k))&&(delete D[J],$=!0)}}return Ue.isArray(x)?x.forEach(H):H(x),$}clear(x){const k=Object.keys(this);let D=k.length,$=!1;for(;D--;){const H=k[D];(!x||nq(this,this[H],H,x,!0))&&(delete this[H],$=!0)}return $}normalize(x){const k=this,D={};return Ue.forEach(this,($,H)=>{const Z=Ue.findKey(D,H);if(Z){k[Z]=OL($),delete k[H];return}const J=x?cee(H):String(H).trim();J!==H&&delete k[H],k[J]=OL($),D[J]=!0}),this}concat(...x){return this.constructor.concat(this,...x)}toJSON(x){const k=Object.create(null);return Ue.forEach(this,(D,$)=>{D!=null&&D!==!1&&(k[$]=x&&Ue.isArray(D)?D.join(", "):D)}),k}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([x,k])=>x+": "+k).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(x){return x instanceof this?x:new this(x)}static concat(x,...k){const D=new this(x);return k.forEach($=>D.set($)),D}static accessor(x){const D=(this[HY]=this[HY]={accessors:{}}).accessors,$=this.prototype;function H(Z){const J=fM(Z);D[J]||(iee($,Z),D[J]=!0)}return Ue.isArray(x)?x.forEach(H):H(x),this}}Ll.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ue.reduceDescriptors(Ll.prototype,({value:b},x)=>{let k=x[0].toUpperCase()+x.slice(1);return{get:()=>b,set(D){this[k]=D}}});Ue.freezeMethods(Ll);function oq(b,x){const k=this||xM,D=x||k,$=Ll.from(D.headers);let H=D.data;return Ue.forEach(b,function(J){H=J.call(k,H,$.normalize(),x?x.status:void 0)}),$.normalize(),H}function EX(b){return!!(b&&b.__CANCEL__)}function YT(b,x,k){Xn.call(this,b??"canceled",Xn.ERR_CANCELED,x,k),this.name="CanceledError"}Ue.inherits(YT,Xn,{__CANCEL__:!0});function _X(b,x,k){const D=k.config.validateStatus;!k.status||!D||D(k.status)?b(k):x(new Xn("Request failed with status code "+k.status,[Xn.ERR_BAD_REQUEST,Xn.ERR_BAD_RESPONSE][Math.floor(k.status/100)-4],k.config,k.request,k))}function lee(b){const x=/^([-+\w]{1,25})(:?\/\/|:)/.exec(b);return x&&x[1]||""}function uee(b,x){b=b||10;const k=new Array(b),D=new Array(b);let $=0,H=0,Z;return x=x!==void 0?x:1e3,function(ge){const Re=Date.now(),Be=D[H];Z||(Z=Re),k[$]=ge,D[$]=Re;let pt=H,Xt=0;for(;pt!==$;)Xt+=k[pt++],pt=pt%b;if($=($+1)%b,$===H&&(H=(H+1)%b),Re-Z<x)return;const bn=Be&&Re-Be;return bn?Math.round(Xt*1e3/bn):void 0}}function dee(b,x){let k=0,D=1e3/x,$,H;const Z=(Re,Be=Date.now())=>{k=Be,$=null,H&&(clearTimeout(H),H=null),b.apply(null,Re)};return[(...Re)=>{const Be=Date.now(),pt=Be-k;pt>=D?Z(Re,Be):($=Re,H||(H=setTimeout(()=>{H=null,Z($)},D-pt)))},()=>$&&Z($)]}const DL=(b,x,k=3)=>{let D=0;const $=uee(50,250);return dee(H=>{const Z=H.loaded,J=H.lengthComputable?H.total:void 0,ge=Z-D,Re=$(ge),Be=Z<=J;D=Z;const pt={loaded:Z,total:J,progress:J?Z/J:void 0,bytes:ge,rate:Re||void 0,estimated:Re&&J&&Be?(J-Z)/Re:void 0,event:H,lengthComputable:J!=null,[x?"download":"upload"]:!0};b(pt)},k)},VY=(b,x)=>{const k=b!=null;return[D=>x[0]({lengthComputable:k,total:b,loaded:D}),x[1]]},zY=b=>(...x)=>Ue.asap(()=>b(...x)),fee=Fl.hasStandardBrowserEnv?function(){const x=Fl.navigator&&/(msie|trident)/i.test(Fl.navigator.userAgent),k=document.createElement("a");let D;function $(H){let Z=H;return x&&(k.setAttribute("href",Z),Z=k.href),k.setAttribute("href",Z),{href:k.href,protocol:k.protocol?k.protocol.replace(/:$/,""):"",host:k.host,search:k.search?k.search.replace(/^\?/,""):"",hash:k.hash?k.hash.replace(/^#/,""):"",hostname:k.hostname,port:k.port,pathname:k.pathname.charAt(0)==="/"?k.pathname:"/"+k.pathname}}return D=$(window.location.href),function(Z){const J=Ue.isString(Z)?$(Z):Z;return J.protocol===D.protocol&&J.host===D.host}}():function(){return function(){return!0}}(),mee=Fl.hasStandardBrowserEnv?{write(b,x,k,D,$,H){const Z=[b+"="+encodeURIComponent(x)];Ue.isNumber(k)&&Z.push("expires="+new Date(k).toGMTString()),Ue.isString(D)&&Z.push("path="+D),Ue.isString($)&&Z.push("domain="+$),H===!0&&Z.push("secure"),document.cookie=Z.join("; ")},read(b){const x=document.cookie.match(new RegExp("(^|;\\s*)("+b+")=([^;]*)"));return x?decodeURIComponent(x[3]):null},remove(b){this.write(b,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function gee(b){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(b)}function hee(b,x){return x?b.replace(/\/?\/$/,"")+"/"+x.replace(/^\/+/,""):b}function TX(b,x){return b&&!gee(x)?hee(b,x):x}const UY=b=>b instanceof Ll?{...b}:b;function uw(b,x){x=x||{};const k={};function D(Re,Be,pt){return Ue.isPlainObject(Re)&&Ue.isPlainObject(Be)?Ue.merge.call({caseless:pt},Re,Be):Ue.isPlainObject(Be)?Ue.merge({},Be):Ue.isArray(Be)?Be.slice():Be}function $(Re,Be,pt){if(Ue.isUndefined(Be)){if(!Ue.isUndefined(Re))return D(void 0,Re,pt)}else return D(Re,Be,pt)}function H(Re,Be){if(!Ue.isUndefined(Be))return D(void 0,Be)}function Z(Re,Be){if(Ue.isUndefined(Be)){if(!Ue.isUndefined(Re))return D(void 0,Re)}else return D(void 0,Be)}function J(Re,Be,pt){if(pt in x)return D(Re,Be);if(pt in b)return D(void 0,Re)}const ge={url:H,method:H,data:H,baseURL:Z,transformRequest:Z,transformResponse:Z,paramsSerializer:Z,timeout:Z,timeoutMessage:Z,withCredentials:Z,withXSRFToken:Z,adapter:Z,responseType:Z,xsrfCookieName:Z,xsrfHeaderName:Z,onUploadProgress:Z,onDownloadProgress:Z,decompress:Z,maxContentLength:Z,maxBodyLength:Z,beforeRedirect:Z,transport:Z,httpAgent:Z,httpsAgent:Z,cancelToken:Z,socketPath:Z,responseEncoding:Z,validateStatus:J,headers:(Re,Be)=>$(UY(Re),UY(Be),!0)};return Ue.forEach(Object.keys(Object.assign({},b,x)),function(Be){const pt=ge[Be]||$,Xt=pt(b[Be],x[Be],Be);Ue.isUndefined(Xt)&&pt!==J||(k[Be]=Xt)}),k}const kX=b=>{const x=uw({},b);let{data:k,withXSRFToken:D,xsrfHeaderName:$,xsrfCookieName:H,headers:Z,auth:J}=x;x.headers=Z=Ll.from(Z),x.url=wX(TX(x.baseURL,x.url),b.params,b.paramsSerializer),J&&Z.set("Authorization","Basic "+btoa((J.username||"")+":"+(J.password?unescape(encodeURIComponent(J.password)):"")));let ge;if(Ue.isFormData(k)){if(Fl.hasStandardBrowserEnv||Fl.hasStandardBrowserWebWorkerEnv)Z.setContentType(void 0);else if((ge=Z.getContentType())!==!1){const[Re,...Be]=ge?ge.split(";").map(pt=>pt.trim()).filter(Boolean):[];Z.setContentType([Re||"multipart/form-data",...Be].join("; "))}}if(Fl.hasStandardBrowserEnv&&(D&&Ue.isFunction(D)&&(D=D(x)),D||D!==!1&&fee(x.url))){const Re=$&&H&&mee.read(H);Re&&Z.set($,Re)}return x},pee=typeof XMLHttpRequest<"u",bee=pee&&function(b){return new Promise(function(k,D){const $=kX(b);let H=$.data;const Z=Ll.from($.headers).normalize();let{responseType:J,onUploadProgress:ge,onDownloadProgress:Re}=$,Be,pt,Xt,bn,Ht;function Vt(){bn&&bn(),Ht&&Ht(),$.cancelToken&&$.cancelToken.unsubscribe(Be),$.signal&&$.signal.removeEventListener("abort",Be)}let Se=new XMLHttpRequest;Se.open($.method.toUpperCase(),$.url,!0),Se.timeout=$.timeout;function sn(){if(!Se)return;const Q=Ll.from("getAllResponseHeaders"in Se&&Se.getAllResponseHeaders()),$o={data:!J||J==="text"||J==="json"?Se.responseText:Se.response,status:Se.status,statusText:Se.statusText,headers:Q,config:b,request:Se};_X(function(oe){k(oe),Vt()},function(oe){D(oe),Vt()},$o),Se=null}"onloadend"in Se?Se.onloadend=sn:Se.onreadystatechange=function(){!Se||Se.readyState!==4||Se.status===0&&!(Se.responseURL&&Se.responseURL.indexOf("file:")===0)||setTimeout(sn)},Se.onabort=function(){Se&&(D(new Xn("Request aborted",Xn.ECONNABORTED,b,Se)),Se=null)},Se.onerror=function(){D(new Xn("Network Error",Xn.ERR_NETWORK,b,Se)),Se=null},Se.ontimeout=function(){let Kt=$.timeout?"timeout of "+$.timeout+"ms exceeded":"timeout exceeded";const $o=$.transitional||xX;$.timeoutErrorMessage&&(Kt=$.timeoutErrorMessage),D(new Xn(Kt,$o.clarifyTimeoutError?Xn.ETIMEDOUT:Xn.ECONNABORTED,b,Se)),Se=null},H===void 0&&Z.setContentType(null),"setRequestHeader"in Se&&Ue.forEach(Z.toJSON(),function(Kt,$o){Se.setRequestHeader($o,Kt)}),Ue.isUndefined($.withCredentials)||(Se.withCredentials=!!$.withCredentials),J&&J!=="json"&&(Se.responseType=$.responseType),Re&&([Xt,Ht]=DL(Re,!0),Se.addEventListener("progress",Xt)),ge&&Se.upload&&([pt,bn]=DL(ge),Se.upload.addEventListener("progress",pt),Se.upload.addEventListener("loadend",bn)),($.cancelToken||$.signal)&&(Be=Q=>{Se&&(D(!Q||Q.type?new YT(null,b,Se):Q),Se.abort(),Se=null)},$.cancelToken&&$.cancelToken.subscribe(Be),$.signal&&($.signal.aborted?Be():$.signal.addEventListener("abort",Be)));const En=lee($.url);if(En&&Fl.protocols.indexOf(En)===-1){D(new Xn("Unsupported protocol "+En+":",Xn.ERR_BAD_REQUEST,b));return}Se.send(H||null)})},vee=(b,x)=>{const{length:k}=b=b?b.filter(Boolean):[];if(x||k){let D=new AbortController,$;const H=function(Re){if(!$){$=!0,J();const Be=Re instanceof Error?Re:this.reason;D.abort(Be instanceof Xn?Be:new YT(Be instanceof Error?Be.message:Be))}};let Z=x&&setTimeout(()=>{Z=null,H(new Xn(`timeout ${x} of ms exceeded`,Xn.ETIMEDOUT))},x);const J=()=>{b&&(Z&&clearTimeout(Z),Z=null,b.forEach(Re=>{Re.unsubscribe?Re.unsubscribe(H):Re.removeEventListener("abort",H)}),b=null)};b.forEach(Re=>Re.addEventListener("abort",H));const{signal:ge}=D;return ge.unsubscribe=()=>Ue.asap(J),ge}},yee=function*(b,x){let k=b.byteLength;if(k<x){yield b;return}let D=0,$;for(;D<k;)$=D+x,yield b.slice(D,$),D=$},Cee=async function*(b,x){for await(const k of wee(b))yield*yee(k,x)},wee=async function*(b){if(b[Symbol.asyncIterator]){yield*b;return}const x=b.getReader();try{for(;;){const{done:k,value:D}=await x.read();if(k)break;yield D}}finally{await x.cancel()}},WY=(b,x,k,D)=>{const $=Cee(b,x);let H=0,Z,J=ge=>{Z||(Z=!0,D&&D(ge))};return new ReadableStream({async pull(ge){try{const{done:Re,value:Be}=await $.next();if(Re){J(),ge.close();return}let pt=Be.byteLength;if(k){let Xt=H+=pt;k(Xt)}ge.enqueue(new Uint8Array(Be))}catch(Re){throw J(Re),Re}},cancel(ge){return J(ge),$.return()}},{highWaterMark:2})},VL=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",OX=VL&&typeof ReadableStream=="function",xee=VL&&(typeof TextEncoder=="function"?(b=>x=>b.encode(x))(new TextEncoder):async b=>new Uint8Array(await new Response(b).arrayBuffer())),AX=(b,...x)=>{try{return!!b(...x)}catch{return!1}},See=OX&&AX(()=>{let b=!1;const x=new Request(Fl.origin,{body:new ReadableStream,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!x}),ZY=64*1024,mq=OX&&AX(()=>Ue.isReadableStream(new Response("").body)),ML={stream:mq&&(b=>b.body)};VL&&(b=>{["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!ML[x]&&(ML[x]=Ue.isFunction(b[x])?k=>k[x]():(k,D)=>{throw new Xn(`Response type '${x}' is not supported`,Xn.ERR_NOT_SUPPORT,D)})})})(new Response);const Eee=async b=>{if(b==null)return 0;if(Ue.isBlob(b))return b.size;if(Ue.isSpecCompliantForm(b))return(await new Request(Fl.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if(Ue.isArrayBufferView(b)||Ue.isArrayBuffer(b))return b.byteLength;if(Ue.isURLSearchParams(b)&&(b=b+""),Ue.isString(b))return(await xee(b)).byteLength},_ee=async(b,x)=>{const k=Ue.toFiniteNumber(b.getContentLength());return k??Eee(x)},Tee=VL&&(async b=>{let{url:x,method:k,data:D,signal:$,cancelToken:H,timeout:Z,onDownloadProgress:J,onUploadProgress:ge,responseType:Re,headers:Be,withCredentials:pt="same-origin",fetchOptions:Xt}=kX(b);Re=Re?(Re+"").toLowerCase():"text";let bn=vee([$,H&&H.toAbortSignal()],Z),Ht;const Vt=bn&&bn.unsubscribe&&(()=>{bn.unsubscribe()});let Se;try{if(ge&&See&&k!=="get"&&k!=="head"&&(Se=await _ee(Be,D))!==0){let $o=new Request(x,{method:"POST",body:D,duplex:"half"}),ln;if(Ue.isFormData(D)&&(ln=$o.headers.get("content-type"))&&Be.setContentType(ln),$o.body){const[oe,rn]=VY(Se,DL(zY(ge)));D=WY($o.body,ZY,oe,rn)}}Ue.isString(pt)||(pt=pt?"include":"omit");const sn="credentials"in Request.prototype;Ht=new Request(x,{...Xt,signal:bn,method:k.toUpperCase(),headers:Be.normalize().toJSON(),body:D,duplex:"half",credentials:sn?pt:void 0});let En=await fetch(Ht);const Q=mq&&(Re==="stream"||Re==="response");if(mq&&(J||Q&&Vt)){const $o={};["status","statusText","headers"].forEach(Go=>{$o[Go]=En[Go]});const ln=Ue.toFiniteNumber(En.headers.get("content-length")),[oe,rn]=J&&VY(ln,DL(zY(J),!0))||[];En=new Response(WY(En.body,ZY,oe,()=>{rn&&rn(),Vt&&Vt()}),$o)}Re=Re||"text";let Kt=await ML[Ue.findKey(ML,Re)||"text"](En,b);return!Q&&Vt&&Vt(),await new Promise(($o,ln)=>{_X($o,ln,{data:Kt,headers:Ll.from(En.headers),status:En.status,statusText:En.statusText,config:b,request:Ht})})}catch(sn){throw Vt&&Vt(),sn&&sn.name==="TypeError"&&/fetch/i.test(sn.message)?Object.assign(new Xn("Network Error",Xn.ERR_NETWORK,b,Ht),{cause:sn.cause||sn}):Xn.from(sn,sn&&sn.code,b,Ht)}}),gq={http:VQ,xhr:bee,fetch:Tee};Ue.forEach(gq,(b,x)=>{if(b){try{Object.defineProperty(b,"name",{value:x})}catch{}Object.defineProperty(b,"adapterName",{value:x})}});const jY=b=>`- ${b}`,kee=b=>Ue.isFunction(b)||b===null||b===!1,RX={getAdapter:b=>{b=Ue.isArray(b)?b:[b];const{length:x}=b;let k,D;const $={};for(let H=0;H<x;H++){k=b[H];let Z;if(D=k,!kee(k)&&(D=gq[(Z=String(k)).toLowerCase()],D===void 0))throw new Xn(`Unknown adapter '${Z}'`);if(D)break;$[Z||"#"+H]=D}if(!D){const H=Object.entries($).map(([J,ge])=>`adapter ${J} `+(ge===!1?"is not supported by the environment":"is not available in the build"));let Z=x?H.length>1?`since :
`+H.map(jY).join(`
`):" "+jY(H[0]):"as no adapter specified";throw new Xn("There is no suitable adapter to dispatch the request "+Z,"ERR_NOT_SUPPORT")}return D},adapters:gq};function sq(b){if(b.cancelToken&&b.cancelToken.throwIfRequested(),b.signal&&b.signal.aborted)throw new YT(null,b)}function GY(b){return sq(b),b.headers=Ll.from(b.headers),b.data=oq.call(b,b.transformRequest),["post","put","patch"].indexOf(b.method)!==-1&&b.headers.setContentType("application/x-www-form-urlencoded",!1),RX.getAdapter(b.adapter||xM.adapter)(b).then(function(D){return sq(b),D.data=oq.call(b,b.transformResponse,D),D.headers=Ll.from(D.headers),D},function(D){return EX(D)||(sq(b),D&&D.response&&(D.response.data=oq.call(b,b.transformResponse,D.response),D.response.headers=Ll.from(D.response.headers))),Promise.reject(D)})}const DX="1.7.7",Iq={};["object","boolean","number","function","string","symbol"].forEach((b,x)=>{Iq[b]=function(D){return typeof D===b||"a"+(x<1?"n ":" ")+b}});const qY={};Iq.transitional=function(x,k,D){function $(H,Z){return"[Axios v"+DX+"] Transitional option '"+H+"'"+Z+(D?". "+D:"")}return(H,Z,J)=>{if(x===!1)throw new Xn($(Z," has been removed"+(k?" in "+k:"")),Xn.ERR_DEPRECATED);return k&&!qY[Z]&&(qY[Z]=!0,console.warn($(Z," has been deprecated since v"+k+" and will be removed in the near future"))),x?x(H,Z,J):!0}};function Oee(b,x,k){if(typeof b!="object")throw new Xn("options must be an object",Xn.ERR_BAD_OPTION_VALUE);const D=Object.keys(b);let $=D.length;for(;$-- >0;){const H=D[$],Z=x[H];if(Z){const J=b[H],ge=J===void 0||Z(J,H,b);if(ge!==!0)throw new Xn("option "+H+" must be "+ge,Xn.ERR_BAD_OPTION_VALUE);continue}if(k!==!0)throw new Xn("Unknown option "+H,Xn.ERR_BAD_OPTION)}}const hq={assertOptions:Oee,validators:Iq},iv=hq.validators;class rw{constructor(x){this.defaults=x,this.interceptors={request:new LY,response:new LY}}async request(x,k){try{return await this._request(x,k)}catch(D){if(D instanceof Error){let $;Error.captureStackTrace?Error.captureStackTrace($={}):$=new Error;const H=$.stack?$.stack.replace(/^.+\n/,""):"";try{D.stack?H&&!String(D.stack).endsWith(H.replace(/^.+\n.+\n/,""))&&(D.stack+=`
`+H):D.stack=H}catch{}}throw D}}_request(x,k){typeof x=="string"?(k=k||{},k.url=x):k=x||{},k=uw(this.defaults,k);const{transitional:D,paramsSerializer:$,headers:H}=k;D!==void 0&&hq.assertOptions(D,{silentJSONParsing:iv.transitional(iv.boolean),forcedJSONParsing:iv.transitional(iv.boolean),clarifyTimeoutError:iv.transitional(iv.boolean)},!1),$!=null&&(Ue.isFunction($)?k.paramsSerializer={serialize:$}:hq.assertOptions($,{encode:iv.function,serialize:iv.function},!0)),k.method=(k.method||this.defaults.method||"get").toLowerCase();let Z=H&&Ue.merge(H.common,H[k.method]);H&&Ue.forEach(["delete","get","head","post","put","patch","common"],Ht=>{delete H[Ht]}),k.headers=Ll.concat(Z,H);const J=[];let ge=!0;this.interceptors.request.forEach(function(Vt){typeof Vt.runWhen=="function"&&Vt.runWhen(k)===!1||(ge=ge&&Vt.synchronous,J.unshift(Vt.fulfilled,Vt.rejected))});const Re=[];this.interceptors.response.forEach(function(Vt){Re.push(Vt.fulfilled,Vt.rejected)});let Be,pt=0,Xt;if(!ge){const Ht=[GY.bind(this),void 0];for(Ht.unshift.apply(Ht,J),Ht.push.apply(Ht,Re),Xt=Ht.length,Be=Promise.resolve(k);pt<Xt;)Be=Be.then(Ht[pt++],Ht[pt++]);return Be}Xt=J.length;let bn=k;for(pt=0;pt<Xt;){const Ht=J[pt++],Vt=J[pt++];try{bn=Ht(bn)}catch(Se){Vt.call(this,Se);break}}try{Be=GY.call(this,bn)}catch(Ht){return Promise.reject(Ht)}for(pt=0,Xt=Re.length;pt<Xt;)Be=Be.then(Re[pt++],Re[pt++]);return Be}getUri(x){x=uw(this.defaults,x);const k=TX(x.baseURL,x.url);return wX(k,x.params,x.paramsSerializer)}}Ue.forEach(["delete","get","head","options"],function(x){rw.prototype[x]=function(k,D){return this.request(uw(D||{},{method:x,url:k,data:(D||{}).data}))}});Ue.forEach(["post","put","patch"],function(x){function k(D){return function(H,Z,J){return this.request(uw(J||{},{method:x,headers:D?{"Content-Type":"multipart/form-data"}:{},url:H,data:Z}))}}rw.prototype[x]=k(),rw.prototype[x+"Form"]=k(!0)});class Fq{constructor(x){if(typeof x!="function")throw new TypeError("executor must be a function.");let k;this.promise=new Promise(function(H){k=H});const D=this;this.promise.then($=>{if(!D._listeners)return;let H=D._listeners.length;for(;H-- >0;)D._listeners[H]($);D._listeners=null}),this.promise.then=$=>{let H;const Z=new Promise(J=>{D.subscribe(J),H=J}).then($);return Z.cancel=function(){D.unsubscribe(H)},Z},x(function(H,Z,J){D.reason||(D.reason=new YT(H,Z,J),k(D.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(x){if(this.reason){x(this.reason);return}this._listeners?this._listeners.push(x):this._listeners=[x]}unsubscribe(x){if(!this._listeners)return;const k=this._listeners.indexOf(x);k!==-1&&this._listeners.splice(k,1)}toAbortSignal(){const x=new AbortController,k=D=>{x.abort(D)};return this.subscribe(k),x.signal.unsubscribe=()=>this.unsubscribe(k),x.signal}static source(){let x;return{token:new Fq(function($){x=$}),cancel:x}}}function Aee(b){return function(k){return b.apply(null,k)}}function Ree(b){return Ue.isObject(b)&&b.isAxiosError===!0}const pq={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(pq).forEach(([b,x])=>{pq[x]=b});function MX(b){const x=new rw(b),k=lX(rw.prototype.request,x);return Ue.extend(k,rw.prototype,x,{allOwnKeys:!0}),Ue.extend(k,x,null,{allOwnKeys:!0}),k.create=function($){return MX(uw(b,$))},k}const ua=MX(xM);ua.Axios=rw;ua.CanceledError=YT;ua.CancelToken=Fq;ua.isCancel=EX;ua.VERSION=DX;ua.toFormData=HL;ua.AxiosError=Xn;ua.Cancel=ua.CanceledError;ua.all=function(x){return Promise.all(x)};ua.spread=Aee;ua.isAxiosError=Ree;ua.mergeConfig=uw;ua.AxiosHeaders=Ll;ua.formToJSON=b=>SX(Ue.isHTMLForm(b)?new FormData(b):b);ua.getAdapter=RX.getAdapter;ua.HttpStatusCode=pq;ua.default=ua;window.axios=ua;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var Dee={exports:{}};(function(b){(function(){var x=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},k=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},D=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},$=function(e,n){return H(function(o,r){return e.eq(n(o),n(r))})},H=function(e){return{eq:e}},Z=H(function(e,n){return e===n}),J=Z,ge=function(e){return H(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,c=0;c<r;c++)if(!e.eq(n[c],o[c]))return!1;return!0})},Re=function(e,n){return $(ge(e),function(o){return D(o,n)})},Be=function(e){return H(function(n,o){var r=Object.keys(n),c=Object.keys(o);if(!Re(J).eq(r,c))return!1;for(var u=r.length,m=0;m<u;m++){var v=r[m];if(!e.eq(n[v],o[v]))return!1}return!0})},pt=H(function(e,n){if(e===n)return!0;var o=x(e),r=x(n);return o!==r?!1:k(o)?e===n:o==="array"?ge(pt).eq(e,n):o==="object"?Be(pt).eq(e,n):!1});const Xt=Object.getPrototypeOf,bn=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},Ht=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&bn(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},Vt=e=>n=>Ht(n)===e,Se=e=>n=>typeof n===e,sn=e=>n=>e===n,En=(e,n)=>Kt(e)&&bn(e,n,(o,r)=>Xt(o)===r),Q=Vt("string"),Kt=Vt("object"),$o=e=>En(e,Object),ln=Vt("array"),oe=sn(null),rn=Se("boolean"),Go=sn(void 0),An=e=>e==null,De=e=>!An(e),se=Se("function"),fa=Se("number"),jn=(e,n)=>{if(ln(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},Dt=()=>{},R=(e,n)=>(...o)=>e(n.apply(null,o)),is=(e,n)=>o=>e(n(o)),Je=e=>()=>e,qo=e=>e,Gt=(e,n)=>e===n;function Le(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const Io=e=>n=>!e(n),ma=e=>()=>{throw new Error(e)},ls=e=>e(),ta=e=>{e()},Ne=Je(!1),dt=Je(!0);class L{constructor(n,o){this.tag=n,this.value=o}static some(n){return new L(!0,n)}static none(){return L.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?L.some(n(this.value)):L.none()}bind(n){return this.tag?n(this.value):L.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:L.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return De(n)?L.some(n):L.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}L.singletonNone=new L(!1);const um=Array.prototype.slice,yo=Array.prototype.indexOf,_s=Array.prototype.push,So=(e,n)=>yo.call(e,n),tk=(e,n)=>{const o=So(e,n);return o===-1?L.none():L.some(o)},Zt=(e,n)=>So(e,n)>-1,ho=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return!0}return!1},Yt=(e,n)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=n(u,c)}return r},_e=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];n(c,o)}},Tu=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},Or=(e,n)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const m=e[c];(n(m,c)?o:r).push(m)}return{pass:o,fail:r}},Pt=(e,n)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];n(u,r)&&o.push(u)}return o},Pd=(e,n,o)=>(Tu(e,(r,c)=>{o=n(o,r,c)}),o),Ko=(e,n,o)=>(_e(e,(r,c)=>{o=n(o,r,c)}),o),Yg=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(n(u,r))return L.some(u);if(o(u,r))break}return L.none()},us=(e,n)=>Yg(e,n,Ne),ga=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return L.some(o)}return L.none()},d1=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!ln(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);_s.apply(n,e[o])}return n},ic=(e,n)=>d1(Yt(e,n)),ir=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(n(c,o)!==!0)return!1}return!0},Fo=e=>{const n=um.call(e,0);return n.reverse(),n},f1=(e,n)=>Pt(e,o=>!Zt(n,o)),Bs=(e,n)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Lo=(e,n)=>{const o=um.call(e,0);return o.sort(n),o},dm=(e,n)=>n>=0&&n<e.length?L.some(e[n]):L.none(),Ar=e=>dm(e,0),Hl=e=>dm(e,e.length-1),ha=se(Array.from)?Array.from:e=>um.call(e),Nd=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return L.none()},Xg=(e,n)=>{const o=[],r=se(n)?c=>ho(o,u=>n(u,c)):c=>Zt(o,c);for(let c=0,u=e.length;c<u;c++){const m=e[c];r(m)||o.push(m)}return o},zr=Object.keys,mv=Object.hasOwnProperty,it=(e,n)=>{const o=zr(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],m=e[u];n(m,u)}},Vn=(e,n)=>lc(e,(o,r)=>({k:r,v:n(o,r)})),lc=(e,n)=>{const o={};return it(e,(r,c)=>{const u=n(r,c);o[u.k]=u.v}),o},Na=e=>(n,o)=>{e[o]=n},m1=(e,n,o,r)=>{it(e,(c,u)=>{(n(c,u)?o:r)(c,u)})},Bd=(e,n)=>{const o={},r={};return m1(e,n,Na(o),Na(r)),{t:o,f:r}},To=(e,n)=>{const o={};return m1(e,n,Na(o),Dt),o},ku=(e,n)=>{const o=[];return it(e,(r,c)=>{o.push(n(r,c))}),o},fm=e=>ku(e,qo),Co=(e,n)=>It(e,n)?L.from(e[n]):L.none(),It=(e,n)=>mv.call(e,n),pa=(e,n)=>It(e,n)&&e[n]!==void 0&&e[n]!==null,$d=(e,n,o=pt)=>Be(o).eq(e,n),g1=e=>{const n={};return _e(e,o=>{n[o]={}}),zr(n)},gv=e=>e.length!==void 0,na=Array.isArray,Rr=e=>{if(na(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},gs=(e,n,o)=>{if(!e)return!1;if(o=o||e,gv(e)){for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(It(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},ol=(e,n)=>{const o=[];return gs(e,(r,c)=>{o.push(n(r,c,e))}),o},h1=(e,n)=>{const o=[];return gs(e,(r,c)=>{(!n||n(r,c,e))&&o.push(r)}),o},Vl=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},Ba=(e,n,o,r)=>{let c=Go(o)?e[0]:o;for(let u=0;u<e.length;u++)c=n.call(r,c,e[u],u);return c},Mo=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e))return r;return-1},Bc=e=>e[e.length-1],sl=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},nk=(e,n,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,m=e.isiOS()||e.isAndroid(),v=m||r("(pointer:coarse)"),w=c||!u&&m&&r("(min-device-width:768px)"),E=u||m&&!w,M=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,N=!E&&!w&&!M;return{isiPad:Je(c),isiPhone:Je(u),isTablet:Je(w),isPhone:Je(E),isTouch:Je(v),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Je(M),isDesktop:Je(N)}},ok=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},zl=(e,n)=>{const o=ok(e,n);if(!o)return{major:0,minor:0};const r=c=>Number(n.replace(o,"$"+c));return ba(r(1),r(2))},KL=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?ue():zl(e,o)},ue=()=>ba(0,0),ba=(e,n)=>({major:e,minor:n}),mm={nu:ba,detect:KL,unknown:ue},mw=(e,n)=>Nd(n.brands,o=>{const r=o.brand.toLowerCase();return us(e,c=>{var u;return r===((u=c.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(c=>({current:c.name,version:mm.nu(parseInt(o.version,10),0)}))}),hv=(e,n)=>{const o=String(n).toLowerCase();return us(e,r=>r.search(o))},Eo=(e,n)=>hv(e,n).map(o=>{const r=mm.detect(o.versionRegexes,n);return{current:o.name,version:r}}),pv=(e,n)=>hv(e,n).map(o=>{const r=mm.detect(o.versionRegexes,n);return{current:o.name,version:r}}),sk=(e,n)=>e.substring(n),Jg=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,gm=(e,n)=>hs(e,n)?sk(e,n.length):e,br=(e,n,o=0,r)=>{const c=e.indexOf(n,o);return c!==-1?Go(r)?!0:c+n.length<=r:!1},hs=(e,n)=>Jg(e,n,0),Ul=(e,n)=>Jg(e,n,e.length-n.length),$c=e=>n=>n.replace(e,""),Id=$c(/^\s+|\s+$/g),Qg=$c(/^\s+/g),hm=$c(/\s+$/g),oo=e=>e.length>0,$a=e=>!oo(e),rk=(e,n)=>n<=0?"":new Array(n+1).join(e),Fd=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?L.none():L.some(o)},Ou=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,oa=e=>n=>br(n,e),Yo=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>br(e,"edge/")&&br(e,"chrome")&&br(e,"safari")&&br(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ou],search:e=>br(e,"chrome")&&!br(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>br(e,"msie")||br(e,"trident")},{name:"Opera",versionRegexes:[Ou,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:oa("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:oa("firefox")},{name:"Safari",versionRegexes:[Ou,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(br(e,"safari")||br(e,"mobile/"))&&br(e,"applewebkit")}],ak=[{name:"Windows",search:oa("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>br(e,"iphone")||br(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:oa("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:oa("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:oa("linux"),versionRegexes:[]},{name:"Solaris",search:oa("sunos"),versionRegexes:[]},{name:"FreeBSD",search:oa("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:oa("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],bv={browsers:Je(Yo),oses:Je(ak)},qn="Edge",Ia="Chromium",Fa="IE",vr="Opera",p1="Firefox",Ld="Safari",Ic=()=>Hd({current:void 0,version:mm.unknown()}),Hd=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isEdge:r(qn),isChromium:r(Ia),isIE:r(Fa),isOpera:r(vr),isFirefox:r(p1),isSafari:r(Ld)}},pi={unknown:Ic,nu:Hd,edge:Je(qn),chromium:Je(Ia),ie:Je(Fa),opera:Je(vr),firefox:Je(p1),safari:Je(Ld)},gw="Windows",vv="iOS",hw="Android",Fc="Linux",Au="macOS",b1="Solaris",v1="FreeBSD",yv="ChromeOS",Cv=()=>lr({current:void 0,version:mm.unknown()}),lr=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isWindows:r(gw),isiOS:r(vv),isAndroid:r(hw),isMacOS:r(Au),isLinux:r(Fc),isSolaris:r(b1),isFreeBSD:r(v1),isChromeOS:r(yv)}},Vd={unknown:Cv,nu:lr,windows:Je(gw),ios:Je(vv),android:Je(hw),linux:Je(Fc),macos:Je(Au),solaris:Je(b1),freebsd:Je(v1),chromeos:Je(yv)},Wl={detect:(e,n,o)=>{const r=bv.browsers(),c=bv.oses(),u=n.bind(w=>mw(r,w)).orThunk(()=>Eo(r,e)).fold(pi.unknown,pi.nu),m=pv(c,e).fold(Vd.unknown,Vd.nu),v=nk(m,u,e,o);return{browser:u,os:m,deviceType:v}}},pw=e=>window.matchMedia(e).matches;let ck=sl(()=>Wl.detect(window.navigator.userAgent,L.from(window.navigator.userAgentData),pw));const rl=()=>ck(),uc=window.navigator.userAgent,bi=rl(),al=bi.browser,vi=bi.os,Nt=bi.deviceType,bw=uc.indexOf("Windows Phone")!==-1,Jt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:al.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!al.isIE(),windowsPhone:bw,browser:{current:al.current,version:al.version,isChromium:al.isChromium,isEdge:al.isEdge,isFirefox:al.isFirefox,isIE:al.isIE,isOpera:al.isOpera,isSafari:al.isSafari},os:{current:vi.current,version:vi.version,isAndroid:vi.isAndroid,isChromeOS:vi.isChromeOS,isFreeBSD:vi.isFreeBSD,isiOS:vi.isiOS,isLinux:vi.isLinux,isMacOS:vi.isMacOS,isSolaris:vi.isSolaris,isWindows:vi.isWindows},deviceType:{isDesktop:Nt.isDesktop,isiPad:Nt.isiPad,isiPhone:Nt.isiPhone,isPhone:Nt.isPhone,isTablet:Nt.isTablet,isTouch:Nt.isTouch,isWebView:Nt.isWebView}},Ho=/^\s*|\s*$/g,wv=e=>An(e)?"":(""+e).replace(Ho,""),Po=(e,n)=>n?n==="array"&&na(e)?!0:typeof e===n:e!==void 0,ik=(e,n,o={})=>{const r=Q(e)?e.split(n||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},xv=It,Sv=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const c in r)if(It(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},Wt=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),gs(e,(c,u)=>n.call(r,c,u,o)===!1?!1:(Wt(c,n,o,r),!0)))},We={trim:wv,isArray:na,is:Po,toArray:Rr,makeMap:ik,each:gs,map:ol,grep:h1,inArray:Vl,hasOwn:xv,extend:Sv,walk:Wt,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>ln(e)?e:e===""?[]:ol(e.split(n||","),wv),_addCacheSuffix:e=>{const n=Jt.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},Xo=(e,n,o=Gt)=>e.exists(r=>o(r,n)),Ev=(e,n,o=Gt)=>Qt(e,n,o).getOr(e.isNone()&&n.isNone()),vw=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},Qt=(e,n,o)=>e.isSome()&&n.isSome()?L.some(o(e.getOrDie(),n.getOrDie())):L.none(),zd=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?L.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):L.none(),yi=(e,n)=>e?L.some(n):L.none(),Ys=typeof window<"u"?window:Function("return this;")(),ps=(e,n)=>{let o=n??Ys;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},cl=(e,n)=>{const o=e.split(".");return ps(o,n)},lk=(e,n)=>cl(e,n),y1=(e,n)=>{const o=lk(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},No=Object.getPrototypeOf,yw=e=>y1("HTMLElement",e),C1=e=>{const n=cl("ownerDocument.defaultView",e);return Kt(e)&&(yw(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(No(e).constructor.name))},Vo=8,Ru=9,Du=11,w1=1,sa=3,Tn=e=>e.dom.nodeName.toLowerCase(),Cw=e=>e.dom.nodeType,ra=e=>n=>Cw(n)===e,ww=e=>Cw(e)===Vo||Tn(e)==="#comment",x1=e=>wo(e)&&C1(e.dom),wo=ra(w1),Xs=ra(sa),Mu=ra(Ru),S1=ra(Du),il=e=>n=>wo(n)&&Tn(n)===e,Ci=(e,n,o)=>{if(Q(o)||rn(o)||fa(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},ur=(e,n,o)=>{Ci(e.dom,n,o)},Ur=(e,n)=>{const o=e.dom;it(n,(r,c)=>{Ci(o,c,r)})},aa=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},dc=(e,n)=>L.from(aa(e,n)),fc=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},$s=(e,n)=>{e.dom.removeAttribute(n)},eh=e=>{const n=e.dom.attributes;return n==null||n.length===0},E1=e=>Ko(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),Ud=(e,n)=>{const o=aa(e,n);return o===void 0||o===""?[]:o.split(" ")},_1=(e,n,o)=>{const c=Ud(e,n).concat([o]);return ur(e,n,c.join(" ")),!0},xw=(e,n,o)=>{const r=Pt(Ud(e,n),c=>c!==o);return r.length>0?ur(e,n,r.join(" ")):$s(e,n),!1},Wd=e=>e.dom.classList!==void 0,Pu=e=>Ud(e,"class"),th=(e,n)=>_1(e,"class",n),va=(e,n)=>xw(e,"class",n),_v=(e,n)=>Zt(Pu(e),n)?va(e,n):th(e,n),Nu=(e,n)=>{Wd(e)?e.dom.classList.add(n):th(e,n)},T1=e=>{(Wd(e)?e.dom.classList:Pu(e)).length===0&&$s(e,"class")},pm=(e,n)=>{Wd(e)?e.dom.classList.remove(n):va(e,n),T1(e)},Tv=(e,n)=>{const o=Wd(e)?e.dom.classList.toggle(n):_v(e,n);return T1(e),o},k1=(e,n)=>Wd(e)&&e.dom.classList.contains(n),bm=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return vm(r.childNodes[0])},Sw=(e,n)=>{const r=(n||document).createElement(e);return vm(r)},Ew=(e,n)=>{const r=(n||document).createTextNode(e);return vm(r)},vm=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},ee={fromHtml:bm,fromTag:Sw,fromText:Ew,fromDom:vm,fromPoint:(e,n,o)=>L.from(e.dom.elementFromPoint(n,o)).map(vm)},nh=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let c=n(e);do c=c.bind(r);while(c.isSome());return o},Ha=(e,n)=>{const o=e.dom;if(o.nodeType!==w1)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},_w=e=>e.nodeType!==w1&&e.nodeType!==Ru&&e.nodeType!==Du||e.childElementCount===0,Tw=(e,n)=>{const o=n===void 0?document:n.dom;return _w(o)?[]:Yt(o.querySelectorAll(e),ee.fromDom)},uk=(e,n)=>{const o=n===void 0?document:n.dom;return _w(o)?L.none():L.from(o.querySelector(e)).map(ee.fromDom)},kn=(e,n)=>e.dom===n.dom,mc=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},wi=e=>ee.fromDom(e.dom.ownerDocument),Bu=e=>Mu(e)?e:wi(e),kw=e=>ee.fromDom(Bu(e).dom.documentElement),ym=e=>ee.fromDom(Bu(e).dom.defaultView),Hc=e=>L.from(e.dom.parentNode).map(ee.fromDom),oh=e=>L.from(e.dom.parentElement).map(ee.fromDom),Zd=(e,n)=>{const o=se(n)?n:Ne;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,m=ee.fromDom(u);if(c.push(m),o(m)===!0)break;r=u}return c},Ow=e=>{const n=o=>Pt(o,r=>!kn(e,r));return Hc(e).map(Js).map(n).getOr([])},jl=e=>L.from(e.dom.previousSibling).map(ee.fromDom),Wr=e=>L.from(e.dom.nextSibling).map(ee.fromDom),Aw=e=>Fo(nh(e,jl)),O1=e=>nh(e,Wr),Js=e=>Yt(e.dom.childNodes,ee.fromDom),ya=(e,n)=>{const o=e.dom.childNodes;return L.from(o[n]).map(ee.fromDom)},Zr=e=>ya(e,0),Cm=e=>ya(e,e.dom.childNodes.length-1),A1=e=>e.dom.childNodes.length,kv=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return ee.fromDom(n)},wm=e=>S1(e)&&De(e.dom.host),xi=e=>ee.fromDom(e.dom.getRootNode()),sh=e=>wm(e)?e:kv(Bu(e)),dk=e=>wm(e)?e:ee.fromDom(Bu(e).dom.body),fk=e=>{const n=xi(e);return wm(n)?L.some(n):L.none()},mk=e=>ee.fromDom(e.dom.host),gk=e=>{if(De(e.target)){const n=ee.fromDom(e.target);if(wo(n)&&Ov(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return Ar(o)}}return L.from(e.target)},Ov=e=>De(e.dom.shadowRoot),xm=e=>{const n=Xs(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return fk(ee.fromDom(n)).fold(()=>o.body.contains(n),is(xm,mk))};var Rw=(e,n,o,r,c)=>e(o,r)?L.some(o):se(c)&&c(o)?L.none():n(o,r,c);const ko=(e,n,o)=>{let r=e.dom;const c=se(o)?o:Ne;for(;r.parentNode;){r=r.parentNode;const u=ee.fromDom(r);if(n(u))return L.some(u);if(c(u))break}return L.none()},zo=(e,n,o)=>Rw((c,u)=>u(c),ko,e,n,o),jd=(e,n)=>{const o=e.dom;return o.parentNode?$u(ee.fromDom(o.parentNode),r=>!kn(e,r)&&n(r)):L.none()},$u=(e,n)=>{const o=c=>n(ee.fromDom(c));return us(e.dom.childNodes,o).map(ee.fromDom)},Av=(e,n)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=ee.fromDom(r.childNodes[c]);if(n(u))return L.some(u);const m=o(r.childNodes[c]);if(m.isSome())return m}return L.none()};return o(e.dom)},Is=(e,n,o)=>ko(e,r=>Ha(r,n),o),Et=(e,n)=>uk(n,e),Iu=(e,n,o)=>Rw((c,u)=>Ha(c,u),Is,e,n,o),hk=e=>Iu(e,"[contenteditable]"),gc=(e,n=!1)=>xm(e)?e.dom.isContentEditable:hk(e).fold(Je(n),o=>In(o)==="true"),In=e=>e.dom.contentEditable,Gd=e=>e.style!==void 0&&se(e.style.getPropertyValue),rh=(e,n,o)=>{if(!Q(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);Gd(e)&&e.style.setProperty(n,o)},Dw=(e,n)=>{Gd(e)&&e.style.removeProperty(n)},Rv=(e,n,o)=>{const r=e.dom;rh(r,n,o)},on=(e,n)=>{const o=e.dom;it(n,(r,c)=>{rh(o,c,r)})},os=(e,n)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(n);return c===""&&!xm(e)?ah(o,n):c},ah=(e,n)=>Gd(e)?e.style.getPropertyValue(n):"",R1=(e,n)=>{const o=e.dom,r=ah(o,n);return L.from(r).filter(c=>c.length>0)},Va=e=>{const n={},o=e.dom;if(Gd(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);n[c]=o.style[c]}return n},Ca=(e,n)=>{const o=e.dom;Dw(o,n),Xo(dc(e,"style").map(Id),"")&&$s(e,"style")},Vc=e=>e.dom.offsetWidth,uo=(e,n)=>{Hc(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},Si=(e,n)=>{Wr(e).fold(()=>{Hc(e).each(c=>{Fs(c,n)})},r=>{uo(r,n)})},qd=(e,n)=>{Zr(e).fold(()=>{Fs(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},Fs=(e,n)=>{e.dom.appendChild(n.dom)},Kd=(e,n)=>{uo(e,n),Fs(n,e)},Jo=(e,n)=>{_e(n,(o,r)=>{const c=r===0?e:n[r-1];Si(c,o)})},Fu=(e,n)=>{_e(n,o=>{Fs(e,o)})},Sm=e=>{e.dom.textContent="",_e(Js(e),n=>{fo(n)})},fo=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},Lu=e=>{const n=Js(e);n.length>0&&Jo(e,n),fo(e)},Mw=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,Js(ee.fromDom(r))},Dv=e=>Yt(e,ee.fromDom),Uo=e=>e.dom.innerHTML,D1=(e,n)=>{const r=wi(e).dom,c=ee.fromDom(r.createDocumentFragment()),u=Mw(n,r);Fu(c,u),Sm(e),Fs(e,c)},ll=e=>{const n=ee.fromTag("div"),o=ee.fromDom(e.dom.cloneNode(!0));return Fs(n,o),Uo(n)},Mv=(e,n,o,r,c,u,m)=>({target:e,x:n,y:o,stop:r,prevent:c,kill:u,raw:m}),wn=e=>{const n=ee.fromDom(gk(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=R(r,o);return Mv(n,e.clientX,e.clientY,o,r,c,e)},ch=(e,n)=>o=>{e(o)&&n(wn(o))},M1=(e,n,o,r,c)=>{const u=ch(o,r);return e.dom.addEventListener(n,u,c),{unbind:Le(pk,e,n,u,c)}},Pw=(e,n,o,r)=>M1(e,n,o,r,!1),pk=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},P1=(e,n)=>({left:e,top:n,translate:(r,c)=>P1(e+r,n+c)}),ih=P1,bk=e=>{const n=e.getBoundingClientRect();return ih(n.left,n.top)},Gl=(e,n)=>e!==void 0?e:n!==void 0?n:0,N1=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,c=n.documentElement;if(o===e.dom)return ih(o.offsetLeft,o.offsetTop);const u=Gl(r==null?void 0:r.pageYOffset,c.scrollTop),m=Gl(r==null?void 0:r.pageXOffset,c.scrollLeft),v=Gl(c.clientTop,o.clientTop),w=Gl(c.clientLeft,o.clientLeft);return Pv(e).translate(m-w,u-v)},Pv=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?ih(r.offsetLeft,r.offsetTop):xm(e)?bk(n):ih(0,0)},Hu=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return ih(o,r)},ul=(e,n,o)=>{const c=(o!==void 0?o.dom:document).defaultView;c&&c.scrollTo(e,n)},Nw=(e,n)=>{rl().browser.isSafari()&&se(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},B1=e=>{const n=e===void 0?window:e;return rl().browser.isFirefox()?L.none():L.from(n.visualViewport)},Em=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),Bw=e=>{const n=e===void 0?window:e,o=n.document,r=Hu(ee.fromDom(o));return B1(n).fold(()=>{const c=n.document.documentElement,u=c.clientWidth,m=c.clientHeight;return Em(r.left,r.top,u,m)},c=>Em(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))},Yd=(e,n)=>Pt(Js(e),n),$1=(e,n)=>{let o=[];return _e(Js(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat($1(r,n))}),o},jr=(e,n)=>Tw(n,e),I1=(e,n,o)=>ko(e,n,o).isSome(),$w=(e,n)=>jd(e,n).isSome(),Nv=(e,n)=>Av(e,n).isSome();class Ts{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,c){if(n){if(!c&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let m=n.parentNode;m&&m!==this.rootNode;m=m.parentNode)if(u=m[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=n.parentNode;if(c&&c!==this.rootNode)return c}}}const lh="\uFEFF",ks=" ",uh=e=>e===lh,za=e=>e.replace(/\uFEFF/g,""),At=/^[ \t\r\n]*$/,zc=e=>At.test(e),Iw=e=>{for(const n of e)if(!uh(n))return!1;return!0},Bv=e=>" \f	\v".indexOf(e)!==-1,dh=e=>e===`
`||e==="\r",$v=(e,n)=>n<e.length&&n>=0?dh(e[n]):!1,Uc=(e,n=4,o=!0,r=!0)=>{const c=rk(" ",n),u=e.replace(/\t/g,c);return Ko(u,(v,w)=>Bv(w)||w===ks?v.pcIsSpace||v.str===""&&o||v.str.length===u.length-1&&r||$v(u,v.str.length+1)?{pcIsSpace:!1,str:v.str+ks}:{pcIsSpace:!0,str:v.str+" "}:{pcIsSpace:dh(w),str:v.str+w},{pcIsSpace:!1,str:""}).str},dl=e=>n=>!!n&&n.nodeType===e,Xd=e=>!!e&&!Object.getPrototypeOf(e),ot=dl(1),Wc=e=>ot(e)&&x1(ee.fromDom(e)),Iv=e=>ot(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",_m=e=>{const n=e.toLowerCase();return o=>De(o)&&o.nodeName.toLowerCase()===n},Zc=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return Zt(n,r)}return!1}},fh=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(ot(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const m=c.getComputedStyle(r,null);if((m?m.getPropertyValue(e):null)===o[u])return!0}}return!1}},Jd=e=>n=>ot(n)&&n.hasAttribute(e),ql=e=>ot(e)&&e.hasAttribute("data-mce-bogus"),mh=e=>ot(e)&&e.getAttribute("data-mce-bogus")==="all",Ei=e=>ot(e)&&e.tagName==="TABLE",Fw=e=>n=>!!(Wc(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),Oo=Zc(["textarea","input"]),Fe=dl(3),ca=dl(4),Qd=dl(7),Qo=dl(8),Tm=dl(9),Ls=dl(11),Bn=_m("br"),gh=_m("img"),Oe=Fw("true"),$n=Fw("false"),F1=Zc(["td","th"]),Os=Zc(["td","th","caption"]),yr=Zc(["video","audio","object","embed"]),jc=_m("li"),Fv=_m("details"),Vu=_m("summary"),Lv={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},Ua=(e,n,o)=>{const r=ee.fromDom(n),c=ee.fromDom(e),u=o.getWhitespaceElements();return I1(c,v=>It(u,Tn(v)),Le(kn,r))},Pn=e=>ot(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),fl=(e,n)=>ot(e)&&It(n.getNonEmptyElements(),e.nodeName),hh=Jd("data-mce-bookmark"),As=e=>oh(ee.fromDom(e)).exists(n=>!gc(n)),L1=(e,n,o)=>zc(e.data)&&!Ua(e,n,o),ml=(e,n,o,r)=>Fe(e)&&!L1(e,n,o)&&(!r.includeZwsp||!Iw(e.data)),ph=(e,n,o,r)=>se(r.isContent)&&r.isContent(n)||fl(n,e)||hh(n)||Pn(n)||ml(n,o,e,r)||$n(n)||Oe(n)&&As(n),Hs=(e,n,o)=>{const r={...Lv,...o};if(r.checkRootAsContent&&ph(e,n,n,r))return!1;let c=n.firstChild,u=0;if(!c)return!0;const m=new Ts(c,n);do{if(r.skipBogus&&ot(c)){const v=c.getAttribute("data-mce-bogus");if(v){c=m.next(v==="all");continue}}if(Qo(c)){c=m.next(!0);continue}if(Bn(c)){u++,c=m.next();continue}if(ph(e,c,n,r))return!1;c=m.next()}while(c);return u<=1},Mr=(e,n,o)=>Hs(e,n.dom,{checkRootAsContent:!0,...o}),fe=(e,n,o)=>ph(e,n,n,{includeZwsp:Lv.includeZwsp,...o}),mo=e=>{let n=e;return{get:()=>n,set:c=>{n=c}}},Hv=e=>{const n=mo(L.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(L.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:v=>{o(),n.set(L.some(v))}}},ss=e=>{const n=mo(L.none()),o=()=>n.get().each(v=>clearInterval(v));return{clear:()=>{o(),n.set(L.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:v=>{o(),n.set(L.some(setInterval(v,e)))}}},Qs=()=>{const e=Hv(Dt);return{...e,on:o=>e.get().each(o)}},er=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},po=e=>er(e)!=="html",H1=e=>po(e.nodeName),zu=e=>er(e.nodeName),Lw=["svg","math"],bh=()=>{const e=Qs(),n=()=>e.get().map(zu).getOr("html");return{track:c=>(H1(c)?e.set(c):e.get().exists(u=>!u.contains(c))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},wa="data-mce-block",vk=e=>Pt(zr(e),n=>!/[A-Z]/.test(n)),Vv=e=>Yt(vk(e),n=>{const o=CSS.escape(n);return`${o}:`+Yt(Lw,r=>`not(${r} ${o})`).join(":")}).join(","),Hw=(e,n)=>De(n.querySelector(e))?(n.setAttribute(wa,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(wa),!1),Vw=(e,n)=>{const o=Vv(e.getTransparentElements()),r=Vv(e.getBlockElements());return Pt(n.querySelectorAll(o),c=>Hw(r,c))},zw=(e,n,o)=>{var r;const c=o?"lastChild":"firstChild";for(let u=n[c];u;u=u[c])if(Hs(e,u,{checkRootAsContent:!0})){(r=u.parentNode)===null||r===void 0||r.removeChild(u);return}},ef=(e,n,o)=>{const r=document.createRange(),c=n.parentNode;if(c){r.setStartBefore(n),r.setEndBefore(o);const u=r.extractContents();zw(e,u,!0),r.setStartAfter(o),r.setEndAfter(n);const m=r.extractContents();zw(e,m,!1),Hs(e,u,{checkRootAsContent:!0})||c.insertBefore(u,n),Hs(e,o,{checkRootAsContent:!0})||c.insertBefore(o,n),Hs(e,m,{checkRootAsContent:!0})||c.insertBefore(m,n),c.removeChild(n)}},km=(e,n,o)=>{const r=e.getBlockElements(),c=ee.fromDom(n),u=v=>Tn(v)in r,m=v=>kn(v,c);_e(Dv(o),v=>{ko(v,u,m).each(w=>{const E=Yd(v,M=>u(M)&&!e.isValidChild(Tn(w),Tn(M)));if(E.length>0){const M=oh(w);_e(E,N=>{ko(N,u,m).each(B=>{ef(e,B.dom,N.dom)})}),M.each(N=>Vw(e,N.dom))}})})},OM=(e,n,o)=>{_e([...o,...tf(e,n)?[n]:[]],r=>_e(jr(ee.fromDom(r),r.nodeName.toLowerCase()),c=>{Om(e,c.dom)&&Lu(c)}))},vh=(e,n)=>{const o=Vw(e,n);km(e,n,o),OM(e,n,o)},zv=(e,n)=>{if(z1(e,n)){const o=Vv(e.getBlockElements());Hw(o,n)}},Uv=(e,n,o)=>{const r=u=>kn(u,ee.fromDom(n)),c=Zd(ee.fromDom(o),r);dm(c,c.length-2).filter(wo).fold(()=>vh(e,n),u=>vh(e,u.dom))},V1=e=>e.hasAttribute(wa),hc=(e,n)=>It(e.getTransparentElements(),n),z1=(e,n)=>ot(n)&&hc(e,n.nodeName),tf=(e,n)=>z1(e,n)&&V1(n),Om=(e,n)=>z1(e,n)&&!V1(n),U1=(e,n)=>n.type===1&&hc(e,n.name)&&Q(n.attr(wa)),Uw=rl().browser,Wv=e=>us(e,wo),yk=e=>Uw.isFirefox()&&Tn(e)==="table"?Wv(Js(e)).filter(n=>Tn(n)==="caption").bind(n=>Wv(O1(n)).map(o=>{const r=o.dom.offsetTop,c=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,tr=(e,n)=>e.children&&Zt(e.children,n),_i=(e,n,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&os(ee.fromDom(e),"position")==="static"){const v=n.getBoundingClientRect();return r=v.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=v.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let m=n;for(;m&&m!==o&&m.nodeType&&!tr(m,o);){const v=m;r+=v.offsetLeft||0,c+=v.offsetTop||0,m=v.offsetParent}for(m=n.parentNode;m&&m!==o&&m.nodeType&&!tr(m,o);)r-=m.scrollLeft||0,c-=m.scrollTop||0,m=m.parentNode;c+=yk(ee.fromDom(n))}return{x:r,y:c}},Uu=(e,n={})=>{let o=0;const r={},c=ee.fromDom(e),u=Bu(c),m=ne=>{n.referrerPolicy=ne},v=ne=>{n.contentCssCors=ne},w=ne=>{Fs(sh(c),ne)},E=ne=>{const re=sh(c);Et(re,"#"+ne).each(fo)},M=ne=>Co(r,ne).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),N=ne=>new Promise((re,le)=>{let de;const Ae=We._addCacheSuffix(ne),Ve=M(Ae);r[Ae]=Ve,Ve.count++;const ct=(lt,xt)=>{_e(lt,ta),Ve.status=xt,Ve.passed=[],Ve.failed=[],de&&(de.onload=null,de.onerror=null,de=null)},Ee=()=>ct(Ve.passed,2),be=()=>ct(Ve.failed,3);if(re&&Ve.passed.push(re),le&&Ve.failed.push(le),Ve.status===1)return;if(Ve.status===2){Ee();return}if(Ve.status===3){be();return}Ve.status=1;const Me=ee.fromTag("link",u.dom);Ur(Me,{rel:"stylesheet",type:"text/css",id:Ve.id}),n.contentCssCors&&ur(Me,"crossOrigin","anonymous"),n.referrerPolicy&&ur(Me,"referrerpolicy",n.referrerPolicy),de=Me.dom,de.onload=Ee,de.onerror=be,w(Me),ur(Me,"href",Ae)}),B=(ne,re)=>{const le=M(ne);r[ne]=le,le.count++;const de=ee.fromTag("style",u.dom);Ur(de,{rel:"stylesheet",type:"text/css",id:le.id}),de.dom.innerHTML=re,w(de)},U=ne=>Promise.allSettled(Yt(ne,le=>N(le).then(Je(le)))).then(le=>{const de=Or(le,Ae=>Ae.status==="fulfilled");return de.fail.length>0?Promise.reject(Yt(de.fail,Ae=>Ae.reason)):Yt(de.pass,Ae=>Ae.value)}),G=ne=>{const re=We._addCacheSuffix(ne);Co(r,re).each(le=>{--le.count===0&&(delete r[re],E(le.id))})};return{load:N,loadRawCss:B,loadAll:U,unload:G,unloadRawCss:ne=>{Co(r,ne).each(re=>{--re.count===0&&(delete r[ne],E(re.id))})},unloadAll:ne=>{_e(ne,re=>{G(re)})},_setReferrerPolicy:m,_setContentCssCors:v}},W1=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=xi(o).dom;return L.from(e.get(u)).getOrThunk(()=>{const m=Uu(u,r);return e.set(u,m),m})}}})(),Wa=e=>e.nodeName.toLowerCase()==="span",yh=(e,n)=>De(e)&&(fe(n,e)||n.isInline(e.nodeName.toLowerCase())),Z1=(e,n,o)=>{const r=new Ts(e,n).prev(!1),c=new Ts(e,n).next(!1),u=Go(r)||yh(r,o),m=Go(c)||yh(c,o);return u&&m},j1=e=>Wa(e)&&e.getAttribute("data-mce-type")==="bookmark",Gc=(e,n,o)=>Fe(e)&&e.data.length>0&&Z1(e,n,o),qc=e=>ot(e)?e.childNodes.length>0:!1,Ww=e=>Ls(e)||Tm(e),pc=(e,n,o,r)=>{var c;const u=r||n;if(ot(n)&&j1(n))return n;const m=n.childNodes;for(let v=m.length-1;v>=0;v--)pc(e,m[v],o,u);if(ot(n)){const v=n.childNodes;v.length===1&&j1(v[0])&&((c=n.parentNode)===null||c===void 0||c.insertBefore(v[0],n))}return!Ww(n)&&!fe(o,n)&&!qc(n)&&!Gc(n,u,o)&&e.remove(n),n},of=We.makeMap,Ti=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,gl=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,sf=/[<>&\"\']/g,Ck=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Ch={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Wu={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},wk={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},es=e=>{const n=ee.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},G1=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],n));if(!Wu[u]){const m="&"+r[c+1]+";";o[u]=m,o[m]=u}}return o}else return},ki=G1("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),rf=(e,n)=>e.replace(n?Ti:gl,o=>Wu[o]||o),wh=e=>(""+e).replace(sf,n=>Wu[n]||n),Oi=(e,n)=>e.replace(n?Ti:gl,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":Wu[o]||"&#"+o.charCodeAt(0)+";"),nr=(e,n,o)=>{const r=o||ki;return e.replace(n?Ti:gl,c=>Wu[c]||r[c]||c)},ju={encodeRaw:rf,encodeAllRaw:wh,encodeNumeric:Oi,encodeNamed:nr,getEncodeFunc:(e,n)=>{const o=G1(n)||ki,r=(m,v)=>m.replace(v?Ti:gl,w=>Wu[w]!==void 0?Wu[w]:o[w]!==void 0?o[w]:w.length>1?"&#"+((w.charCodeAt(0)-55296)*1024+(w.charCodeAt(1)-56320)+65536)+";":"&#"+w.charCodeAt(0)+";"),c=(m,v)=>nr(m,v,o),u=of(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?c:nr:u.numeric?Oi:rf},decode:e=>e.replace(Ck,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):Ch[o]||String.fromCharCode(o)):wk[n]||ki[n]||es(n))},Vs=(e,n)=>(e=We.trim(e),e?e.split(n||" "):[]),K1=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),Y1=e=>Kt(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",xk=e=>{const n=o=>ln(o)?Yt(o,n):Y1(o)?new RegExp(o.source,o.flags):Kt(o)?Vn(o,n):o;return n(e)},Zw=e=>{const n=/^(~)?(.+)$/;return ic(Vs(e,","),o=>{const r=n.exec(o);if(r){const u=r[1]==="~"?"span":"div",m=r[2];return[{cloneName:u,name:m}]}else return[]})},Gu=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),af=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},ia=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=af(e),c=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:c(n),phrasingContent:c(o),flowContent:c(r)})},Za={html4:sl(()=>ia("html4")),html5:sl(()=>ia("html5")),"html5-strict":sl(()=>ia("html5-strict"))},ja=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:c}=Za[e]();return n==="blocks"?L.some(o):n==="phrasing"?L.some(r):n==="flow"?L.some(c):L.none()},xh=e=>{const n=Gu(e),{phrasingContent:o,flowContent:r}=af(e),c={},u=(w,E,M)=>{c[w]={attributes:Bs(E,Je({})),attributesOrder:E,children:Bs(M,Je({}))}},m=(w,E="",M="")=>{const N=Vs(M),B=Vs(w);let U=B.length;const G=[...n,...Vs(E)];for(;U--;)u(B[U],G.slice(),N)},v=(w,E)=>{const M=Vs(w),N=Vs(E);let B=M.length;for(;B--;){const U=c[M[B]];for(let G=0,W=N.length;G<W;G++)U.attributes[N[G]]={},U.attributesOrder.push(N[G])}};return e!=="html5-strict"&&(_e(Vs("acronym applet basefont big font strike tt"),M=>{m(M,"",o)}),_e(Vs("center dir isindex noframes"),M=>{m(M,"",r)})),m("html","manifest","head body"),m("head","","base command link meta noscript script style title"),m("title hr noscript br"),m("base","href target"),m("link","href rel media hreflang type sizes hreflang"),m("meta","name http-equiv content charset"),m("style","media type scoped"),m("script","src async defer type charset"),m("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),m("dd div","",r),m("address dt caption","",e==="html4"?o:r),m("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),m("blockquote","cite",r),m("ol","reversed start type","li"),m("ul","","li"),m("li","value",r),m("dl","","dt dd"),m("a","href target rel media hreflang type",e==="html4"?o:r),m("q","cite",o),m("ins del","cite datetime",r),m("img","src sizes srcset alt usemap ismap width height"),m("iframe","src name width height",r),m("embed","src type width height"),m("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),m("param","name value"),m("map","name",[r,"area"].join(" ")),m("area","alt coords shape href target rel media hreflang type"),m("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),m("colgroup","span","col"),m("col","span"),m("tbody thead tfoot","","tr"),m("tr","","td th"),m("td","colspan rowspan headers",r),m("th","colspan rowspan headers scope abbr",r),m("form","accept-charset action autocomplete enctype method name novalidate target",r),m("fieldset","disabled form name",[r,"legend"].join(" ")),m("label","form for",o),m("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),m("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),m("select","disabled form multiple name required size","option optgroup"),m("optgroup","disabled label","option"),m("option","disabled label selected value"),m("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),m("menu","type label",[r,"li"].join(" ")),m("noscript","",r),e!=="html4"&&(m("wbr"),m("ruby","",[o,"rt rp"].join(" ")),m("figcaption","",r),m("mark rt rp bdi","",o),m("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),m("canvas","width height",r),m("data","value",o),m("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),m("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),m("picture","","img source"),m("source","src srcset type media sizes"),m("track","kind src srclang label default"),m("datalist","",[o,"option"].join(" ")),m("article section nav aside main header footer","",r),m("hgroup","","h1 h2 h3 h4 h5 h6"),m("figure","",[r,"figcaption"].join(" ")),m("time","datetime",o),m("dialog","open",r),m("command","type label icon disabled checked radiogroup command"),m("output","for form name",o),m("progress","value max",o),m("meter","value min max low high optimum",o),m("details","open",[r,"summary"].join(" ")),m("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(v("script","language xml:space"),v("style","xml:space"),v("object","declare classid code codebase codetype archive standby align border hspace vspace"),v("embed","align name hspace vspace"),v("param","valuetype type"),v("a","charset name rev shape coords"),v("br","clear"),v("applet","codebase archive code object alt name width height align hspace vspace"),v("img","name longdesc align border hspace vspace"),v("iframe","longdesc frameborder marginwidth marginheight scrolling align"),v("font basefont","size color face"),v("input","usemap align"),v("select"),v("textarea"),v("h1 h2 h3 h4 h5 h6 div p legend caption","align"),v("ul","type compact"),v("li","type"),v("ol dl menu dir","compact"),v("pre","width xml:space"),v("hr","align noshade size width"),v("isindex","prompt"),v("table","summary width frame rules cellspacing cellpadding align bgcolor"),v("col","width align char charoff valign"),v("colgroup","width align char charoff valign"),v("thead","align char charoff valign"),v("tr","align char charoff valign bgcolor"),v("th","axis align char charoff valign nowrap bgcolor width height"),v("form","accept"),v("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),v("tfoot","align char charoff valign"),v("tbody","align char charoff valign"),v("area","nohref"),v("body","background bgcolor text link vlink alink")),e!=="html4"&&(v("input button select textarea","autofocus"),v("input textarea","placeholder"),v("a","download"),v("link script img","crossorigin"),v("img","loading"),v("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&_e([c.video,c.audio],w=>{delete w.children.audio,delete w.children.video}),_e(Vs("a form meter progress dfn"),w=>{c[w]&&delete c[w].children[w]}),delete c.caption.children.table,delete c.script,c},Sh=e=>e==="-"?"remove":"add",Am=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return L.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},Zv=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return ic(Vs(e,","),o=>{const r=n.exec(o);if(r){const c=r[1],u=c?Sh(c):"replace",m=r[2],v=ic(Vs(r[3],"|"),w=>Am(w).toArray());return[{operation:u,name:m,validChildren:v}]}else return[]})},jw=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:c,attributesOrder:u}=n;return _e(Vs(e,"|"),m=>{const v=o.exec(m);if(v){const w={},E=v[1],M=v[2].replace(/[\\:]:/g,":"),N=v[3],B=v[4];if(E==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(M),w.required=!0),E==="-"){delete c[M],u.splice(We.inArray(u,M),1);return}if(N&&(N==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:M,value:B}),w.defaultValue=B):N==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:M,value:B}),w.forcedValue=B):N==="<"&&(w.validValues=We.makeMap(B,"?"))),r.test(M)){const U=w;n.attributePatterns=n.attributePatterns||[],U.pattern=K1(M),n.attributePatterns.push(U)}else c[M]||u.push(M),c[M]=w}})},Gw=(e,n)=>{it(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},jv=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return ic(Vs(n,","),r=>{const c=o.exec(r);if(c){const u=c[1],m=c[2],v=c[3],w=c[4],E=c[5],M={attributes:{},attributesOrder:[]};if(e.each(N=>Gw(N,M)),u==="#"?M.paddEmpty=!0:u==="-"&&(M.removeEmpty=!0),w==="!"&&(M.removeEmptyAttrs=!0),E&&jw(E,M),v&&(M.outputName=m),m==="@")if(e.isNone())e=L.some(M);else return[];return[v?{name:m,element:M,aliasName:v}:{name:m,element:M}]}else return[]})},Rm={},un=We.makeMap,yt=We.each,qu=We.extend,X1=We.explode,J1=(e,n={})=>{const o=un(e," ",un(e.toUpperCase()," "));return qu(o,n)},Gv=e=>J1("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Q1=(e,n)=>{if(e){const o={};return Q(e)&&(e={"*":e}),yt(e,(r,c)=>{o[c]=o[c.toUpperCase()]=n==="map"?un(r,/[, ]/):X1(r,/[, ]/)}),o}else return},zn=(e={})=>{var n;const o={},r={};let c=[];const u={},m={},v=(Ct,On,Zo)=>{const Ss=e[Ct];if(Ss)return un(Ss,/[, ]/,un(Ss.toUpperCase(),/[, ]/));{let qs=Rm[Ct];return qs||(qs=J1(On,Zo),Rm[Ct]=qs),qs}},w=(n=e.schema)!==null&&n!==void 0?n:"html5",E=xh(w);e.verify_html===!1&&(e.valid_elements="*[*]");const M=Q1(e.valid_styles),N=Q1(e.invalid_styles,"map"),B=Q1(e.valid_classes,"map"),U=v("whitespace_elements","pre script noscript style textarea video audio iframe object code"),G=v("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),W=v("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),K=v("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),ne="td th iframe video audio object script code",re=v("non_empty_elements",ne+" pre svg textarea summary",W),le=v("move_caret_before_on_enter_elements",ne+" table",W),de="h1 h2 h3 h4 h5 h6",Ae=v("text_block_elements",de+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Ve=v("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",Ae),ct=v("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Ee=v("transparent_elements","a ins del canvas map"),be=v("wrap_block_elements","pre "+de);yt("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Ct=>{m[Ct]=new RegExp("</"+Ct+"[^>]*>","gi")});const Me=Ct=>{const On=L.from(o["@"]),Zo=/[*?+]/;_e(jv(On,Ct??""),({name:Ss,element:qs,aliasName:Es})=>{if(Es&&(o[Es]=qs),Zo.test(Ss)){const Ro=qs;Ro.pattern=K1(Ss),c.push(Ro)}else o[Ss]=qs})},lt=Ct=>{c=[],_e(zr(o),On=>{delete o[On]}),Me(Ct)},xt=(Ct,On)=>{var Zo,Ss;delete Rm.text_block_elements,delete Rm.block_elements;const qs=On.extends?!di(On.extends):!1,Es=On.extends;if(r[Ct]=Es?r[Es]:{},u[Ct]=Es??Ct,re[Ct.toUpperCase()]={},re[Ct]={},qs||(Ve[Ct.toUpperCase()]={},Ve[Ct]={}),Es&&!o[Ct]&&o[Es]){const Ro=xk(o[Es]);delete Ro.removeEmptyAttrs,delete Ro.removeEmpty,o[Ct]=Ro}else o[Ct]={attributesOrder:[],attributes:{}};if(ln(On.attributes)){const Ro=Pa=>{Bo.attributesOrder.push(Pa),Bo.attributes[Pa]={}},Bo=(Zo=o[Ct])!==null&&Zo!==void 0?Zo:{};delete Bo.attributesDefault,delete Bo.attributesForced,delete Bo.attributePatterns,delete Bo.attributesRequired,Bo.attributesOrder=[],Bo.attributes={},_e(On.attributes,Pa=>{const Qi=Gu(w);Am(Pa).each(({preset:Su,name:Bl})=>{Su?Bl==="global"&&_e(Qi,Ro):Ro(Bl)})}),o[Ct]=Bo}if(rn(On.padEmpty)){const Ro=(Ss=o[Ct])!==null&&Ss!==void 0?Ss:{};Ro.paddEmpty=On.padEmpty,o[Ct]=Ro}if(ln(On.children)){const Ro={},Bo=Qi=>{Ro[Qi]={}},Pa=Qi=>{ja(w,Qi).each(Su=>{_e(Su,Bo)})};_e(On.children,Qi=>{Am(Qi).each(({preset:Su,name:Bl})=>{Su?Pa(Bl):Bo(Bl)})}),r[Ct]=Ro}Es&&it(r,(Ro,Bo)=>{Ro[Es]&&(r[Bo]=Ro=qu({},r[Bo]),Ro[Ct]=Ro[Es])})},dn=Ct=>{_e(Zw(Ct??""),({name:On,cloneName:Zo})=>{xt(On,{extends:Zo})})},fn=Ct=>{Kt(Ct)?it(Ct,(On,Zo)=>xt(Zo,On)):Q(Ct)&&dn(Ct)},Fn=Ct=>{_e(Zv(Ct??""),({operation:On,name:Zo,validChildren:Ss})=>{const qs=On==="replace"?{"#comment":{}}:r[Zo],Es=Bo=>{On==="remove"?delete qs[Bo]:qs[Bo]={}},Ro=Bo=>{ja(w,Bo).each(Pa=>{_e(Pa,Es)})};_e(Ss,({preset:Bo,name:Pa})=>{Bo?Ro(Pa):Es(Pa)}),r[Zo]=qs})},Gn=Ct=>{const On=o[Ct];if(On)return On;let Zo=c.length;for(;Zo--;){const Ss=c[Zo];if(Ss.pattern.test(Ct))return Ss}},ns=()=>{e.valid_elements?(lt(e.valid_elements),yt(E,(Ct,On)=>{r[On]=Ct.children})):(yt(E,(Ct,On)=>{o[On]={attributes:Ct.attributes,attributesOrder:Ct.attributesOrder},r[On]=Ct.children}),yt(Vs("strong/b em/i"),Ct=>{const On=Vs(Ct,"/");o[On[1]].outputName=On[0]}),yt(ct,(Ct,On)=>{o[On]&&(e.padd_empty_block_inline_children&&(o[On].paddInEmptyBlock=!0),o[On].removeEmpty=!0)}),yt(Vs("ol ul blockquote a table tbody"),Ct=>{o[Ct]&&(o[Ct].removeEmpty=!0)}),yt(Vs("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Ct=>{o[Ct]&&(o[Ct].paddEmpty=!0)}),yt(Vs("span"),Ct=>{o[Ct].removeEmptyAttrs=!0})),delete o.svg,fn(e.custom_elements),Fn(e.valid_children),Me(e.extended_valid_elements),Fn("+ol[ul|ol],+ul[ul|ol]"),yt({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Ct,On)=>{o[On]&&(o[On].parentsRequired=Vs(Ct))}),e.invalid_elements&&yt(X1(e.invalid_elements),Ct=>{o[Ct]&&delete o[Ct]}),Gn("span")||Me("span[!data-mce-type|*]")},_r=Je(M),cs=Je(N),Ke=Je(B),wt=Je(K),Rn=Je(Ve),st=Je(Ae),Rt=Je(ct),Mt=Je(Object.seal(W)),Qe=Je(G),mn=Je(re),pn=Je(le),xs=Je(U),eo=Je(Ee),Tr=Je(be),oc=Je(Object.seal(m)),xu=(Ct,On)=>{const Zo=r[Ct.toLowerCase()];return!!(Zo&&Zo[On.toLowerCase()])},ea=(Ct,On)=>{const Zo=Gn(Ct);if(Zo)if(On){if(Zo.attributes[On])return!0;const Ss=Zo.attributePatterns;if(Ss){let qs=Ss.length;for(;qs--;)if(Ss[qs].pattern.test(On))return!0}}else return!0;return!1},di=Ct=>It(Rn(),Ct),Ji=Ct=>!hs(Ct,"#")&&ea(Ct)&&!di(Ct),Lr=Ct=>It(Tr(),Ct)||Ji(Ct),sc=Je(u);return ns(),{type:w,children:r,elements:o,getValidStyles:_r,getValidClasses:Ke,getBlockElements:Rn,getInvalidStyles:cs,getVoidElements:Mt,getTextBlockElements:st,getTextInlineElements:Rt,getBoolAttrs:wt,getElementRule:Gn,getSelfClosingElements:Qe,getNonEmptyElements:mn,getMoveCaretBeforeOnEnterElements:pn,getWhitespaceElements:xs,getTransparentElements:eo,getSpecialElements:oc,isValidChild:xu,isValid:ea,isBlock:di,isInline:Ji,isWrapper:Lr,getCustomElements:sc,addValidElements:Me,setValidElements:lt,addCustomElements:fn,addValidChildren:Fn}},qv=e=>({value:qw(e)}),qw=e=>gm(e,"#").toUpperCase(),Kv=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},ke=e=>{const n=Kv(e.red)+Kv(e.green)+Kv(e.blue);return qv(n)},Dm=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Kw=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,cf=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),Yw=(e,n,o,r)=>{const c=parseInt(e,10),u=parseInt(n,10),m=parseInt(o,10),v=parseFloat(r);return cf(c,u,m,v)},Kl=e=>Dm.test(e)?"rgb":Kw.test(e)?"rgba":"other",eb=e=>{const n=Dm.exec(e);if(n!==null)return L.some(Yw(n[1],n[2],n[3],"1"));const o=Kw.exec(e);return o!==null?L.some(Yw(o[1],o[2],o[3],o[4])):L.none()},lf=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,Eh=e=>eb(e).map(ke).map(n=>"#"+n.value).getOr(e),Ku=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};let m,v;const w=lh;n&&(m=n.getValidStyles(),v=n.getInvalidStyles());const E=(`\\" \\' \\; \\: ; : `+w).split(" ");for(let N=0;N<E.length;N++)u[E[N]]=w+N,u[w+N]=E[N];const M={parse:N=>{const B={};let U=!1;const G=e.url_converter,W=e.url_converter_scope||M,K=(Ee,be,Me)=>{const lt=B[Ee+"-top"+be];if(!lt)return;const xt=B[Ee+"-right"+be];if(!xt)return;const dn=B[Ee+"-bottom"+be];if(!dn)return;const fn=B[Ee+"-left"+be];if(!fn)return;const Fn=[lt,xt,dn,fn];let Gn=Fn.length-1;for(;Gn--&&Fn[Gn]===Fn[Gn+1];);Gn>-1&&Me||(B[Ee+be]=Gn===-1?Fn[0]:Fn.join(" "),delete B[Ee+"-top"+be],delete B[Ee+"-right"+be],delete B[Ee+"-bottom"+be],delete B[Ee+"-left"+be])},ne=Ee=>{const be=B[Ee];if(!be)return;const Me=be.indexOf(",")>-1?[be]:be.split(" ");let lt=Me.length;for(;lt--;)if(Me[lt]!==Me[0])return!1;return B[Ee]=Me[0],!0},re=(Ee,be,Me,lt)=>{ne(be)&&ne(Me)&&ne(lt)&&(B[Ee]=B[be]+" "+B[Me]+" "+B[lt],delete B[be],delete B[Me],delete B[lt])},le=Ee=>(U=!0,u[Ee]),de=(Ee,be)=>(U&&(Ee=Ee.replace(/\uFEFF[0-9]/g,Me=>u[Me])),be||(Ee=Ee.replace(/\\([\'\";:])/g,"$1")),Ee),Ae=Ee=>String.fromCharCode(parseInt(Ee.slice(1),16)),Ve=Ee=>Ee.replace(/\\[0-9a-f]+/gi,Ae),ct=(Ee,be,Me,lt,xt,dn)=>{if(xt=xt||dn,xt)return xt=de(xt),"'"+xt.replace(/\'/g,"\\'")+"'";if(be=de(be||Me||lt||""),!e.allow_script_urls){const fn=be.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(fn)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(fn))return""}return G&&(be=G.call(W,be,"style")),"url('"+be.replace(/\'/g,"\\'")+"')"};if(N){N=N.replace(/[\u0000-\u001F]/g,""),N=N.replace(/\\[\"\';:\uFEFF]/g,le).replace(/\"[^\"]+\"|\'[^\']+\'/g,be=>be.replace(/[;:]/g,le));let Ee;for(;Ee=r.exec(N);){r.lastIndex=Ee.index+Ee[0].length;let be=Ee[1].replace(c,"").toLowerCase(),Me=Ee[2].replace(c,"");if(be&&Me){if(be=Ve(be),Me=Ve(Me),be.indexOf(w)!==-1||be.indexOf('"')!==-1||!e.allow_script_urls&&(be==="behavior"||/expression\s*\(|\/\*|\*\//.test(Me)))continue;be==="font-weight"&&Me==="700"?Me="bold":(be==="color"||be==="background-color")&&(Me=Me.toLowerCase()),Kl(Me)==="rgb"&&eb(Me).each(lt=>{Me=Eh(lf(lt)).toLowerCase()}),Me=Me.replace(o,ct),B[be]=U?de(Me,!0):Me}}K("border","",!0),K("border","-width"),K("border","-color"),K("border","-style"),K("padding",""),K("margin",""),re("border","border-width","border-style","border-color"),B.border==="medium none"&&delete B.border,B["border-image"]==="none"&&delete B["border-image"]}return B},serialize:(N,B)=>{let U="";const G=(K,ne)=>{const re=ne[K];if(re)for(let le=0,de=re.length;le<de;le++){const Ae=re[le],Ve=N[Ae];Ve&&(U+=(U.length>0?" ":"")+Ae+": "+Ve+";")}},W=(K,ne)=>{if(!v||!ne)return!0;let re=v["*"];return re&&re[K]?!1:(re=v[ne],!(re&&re[K]))};return B&&m?(G("*",m),G(B,m)):it(N,(K,ne)=>{K&&W(ne,B)&&(U+=(U.length>0?" ":"")+ne+": "+K+";")}),U}};return M},go={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},hl=e=>e instanceof Event||se(e.initEvent),Xw=e=>e.isDefaultPrevented===dt||e.isDefaultPrevented===Ne,Yl=e=>An(e.preventDefault)||hl(e),Yv=(e,n)=>{const o=n??{};for(const r in e)It(go,r)||(o[r]=e[r]);return De(e.composedPath)&&(o.composedPath=()=>e.composedPath()),De(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),De(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},uf=(e,n,o,r)=>{var c;const u=Yv(n,r);return u.type=e,An(u.target)&&(u.target=(c=u.srcElement)!==null&&c!==void 0?c:o),Yl(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=dt,se(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=dt,se(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=dt,u.stopPropagation()},Xw(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?dt:Ne,u.isPropagationStopped=u.cancelBubble===!0?dt:Ne,u.isImmediatePropagationStopped=Ne)),u},Xv="mce-data-",Jv=/^(?:mouse|contextmenu)|click/,Gr=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},Mm=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},Sk=e=>De(e)&&Jv.test(e.type),Yu=(e,n)=>{const o=uf(e.type,e,document,n);if(Sk(e)&&Go(e.pageX)&&!Go(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,m=o;m.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),m.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},Ek=(e,n,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){n(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,m=()=>{Mm(e,"DOMContentLoaded",m),Mm(e,"load",m),o.domLoaded||(o.domLoaded=!0,n(c)),e=null};u()?m():Gr(e,"DOMContentLoaded",m),o.domLoaded||Gr(e,"load",m)};class df{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=Xv+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,c){const u=this;let m;const v=window,w=B=>{u.executeHandlers(Yu(B||v.event),E)};if(!n||Fe(n)||Qo(n))return r;let E;n[u.expando]?E=n[u.expando]:(E=u.count++,n[u.expando]=E,u.events[E]={}),c=c||n;const M=o.split(" ");let N=M.length;for(;N--;){let B=M[N],U=w,G=!1,W=!1;if(B==="DOMContentLoaded"&&(B="ready"),u.domLoaded&&B==="ready"&&n.readyState==="complete"){r.call(c,Yu({type:B}));continue}!u.hasFocusIn&&(B==="focusin"||B==="focusout")&&(G=!0,W=B==="focusin"?"focus":"blur",U=K=>{const ne=Yu(K||v.event);ne.type=ne.type==="focus"?"focusin":"focusout",u.executeHandlers(ne,E)}),m=u.events[E][B],m?B==="ready"&&u.domLoaded?r(Yu({type:B})):m.push({func:r,scope:c}):(u.events[E][B]=m=[{func:r,scope:c}],m.fakeName=W,m.capture=G,m.nativeHandler=U,B==="ready"?Ek(n,U,u):Gr(n,W||B,U,G))}return n=m=null,r}unbind(n,o,r){if(!n||Fe(n)||Qo(n))return this;const c=n[this.expando];if(c){let u=this.events[c];if(o){const m=o.split(" ");let v=m.length;for(;v--;){const w=m[v],E=u[w];if(E){if(r){let M=E.length;for(;M--;)if(E[M].func===r){const N=E.nativeHandler,B=E.fakeName,U=E.capture,G=E.slice(0,M).concat(E.slice(M+1));G.nativeHandler=N,G.fakeName=B,G.capture=U,u[w]=G}}(!r||E.length===0)&&(delete u[w],Mm(n,E.fakeName||w,E.nativeHandler,E.capture))}}}else it(u,(m,v)=>{Mm(n,m.fakeName||v,m.nativeHandler,m.capture)}),u={};for(const m in u)if(It(u,m))return this;delete this.events[c];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||Fe(n)||Qo(n))return this;const c=Yu({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(c,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!c.isPropagationStopped());return this}clean(n){if(!n||Fe(n)||Qo(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],c=r&&r[n.type];if(c)for(let u=0,m=c.length;u<m;u++){const v=c[u];if(v&&v.func.call(v.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}df.Event=new df;const tb=We.each,_k=We.grep,_h="data-mce-style",Ai=We.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Pr=(e,n,o)=>{An(o)||o===""?$s(e,n):ur(e,n,o)},He=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),Pm=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;n&&Fe(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},zs=(e,n)=>{const o=aa(n,"style"),r=e.serialize(e.parse(o),Tn(n));Pr(n,_h,r)},Qv=(e,n)=>fa(e)?It(Ai,n)?e+"":e+"px":e,ey=(e,n,o)=>{const r=He(n);An(o)||o===""?Ca(e,r):Rv(e,r,Qv(o,r))},ty=(e,n,o)=>{const r=n.keep_values,c={set:(m,v,w)=>{const E=ee.fromDom(m);se(n.url_converter)&&De(v)&&(v=n.url_converter.call(n.url_converter_scope||o(),String(v),w,m));const M="data-mce-"+w;Pr(E,M,v),Pr(E,w,v)},get:(m,v)=>{const w=ee.fromDom(m);return aa(w,"data-mce-"+v)||aa(w,v)}},u={style:{set:(m,v)=>{const w=ee.fromDom(m);r&&Pr(w,_h,v),$s(w,"style"),Q(v)&&on(w,e.parse(v))},get:m=>{const v=ee.fromDom(m),w=aa(v,_h)||aa(v,"style");return e.serialize(e.parse(w),Tn(v))}}};return r&&(u.href=u.src=c),u},to=(e,n={})=>{const o={},r=window,c={};let u=0;const m=!0,v=!0,w=W1.forElement(ee.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),E=[],M=n.schema?n.schema:zn({}),N=Ku({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),B=n.ownEvents?new df:df.Event,U=M.getBlockElements(),G=pe=>Q(pe)?It(U,pe):ot(pe)&&(It(U,pe.nodeName)||tf(M,pe)),W=pe=>pe&&e&&Q(pe)?e.getElementById(pe):pe,K=pe=>{const he=W(pe);return De(he)?ee.fromDom(he):null},ne=(pe,he,Ye="")=>{let ze;const Ot=K(pe);if(De(Ot)&&wo(Ot)){const Dn=VT[he];Dn&&Dn.get?ze=Dn.get(Ot.dom,he):ze=aa(Ot,he)}return De(ze)?ze:Ye},re=pe=>{const he=W(pe);return An(he)?[]:he.attributes},le=(pe,he,Ye)=>{wt(pe,ze=>{if(ot(ze)){const Ot=ee.fromDom(ze),Dn=Ye===""?null:Ye,jo=aa(Ot,he),Eu=VT[he];Eu&&Eu.set?Eu.set(Ot.dom,Dn,he):Pr(Ot,he,Dn),jo!==Dn&&n.onSetAttrib&&n.onSetAttrib({attrElm:Ot.dom,attrName:he,attrValue:Dn})}})},de=(pe,he)=>pe.cloneNode(he),Ae=()=>n.root_element||e.body,Ve=pe=>{const he=Bw(pe);return{x:he.x,y:he.y,w:he.width,h:he.height}},ct=(pe,he)=>_i(e.body,W(pe),he),Ee=(pe,he,Ye)=>{wt(pe,ze=>{const Ot=ee.fromDom(ze);ey(Ot,he,Ye),n.update_styles&&zs(N,Ot)})},be=(pe,he)=>{wt(pe,Ye=>{const ze=ee.fromDom(Ye);it(he,(Ot,Dn)=>{ey(ze,Dn,Ot)}),n.update_styles&&zs(N,ze)})},Me=(pe,he,Ye)=>{const ze=W(pe);if(!(An(ze)||!Wc(ze)&&!Iv(ze)))return Ye?os(ee.fromDom(ze),He(he)):(he=he.replace(/-(\D)/g,(Ot,Dn)=>Dn.toUpperCase()),he==="float"&&(he="cssFloat"),ze.style?ze.style[he]:void 0)},lt=pe=>{const he=W(pe);if(!he)return{w:0,h:0};let Ye=Me(he,"width"),ze=Me(he,"height");return(!Ye||Ye.indexOf("px")===-1)&&(Ye="0"),(!ze||ze.indexOf("px")===-1)&&(ze="0"),{w:parseInt(Ye,10)||he.offsetWidth||he.clientWidth,h:parseInt(ze,10)||he.offsetHeight||he.clientHeight}},xt=pe=>{const he=W(pe),Ye=ct(he),ze=lt(he);return{x:Ye.x,y:Ye.y,w:ze.w,h:ze.h}},dn=(pe,he)=>{if(!pe)return!1;const Ye=ln(pe)?pe:[pe];return ho(Ye,ze=>Ha(ee.fromDom(ze),he))},fn=(pe,he,Ye,ze)=>{const Ot=[];let Dn=W(pe);ze=ze===void 0;const jo=Ye||(Ae().nodeName!=="BODY"?Ae().parentNode:null);if(Q(he))if(he==="*")he=ot;else{const Eu=he;he=tl=>dn(tl,Eu)}for(;Dn&&!(Dn===jo||An(Dn.nodeType)||Tm(Dn)||Ls(Dn));){if(!he||he(Dn))if(ze)Ot.push(Dn);else return[Dn];Dn=Dn.parentNode}return ze?Ot:null},Fn=(pe,he,Ye)=>{const ze=fn(pe,he,Ye,!1);return ze&&ze.length>0?ze[0]:null},Gn=(pe,he,Ye)=>{let ze=he;if(pe){Q(he)&&(ze=Ot=>dn(Ot,he));for(let Ot=pe[Ye];Ot;Ot=Ot[Ye])if(se(ze)&&ze(Ot))return Ot}return null},ns=(pe,he)=>Gn(pe,he,"nextSibling"),_r=(pe,he)=>Gn(pe,he,"previousSibling"),cs=pe=>se(pe.querySelectorAll),Ke=(pe,he)=>{var Ye,ze;const Ot=(ze=(Ye=W(he))!==null&&Ye!==void 0?Ye:n.root_element)!==null&&ze!==void 0?ze:e;return cs(Ot)?ha(Ot.querySelectorAll(pe)):[]},wt=function(pe,he,Ye){const ze=Ye??this;if(ln(pe)){const Ot=[];return tb(pe,(Dn,jo)=>{const Eu=W(Dn);Eu&&Ot.push(he.call(ze,Eu,jo))}),Ot}else{const Ot=W(pe);return Ot?he.call(ze,Ot):!1}},Rn=(pe,he)=>{wt(pe,Ye=>{it(he,(ze,Ot)=>{le(Ye,Ot,ze)})})},st=(pe,he)=>{wt(pe,Ye=>{const ze=ee.fromDom(Ye);D1(ze,he)})},Rt=(pe,he,Ye,ze,Ot)=>wt(pe,Dn=>{const jo=Q(he)?e.createElement(he):he;return De(Ye)&&Rn(jo,Ye),ze&&(!Q(ze)&&ze.nodeType?jo.appendChild(ze):Q(ze)&&st(jo,ze)),Ot?jo:Dn.appendChild(jo)}),Mt=(pe,he,Ye)=>Rt(e.createElement(pe),pe,he,Ye,!0),Qe=ju.decode,mn=ju.encodeAllRaw,pn=(pe,he,Ye="")=>{let ze="<"+pe;for(const Ot in he)pa(he,Ot)&&(ze+=" "+Ot+'="'+mn(he[Ot])+'"');return $a(Ye)&&It(M.getVoidElements(),pe)?ze+" />":ze+">"+Ye+"</"+pe+">"},xs=pe=>{const he=e.createElement("div"),Ye=e.createDocumentFragment();Ye.appendChild(he),pe&&(he.innerHTML=pe);let ze;for(;ze=he.firstChild;)Ye.appendChild(ze);return Ye.removeChild(he),Ye},eo=(pe,he)=>wt(pe,Ye=>{const ze=ee.fromDom(Ye);return he&&_e(Js(ze),Ot=>{Xs(Ot)&&Ot.dom.length===0?fo(Ot):uo(ze,Ot)}),fo(ze),ze.dom}),Tr=pe=>wt(pe,he=>{const Ye=he.attributes;for(let ze=Ye.length-1;ze>=0;ze--)he.removeAttributeNode(Ye.item(ze))}),oc=pe=>N.parse(pe),xu=(pe,he)=>N.serialize(pe,he),ea=pe=>{if(el!==to.DOM&&e===document){if(o[pe])return;o[pe]=!0}let he=e.getElementById("mceDefaultStyles");if(!he){he=e.createElement("style"),he.id="mceDefaultStyles",he.type="text/css";const Ye=e.head;Ye.firstChild?Ye.insertBefore(he,Ye.firstChild):Ye.appendChild(he)}he.styleSheet?he.styleSheet.cssText+=pe:he.appendChild(e.createTextNode(pe))},di=pe=>{pe||(pe=""),_e(pe.split(","),he=>{c[he]=!0,w.load(he).catch(Dt)})},Ji=(pe,he,Ye)=>{wt(pe,ze=>{if(ot(ze)){const Ot=ee.fromDom(ze),Dn=he.split(" ");_e(Dn,jo=>{De(Ye)?(Ye?Nu:pm)(Ot,jo):Tv(Ot,jo)})}})},Lr=(pe,he)=>{Ji(pe,he,!0)},sc=(pe,he)=>{Ji(pe,he,!1)},Ct=(pe,he)=>{const Ye=K(pe),ze=he.split(" ");return De(Ye)&&ir(ze,Ot=>k1(Ye,Ot))},On=pe=>{wt(pe,he=>Ca(ee.fromDom(he),"display"))},Zo=pe=>{wt(pe,he=>Rv(ee.fromDom(he),"display","none"))},Ss=pe=>{const he=K(pe);return De(he)&&Xo(R1(he,"display"),"none")},qs=pe=>(pe||"mce_")+u++,Es=pe=>{const he=K(pe);return De(he)?ot(he.dom)?he.dom.outerHTML:ll(he):""},Ro=(pe,he)=>{wt(pe,Ye=>{ot(Ye)&&(Ye.outerHTML=he)})},Bo=(pe,he)=>{const Ye=W(he);return wt(pe,ze=>{const Ot=Ye==null?void 0:Ye.parentNode,Dn=Ye==null?void 0:Ye.nextSibling;return Ot&&(Dn?Ot.insertBefore(ze,Dn):Ot.appendChild(ze)),ze})},Pa=(pe,he,Ye)=>wt(he,ze=>{var Ot;const Dn=ln(he)?pe.cloneNode(!0):pe;return Ye&&tb(_k(ze.childNodes),jo=>{Dn.appendChild(jo)}),(Ot=ze.parentNode)===null||Ot===void 0||Ot.replaceChild(Dn,ze),ze}),Qi=(pe,he)=>{if(pe.nodeName!==he.toUpperCase()){const Ye=Mt(he);return tb(re(pe),ze=>{le(Ye,ze.nodeName,ne(pe,ze.nodeName))}),Pa(Ye,pe,!0),Ye}else return pe},Su=(pe,he)=>{let Ye=pe;for(;Ye;){let ze=he;for(;ze&&Ye!==ze;)ze=ze.parentNode;if(Ye===ze)break;Ye=Ye.parentNode}return!Ye&&pe.ownerDocument?pe.ownerDocument.documentElement:Ye},Bl=(pe,he,Ye)=>$o(he)?Hs(M,pe,{...Ye,isContent:Ot=>{const Dn=Ot.nodeName.toLowerCase();return!!he[Dn]}}):Hs(M,pe,Ye),o1=()=>e.createRange(),jg=(pe,he,Ye)=>{let ze=o1(),Ot,Dn;if(pe&&he&&pe.parentNode&&he.parentNode){const jo=pe.parentNode;return ze.setStart(jo,Pm(pe)),ze.setEnd(he.parentNode,Pm(he)),Ot=ze.extractContents(),ze=o1(),ze.setStart(he.parentNode,Pm(he)+1),ze.setEnd(jo,Pm(pe)+1),Dn=ze.extractContents(),jo.insertBefore(pc(el,Ot,M),pe),Ye?jo.insertBefore(Ye,pe):jo.insertBefore(he,pe),jo.insertBefore(pc(el,Dn,M),pe),eo(pe),Ye||he}else return},sm=(pe,he,Ye,ze)=>{if(ln(pe)){let Ot=pe.length;const Dn=[];for(;Ot--;)Dn[Ot]=sm(pe[Ot],he,Ye,ze);return Dn}else return n.collect&&(pe===e||pe===r)&&E.push([pe,he,Ye,ze]),B.bind(pe,he,Ye,ze||el)},Pc=(pe,he,Ye)=>{if(ln(pe)){let ze=pe.length;const Ot=[];for(;ze--;)Ot[ze]=Pc(pe[ze],he,Ye);return Ot}else{if(E.length>0&&(pe===e||pe===r)){let ze=E.length;for(;ze--;){const[Ot,Dn,jo]=E[ze];pe===Ot&&(!he||he===Dn)&&(!Ye||Ye===jo)&&B.unbind(Ot,Dn,jo)}}return B.unbind(pe,he,Ye)}},rm=(pe,he,Ye)=>B.dispatch(pe,he,Ye),cv=(pe,he,Ye)=>B.dispatch(pe,he,Ye),s1=pe=>{if(pe&&Wc(pe)){const he=pe.getAttribute("data-mce-contenteditable");return he&&he!=="inherit"?he:pe.contentEditable!=="inherit"?pe.contentEditable:null}else return null},el={doc:e,settings:n,win:r,files:c,stdMode:m,boxModel:v,styleSheetLoader:w,boundEvents:E,styles:N,schema:M,events:B,isBlock:G,root:null,clone:de,getRoot:Ae,getViewPort:Ve,getRect:xt,getSize:lt,getParent:Fn,getParents:fn,get:W,getNext:ns,getPrev:_r,select:Ke,is:dn,add:Rt,create:Mt,createHTML:pn,createFragment:xs,remove:eo,setStyle:Ee,getStyle:Me,setStyles:be,removeAllAttribs:Tr,setAttrib:le,setAttribs:Rn,getAttrib:ne,getPos:ct,parseStyle:oc,serializeStyle:xu,addStyle:ea,loadCSS:di,addClass:Lr,removeClass:sc,hasClass:Ct,toggleClass:Ji,show:On,hide:Zo,isHidden:Ss,uniqueId:qs,setHTML:st,getOuterHTML:Es,setOuterHTML:Ro,decode:Qe,encode:mn,insertAfter:Bo,replace:Pa,rename:Qi,findCommonAncestor:Su,run:wt,getAttribs:re,isEmpty:Bl,createRng:o1,nodeIndex:Pm,split:jg,bind:sm,unbind:Pc,fire:cv,dispatch:rm,getContentEditable:s1,getContentEditableParent:pe=>{const he=Ae();let Ye=null;for(let ze=pe;ze&&ze!==he&&(Ye=s1(ze),Ye===null);ze=ze.parentNode);return Ye},isEditable:pe=>{if(De(pe)){const he=ot(pe)?pe:pe.parentElement;return De(he)&&Wc(he)&&gc(ee.fromDom(he))}else return!1},destroy:()=>{if(E.length>0){let pe=E.length;for(;pe--;){const[he,Ye,ze]=E[pe];B.unbind(he,Ye,ze)}}it(c,(pe,he)=>{w.unload(he),delete c[he]})},isChildOf:(pe,he)=>pe===he||he.contains(pe),dumpRng:pe=>"startContainer: "+pe.startContainer.nodeName+", startOffset: "+pe.startOffset+", endContainer: "+pe.endContainer.nodeName+", endOffset: "+pe.endOffset},VT=ty(N,n,Je(el));return el};to.DOM=to(document),to.nodeIndex=Pm;const Tk=to.DOM,ff=0,Xl=1,Nm=2,ny=3;class pl{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const c=Tk;let u;const m=()=>{c.remove(E),u&&(u.onerror=u.onload=u=null)},v=()=>{m(),o()},w=()=>{m(),r("Failed to load script: "+n)},E=c.uniqueId();u=document.createElement("script"),u.id=E,u.type="text/javascript",u.src=We._addCacheSuffix(n),this.settings.referrerPolicy&&c.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=v,u.onerror=w,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===Nm}markDone(n){this.states[n]=Nm}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=ff),new Promise((c,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:c,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(w,E)=>{Co(o.scriptLoadedCallbacks,E).each(M=>{_e(M,N=>N[w](E))}),delete o.scriptLoadedCallbacks[E]},c=w=>{const E=Pt(w,M=>M.status==="rejected");return E.length>0?Promise.reject(ic(E,({reason:M})=>ln(M)?M:[M])):Promise.resolve()},u=w=>Promise.allSettled(Yt(w,E=>o.states[E]===Nm?(r("resolve",E),Promise.resolve()):o.states[E]===ny?(r("reject",E),Promise.reject(E)):(o.states[E]=Xl,o.loadScript(E).then(()=>{o.states[E]=Nm,r("resolve",E);const M=o.queue;return M.length>0?(o.queue=[],u(M).then(c)):Promise.resolve()},()=>(o.states[E]=ny,r("reject",E),Promise.reject(E)))))),m=w=>(o.loading=!0,u(w).then(E=>{o.loading=!1;const M=o.queueLoadedCallbacks.shift();return L.from(M).each(ta),c(E)})),v=g1(n);return o.loading?new Promise((w,E)=>{o.queueLoadedCallbacks.push(()=>{m(v).then(w,E)})}):m(v)}}pl.ScriptLoader=new pl;const Jw=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},rs=e=>Kt(e)&&It(e,"raw"),nb=e=>ln(e)&&e.length>1,Un={},oy=mo("en"),qr=()=>Co(Un,oy.get()),Di={getData:()=>Vn(Un,e=>({...e})),setCode:e=>{e&&oy.set(e)},getCode:()=>oy.get(),add:(e,n)=>{let o=Un[e];o||(Un[e]=o={});const r=Yt(zr(n),c=>c.toLowerCase());it(n,(c,u)=>{const m=u.toLowerCase();m!==u&&Jw(r,m)?(It(n,m)||(o[m]=c),o[u]=c):o[m]=c})},translate:e=>{const n=qr().getOr({}),o=m=>se(m)?Object.prototype.toString.call(m):r(m)?"":""+m,r=m=>m===""||m===null||m===void 0,c=m=>{const v=o(m);return It(n,v)?o(n[v]):Co(n,v.toLowerCase()).map(o).getOr(v)},u=m=>m.replace(/{context:\w+}$/,"");if(r(e))return"";if(rs(e))return o(e.raw);if(nb(e)){const m=e.slice(1),v=c(e[0]).replace(/\{([0-9]+)\}/g,(w,E)=>It(m,E)?o(m[E]):w);return u(v)}return u(c(e))},isRtl:()=>qr().bind(e=>Co(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>It(Un,e)},Nr=()=>{const e=[],n={},o={},r=[],c=(W,K)=>{const ne=Pt(r,re=>re.name===W&&re.state===K);_e(ne,re=>re.resolve())},u=W=>It(n,W),m=W=>It(o,W),v=W=>{if(o[W])return o[W].instance},w=(W,K)=>{const ne=Di.getCode(),re=","+(K||"")+",";!ne||K&&re.indexOf(","+ne+",")===-1||pl.ScriptLoader.add(n[W]+"/langs/"+ne+".js")},E=(W,K)=>{Nr.languageLoad!==!1&&(u(W)?w(W,K):G(W,"loaded").then(()=>w(W,K)))},M=(W,K)=>(e.push(K),o[W]={instance:K},c(W,"added"),K),N=W=>{delete n[W],delete o[W]},B=(W,K)=>Q(K)?Q(W)?{prefix:"",resource:K,suffix:""}:{prefix:W.prefix,resource:K,suffix:W.suffix}:K,U=(W,K)=>{if(n[W])return Promise.resolve();let ne=Q(K)?K:K.prefix+K.resource+K.suffix;ne.indexOf("/")!==0&&ne.indexOf("://")===-1&&(ne=Nr.baseURL+"/"+ne),n[W]=ne.substring(0,ne.lastIndexOf("/"));const re=()=>(c(W,"loaded"),Promise.resolve());return o[W]?re():pl.ScriptLoader.add(ne).then(re)},G=(W,K="added")=>K==="added"&&m(W)||K==="loaded"&&u(W)?Promise.resolve():new Promise(ne=>{r.push({name:W,state:K,resolve:ne})});return{items:e,urls:n,lookup:o,get:v,requireLangPack:E,add:M,remove:N,createUrl:B,load:U,waitFor:G}};Nr.languageLoad=!0,Nr.baseURL="",Nr.PluginManager=Nr(),Nr.ThemeManager=Nr(),Nr.ModelManager=Nr();const $m=(e,n)=>{let o=null;return{cancel:()=>{oe(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{oe(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},sb=(e,n)=>{let o=null;const r=()=>{oe(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},rb=(e,n,o)=>Is(e,n,o).isSome(),Im=Je("mce-annotation"),Xu=Je("data-mce-annotation"),bl=Je("data-mce-annotation-uid"),Fm=Je("data-mce-annotation-active"),Ju=Je("data-mce-annotation-classes"),Jl=Je("data-mce-annotation-attrs"),mf=e=>n=>kn(n,e),Th=(e,n)=>{const o=e.selection.getRng(),r=ee.fromDom(o.startContainer),c=ee.fromDom(e.getBody()),u=n.fold(()=>"."+Im(),w=>`[${Xu()}="${w}"]`),m=ya(r,o.startOffset).getOr(r);return Iu(m,u,mf(c)).bind(w=>dc(w,`${bl()}`).bind(E=>dc(w,`${Xu()}`).map(M=>{const N=sy(e,E);return{uid:E,name:M,elements:N}})))},ab=e=>wo(e)&&k1(e,Im()),ex=(e,n)=>fc(e,"data-mce-bogus")||rb(e,'[data-mce-bogus="all"]',mf(n)),sy=(e,n)=>{const o=ee.fromDom(e.getBody()),r=jr(o,`[${bl()}="${n}"]`);return Pt(r,c=>!ex(c,o))},Lm=(e,n)=>{const o=ee.fromDom(e.getBody()),r=jr(o,`[${Xu()}="${n}"]`),c={};return _e(r,u=>{if(!ex(u,o)){const m=aa(u,bl()),v=Co(c,m).getOr([]);c[m]=v.concat([u])}}),c},tx=(e,n)=>{const o=mo({}),r=()=>({listeners:[],previous:Qs()}),c=(N,B)=>{u(N,U=>(B(U),U))},u=(N,B)=>{const U=o.get(),G=Co(U,N).getOrThunk(r),W=B(G);U[N]=W,o.set(U)},m=(N,B,U)=>{c(N,G=>{_e(G.listeners,W=>W(!0,N,{uid:B,nodes:Yt(U,K=>K.dom)}))})},v=N=>{c(N,B=>{_e(B.listeners,U=>U(!1,N))})},w=(N,B)=>{_e(sy(e,N),U=>{B?ur(U,Fm(),"true"):$s(U,Fm())})},E=sb(()=>{const N=Lo(n.getNames());_e(N,B=>{u(B,U=>{const G=U.previous.get();return Th(e,L.some(B)).fold(()=>{G.each(W=>{v(B),U.previous.clear(),w(W,!1)})},({uid:W,name:K,elements:ne})=>{Xo(G,W)||(G.each(re=>w(re,!1)),m(K,W,ne),U.previous.set(W),w(W,!0))}),{previous:U.previous,listeners:U.listeners}})})},30);return e.on("remove",()=>{E.cancel()}),e.on("NodeChange",()=>{E.throttle()}),{addListener:(N,B)=>{u(N,U=>({previous:U.previous,listeners:U.listeners.concat([B])}))}}},Ok=(e,n)=>{const o=Xu(),r=u=>L.from(u.attr(o)).bind(n.lookup),c=u=>{var m,v;u.attr(bl(),null),u.attr(Xu(),null),u.attr(Fm(),null);const w=L.from(u.attr(Jl())).map(B=>B.split(",")).getOr([]),E=L.from(u.attr(Ju())).map(B=>B.split(",")).getOr([]);_e(w,B=>u.attr(B,null));const M=(v=(m=u.attr("class"))===null||m===void 0?void 0:m.split(" "))!==null&&v!==void 0?v:[],N=f1(M,[Im()].concat(E));u.attr("class",N.length>0?N.join(" "):null),u.attr(Ju(),null),u.attr(Jl(),null)};e.serializer.addTempAttr(Fm()),e.serializer.addAttributeFilter(o,u=>{for(const m of u)r(m).each(v=>{v.persistent===!1&&(m.name==="span"?m.unwrap():c(m))})})},cb=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>Co(e,c).map(u=>u.settings),getNames:()=>zr(e)}},ry=(e,n,o)=>Math.min(Math.max(e,n),o),kh=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let ay=0;const Hm=e=>{const o=new Date().getTime(),r=Math.floor(kh()*1e9);return ay++,e+"_"+r+ay+String(o)},RM=(e,n)=>{_e(n,o=>{Nu(e,o)})},DM=(e,n)=>{_e(n,o=>{pm(e,o)})},Vm=(e,n)=>ee.fromDom(e.dom.cloneNode(n)),Yc=e=>Vm(e,!1),Oh=e=>Vm(e,!0),nx=(e,n)=>{const o=ee.fromTag(n),r=E1(e);return Ur(o,r),o},ox=(e,n)=>{const o=nx(e,n);Si(e,o);const r=Js(e);return Fu(o,r),fo(e),o},sx=(e,n,o=Ne)=>{const r=new Ts(e,n),c=u=>{let m;do m=r[u]();while(m&&!Fe(m)&&!o(m));return L.from(m).filter(Fe)};return{current:()=>L.from(r.current()).filter(Fe),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},gf=(e,n)=>{const o=n||(m=>e.isBlock(m)||Bn(m)||$n(m)),r=(m,v,w,E)=>{if(Fe(m)){const M=E(m,v,m.data);if(M!==-1)return L.some({container:m,offset:M})}return w().bind(M=>r(M.container,M.offset,w,E))};return{backwards:(m,v,w,E)=>{const M=sx(m,E??e.getRoot(),o);return r(m,v,()=>M.prev().map(N=>({container:N,offset:N.length})),w).getOrNull()},forwards:(m,v,w,E)=>{const M=sx(m,E??e.getRoot(),o);return r(m,v,()=>M.next().map(N=>({container:N,offset:0})),w).getOrNull()}}},hf=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?L.from(u.dom.nodeValue):L.none();return{get:o,getOption:r,set:(u,m)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=m}}})(Xs,"text"),zm=e=>hf.get(e),rx=e=>hf.getOption(e),Um=(e,n)=>hf.set(e,n),Ak=["td","th"],cy=["thead","tbody","tfoot"],ax=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],cx=["li","dd","dt"],dr=["ul","ol","dl"],PM=["pre","script","textarea","style"],Qu=e=>{let n;return o=>(n=n||Bs(e,dt),It(n,Tn(o)))},Rk=e=>Tn(e)==="table",Ql=e=>wo(e)&&Tn(e)==="br",xa=Qu(ax),Mi=Qu(dr),pf=Qu(cx),ix=Qu(cy),Ah=Qu(Ak),ib=Qu(PM),ed=e=>{const n=[];let o=e.dom;for(;o;)n.push(ee.fromDom(o)),o=o.lastChild;return n},iy=e=>{const n=jr(e,"br"),o=Pt(ed(e).slice(-1),Ql);n.length===o.length&&_e(o,fo)},Pi=()=>{const e=ee.fromTag("br");return ur(e,"data-mce-bogus","1"),e},vl=e=>{Sm(e),Fs(e,Pi())},Dk=(e,n)=>{Cm(e).each(o=>{jl(o).each(r=>{n.isBlock(Tn(e))&&Ql(o)&&n.isBlock(Tn(r))&&fo(o)})})},Rs=lh,Rh=uh,bc=za,lb=e=>e.insertContent(Rs,{preserve_zwsp:!0}),ly=ot,bf=Fe,td=e=>(bf(e)&&(e=e.parentNode),ly(e)&&e.hasAttribute("data-mce-caret")),Xc=e=>bf(e)&&Rh(e.data),vc=e=>td(e)||Xc(e),lx=e=>e.firstChild!==e.lastChild||!Bn(e.firstChild),Mk=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Rs),u=e.parentNode;if(n){const m=e.previousSibling;if(bf(m)){if(vc(m))return m;if(Cr(m))return m.splitText(m.data.length-1)}u==null||u.insertBefore(c,e)}else{const m=e.nextSibling;if(bf(m)){if(vc(m))return m;if(xn(m))return m.splitText(1),m}e.nextSibling?u==null||u.insertBefore(c,e.nextSibling):u==null||u.appendChild(c)}return c},yl=e=>{const n=e.container();return Fe(n)?n.data.charAt(e.offset())===Rs||e.isAtStart()&&Xc(n.previousSibling):!1},eu=e=>{const n=e.container();return Fe(n)?n.data.charAt(e.offset()-1)===Rs||e.isAtEnd()&&Xc(n.nextSibling):!1},ub=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(Pi().dom);const m=n.parentNode;return o?m==null||m.insertBefore(u,n):n.nextSibling?m==null||m.insertBefore(u,n.nextSibling):m==null||m.appendChild(u),u},xn=e=>bf(e)&&e.data[0]===Rs,Cr=e=>bf(e)&&e.data[e.data.length-1]===Rs,vf=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];ql(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},Wm=e=>e&&e.hasAttribute("data-mce-caret")?(vf(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,so=e=>td(e.startContainer),yf=Math.round,tu=e=>e?{left:yf(e.left),top:yf(e.top),bottom:yf(e.bottom),right:yf(e.right),width:yf(e.width),height:yf(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},ux=(e,n)=>(e=tu(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Pk=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,dx=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,ro=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:dx(n.top-e.bottom,e,n)},Dh=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:dx(n.bottom-e.top,e,n),Nk=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,fx=e=>Ko(e,(n,o)=>n.fold(()=>L.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),m=Math.max(o.right,r.right),v=Math.max(o.bottom,r.bottom);return L.some({top:u,right:m,bottom:v,left:c,width:m-c,height:v-u})}),L.none()),Cf=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-c)*(o-c))},Jc=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),Mh=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},nu=(e,n)=>{if(ot(e)&&e.hasChildNodes()){const o=e.childNodes,r=ry(n,0,o.length-1);return o[r]}else return e},mt=(e,n)=>{if(!(n<0&&ot(e)&&e.hasChildNodes()))return nu(e,n)},mx=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),db=e=>Q(e)&&e.charCodeAt(0)>=768&&mx.test(e),gx=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},hx=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},uy=Oe,dy=$n,Zm=Bn,Ph=Fe,wf=Zc(["script","style","textarea"]),fb=Zc(["img","input","textarea","hr","iframe","video","audio","object","embed"]),jm=Zc(["table"]),mb=vc,Qc=e=>mb(e)?!1:Ph(e)?!wf(e.parentNode):fb(e)||Zm(e)||jm(e)||gb(e),Bk=e=>ot(e)&&e.getAttribute("unselectable")==="true",gb=e=>!Bk(e)&&dy(e),hb=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(gb(o))return!1;if(uy(o))return!0}return!0},$k=e=>gb(e)?!Ko(ha(e.getElementsByTagName("*")),(n,o)=>n||uy(o),!1):!1,Ik=e=>fb(e)||$k(e),px=(e,n)=>Qc(e)&&hb(e,n),Nh=ot,bx=Qc,fy=fh("display","block table"),Fk=fh("float","left right"),Bh=hx(Nh,bx,Io(Fk)),Gm=Io(fh("white-space","pre pre-line pre-wrap")),nd=Fe,pb=Bn,my=to.nodeIndex,bb=mt,gy=e=>e?e.createRange():to.DOM.createRng(),hy=e=>Q(e)&&/[\r\n\t ]/.test(e),py=e=>!!e.setStart&&!!e.setEnd,vx=e=>{const n=e.startContainer,o=e.startOffset;if(hy(e.toString())&&Gm(n.parentNode)&&Fe(n)){const r=n.data;if(hy(r[o-1])||hy(r[o+1]))return!0}return!1},Sa=e=>{const n=e.ownerDocument,o=gy(n),r=n.createTextNode(ks),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=tu(o.getBoundingClientRect());return c.removeChild(r),u},xf=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(n===o&&Fe(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),od(u)}else return null},yx=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,od=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=tu(r[0]):o=tu(e.getBoundingClientRect()),!py(e)&&pb(e)&&yx(o)?Sa(e):yx(o)&&py(e)&&(n=xf(e))!==null&&n!==void 0?n:o},Sf=(e,n)=>{const o=ux(e,n);return o.width=1,o.right=o.left+1,o},by=e=>{const n=[],o=m=>{m.height!==0&&(n.length>0&&Pk(m,n[n.length-1])||n.push(m))},r=(m,v)=>{const w=gy(m.ownerDocument);if(v<m.data.length){if(db(m.data[v]))return;if(db(m.data[v-1])&&(w.setStart(m,v),w.setEnd(m,v+1),!vx(w))){o(Sf(od(w),!1));return}}v>0&&(w.setStart(m,v-1),w.setEnd(m,v),vx(w)||o(Sf(od(w),!1))),v<m.data.length&&(w.setStart(m,v),w.setEnd(m,v+1),vx(w)||o(Sf(od(w),!0)))},c=e.container(),u=e.offset();if(nd(c))return r(c,u),n;if(Nh(c))if(e.isAtEnd()){const m=bb(c,u);nd(m)&&r(m,m.data.length),Bh(m)&&!pb(m)&&o(Sf(od(m),!1))}else{const m=bb(c,u);if(nd(m)&&r(m,0),Bh(m)&&e.isAtEnd())return o(Sf(od(m),!1)),n;const v=bb(e.container(),e.offset()-1);Bh(v)&&!pb(v)&&(fy(v)||fy(m)||!Bh(m))&&o(Sf(od(v),!1)),Bh(m)&&o(Sf(od(m),!0))}return n},xe=(e,n,o)=>{const r=()=>(nd(e),n===0),c=()=>nd(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const M=gy(e.ownerDocument);return M.setStart(e,n),M.setEnd(e,n),M},m=()=>(o||(o=by(xe(e,n))),o),v=()=>m().length>0,w=M=>M&&e===M.container()&&n===M.offset(),E=M=>bb(e,M?n-1:n);return{container:Je(e),offset:Je(n),toRange:u,getClientRects:m,isVisible:v,isAtStart:r,isAtEnd:c,isEqual:w,getNode:E}};xe.fromRangeStart=e=>xe(e.startContainer,e.startOffset),xe.fromRangeEnd=e=>xe(e.endContainer,e.endOffset),xe.after=e=>xe(e.parentNode,my(e)+1),xe.before=e=>xe(e.parentNode,my(e)),xe.isAbove=(e,n)=>Qt(Ar(n.getClientRects()),Hl(e.getClientRects()),ro).getOr(!1),xe.isBelow=(e,n)=>Qt(Hl(n.getClientRects()),Ar(e.getClientRects()),Dh).getOr(!1),xe.isAtStart=e=>e?e.isAtStart():!1,xe.isAtEnd=e=>e?e.isAtEnd():!1,xe.isTextPosition=e=>e?Fe(e.container()):!1,xe.isElementPosition=e=>!xe.isTextPosition(e);const ei=(e,n)=>{Fe(n)&&n.data.length===0&&e.remove(n)},Ef=(e,n,o)=>{n.insertNode(o),ei(e,o.previousSibling),ei(e,o.nextSibling)},Lk=(e,n,o)=>{const r=L.from(o.firstChild),c=L.from(o.lastChild);n.insertNode(o),r.each(u=>ei(e,u.previousSibling)),c.each(u=>ei(e,u.nextSibling))},$h=(e,n,o)=>{Ls(o)?Lk(e,n,o):Ef(e,n,o)},yc=Fe,qm=ql,Cx=to.nodeIndex,wx=e=>{const n=e.parentNode;return qm(n)?wx(n):n},wr=e=>e?Ba(e.childNodes,(n,o)=>(qm(o)&&o.nodeName!=="BR"?n=n.concat(wr(o)):n.push(o),n),[]):[],vb=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&yc(o);)n+=o.data.length;return n},xx=e=>n=>e===n,Hk=e=>{let n,o;n=wr(wx(e)),o=Mo(n,xx(e),e),n=n.slice(0,o+1);const r=Ba(n,(c,u,m)=>(yc(u)&&yc(n[m-1])&&c++,c),0);return n=h1(n,Zc([e.nodeName])),o=Mo(n,xx(e),e),o-r},Sx=e=>(yc(e)?"text()":e.nodeName.toLowerCase())+"["+Hk(e)+"]",Vk=(e,n,o)=>{const r=[];for(let c=n.parentNode;c&&c!==e;c=c.parentNode)r.push(c);return r},Ex=(e,n)=>{let o=[],r=n.container(),c=n.offset(),u;if(yc(r))u=vb(r,c);else{const v=r.childNodes;c>=v.length?(u="after",c=v.length-1):u="before",r=v[c]}o.push(Sx(r));let m=Vk(e,r);return m=h1(m,Io(ql)),o=o.concat(ol(m,v=>Sx(v))),o.reverse().join("/")+","+u},zk=(e,n,o)=>{let r=wr(e);return r=h1(r,(c,u)=>!yc(c)||!yc(r[u-1])),r=h1(r,Zc([n])),r[o]},Uk=(e,n)=>{let o=e,r=0;for(;yc(o);){const c=o.data.length;if(n>=r&&n<=r+c){e=o,n=n-r;break}if(!yc(o.nextSibling)){e=o,n=c;break}r+=c,o=o.nextSibling}return yc(e)&&n>e.data.length&&(n=e.data.length),xe(e,n)},_x=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=Ba(r,(m,v)=>{const w=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(v);return w?(w[1]==="text()"&&(w[1]="#text"),zk(m,w[1],parseInt(w[2],10))):null},e);if(!u)return null;if(!yc(u)&&u.parentNode){let m;return c==="after"?m=Cx(u)+1:m=Cx(u),xe(u.parentNode,m)}return Uk(u,parseInt(c,10))},Km=$n,Wk=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let c=n.previousSibling;c&&Fe(c);c=c.previousSibling)r+=e(c.data).length;return r},Tx=(e,n,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let m=c?r.startOffset:r.endOffset;const v=[],w=e.getRoot();if(Fe(u))v.push(o?Wk(n,u,m):m);else{let E=0;const M=u.childNodes;m>=M.length&&M.length&&(E=1,m=Math.max(0,M.length-1)),v.push(e.nodeIndex(M[m],o)+E)}for(let E=u;E&&E!==w;E=E.parentNode)v.push(e.nodeIndex(E,o));return v},Zk=(e,n,o,r)=>{const c=n.dom,u=Tx(c,e,o,r,!0),m=n.isForward(),v=so(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:m,...v};{const w=Tx(c,e,o,r,!1);return{start:u,end:w,forward:m,...v}}},_o=(e,n,o)=>{let r=0;return We.each(e.select(n),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},vy=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(ot(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(n?r:r-1,c.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},kx=e=>(vy(e,!0),vy(e,!1),e),Ox=(e,n)=>{if(ot(e)&&(e=nu(e,n),Km(e)))return e;if(vc(e)){Fe(e)&&td(e)&&(e=e.parentNode);let o=e.previousSibling;if(Km(o)||(o=e.nextSibling,Km(o)))return o}},yy=e=>Ox(e.startContainer,e.startOffset)||Ox(e.endContainer,e.endOffset),Ds=(e,n,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||Km(r)){const m=r.nodeName;return{name:m,index:_o(o.dom,m,r)}}const u=yy(c);if(u){const m=u.tagName;return{name:m,index:_o(o.dom,m,u)}}return Zk(e,o,n,c)},Ga=e=>{const n=e.getRng();return{start:Ex(e.dom.getRoot(),xe.fromRangeStart(n)),end:Ex(e.dom.getRoot(),xe.fromRangeEnd(n)),forward:e.isForward()}},Ax=e=>({rng:e.getRng(),forward:e.isForward()}),Cy=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},wy=(e,n)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),m=e.getNode(),v=m.nodeName,w=e.isForward();if(v==="IMG")return{name:v,index:_o(o,v,m)};const E=kx(r.cloneRange());if(!u){E.collapse(!1);const N=Cy(o,c+"_end",n);$h(o,E,N)}r=kx(r),r.collapse(!0);const M=Cy(o,c+"_start",n);return $h(o,r,M),e.moveToBookmark({id:c,keep:!0,forward:w}),{id:c,forward:w}},jk=(e,n,o=!1)=>n===2?Ds(bc,o,e):n===3?Ga(e):n?Ax(e):wy(e,!1),yb=Le(Ds,qo,!0),Rx=e=>{const n=u=>u(e),o=Je(e),r=()=>c,c={tag:!0,inner:e,fold:(u,m)=>m(e),isValue:dt,isError:Ne,map:u=>bs.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>L.some(e)};return c},Ih=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:Ne,isError:dt,map:n,mapError:r=>bs.error(r(e)),bind:n,exists:Ne,forall:dt,getOr:qo,or:qo,getOrThunk:ls,orThunk:ls,getOrDie:ma(String(e)),each:Dt,toOptional:L.none};return o},bs={value:Rx,error:Ih,fromOption:(e,n)=>e.fold(()=>Ih(n),Rx)},Cc={generate:e=>{if(!ln(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return _e(e,(r,c)=>{const u=zr(r);if(u.length!==1)throw new Error("one and only one name per case");const m=u[0],v=r[m];if(o[m]!==void 0)throw new Error("duplicate key detected:"+m);if(m==="cata")throw new Error("cannot have a case named cata (sorry)");if(!ln(v))throw new Error("case arguments must be an array");n.push(m),o[m]=(...w)=>{const E=w.length;if(E!==v.length)throw new Error("Wrong number of arguments to case "+m+". Expected "+v.length+" ("+v+"), got "+E);return{fold:(...N)=>{if(N.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+N.length);return N[c].apply(null,w)},match:N=>{const B=zr(N);if(n.length!==B.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+B.join(","));if(!ir(n,G=>Zt(B,G)))throw new Error("Not all branches were specified when using match. Specified: "+B.join(", ")+`
Required: `+n.join(", "));return N[m].apply(null,w)},log:N=>{console.log(N,{constructors:n,constructor:m,params:w})}}}}),o}};Cc.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const bo=e=>{const n=[],o=[];return _e(e,r=>{r.fold(c=>{n.push(c)},c=>{o.push(c)})}),{errors:n,values:o}},Cl=e=>e.type==="inline-command"||e.type==="inline-format",Ym=e=>e.type==="block-command"||e.type==="block-format",xy=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,Fh=e=>{var n;const o=c=>bs.error({message:c,pattern:e}),r=(c,u,m)=>{if(e.format!==void 0){let v;if(ln(e.format)){if(!ir(e.format,Q))return o(c+" pattern has non-string items in the `format` array");v=e.format}else if(Q(e.format))v=[e.format];else return o(c+" pattern has non-string `format` parameter");return bs.value(u(v))}else return e.cmd!==void 0?Q(e.cmd)?bs.value(m(e.cmd,e.value)):o(c+" pattern has non-string `cmd` parameter"):o(c+" pattern is missing both `format` and `cmd` parameters")};if(!Kt(e))return o("Raw pattern is not an object");if(!Q(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!Q(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let c=e.start,u=e.end;return u.length===0&&(u=c,c=""),r("Inline",m=>({type:"inline-format",start:c,end:u,format:m}),(m,v)=>({type:"inline-command",start:c,end:u,cmd:m,value:v}))}else{if(e.replacement!==void 0)return Q(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):bs.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const c=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",u=>({type:"block-format",start:e.start,format:u[0],trigger:c}),(u,m)=>({type:"block-command",start:e.start,cmd:u,value:m,trigger:c}))}}},Mx=e=>Pt(e,Ym),sd=e=>Pt(e,Cl),fr=(e,n)=>({inlinePatterns:sd(e),blockPatterns:Mx(e),dynamicPatternsLookup:n}),wl=(e,n)=>({...e,blockPatterns:Pt(e.blockPatterns,o=>xy(o,n))}),Px=e=>{const n=bo(Yt(e,Fh));return _e(n.errors,o=>console.error(o.message,o.pattern)),n.values},qk=e=>n=>{const o=e(n);return Px(o)},Sy=rl().deviceType,Cb=Sy.isTouch(),Ey=to.DOM,_y=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Ko(n,(o,r)=>{const c=r.split("="),u=c[0],m=c.length>1?c[1]:u;return o[Id(u)]=Id(m),o},{})},wb=e=>En(e,RegExp),gt=e=>n=>n.options.get(e),Lh=e=>Q(e)||Kt(e),Ty=(e,n="")=>o=>{const r=Q(o);if(r)if(o.indexOf("=")!==-1){const c=_y(o);return{value:Co(c,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},Nx=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:Ty(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:Ty(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=Q(o)&&oo(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=Zt(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>rn(o)?{valid:!0,value:o}:Q(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||Q(o)||jn(o,Q);return r?Q(o)?{value:Yt(o.split(","),Id),valid:r}:ln(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Of(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=Q(o)||jn(o,Q);return r?{value:ln(o)?o:Yt(o.split(","),Id),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=rn(o)||Q(o);return r?o===!1||Sy.isiPhone()||Sy.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!Cb}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||Q(o)||se(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||Q(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("allow_mathml_annotation_encodings",{processor:o=>{const r=jn(o,Q);return r?{value:o,valid:r}:{valid:!1,message:"Must be an array of strings."}},default:[]}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:Lh}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:Lh}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:Lh}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:Lh}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>Q(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>jn(o,Kt)||o===!1?{value:Px(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>se(o)?{value:qk(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>jn(o,wb)?{value:o,valid:!0}:wb(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=Zt(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=Zt(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:Di.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:Ey.getAttrib(e.getElement(),"placeholder")})})},Kk=gt("iframe_attrs"),mr=gt("doctype"),Bx=gt("document_base_url"),rd=gt("body_id"),$x=gt("body_class"),ky=gt("content_security_policy"),Ix=gt("br_in_pre"),gr=gt("forced_root_block"),ad=gt("forced_root_block_attrs"),Oy=gt("newline_behavior"),_f=gt("br_newline_selector"),Yk=gt("no_newline_selector"),vs=gt("keep_styles"),ys=gt("end_container_on_empty_block"),or=gt("automatic_uploads"),Cs=gt("images_reuse_filename"),Ln=gt("images_replace_blob_uris"),ds=gt("icons"),xb=gt("icons_url"),Ay=gt("images_upload_url"),Ry=gt("images_upload_base_path"),Dy=gt("images_upload_credentials"),Fx=gt("images_upload_handler"),Lx=gt("content_css_cors"),Hh=gt("referrer_policy"),Sb=gt("language"),Vh=gt("language_url"),Hx=gt("indent_use_margin"),NM=gt("indentation"),Tf=gt("content_css"),Ea=gt("content_style"),Xk=gt("font_css"),Jk=gt("directionality"),wc=gt("inline_boundaries_selector"),Xm=gt("object_resizing"),kf=gt("resize_img_proportional"),xl=gt("placeholder"),Br=gt("event_root"),My=gt("service_message"),cd=gt("theme"),Vx=gt("theme_url"),Eb=gt("model"),Py=gt("model_url"),zh=gt("inline_boundaries"),_b=gt("formats"),zx=gt("preview_styles"),Ux=gt("format_empty_lines"),Wx=gt("format_noneditable_selector"),Uh=gt("custom_ui_selector"),Of=gt("inline"),Wh=gt("hidden_input"),Qk=gt("submit_patch"),Ny=gt("add_form_submit_trigger"),e4=gt("add_unload_trigger"),Tb=gt("custom_undo_redo_levels"),t4=gt("disable_nodechange"),Zx=gt("readonly"),n4=gt("editable_root"),jx=gt("content_css_cors"),Zh=gt("plugins"),Gx=gt("external_plugins"),Kr=gt("block_unsupported_drop"),By=gt("visual"),qx=gt("visual_table_class"),$y=gt("visual_anchor_class"),jh=gt("iframe_aria_text"),o4=gt("setup"),s4=gt("init_instance_callback"),r4=gt("urlconverter_callback"),kb=gt("auto_focus"),Kx=gt("browser_spellcheck"),Iy=gt("protect"),Fy=gt("paste_block_drop"),Gh=gt("paste_data_images"),Ly=gt("paste_preprocess"),Yx=gt("paste_postprocess"),Xx=gt("newdocument_content"),Jx=gt("paste_webkit_styles"),a4=gt("paste_remove_styles_if_webkit"),Qx=gt("paste_merge_formats"),Hy=gt("smart_paste"),eS=gt("paste_as_text"),id=gt("paste_tab_spaces"),tS=gt("allow_html_data_urls"),c4=gt("text_patterns"),i4=gt("text_patterns_lookup"),Ob=gt("noneditable_class"),ti=gt("editable_class"),Ab=gt("noneditable_regexp"),Rb=gt("preserve_cdata"),Vy=gt("highlight_on_focus"),nS=gt("xss_sanitization"),fs=gt("init_content_sync"),oS=e=>e.options.isSet("text_patterns_lookup"),Jm=e=>We.explode(e.options.get("font_size_style_values")),ld=e=>We.explode(e.options.get("font_size_classes")),Db=e=>e.options.get("encoding")==="xml",sS=e=>We.explode(e.options.get("images_file_types")),l4=gt("table_tab_navigation"),u4=gt("details_initial_state"),rS=gt("details_serialized_state"),qh=gt("sandbox_iframes"),zy=e=>e.options.get("sandbox_iframes_exclusions"),d4=gt("convert_unsafe_embeds"),Qm=gt("license_key"),aS=gt("api_key"),cS=ot,iS=Fe,Uy=e=>{const n=e.parentNode;n&&n.removeChild(e)},Mb=e=>{const n=bc(e);return{count:e.length-n.length,text:n}},lS=e=>{let n;for(;(n=e.data.lastIndexOf(Rs))!==-1;)e.deleteData(n,1)},ud=(e,n)=>(Af(e),n),f4=(e,n)=>{const o=Mb(e.data.substr(0,n.offset())),r=Mb(e.data.substr(n.offset()));return(o.text+r.text).length>0?(lS(e),xe(e,n.offset()-o.count)):n},uS=(e,n)=>{const o=n.container(),r=tk(ha(o.childNodes),e).map(c=>c<n.offset()?xe(o,n.offset()-1):n).getOr(n);return Af(e),r},dS=(e,n)=>iS(e)&&n.container()===e?f4(e,n):ud(e,n),Pb=(e,n)=>n.container()===e.parentNode?uS(e,n):ud(e,n),m4=(e,n)=>xe.isTextPosition(n)?dS(e,n):Pb(e,n),Af=e=>{cS(e)&&vc(e)&&(lx(e)?e.removeAttribute("data-mce-caret"):Uy(e)),iS(e)&&(lS(e),e.data.length===0&&Uy(e))},Nb=$n,Kh=yr,fS=F1,eg="*[contentEditable=false],video,audio,embed,object",tg=(e,n,o)=>{const r=ux(n.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const v=e.ownerDocument.documentElement;c=e.scrollLeft||v.scrollLeft,u=e.scrollTop||v.scrollTop}else{const v=e.getBoundingClientRect();c=e.scrollLeft-v.left,u=e.scrollTop-v.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let m=n.offsetWidth-n.clientWidth;return m>0&&(o&&(m*=-1),r.left+=m,r.right+=m),r},g4=e=>{var n,o;const r=jr(ee.fromDom(e),eg);for(let c=0;c<r.length;c++){const u=r[c].dom;let m=u.previousSibling;if(Cr(m)){const v=m.data;v.length===1?(n=m.parentNode)===null||n===void 0||n.removeChild(m):m.deleteData(v.length-1,1)}m=u.nextSibling,xn(m)&&(m.data.length===1?(o=m.parentNode)===null||o===void 0||o.removeChild(m):m.deleteData(0,1))}},mS=(e,n,o,r)=>{const c=Qs();let u,m;const v=gr(e),w=e.dom,E=(W,K)=>{let ne;if(M(),fS(K))return null;if(o(K)){const re=ub(v,K,W),le=tg(n,K,W);w.setStyle(re,"top",le.top),w.setStyle(re,"caret-color","transparent"),m=re;const de=w.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});w.setStyles(de,{...le}),w.add(n,de),c.set({caret:de,element:K,before:W}),W&&w.addClass(de,"mce-visual-caret-before"),N(),ne=K.ownerDocument.createRange(),ne.setStart(re,0),ne.setEnd(re,0)}else return m=Mk(K,W),ne=K.ownerDocument.createRange(),Rf(m.nextSibling)?(ne.setStart(m,0),ne.setEnd(m,0)):(ne.setStart(m,1),ne.setEnd(m,1)),ne;return ne},M=()=>{g4(n),m&&(Af(m),m=null),c.on(W=>{w.remove(W.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},N=()=>{u=setInterval(()=>{c.on(W=>{r()?w.toggleClass(W.caret,"mce-visual-caret-hidden"):w.addClass(W.caret,"mce-visual-caret-hidden")})},500)};return{show:E,hide:M,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{c.on(W=>{const K=tg(n,W.element,W.before);w.setStyles(W.caret,{...K})})},destroy:()=>clearInterval(u)}},h4=()=>Jt.browser.isFirefox(),Rf=e=>Nb(e)||Kh(e),ng=e=>(Rf(e)||Ei(e)&&h4())&&oh(ee.fromDom(e)).exists(gc),Wy=Oe,Zy=$n,p4=yr,jy=fh("display","block table table-cell table-row table-caption list-item"),gS=vc,hS=td,og=ot,pS=Fe,Bb=Qc,dd=e=>e>0,ou=e=>e<0,Yh=(e,n)=>{let o;for(;o=e(n);)if(!hS(o))return o;return null},Xh=(e,n,o,r,c)=>{const u=new Ts(e,r),m=Zy(e)||hS(e);let v;if(ou(n)){if(m&&(v=Yh(u.prev.bind(u),!0),o(v)))return v;for(;v=Yh(u.prev.bind(u),c);)if(o(v))return v}if(dd(n)){if(m&&(v=Yh(u.next.bind(u),!0),o(v)))return v;for(;v=Yh(u.next.bind(u),c);)if(o(v))return v}return null},b4=(e,n)=>{const o=c=>Wy(c.dom),r=c=>c.dom===n;return ko(ee.fromDom(e),o,r).map(c=>c.dom).getOr(n)},_a=(e,n)=>{for(;e&&e!==n;){if(jy(e))return e;e=e.parentNode}return null},Ni=(e,n,o)=>_a(e.container(),o)===_a(n.container(),o),Gy=(e,n)=>{if(!n)return L.none();const o=n.container(),r=n.offset();return og(o)?L.from(o.childNodes[r+e]):L.none()},v4=(e,n)=>{var o;const c=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)),c},BM=(e,n,o)=>_a(n,e)===_a(o,e),fd=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==n;){let u=c[r];if(u&&gS(u)&&(u=u[r]),Zy(u)||p4(u)){if(BM(n,u,c))return u;break}if(Bb(u))break;c=c.parentNode}return null},sg=Le(v4,!0),sr=Le(v4,!1),qy=(e,n,o)=>{let r;const c=Le(fd,!0,n),u=Le(fd,!1,n),m=o.startContainer,v=o.startOffset;if(td(m)){const w=pS(m)?m.parentNode:m,E=w.getAttribute("data-mce-caret");if(E==="before"&&(r=w.nextSibling,ng(r)))return sg(r);if(E==="after"&&(r=w.previousSibling,ng(r)))return sr(r)}if(!o.collapsed)return o;if(Fe(m)){if(gS(m)){if(e===1){if(r=u(m),r)return sg(r);if(r=c(m),r)return sr(r)}if(e===-1){if(r=c(m),r)return sr(r);if(r=u(m),r)return sg(r)}return o}if(Cr(m)&&v>=m.data.length-1)return e===1&&(r=u(m),r)?sg(r):o;if(xn(m)&&v<=1)return e===-1&&(r=c(m),r)?sr(r):o;if(v===m.data.length)return r=u(m),r?sg(r):o;if(v===0)return r=c(m),r?sr(r):o}return o},$b=(e,n)=>Gy(e?0:-1,n).filter(Zy),Df=(e,n,o)=>{const r=qy(e,n,o);return e===-1?xe.fromRangeStart(r):xe.fromRangeEnd(r)},Jh=e=>L.from(e.getNode()).map(ee.fromDom),y4=e=>L.from(e.getNode(!0)).map(ee.fromDom),Ky=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},Qh=(e,n)=>{const o=Ni(e,n);return!o&&Bn(e.getNode())?!0:o};var rr;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(rr||(rr={}));const Yy=$n,xc=Fe,Xy=ot,rg=Bn,ag=Qc,Jy=Ik,su=px,Qy=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},e2=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,t2=(e,n)=>{if(dd(e)){if(ag(n.previousSibling)&&!xc(n.previousSibling))return xe.before(n);if(xc(n))return xe(n,0)}if(ou(e)){if(ag(n.nextSibling)&&!xc(n.nextSibling))return xe.after(n);if(xc(n))return xe(n,n.data.length)}return ou(e)?rg(n)?xe.before(n):xe.after(n):xe.before(n)},Sl=(e,n)=>{const o=n.nextSibling;return o&&ag(o)?xc(o)?xe(o,0):xe.before(o):Ib(rr.Forwards,xe.after(n),e)},Ib=(e,n,o)=>{let r,c,u,m;if(!Xy(o)||!n)return null;if(n.isEqual(xe.after(o))&&o.lastChild){if(m=xe.after(o.lastChild),ou(e)&&ag(o.lastChild)&&Xy(o.lastChild))return rg(o.lastChild)?xe.before(o.lastChild):m}else m=n;const v=m.container();let w=m.offset();if(xc(v)){if(ou(e)&&w>0)return xe(v,--w);if(dd(e)&&w<v.length)return xe(v,++w);r=v}else{if(ou(e)&&w>0&&(c=e2(v,w-1),ag(c)))return!Jy(c)&&(u=Xh(c,e,su,c),u)?xc(u)?xe(u,u.data.length):xe.after(u):xc(c)?xe(c,c.data.length):xe.before(c);if(dd(e)&&w<v.childNodes.length&&(c=e2(v,w),ag(c)))return rg(c)?Sl(o,c):!Jy(c)&&(u=Xh(c,e,su,c),u)?xc(u)?xe(u,0):xe.before(u):xc(c)?xe(c,0):xe.after(c);r=c||m.getNode()}if(r&&(dd(e)&&m.isAtEnd()||ou(e)&&m.isAtStart())&&(r=Xh(r,e,dt,o,!0),su(r,o)))return t2(e,r);c=r&&Xh(r,e,su,o);const E=Bc(Pt(Qy(v,o),Yy));return E&&(!c||!E.contains(c))?(dd(e)?m=xe.after(E):m=xe.before(E),m):c?t2(e,c):null},hr=e=>({next:n=>Ib(rr.Forwards,n,e),prev:n=>Ib(rr.Backwards,n,e)}),bS=(e,n,o)=>{const r=e?xe.before(o):xe.after(o);return qa(e,n,r)},n2=e=>Bn(e)?xe.before(e):xe.after(e),o2=e=>xe.isTextPosition(e)?e.offset()===0:Qc(e.getNode()),vS=e=>{if(xe.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return Qc(e.getNode(!0))},s2=(e,n)=>!xe.isTextPosition(e)&&!xe.isTextPosition(n)&&e.getNode()===n.getNode(!0),yS=e=>!xe.isTextPosition(e)&&Bn(e.getNode()),CS=(e,n,o)=>e?!s2(n,o)&&!yS(n)&&vS(n)&&o2(o):!s2(o,n)&&o2(n)&&vS(o),qa=(e,n,o)=>{const r=hr(n);return L.from(e?r.next(o):r.prev(o))},md=(e,n,o)=>qa(e,n,o).bind(r=>Ni(o,r,n)&&CS(e,o,r)?qa(e,n,r):L.some(r)),wS=(e,n,o,r)=>md(e,n,o).bind(c=>r(c)?wS(e,n,c,r):L.some(c)),Mf=(e,n)=>{const o=e?n.firstChild:n.lastChild;return Fe(o)?L.some(xe(o,e?0:o.data.length)):o?Qc(o)?L.some(e?xe.before(o):n2(o)):bS(e,n,o):L.none()},$r=Le(qa,!0),Ta=Le(qa,!1),Ir=Le(Mf,!0),Ka=Le(Mf,!1),Fb="_mce_caret",Ya=e=>ot(e)&&e.id===Fb,Pf=(e,n)=>{let o=n;for(;o&&o!==e;){if(Ya(o))return o;o=o.parentNode}return null},xS=e=>Q(e.start),$M=e=>It(e,"rng"),C4=e=>It(e,"id"),r2=e=>It(e,"name"),w4=e=>We.isArray(e.start),Lb=e=>!r2(e)&&rn(e.forward)?e.forward:!0,ar=(e,n)=>(ot(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),ep=(e,n)=>{const o=L.from(_x(e.getRoot(),n.start)),r=L.from(_x(e.getRoot(),n.end));return Qt(o,r,(c,u)=>{const m=e.createRng();return m.setStart(c.container(),c.offset()),m.setEnd(u.container(),u.offset()),{range:m,forward:Lb(n)}})},tp=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Rs);e.appendChild(c),n.setStart(c,0),n.setEnd(c,0)},gd=e=>!e.hasChildNodes(),a2=(e,n)=>Ka(e).fold(Ne,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),Hb=(e,n,o)=>gd(n)&&Pf(e,n)?(tp(n,o),!0):!1,c2=(e,n,o,r)=>{const c=o[n?"start":"end"],u=e.getRoot();if(c){let m=u,v=c[0];for(let w=c.length-1;m&&w>=1;w--){const E=m.childNodes;if(Hb(u,m,r))return!0;if(c[w]>E.length-1)return Hb(u,m,r)?!0:a2(m,r);m=E[c[w]]}Fe(m)&&(v=Math.min(c[0],m.data.length)),ot(m)&&(v=Math.min(c[0],m.childNodes.length)),n?r.setStart(m,v):r.setEnd(m,v)}return!0},Vb=e=>Fe(e)&&e.data.length>0,i2=(e,n,o)=>{const r=e.get(o.id+"_"+n),c=r==null?void 0:r.parentNode,u=o.keep;if(r&&c){let m,v;if(n==="start"?u?r.hasChildNodes()?(m=r.firstChild,v=1):Vb(r.nextSibling)?(m=r.nextSibling,v=0):Vb(r.previousSibling)?(m=r.previousSibling,v=r.previousSibling.data.length):(m=c,v=e.nodeIndex(r)+1):(m=c,v=e.nodeIndex(r)):u?r.hasChildNodes()?(m=r.firstChild,v=1):Vb(r.previousSibling)?(m=r.previousSibling,v=r.previousSibling.data.length):(m=c,v=e.nodeIndex(r)):(m=c,v=e.nodeIndex(r)),!u){const w=r.previousSibling,E=r.nextSibling;We.each(We.grep(r.childNodes),N=>{Fe(N)&&(N.data=N.data.replace(/\uFEFF/g,""))});let M;for(;M=e.get(o.id+"_"+n);)e.remove(M,!0);if(Fe(E)&&Fe(w)&&!Jt.browser.isOpera()){const N=w.data.length;w.appendData(E.data),e.remove(E),m=w,v=N}}return L.some(xe(m,v))}else return L.none()},cg=(e,n)=>{const o=e.createRng();return c2(e,!0,n,o)&&c2(e,!1,n,o)?L.some({range:o,forward:Lb(n)}):L.none()},ru=(e,n)=>{const o=i2(e,"start",n),r=i2(e,"end",n);return Qt(o,r.or(o),(c,u)=>{const m=e.createRng();return m.setStart(ar(e,c.container()),c.offset()),m.setEnd(ar(e,u.container()),u.offset()),{range:m,forward:Lb(n)}})},np=(e,n)=>L.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),Nf=(e,n)=>{const o=e.dom;if(n){if(w4(n))return cg(o,n);if(xS(n))return ep(o,n);if(C4(n))return ru(o,n);if(r2(n))return np(o,n);if($M(n))return L.some({range:n.rng,forward:Lb(n)})}return L.none()},au=(e,n,o)=>jk(e,n,o),SS=(e,n)=>{Nf(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},ka=e=>ot(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",hd=(e=>n=>e===n)(ks),Bf=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,zb=e=>!Bf(e)&&!hd(e)&&!uh(e),Ub=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},x4=e=>ic(e,n=>{const o=Mh(n);return o?[ee.fromDom(o)]:[]}),S4=e=>Ub(e).length>1,ES=e=>Pt(x4(e),Ah),_S=e=>jr(e,"td[data-mce-selected],th[data-mce-selected]"),$f=(e,n)=>{const o=_S(n);return o.length>0?o:ES(e)},ig=e=>$f(Ub(e.selection.getSel()),ee.fromDom(e.getBody())),op=(e,n)=>Is(e,"table",n),E4=e=>{const n=e.startContainer,o=e.startOffset;return Fe(n)?o===0?L.some(ee.fromDom(n)):L.none():L.from(n.childNodes[o]).map(ee.fromDom)},TS=e=>{const n=e.endContainer,o=e.endOffset;return Fe(n)?o===n.data.length?L.some(ee.fromDom(n)):L.none():L.from(n.childNodes[o-1]).map(ee.fromDom)},sp=e=>Zr(e).fold(Je([e]),n=>[e].concat(sp(n))),Wb=e=>Cm(e).fold(Je([e]),n=>Tn(n)==="br"?jl(n).map(o=>[e].concat(Wb(o))).getOr([]):[e].concat(Wb(n))),u2=(e,n)=>Qt(E4(n),TS(n),(o,r)=>{const c=us(sp(e),Le(kn,o)),u=us(Wb(e),Le(kn,r));return c.isSome()&&u.isSome()}).getOr(!1),kS=(e,n,o,r)=>{const c=o,u=new Ts(o,c),m=To(e.schema.getMoveCaretBeforeOnEnterElements(),(w,E)=>!Zt(["td","th","table"],E.toLowerCase()));let v=o;do{if(Fe(v)&&We.trim(v.data).length!==0){r?n.setStart(v,0):n.setEnd(v,v.data.length);return}if(m[v.nodeName]){r?n.setStartBefore(v):v.nodeName==="BR"?n.setEndBefore(v):n.setEndAfter(v);return}}while(v=r?u.next():u.prev());c.nodeName==="BODY"&&(r?n.setStart(c,0):n.setEnd(c,c.childNodes.length))},Zb=e=>{const n=e.selection.getSel();return De(n)&&n.rangeCount>0},lg=(e,n)=>{const o=ig(e);o.length>0?_e(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),n(u,!0)}):n(e.selection.getRng(),!1)},OS=(e,n,o)=>{const r=wy(e,n);o(r),e.moveToBookmark(r)},If=e=>fa(e==null?void 0:e.nodeType),_n=e=>ot(e)&&!ka(e)&&!Ya(e)&&!ql(e),cu=(e,n)=>{if(_n(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},pd=(e,n,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),m=$n(u);OS(r,!0,()=>{n()}),m&&$n(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&jb(c,r)},jb=(e,n)=>{var o,r;const c=n.getRng(),{startContainer:u,startOffset:m}=c,v=n.getNode();if(!cu(e,v)&&ot(u)){const w=u.childNodes,E=e.getRoot();let M;if(m<w.length){const N=w[m];M=new Ts(N,(o=e.getParent(N,e.isBlock))!==null&&o!==void 0?o:E)}else{const N=w[w.length-1];M=new Ts(N,(r=e.getParent(N,e.isBlock))!==null&&r!==void 0?r:E),M.next(!0)}for(let N=M.current();N;N=M.next()){if(e.getContentEditable(N)==="false")return;if(Fe(N)&&!ap(N)){c.setStart(N,0),n.setRng(c);return}}}},d2=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(ot(e)||!ap(e))return e}},rp=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||tf(e,n),Ff=(e,n,o)=>e.schema.isValidChild(n,o),ap=(e,n=!1)=>{if(De(e)&&Fe(e)){const o=n?e.data.replace(/ /g," "):e.data;return zc(o)}else return!1},Gb=e=>De(e)&&Fe(e)&&e.length===0,AS=(e,n)=>{const o="[data-mce-cef-wrappable]",r=Wx(e),c=$a(r)?o:`${o},${r}`;return Ha(ee.fromDom(n),c)},_4=(e,n)=>{const o=e.dom;return _n(n)&&o.getContentEditable(n)==="false"&&AS(e,n)&&o.select('[contenteditable="true"]',n).length===0},Lf=(e,n)=>se(e)?e(n):(De(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),qb=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),bd=(e,n)=>{if(An(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=Eh(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},f2=(e,n,o)=>{const r=e.getStyle(n,o);return bd(r,o)},m2=(e,n)=>{let o;return e.getParent(n,r=>ot(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},Hf=(e,n,o)=>e.getParents(n,o,e.getRoot()),g2=(e,n,o)=>{const r=e.formatter.get(n);return De(r)&&ho(r,o)},RS=(e,n)=>g2(e,n,r=>{const c=u=>se(u)||u.length>1&&u.charAt(0)==="%";return ho(["styles","attributes"],u=>Co(r,u).exists(m=>{const v=ln(m)?m:fm(m);return ho(v,c)}))}),DS=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>To(u,(m,v)=>ho(r,w=>w===v));return g2(e,n,u=>{const m=c(u);return g2(e,o,v=>{const w=c(v);return $d(m,w)})})},El=e=>pa(e,"block"),MS=e=>El(e)&&e.wrapper===!0,Kb=e=>El(e)&&e.wrapper!==!0,Sc=e=>pa(e,"selector"),Us=e=>pa(e,"inline"),T4=e=>Sc(e)&&Us(e)&&Xo(Co(e,"mixed"),!0),Bi=e=>Sc(e)&&e.expand!==!1&&!Us(e),k4=e=>{const n=[];let o=e;for(;o;){if(Fe(o)&&o.data!==Rs||o.childNodes.length>1)return[];ot(o)&&n.push(o),o=o.firstChild}return n},PS=e=>k4(e).length>0,cp=e=>Ya(e.dom)&&PS(e.dom),ug=ka,NS=Hf,BS=ap,IM=rp,FM=e=>Bn(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,$S=(e,n)=>{let o=n;for(;o;){if(ot(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},rt=(e,n,o,r)=>{const c=n.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},Ws=(e,n,o)=>rt(e,n,o,r=>hd(r)||Bf(r)),Yb=(e,n,o)=>rt(e,n,o,zb),Zs=(e,n,o,r,c,u)=>{let m;const v=e.getParent(o,e.isBlock)||n,w=(M,N,B)=>{const U=gf(e),G=c?U.backwards:U.forwards;return L.from(G(M,N,(W,K)=>ug(W.parentNode)?-1:(m=W,B(c,W,K)),v))};return w(o,r,Ws).bind(M=>u?w(M.container,M.offset+(c?-1:0),Yb):L.some(M)).orThunk(()=>m?L.some({container:m,offset:c?0:m.length}):L.none())},Ec=(e,n,o,r,c)=>{const u=r[c];Fe(r)&&$a(r.data)&&u&&(r=u);const m=NS(e,r);for(let v=0;v<m.length;v++)for(let w=0;w<n.length;w++){const E=n[w];if(!(De(E.collapsed)&&E.collapsed!==o.collapsed)&&Sc(E)&&e.is(m[v],E.selector))return m[v]}return r},h2=(e,n,o,r)=>{var c;let u=o;const m=e.getRoot(),v=n[0];if(El(v)&&(u=v.wrapper?null:e.getParent(o,v.block,m)),!u){const w=(c=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&c!==void 0?c:m;u=e.getParent(Fe(o)?o.parentNode:o,E=>E!==m&&IM(e.schema,E),w)}if(u&&El(v)&&v.wrapper&&(u=NS(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!qb(u,"br")););return u||o},ip=(e,n,o,r)=>{const c=o.parentNode;return De(o[r])?!1:c===n||An(c)||e.isBlock(c)?!0:ip(e,n,c,r)},dg=(e,n,o,r,c)=>{let u=o;const m=c?"previousSibling":"nextSibling",v=e.getRoot();if(Fe(o)&&!BS(o)&&(c?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let w=u[m];w;w=w[m]){const E=Fe(w)&&!ip(e,v,w,m);if(!ug(w)&&!FM(w)&&!BS(w,E))return u}if(u===v||u.parentNode===v){o=u;break}u=u.parentNode}return o},IS=e=>ug(e.parentNode)||ug(e),vd=(e,n,o,r=!1)=>{let{startContainer:c,startOffset:u,endContainer:m,endOffset:v}=n;const w=o[0];return ot(c)&&c.hasChildNodes()&&(c=nu(c,u),Fe(c)&&(u=0)),ot(m)&&m.hasChildNodes()&&(m=nu(m,n.collapsed?v:v-1),Fe(m)&&(v=m.data.length)),c=$S(e,c),m=$S(e,m),IS(c)&&(c=ug(c)?c:c.parentNode,n.collapsed?c=c.previousSibling||c:c=c.nextSibling||c,Fe(c)&&(u=n.collapsed?c.length:0)),IS(m)&&(m=ug(m)?m:m.parentNode,n.collapsed?m=m.nextSibling||m:m=m.previousSibling||m,Fe(m)&&(v=n.collapsed?0:m.length)),n.collapsed&&(Zs(e,e.getRoot(),c,u,!0,r).each(({container:N,offset:B})=>{c=N,u=B}),Zs(e,e.getRoot(),m,v,!1,r).each(({container:N,offset:B})=>{m=N,v=B})),(Us(w)||w.block_expand)&&((!Us(w)||!Fe(c)||u===0)&&(c=dg(e,o,c,u,!0)),(!Us(w)||!Fe(m)||v===m.data.length)&&(m=dg(e,o,m,v,!1))),Bi(w)&&(c=Ec(e,o,n,c,"previousSibling"),m=Ec(e,o,n,m,"nextSibling")),(El(w)||Sc(w))&&(c=h2(e,o,c,"previousSibling"),m=h2(e,o,m,"nextSibling"),El(w)&&(e.isBlock(c)||(c=dg(e,o,c,u,!0),Fe(c)&&(u=0)),e.isBlock(m)||(m=dg(e,o,m,v,!1),Fe(m)&&(v=m.data.length)))),ot(c)&&c.parentNode&&(u=e.nodeIndex(c),c=c.parentNode),ot(m)&&m.parentNode&&(v=e.nodeIndex(m)+1,m=m.parentNode),{startContainer:c,startOffset:u,endContainer:m,endOffset:v}},fg=(e,n,o)=>{var r;const c=n.startOffset,u=nu(n.startContainer,c),m=n.endOffset,v=nu(n.endContainer,m-1),w=K=>{const ne=K[0];Fe(ne)&&ne===u&&c>=ne.data.length&&K.splice(0,1);const re=K[K.length-1];return m===0&&K.length>0&&re===v&&Fe(re)&&K.splice(K.length-1,1),K},E=(K,ne,re)=>{const le=[];for(;K&&K!==re;K=K[ne])le.push(K);return le},M=(K,ne)=>e.getParent(K,re=>re.parentNode===ne,ne),N=(K,ne,re)=>{const le=re?"nextSibling":"previousSibling";for(let de=K,Ae=de.parentNode;de&&de!==ne;de=Ae){Ae=de.parentNode;const Ve=E(de===K?de:de[le],le);Ve.length&&(re||Ve.reverse(),o(w(Ve)))}};if(u===v)return o(w([u]));const B=(r=e.findCommonAncestor(u,v))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,v))return N(u,B,!0);if(e.isChildOf(v,u))return N(v,B);const U=M(u,B)||u,G=M(v,B)||v;N(u,U,!0);const W=E(U===u?U:U.nextSibling,"nextSibling",G===v?G.nextSibling:G);W.length&&o(w(W)),N(v,G)},O4=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],A4=e=>Xs(e)&&zm(e)===Rs,R4=(e,n,o,r)=>Hc(n).fold(()=>"skipping",c=>r==="br"||A4(n)?"valid":ab(n)?"existing":Ya(n.dom)?"caret":ho(O4,u=>Ha(n,u))?"valid-block":!Ff(e,o,r)||!Ff(e,Tn(c),o)?"invalid-child":"valid"),FS=(e,n)=>{const o=vd(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},Vf=(e,n,o,r,c,u)=>{const{uid:m=n,...v}=o;Nu(e,Im()),ur(e,`${bl()}`,m),ur(e,`${Xu()}`,r);const{attributes:w={},classes:E=[]}=c(m,v);if(Ur(e,w),RM(e,E),u){E.length>0&&ur(e,`${Ju()}`,E.join(","));const M=zr(w);M.length>0&&ur(e,`${Jl()}`,M.join(","))}},mg=e=>{pm(e,Im()),$s(e,`${bl()}`),$s(e,`${Xu()}`),$s(e,`${Fm()}`);const n=dc(e,`${Jl()}`).map(r=>r.split(",")).getOr([]),o=dc(e,`${Ju()}`).map(r=>r.split(",")).getOr([]);_e(n,r=>$s(e,r)),DM(e,o),$s(e,`${Ju()}`),$s(e,`${Jl()}`)},zf=(e,n,o,r,c)=>{const u=ee.fromTag("span",e);return Vf(u,n,o,r,c,!1),u},Xb=(e,n,o,r,c,u)=>{const m=[],v=zf(e.getDoc(),o,u,r,c),w=Qs(),E=()=>{w.clear()},M=()=>w.get().getOrThunk(()=>{const G=Yc(v);return m.push(G),w.set(G),G}),N=G=>{_e(G,B)},B=G=>{switch(R4(e,G,"span",Tn(G))){case"invalid-child":{E();const K=Js(G);N(K),E();break}case"valid-block":{E(),Vf(G,o,u,r,c,!0);break}case"valid":{const K=M();Kd(G,K);break}}},U=G=>{const W=Yt(G,ee.fromDom);N(W)};return fg(e.dom,n,G=>{E(),U(G)}),m},Xa=(e,n,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),m=ig(e).length>0,v=Hm("mce-annotation");if(u.collapsed&&!m&&FS(e,u),c.getRng().collapsed&&!m){const w=zf(e.getDoc(),v,r,n,o.decorate);D1(w,ks),c.getRng().insertNode(w.dom),c.select(w.dom)}else OS(c,!1,()=>{lg(e,w=>{Xb(e,w,v,n,o.decorate,r)})})})},$i=e=>{const n=cb();Ok(e,n);const o=tx(e,n),r=il("span"),c=u=>{_e(u,m=>{r(m)?Lu(m):mg(m)})};return{register:(u,m)=>{n.register(u,m)},annotate:(u,m)=>{n.lookup(u).each(v=>{Xa(e,u,v,m)})},annotationChanged:(u,m)=>{o.addListener(u,m)},remove:u=>{Th(e,L.some(u)).each(({elements:m})=>{const v=e.selection.getBookmark();c(m),e.selection.moveToBookmark(v)})},removeAll:u=>{const m=e.selection.getBookmark();it(Lm(e,u),(v,w)=>{c(v)}),e.selection.moveToBookmark(m)},getAll:u=>{const m=Lm(e,u);return Vn(m,v=>Yt(v,w=>w.dom))}}},Uf=e=>({getBookmark:Le(au,e),moveToBookmark:Le(SS,e)});Uf.isBookmarkNode=ka;const gg=(e,n,o)=>o.collapsed?!1:ho(o.getClientRects(),r=>Nk(r,e,n)),Jb=(e,n)=>e.dispatch("PreProcess",n),Qb=(e,n)=>e.dispatch("PostProcess",n),D4=e=>{e.dispatch("remove")},M4=e=>{e.dispatch("detach")},P4=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},N4=(e,n,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:c})},LS=(e,n,o,r,c)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:c})},HS=e=>{e.dispatch("PreInit")},p2=e=>{e.dispatch("PostRender")},e0=e=>{e.dispatch("Init")},xr=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},_c=(e,n,o)=>{e.dispatch(n,o)},Ja=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},lp=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},b2=(e,n)=>e.dispatch("BeforeSetContent",n),VS=(e,n)=>e.dispatch("SetContent",n),t0=(e,n)=>e.dispatch("BeforeGetContent",n),B4=(e,n)=>e.dispatch("GetContent",n),n0=(e,n)=>{e.dispatch("AutocompleterStart",n)},$4=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},o0=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},I4=e=>{e.dispatch("AutocompleterEnd")},F4=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),zS=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),s0=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),Jn=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),at={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||at.metaKeyPressed(e),metaKeyPressed:e=>Jt.os.isMacOS()||Jt.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Ii="data-mce-selected",US="table,img,figure.image,hr,video,span.mce-preview-object,details",v2=Math.abs,hg=Math.round,r0={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},up=e=>e.type==="longpress"||e.type.indexOf("touch")===0,y2=(e,n)=>{const o=n.dom,r=n.getDoc(),c=document,u=n.getBody();let m,v,w,E,M,N,B,U,G,W,K,ne,re,le,de,Ae,Ve;const ct=Qe=>De(Qe)&&(gh(Qe)||o.is(Qe,"figure.image")),Ee=Qe=>yr(Qe)||o.hasClass(Qe,"mce-preview-object"),be=(Qe,mn)=>{if(up(Qe)){const pn=Qe.touches[0];return ct(Qe.target)&&!gg(pn.clientX,pn.clientY,mn)}else return ct(Qe.target)&&!gg(Qe.clientX,Qe.clientY,mn)},Me=Qe=>{const mn=Qe.target;be(Qe,n.selection.getRng())&&!Qe.isDefaultPrevented()&&n.selection.select(mn)},lt=Qe=>o.hasClass(Qe,"mce-preview-object")&&De(Qe.firstElementChild)?[Qe,Qe.firstElementChild]:o.is(Qe,"figure.image")?[Qe.querySelector("img")]:[Qe],xt=Qe=>{const mn=Xm(n);return!mn||n.mode.isReadOnly()||Qe.getAttribute("data-mce-resize")==="false"||Qe===n.getBody()?!1:o.hasClass(Qe,"mce-preview-object")&&De(Qe.firstElementChild)?Ha(ee.fromDom(Qe.firstElementChild),mn):Ha(ee.fromDom(Qe),mn)},dn=(Qe,mn)=>{if(Ee(mn))return Qe.create("img",{src:Jt.transparentSrc});if(Ei(mn)){const xs=hs(E.name,"n")?Ar:Hl,eo=mn.cloneNode(!0);return xs(Qe.select("tr",eo)).each(Tr=>{const oc=Qe.select("td,th",Tr);Qe.setStyle(Tr,"height",null),_e(oc,xu=>Qe.setStyle(xu,"height",null))}),eo}else return mn.cloneNode(!0)},fn=(Qe,mn,pn)=>{if(De(pn)){const xs=lt(Qe);_e(xs,eo=>{eo.style[mn]||!n.schema.isValid(eo.nodeName.toLowerCase(),mn)?o.setStyle(eo,mn,pn):o.setAttrib(eo,mn,""+pn)})}},Fn=(Qe,mn,pn)=>{fn(Qe,"width",mn),fn(Qe,"height",pn)},Gn=Qe=>{let mn,pn,xs,eo,Tr;mn=Qe.screenX-N,pn=Qe.screenY-B,le=mn*E[2]+W,de=pn*E[3]+K,le=le<5?5:le,de=de<5?5:de,(ct(m)||Ee(m))&&kf(n)!==!1?xs=!at.modifierPressed(Qe):xs=at.modifierPressed(Qe),xs&&(v2(mn)>v2(pn)?(de=hg(le*ne),le=hg(de/ne)):(le=hg(de/ne),de=hg(le*ne))),Fn(v,le,de),eo=E.startPos.x+mn,Tr=E.startPos.y+pn,eo=eo>0?eo:0,Tr=Tr>0?Tr:0,o.setStyles(w,{left:eo,top:Tr,display:"block"}),w.innerHTML=le+" &times; "+de,E[2]<0&&v.clientWidth<=le&&o.setStyle(v,"left",U+(W-le)),E[3]<0&&v.clientHeight<=de&&o.setStyle(v,"top",G+(K-de)),mn=u.scrollWidth-Ae,pn=u.scrollHeight-Ve,mn+pn!==0&&o.setStyles(w,{left:eo-mn,top:Tr-pn}),re||(N4(n,m,W,K,"corner-"+E.name),re=!0)},ns=()=>{const Qe=re;re=!1,Qe&&(fn(m,"width",le),fn(m,"height",de)),o.unbind(r,"mousemove",Gn),o.unbind(r,"mouseup",ns),c!==r&&(o.unbind(c,"mousemove",Gn),o.unbind(c,"mouseup",ns)),o.remove(v),o.remove(w),o.remove(M),_r(m),Qe&&(LS(n,m,le,de,"corner-"+E.name),o.setAttrib(m,"style",o.getAttrib(m,"style"))),n.nodeChanged()},_r=Qe=>{st();const mn=o.getPos(Qe,u),pn=mn.x,xs=mn.y,eo=Qe.getBoundingClientRect(),Tr=eo.width||eo.right-eo.left,oc=eo.height||eo.bottom-eo.top;m!==Qe&&(Ke(),m=Qe,le=de=0);const xu=n.dispatch("ObjectSelected",{target:Qe});xt(Qe)&&!xu.isDefaultPrevented()?it(r0,(ea,di)=>{const Ji=sc=>{const Ct=lt(m)[0];N=sc.screenX,B=sc.screenY,W=Ct.clientWidth,K=Ct.clientHeight,ne=K/W,E=ea,E.name=di,E.startPos={x:Tr*ea[0]+pn,y:oc*ea[1]+xs},Ae=u.scrollWidth,Ve=u.scrollHeight,M=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(M,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),v=dn(o,m),o.addClass(v,"mce-clonedresizable"),o.setAttrib(v,"data-mce-bogus","all"),v.contentEditable="false",o.setStyles(v,{left:pn,top:xs,margin:0}),Fn(v,Tr,oc),v.removeAttribute(Ii),u.appendChild(v),o.bind(r,"mousemove",Gn),o.bind(r,"mouseup",ns),c!==r&&(o.bind(c,"mousemove",Gn),o.bind(c,"mouseup",ns)),w=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},W+" &times; "+K)};let Lr=o.get("mceResizeHandle"+di);Lr&&o.remove(Lr),Lr=o.add(u,"div",{id:"mceResizeHandle"+di,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+di+"-resize; margin:0; padding:0"}),o.bind(Lr,"mousedown",sc=>{sc.stopImmediatePropagation(),sc.preventDefault(),Ji(sc)}),ea.elm=Lr,o.setStyles(Lr,{left:Tr*ea[0]+pn-Lr.offsetWidth/2,top:oc*ea[1]+xs-Lr.offsetHeight/2})}):Ke(!1)},cs=$m(_r,0),Ke=(Qe=!0)=>{cs.cancel(),st(),m&&Qe&&m.removeAttribute(Ii),it(r0,(mn,pn)=>{const xs=o.get("mceResizeHandle"+pn);xs&&(o.unbind(xs),o.remove(xs))})},wt=(Qe,mn)=>o.isChildOf(Qe,mn),Rn=Qe=>{if(re||n.removed||n.composing)return;const mn=Qe.type==="mousedown"?Qe.target:e.getNode(),pn=Iu(ee.fromDom(mn),US).map(eo=>eo.dom).filter(eo=>o.isEditable(eo.parentElement)||eo.nodeName==="IMG"&&o.isEditable(eo)).getOrUndefined(),xs=De(pn)?o.getAttrib(pn,Ii,"1"):"1";if(_e(o.select(`img[${Ii}],hr[${Ii}]`),eo=>{eo.removeAttribute(Ii)}),De(pn)&&wt(pn,u)&&n.hasFocus()){Rt();const eo=e.getStart(!0);if(wt(eo,pn)&&wt(e.getEnd(!0),pn)){o.setAttrib(pn,Ii,xs),cs.throttle(pn);return}}Ke()},st=()=>{it(r0,Qe=>{Qe.elm&&(o.unbind(Qe.elm),delete Qe.elm)})},Rt=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{Rt(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Rn),n.on("keyup compositionend",Qe=>{m&&m.nodeName==="TABLE"&&Rn(Qe)}),n.on("hide blur",Ke),n.on("contextmenu longpress",Me,!0)}),n.on("remove",st),{isResizable:xt,showResizeRect:_r,hideResizeRect:Ke,updateResizeRect:Rn,destroy:()=>{cs.cancel(),m=v=M=null}}},WS=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},C2=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},ZS=(e,n,o)=>{const r=e.document.createRange();return WS(r,n),C2(r,o),r},dp=(e,n,o,r,c)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,c),u},Wf=Cc.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),a0=(e,n,o)=>n(ee.fromDom(o.startContainer),o.startOffset,ee.fromDom(o.endContainer),o.endOffset),L4=(e,n)=>n.match({domRange:o=>({ltr:Je(o),rtl:L.none}),relative:(o,r)=>({ltr:sl(()=>ZS(e,o,r)),rtl:sl(()=>L.some(ZS(e,r,o)))}),exact:(o,r,c,u)=>({ltr:sl(()=>dp(e,o,r,c,u)),rtl:sl(()=>L.some(dp(e,c,u,o,r)))})}),H4=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(c=>c.collapsed===!1).map(c=>Wf.rtl(ee.fromDom(c.endContainer),c.endOffset,ee.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>a0(e,Wf.ltr,o)):a0(e,Wf.ltr,o)},V4=(e,n)=>{const o=L4(e,n);return H4(e,o)};Wf.ltr,Wf.rtl;const pr={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},pg=(e,n,o)=>{var r;return L.from((r=e.caretPositionFromPoint)===null||r===void 0?void 0:r.call(e,n,o)).bind(c=>{if(c.offsetNode===null)return L.none();const u=e.createRange();return u.setStart(c.offsetNode,c.offset),u.collapse(),L.some(u)})},LM=(e,n,o)=>{var r;return L.from((r=e.caretRangeFromPoint)===null||r===void 0?void 0:r.call(e,n,o))},z4=(e,n,o)=>e.caretPositionFromPoint?pg(e,n,o):e.caretRangeFromPoint?LM(e,n,o):L.none(),U4=(e,n,o)=>{const r=e.document;return z4(r,n,o).map(c=>pr.create(ee.fromDom(c.startContainer),c.startOffset,ee.fromDom(c.endContainer),c.endOffset))},yn=Cc.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),W4=(e,n,o,r)=>e.fold(n,o,r),Z4=e=>e.fold(qo,qo,qo),w2=yn.before,HM=yn.on,VM=yn.after,yd={before:w2,on:HM,after:VM,cata:W4,getStart:Z4},fp=Cc.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),j4=e=>fp.exact(e.start,e.soffset,e.finish,e.foffset),G4=e=>e.match({domRange:n=>ee.fromDom(n.startContainer),relative:(n,o)=>yd.getStart(n),exact:(n,o,r,c)=>n}),x2=fp.domRange,c0=fp.relative,i0=fp.exact,zM=e=>{const n=G4(e);return ym(n)},q4=pr.create,mp={domRange:x2,relative:c0,exact:i0,exactFromRange:j4,getWin:zM,range:q4},S2=(e,n)=>{const o=Tn(e);return o==="input"?yd.after(e):Zt(["br","img"],o)?n===0?yd.before(e):yd.after(e):yd.on(e,n)},K4=(e,n)=>{const o=e.fold(yd.before,S2,yd.after),r=n.fold(yd.before,S2,yd.after);return mp.relative(o,r)},jS=(e,n,o,r)=>{const c=S2(e,n),u=S2(o,r);return mp.relative(c,u)},Bt=e=>e.match({domRange:n=>{const o=ee.fromDom(n.startContainer),r=ee.fromDom(n.endContainer);return jS(o,n.startOffset,r,n.endOffset)},relative:K4,exact:jS}),l0=(e,n)=>{const r=document.createDocumentFragment();return _e(e,c=>{r.appendChild(c.dom)}),ee.fromDom(r)},l=e=>{const n=mp.getWin(e).dom,o=(c,u,m,v)=>dp(n,c,u,m,v),r=Bt(e);return V4(n,r).match({ltr:o,rtl:o})},f=(e,n,o)=>U4(e,n,o),p=(e,n,o)=>{const r=ym(ee.fromDom(o));return f(r.dom,e,n).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},y=(e,n)=>De(e)&&De(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,_=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},A=(e,n,o)=>_(e,n,o)!==null,I=(e,n,o)=>A(e,n,r=>r.nodeName===o),z=(e,n)=>vc(e)&&!A(e,n,Ya),q=(e,n,o)=>{const r=n.parentNode;if(r){const c=new Ts(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(Bn(u))return!0}return!1},te=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},me=(e,n)=>{let o=n;for(;o&&o!==e;){if($n(o))return!0;o=o.parentNode}return!1},Ie=(e,n,o,r,c)=>{const u=e.getRoot(),m=e.schema.getNonEmptyElements(),v=c.parentNode;let w,E;if(!v)return L.none();const M=e.getParent(v,e.isBlock)||u;if(r&&Bn(c)&&n&&e.isEmpty(M))return L.some(xe(v,e.nodeIndex(c)));const N=new Ts(c,M);for(;E=N[r?"prev":"next"]();){if(e.getContentEditableParent(E)==="false"||z(E,u))return L.none();if(Fe(E)&&E.data.length>0)return I(E,u,"A")?L.none():L.some(xe(E,r?E.data.length:0));if(e.isBlock(E)||m[E.nodeName.toLowerCase()])return L.none();w=E}return Qo(w)?L.none():o&&w?L.some(xe(w,0)):L.none()},tt=(e,n,o,r)=>{const c=e.getRoot();let u,m=!1,v=o?r.startContainer:r.endContainer,w=o?r.startOffset:r.endOffset;const E=ot(v)&&w===v.childNodes.length,M=e.schema.getNonEmptyElements();let N=o;if(vc(v))return L.none();if(ot(v)&&w>v.childNodes.length-1&&(N=!1),Tm(v)&&(v=c,w=0),v===c){if(N&&(u=v.childNodes[w>0?w-1:0],u&&(vc(u)||M[u.nodeName]||Ei(u))))return L.none();if(v.hasChildNodes()){if(w=Math.min(!N&&w>0?w-1:w,v.childNodes.length-1),v=v.childNodes[w],w=Fe(v)&&E?v.data.length:0,!n&&v===c.lastChild&&Ei(v)||me(c,v)||vc(v)||Fv(v))return L.none();if(v.hasChildNodes()&&!Ei(v)){u=v;const B=new Ts(v,c);do{if($n(u)||vc(u)){m=!1;break}if(Fe(u)&&u.data.length>0){w=N?0:u.data.length,v=u,m=!0;break}if(M[u.nodeName.toLowerCase()]&&!Os(u)){w=e.nodeIndex(u),v=u.parentNode,N||w++,m=!0;break}}while(u=N?B.next():B.prev())}}}return n&&(Fe(v)&&w===0&&Ie(e,E,n,!0,v).each(B=>{v=B.container(),w=B.offset(),m=!0}),ot(v)&&(u=v.childNodes[w],u||(u=v.childNodes[w-1]),u&&Bn(u)&&!te(u,"A")&&!q(e,u,!1)&&!q(e,u,!0)&&Ie(e,E,n,!0,u).each(B=>{v=B.container(),w=B.offset(),m=!0}))),N&&!n&&Fe(v)&&w===v.data.length&&Ie(e,E,n,!1,v).each(B=>{v=B.container(),w=B.offset(),m=!0}),m&&v?L.some(xe(v,w)):L.none()},Xe=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),c=xe.fromRangeStart(n);return tt(e,o,!0,r).each(u=>{(!o||!xe.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||tt(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),y(n,r)?L.none():L.some(r)},Ze=(e,n)=>e.splitText(n),bt=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(n===r&&Fe(n)){if(o>0&&o<n.data.length)if(r=Ze(n,o),n=r.previousSibling,c>o){c=c-o;const u=Ze(r,c).previousSibling;n=r=u,c=u.data.length,o=0}else c=0}else if(Fe(n)&&o>0&&o<n.data.length&&(n=Ze(n,o),o=0),Fe(r)&&c>0&&c<r.data.length){const u=Ze(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:c}},Pe=e=>({walk:(u,m)=>fg(e,u,m),split:bt,expand:(u,m={type:"word"})=>{if(m.type==="word"){const v=vd(e,u,[{inline:"span"}]),w=e.createRng();return w.setStart(v.startContainer,v.startOffset),w.setEnd(v.endContainer,v.endOffset),w}return u},normalize:u=>Xe(e,u).fold(Ne,m=>(u.setStart(m.startContainer,m.startOffset),u.setEnd(m.endContainer,m.endOffset),!0))});Pe.compareRanges=y,Pe.getCaretRangeFromPoint=p,Pe.getSelectedNode=Mh,Pe.getNode=nu;const qe=((e,n)=>{const o=(v,w)=>{if(!fa(w)&&!w.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+w);const E=v.dom;Gd(E)&&(E.style[e]=w+"px")},r=v=>{const w=n(v);if(w<=0||w===null){const E=os(v,e);return parseFloat(E)||0}return w},c=r,u=(v,w)=>Ko(w,(E,M)=>{const N=os(v,M),B=N===void 0?0:parseInt(N,10);return isNaN(B)?E:E+B},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(v,w,E)=>{const M=u(v,E);return w>M?w-M:0}}})("height",e=>{const n=e.dom;return xm(e)?n.getBoundingClientRect().height:n.offsetHeight}),Ft=e=>qe.get(e),Cn=()=>ee.fromDom(document),Wn=(e,n)=>e.view(n).fold(Je([]),r=>{const c=e.owner(r),u=Wn(e,c);return[r].concat(u)}),ao=(e,n)=>{const o=n.owner(e);return Wn(n,o)};var Fi=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?L.none():L.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(ee.fromDom)},owner:e=>Bu(e)});const Zf=e=>{const n=Cn(),o=Hu(n),r=ao(e,Fi),c=Pv(e),u=Pd(r,(m,v)=>{const w=Pv(v);return{left:m.left+w.left,top:m.top+w.top}},{left:0,top:0});return ih(u.left+c.left+o.left,u.top+c.top+o.top)},_l=e=>Tn(e)==="textarea",Qn=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),Yr=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},Xr=(e,n)=>{const o=Js(e);if(o.length===0||_l(e))return{element:e,offset:n};if(n<o.length&&!_l(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return _l(r)?{element:e,offset:n}:Tn(r)==="img"?{element:r,offset:1}:Xs(r)?{element:r,offset:zm(r).length}:{element:r,offset:Js(r).length}}},Tc=(e,n)=>{const o=N1(e),r=Ft(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},en=(e,n)=>{const o=Xr(e,n),r=ee.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Rs+"</span>");return uo(o.element,r),Tc(r,()=>fo(r))},la=e=>Tc(ee.fromDom(e),Dt),ws=(e,n,o,r)=>{Sr(e,(c,u)=>iu(e,n,o,r),o)},u0=(e,n,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(Qn(e,u))return;const m=Hu(n).top;o(e,n,m,r,c),Yr(e,u)},iu=(e,n,o,r)=>{const c=ee.fromDom(e.getBody()),u=ee.fromDom(e.getDoc());Vc(c);const m=en(ee.fromDom(o.startContainer),o.startOffset);u0(e,u,n,m,r),m.cleanup()},an=(e,n,o,r)=>{const c=ee.fromDom(e.getDoc());u0(e,c,o,la(n),r)},Sr=(e,n,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,m=o.endOffset;n(ee.fromDom(r),ee.fromDom(u));const v=e.dom.createRng();v.setStart(r,c),v.setEnd(u,m),e.selection.setRng(o)},d0=(e,n,o,r,c)=>{const u=n.pos;if(r)ul(u.left,u.top,c);else{const m=u.top-o+n.height;ul(-e.getBody().getBoundingClientRect().left,m,c)}},f0=(e,n,o,r,c,u)=>{const m=r+o,v=c.pos.top,w=c.bottom,E=w-v>=r;v<o?d0(e,c,r,u!==!1,n):v>m?d0(e,c,r,E?u!==!1:u===!0,n):w>m&&!E&&d0(e,c,r,u===!0,n)},GS=(e,n,o,r,c)=>{const u=ym(n).dom.innerHeight;f0(e,n,o,u,r,c)},Cd=(e,n,o,r,c)=>{const u=ym(n).dom.innerHeight;f0(e,n,o,u,r,c);const m=Zf(r.element),v=Bw(window);m.top<v.y?Nw(r.element,c!==!1):m.top>v.bottom&&Nw(r.element,c===!0)},jf=(e,n,o)=>ws(e,GS,n,o),m0=(e,n,o)=>an(e,n,GS,o),Y4=(e,n,o)=>ws(e,Cd,n,o),gp=(e,n,o)=>an(e,n,Cd,o),YL=(e,n,o)=>{(e.inline?m0:gp)(e,n,o)},Gf=(e,n,o)=>{(e.inline?jf:Y4)(e,n,o)},hp=(e,n=!1)=>e.dom.focus({preventScroll:n}),UM=e=>{const n=xi(e).dom;return e.dom===n.activeElement},qS=(e=Cn())=>L.from(e.dom.activeElement).map(ee.fromDom),XL=e=>qS(xi(e)).filter(n=>e.dom.contains(n.dom)),WM=(e,n)=>{const o=Xs(n)?zm(n).length:Js(n).length+1;return e>o?o:e<0?0:e},JL=e=>mp.range(e.start,WM(e.soffset,e.start),e.finish,WM(e.foffset,e.finish)),X4=(e,n)=>!Xd(n.dom)&&(mc(e,n)||kn(e,n)),QL=e=>n=>X4(e,n.start)&&X4(e,n.finish),e8=e=>e.inline||Jt.browser.isFirefox(),ZM=e=>mp.range(ee.fromDom(e.startContainer),e.startOffset,ee.fromDom(e.endContainer),e.endOffset),J4=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?L.none():L.from(n.getRangeAt(0))).map(ZM)},Q4=e=>{const n=ym(e);return J4(n.dom).filter(QL(e))},eO=(e,n)=>L.from(n).filter(QL(e)).map(JL),jM=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),L.some(n)}catch{return L.none()}},E2=e=>{const n=e8(e)?Q4(ee.fromDom(e.getBody())):L.none();e.bookmark=n.isSome()?n:e.bookmark},KS=e=>(e.bookmark?e.bookmark:L.none()).bind(o=>eO(ee.fromDom(e.getBody()),o)).bind(jM),YS=e=>{KS(e).each(n=>e.selection.setRng(n))},tO={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},t8=(e,n)=>(fa(n)||(n=0),setTimeout(e,n)),GM=(e,n)=>(fa(n)||(n=0),setInterval(e,n)),ni={setEditorTimeout:(e,n,o)=>t8(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=GM(()=>{e.removed?clearInterval(r):n()},o);return r}},qM=e=>e.type==="nodechange"&&e.selectionChange,KM=(e,n)=>{const o=()=>{n.throttle()};to.DOM.bind(document,"mouseup",o),e.on("remove",()=>{to.DOM.unbind(document,"mouseup",o)})},YM=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},n8=(e,n)=>{YM(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{qM(o)||E2(e)})},o8=e=>{const n=$m(()=>{E2(e)},0);e.on("init",()=>{e.inline&&KM(e,n),n8(e,n)}),e.on("remove",()=>{n.cancel()})};let g0;const nO=to.DOM,s8=e=>ot(e)&&tO.isEditorUIElement(e),oO=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},XS=(e,n)=>{const o=Uh(e);return nO.getParent(n,c=>s8(c)||(o?e.dom.is(c,o):!1))!==null},sO=e=>{try{const n=xi(ee.fromDom(e.getElement()));return qS(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},JS=(e,n)=>{const o=n.editor;o8(o);const r=(c,u)=>{if(Vy(c)&&c.inline!==!0){const m=ee.fromDom(c.getContainer());u(m,"tox-edit-focus")}};o.on("focusin",()=>{const c=e.focusedEditor;oO(sO(o))&&r(o,Nu),c!==o&&(c&&c.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:c}),o.focus(!0))}),o.on("focusout",()=>{ni.setEditorTimeout(o,()=>{const c=e.focusedEditor;(!oO(sO(o))||c!==o)&&r(o,pm),!XS(o,sO(o))&&c===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),g0||(g0=c=>{const u=e.activeEditor;u&&gk(c).each(m=>{const v=m;v.ownerDocument===document&&v!==document.body&&!XS(u,v)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},nO.bind(document,"focusin",g0))},XM=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&g0&&(nO.unbind(document,"focusin",g0),g0=null)},r8=e=>{e.on("AddEditor",Le(JS,e)),e.on("RemoveEditor",Le(XM,e))},JM=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),QM=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="false")!==null,a8=e=>e.collapsed?L.from(nu(e.startContainer,e.startOffset)).map(ee.fromDom):L.none(),c8=(e,n)=>a8(n).bind(o=>ix(o)?L.some(o):mc(e,o)?L.none():L.some(e)),eP=(e,n)=>{c8(ee.fromDom(e.getBody()),n).bind(o=>Ir(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},QS=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},i8=e=>UM(e)||XL(e).isSome(),tP=e=>De(e.iframeElement)&&UM(ee.fromDom(e.iframeElement)),nP=e=>{const n=e.getBody();return n&&i8(ee.fromDom(n))},eE=e=>{const n=xi(ee.fromDom(e.getElement()));return qS(n).filter(o=>!oO(o.dom)&&XS(e,o.dom)).isSome()},h0=e=>e.inline?nP(e):tP(e),oP=e=>h0(e)||eE(e),rO=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const c=m=>{KS(m).each(v=>{m.selection.setRng(v),r=v})};!h0(e)&&e.hasEditableRoot()&&c(e);const u=JM(e,n.getNode());if(u&&e.dom.isChildOf(u,o)){QM(e,u)||QS(o),QS(u),e.hasEditableRoot()||c(e),eP(e,r),aO(e);return}e.inline||(Jt.browser.isOpera()||QS(o),e.getWin().focus()),(Jt.browser.isFirefox()||e.inline)&&(QS(o),eP(e,r)),aO(e)},aO=e=>e.editorManager.setActive(e),sP=(e,n)=>{e.removed||(n?aO(e):rO(e))},cO=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),iO=(e,n,o,r,c)=>{const u=o?n.startContainer:n.endContainer,m=o?n.startOffset:n.endOffset;return L.from(u).map(ee.fromDom).map(v=>!r||!n.collapsed?ya(v,c(v,m)).getOr(v):v).bind(v=>wo(v)?L.some(v):Hc(v).filter(wo)).map(v=>v.dom).getOr(e)},rP=(e,n,o=!1)=>iO(e,n,!0,o,(r,c)=>Math.min(A1(r),c)),aP=(e,n,o=!1)=>iO(e,n,!1,o,(r,c)=>c>0?c-1:c),cP=(e,n)=>{const o=e;for(;e&&Fe(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},l8=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const c=n.startOffset,u=n.endOffset;let m=n.commonAncestorContainer;n.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(m=o.childNodes[c]),Fe(o)&&Fe(r)&&(o.length===c?o=cP(o.nextSibling,!0):o=o.parentNode,u===0?r=cP(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(m=o)));const v=Fe(m)?m.parentNode:m;return Wc(v)?v:e},tE=(e,n,o,r)=>{const c=[],u=e.getRoot(),m=e.getParent(o||rP(u,n,n.collapsed),e.isBlock),v=e.getParent(r||aP(u,n,n.collapsed),e.isBlock);if(m&&m!==u&&c.push(m),m&&v&&m!==v){let w;const E=new Ts(m,u);for(;(w=E.next())&&w!==v;)e.isBlock(w)&&c.push(w)}return v&&m!==v&&v!==u&&c.push(v),c},iP=(e,n,o)=>L.from(n).bind(r=>L.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),m=e.createRng();return m.setStart(c,u),m.setEnd(c,u+1),o&&(kS(e,m,r,!0),kS(e,m,r,!1)),m})),nE=(e,n)=>Yt(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),lP={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},_2=(e,n,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[c];if(u)return u;for(let m=e.parent;m&&m!==n;m=m.parent)if(u=m[c],u)return u}},u8=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!zc(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},uP=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class Aa{static create(n,o){const r=new Aa(n,lP[n]||1);return o&&it(o,(c,u)=>{r.attr(u,c)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!Q(n))return De(n)&&it(n,(u,m)=>{r.attr(m,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(n in c.map){delete c.map[n];let u=c.length;for(;u--;)if(c[u].name===n)return c.splice(u,1),r}return r}if(n in c.map){let u=c.length;for(;u--;)if(c[u].name===n){c[u].value=o;break}}else c.push({name:n,value:o});return c.map[n]=o,r}return c.map[n]}}clone(){const n=this,o=new Aa(n.name,n.type),r=n.attributes;if(r){const c=[];c.map={};for(let u=0,m=r.length;u<m;u++){const v=r[u];v.name!=="id"&&(c[c.length]={name:v.name,value:v.value},c.map[v.name]=v.value)}o.attributes=c}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,c=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===n?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===c.lastChild?c.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=c,n}getAll(n){const o=this,r=[];for(let c=o.firstChild;c;c=_2(c,o))c.name===n&&r.push(c);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let c=n.firstChild;c;c=_2(c,n))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var c;const u=this;let m=u.firstChild;if(uP(u))return!1;if(m)do{if(m.type===1){if(m.attr("data-mce-bogus"))continue;if(n[m.name]||uP(m))return!1}if(m.type===8||m.type===3&&!u8(m)||m.type===3&&m.parent&&o[m.parent.name]&&zc((c=m.value)!==null&&c!==void 0?c:"")||r&&r(m))return!1}while(m=_2(m,u));return!0}walk(n){return _2(this,null,n)}}const d8=We.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),dP=e=>Q(e.nodeValue)&&e.nodeValue.includes(Rs),fP=e=>`${e.length===0?"":`${Yt(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,f8=(e,n)=>n.querySelectorAll(fP(e)),mP=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>dP(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),gP=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(dP(n)){const o=n.parentNode;return o&&It(d8,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),m8=e=>mP(e).nextNode()!==null,g8=e=>gP(e).nextNode()!==null,h8=(e,n)=>n.querySelector(fP(e))!==null,oE=(e,n)=>{_e(f8(e,n),o=>{const r=ee.fromDom(o);aa(r,"data-mce-bogus")==="all"?fo(r):_e(e,c=>{fc(r,c)&&$s(r,c)})})},lO=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},hP=R(lO,mP),p8=R(lO,gP),pP=(e,n)=>{const o=[{condition:Le(h8,n),action:Le(oE,n)},{condition:m8,action:hP},{condition:g8,action:p8}];let r=e,c=!1;return _e(o,({condition:u,action:m})=>{u(r)&&(c||(r=e.cloneNode(!0),c=!0),m(r))}),r},bP=e=>{const n=jr(e,"[data-mce-bogus]");_e(n,o=>{aa(o,"data-mce-bogus")==="all"?fo(o):Ql(o)?(uo(o,ee.fromText(lh)),fo(o)):Lu(o)})},vP=e=>{const n=jr(e,"input");_e(n,o=>{$s(o,"name")})},b8=(e,n)=>{const o=gr(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},v8=(e,n)=>{const o=e.getDoc(),r=xi(ee.fromDom(e.getBody())),c=ee.fromTag("div",o);ur(c,"data-mce-bogus","all"),on(c,{position:"fixed",left:"-9999999px",top:"0"}),D1(c,n.innerHTML),bP(c),vP(c);const u=dk(r);Fs(u,c);const m=bc(c.dom.innerText);return fo(c),m},yP=(e,n,o)=>{let r;return n.format==="raw"?r=We.trim(bc(pP(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=v8(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=b8(e,e.serializer.serialize(o,n)),n.format!=="text"&&!ib(ee.fromDom(o))&&Q(r)?We.trim(r):r},y8=(e,n)=>L.from(e.getBody()).fold(Je(n.format==="tree"?new Aa("body",11):""),o=>yP(e,n,o)),uO=We.makeMap,dO=e=>{const n=[];e=e||{};const o=e.indent,r=uO(e.indent_before||""),c=uO(e.indent_after||""),u=ju.getEncodeFunc(e.entity_encoding||"raw",e.entities),m=e.element_format!=="xhtml";return{start:(v,w,E)=>{if(o&&r[v]&&n.length>0){const M=n[n.length-1];M.length>0&&M!==`
`&&n.push(`
`)}if(n.push("<",v),w)for(let M=0,N=w.length;M<N;M++){const B=w[M];n.push(" ",B.name,'="',u(B.value,!0),'"')}if(!E||m?n[n.length]=">":n[n.length]=" />",E&&o&&c[v]&&n.length>0){const M=n[n.length-1];M.length>0&&M!==`
`&&n.push(`
`)}},end:v=>{let w;n.push("</",v,">"),o&&c[v]&&n.length>0&&(w=n[n.length-1],w.length>0&&w!==`
`&&n.push(`
`))},text:(v,w)=>{v.length>0&&(n[n.length]=w?v:u(v))},cdata:v=>{n.push("<![CDATA[",v,"]]>")},comment:v=>{n.push("<!--",v,"-->")},pi:(v,w)=>{w?n.push("<?",v," ",u(w),"?>"):n.push("<?",v,"?>"),o&&n.push(`
`)},doctype:v=>{n.push("<!DOCTYPE",v,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},bg=(e={},n=zn())=>{const o=dO(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,m={3:w=>{var E;o.text((E=w.value)!==null&&E!==void 0?E:"",w.raw)},8:w=>{var E;o.comment((E=w.value)!==null&&E!==void 0?E:"")},7:w=>{o.pi(w.name,w.value)},10:w=>{var E;o.doctype((E=w.value)!==null&&E!==void 0?E:"")},4:w=>{var E;o.cdata((E=w.value)!==null&&E!==void 0?E:"")},11:w=>{let E=w;if(E=E.firstChild)do v(E);while(E=E.next)}};o.reset();const v=w=>{var E;const M=m[w.type];if(M)M(w);else{const N=w.name,B=N in n.getVoidElements();let U=w.attributes;if(u&&U&&U.length>1){const G=[];G.map={};const W=n.getElementRule(w.name);if(W){for(let K=0,ne=W.attributesOrder.length;K<ne;K++){const re=W.attributesOrder[K];if(re in U.map){const le=U.map[re];G.map[re]=le,G.push({name:re,value:le})}}for(let K=0,ne=U.length;K<ne;K++){const re=U[K].name;if(!(re in G.map)){const le=U.map[re];G.map[re]=le,G.push({name:re,value:le})}}U=G}}if(o.start(N,U,B),po(N))Q(w.value)&&o.text(w.value,!0),o.end(N);else if(!B){let G=w.firstChild;if(G){(N==="pre"||N==="textarea")&&G.type===3&&((E=G.value)===null||E===void 0?void 0:E[0])===`
`&&o.text(`
`,!0);do v(G);while(G=G.next)}o.end(N)}}};return c.type===1&&!e.inner?v(c):c.type===3?m[3](c):m[11](c),o.getContent()}}},CP=new Set;_e(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{CP.add(n)});const wP=new Set;_e(["background-color"],n=>{wP.add(n)});const xP=["font","text-decoration","text-emphasis"],C8=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),p0=(e,n)=>zr(C8(e,n)),w8=e=>CP.has(e),x8=e=>wP.has(e),SP=(e,n)=>ho(p0(e,n),o=>w8(o)),S8=(e,n)=>SP(e,n)&&ho(p0(e,n),o=>x8(o)),E8=e=>Pt(e,n=>ho(xP,o=>hs(n,o))),_8=(e,n,o)=>{const r=p0(e,n),c=p0(e,o),u=m=>{var v,w;const E=(v=e.getStyle(n,m))!==null&&v!==void 0?v:"",M=(w=e.getStyle(o,m))!==null&&w!==void 0?w:"";return oo(E)&&oo(M)&&E!==M};return ho(r,m=>{const v=w=>ho(w,E=>E===m);if(!v(c)&&v(xP)){const w=E8(c);return ho(w,u)}else return u(m)})},EP=(e,n,o)=>L.from(o.container()).filter(Fe).exists(r=>{const c=e?0:-1;return n(r.data.charAt(o.offset()+c))}),fO=Le(EP,!0,Bf),mO=Le(EP,!1,Bf),T8=e=>{const n=e.container();return Fe(n)&&(n.data.length===0||Rh(n.data)&&Uf.isBookmarkNode(n.parentNode))},vg=(e,n)=>o=>Gy(e?0:-1,o).filter(n).isSome(),_P=e=>gh(e)&&os(ee.fromDom(e),"display")==="block",TP=e=>$n(e)&&!mh(e),_t=vg(!0,_P),kP=vg(!1,_P),b0=vg(!0,yr),T2=vg(!1,yr),sE=vg(!0,Ei),gO=vg(!1,Ei),yg=vg(!0,TP),Cg=vg(!1,TP),k8=e=>e.slice(0,-1),O8=(e,n,o)=>mc(n,e)?k8(Zd(e,r=>o(r)||kn(r,n))):[],k2=(e,n)=>O8(e,n,Ne),wd=(e,n)=>[e].concat(k2(e,n)),OP=(e,n,o)=>wS(e,n,o,T8),A8=e=>n=>e.isBlock(Tn(n)),zt=(e,n,o)=>us(wd(ee.fromDom(n.container()),e),A8(o)),AP=(e,n,o,r)=>OP(e,n.dom,o).forall(c=>zt(n,o,r).fold(()=>!Ni(c,o,n.dom),u=>!Ni(c,o,n.dom)&&mc(u,ee.fromDom(c.container())))),qt=(e,n,o,r)=>zt(n,o,r).fold(()=>OP(e,n.dom,o).forall(c=>!Ni(c,o,n.dom)),c=>OP(e,c.dom,o).isNone()),rE=Le(qt,!1),R8=Le(qt,!0),cK=Le(AP,!1),D8=Le(AP,!0),iK=e=>Jh(e).exists(Ql),hO=(e,n,o,r)=>{const c=Pt(wd(ee.fromDom(o.container()),n),m=>r.isBlock(Tn(m))),u=Ar(c).getOr(n);return qa(e,u.dom,o).filter(iK)},pO=(e,n,o)=>Jh(n).exists(Ql)||hO(!0,e,n,o).isSome(),aE=(e,n,o)=>y4(n).exists(Ql)||hO(!1,e,n,o).isSome(),$t=Le(hO,!1),M8=Le(hO,!0),RP=e=>xe.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),DP=(e,n,o)=>{const r=Pt(wd(ee.fromDom(n.container()),e),c=>o.isBlock(Tn(c)));return Ar(r).getOr(e)},v0=(e,n,o)=>RP(n)?mO(n):mO(n)||Ta(DP(e,n,o).dom,n).exists(mO),bO=(e,n,o)=>RP(n)?fO(n):fO(n)||$r(DP(e,n,o).dom,n).exists(fO),P8=e=>Zt(["pre","pre-wrap"],e),vO=e=>Jh(e).bind(n=>zo(n,wo)).exists(n=>P8(os(n,"white-space"))),N8=(e,n)=>Ta(e.dom,n).isNone(),MP=(e,n)=>$r(e.dom,n).isNone(),B8=(e,n,o)=>N8(e,n)||MP(e,n)||rE(e,n,o)||R8(e,n,o)||aE(e,n,o)||pO(e,n,o),lK=e=>De(e)&&$n(e)&&jy(e),$8=(e,n)=>o=>lK(new Ts(o,e)[n]()),I8=(e,n)=>{const o=$r(e.dom,n).getOr(n),r=$8(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},F8=(e,n)=>{const o=Ta(e.dom,n).getOr(n),r=$8(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},PP=(e,n,o)=>vO(n)?!1:B8(e,n,o)||v0(e,n,o)||bO(e,n,o),O2=(e,n,o)=>vO(n)?!1:rE(e,n,o)||cK(e,n,o)||aE(e,n,o)||v0(e,n,o)||F8(e,n),NP=e=>{const n=e.container(),o=e.offset();return Fe(n)&&o<n.data.length?xe(n,o+1):e},A2=(e,n,o)=>vO(n)?!1:R8(e,n,o)||D8(e,n,o)||pO(e,n,o)||bO(e,n,o)||I8(e,n),nn=(e,n,o)=>O2(e,n,o)||A2(e,NP(n),o),yO=(e,n)=>hd(e.charAt(n)),R2=(e,n)=>Bf(e.charAt(n)),BP=e=>{const n=e.container();return Fe(n)&&br(n.data,ks)},$P=e=>{const n=e.split("");return Yt(n,(o,r)=>hd(o)&&r>0&&r<n.length-1&&zb(n[r-1])&&zb(n[r+1])?" ":o).join("")},CO=(e,n,o,r)=>{const c=n.data,u=xe(n,0);return!o&&yO(c,0)&&!nn(e,u,r)?(n.data=" "+c.slice(1),!0):o&&R2(c,0)&&O2(e,u,r)?(n.data=ks+c.slice(1),!0):!1},IP=e=>{const n=e.data,o=$P(n);return o!==n?(e.data=o,!0):!1},wO=(e,n,o,r)=>{const c=n.data,u=xe(n,c.length-1);return!o&&yO(c,c.length-1)&&!nn(e,u,r)?(n.data=c.slice(0,-1)+" ",!0):o&&R2(c,c.length-1)&&A2(e,u,r)?(n.data=c.slice(0,-1)+ks,!0):!1},L8=(e,n,o)=>{const r=n.container();if(!Fe(r))return L.none();if(BP(n)){const c=CO(e,r,!1,o)||IP(r)||wO(e,r,!1,o);return yi(c,n)}else if(nn(e,n,o)){const c=CO(e,r,!0,o)||wO(e,r,!0,o);return yi(c,n)}else return L.none()},FP=e=>{const n=ee.fromDom(e.getBody());e.selection.isCollapsed()&&L8(n,xe.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},LP=(e,n,o,r)=>{if(o===0)return;const c=ee.fromDom(e),u=ko(c,E=>r.isBlock(Tn(E))).getOr(c),m=e.data.slice(n,n+o),v=n+o>=e.data.length&&A2(u,xe(e,e.data.length),r),w=n===0&&O2(u,xe(e,0),r);e.replaceData(n,o,Uc(m,4,w,v))},cE=(e,n,o)=>{const r=e.data.slice(n),c=r.length-Qg(r).length;LP(e,n,c,o)},xO=(e,n,o)=>{const r=e.data.slice(0,n),c=r.length-hm(r).length;LP(e,n-c,c,o)},SO=(e,n,o,r,c=!0)=>{const u=hm(e.data).length,m=c?e:n,v=c?n:e;return c?m.appendData(v.data):m.insertData(0,v.data),fo(ee.fromDom(v)),r&&cE(m,u,o),m},H8=(e,n)=>{const o=e.container(),r=e.offset();return!xe.isTextPosition(e)&&o===n.parentNode&&r>xe.before(n).offset()},V8=(e,n)=>H8(n,e)?xe(n.container(),n.offset()-1):n,z8=e=>Fe(e)?xe(e,0):xe.before(e),U8=e=>Fe(e)?xe(e,e.data.length):xe.after(e),iE=e=>Qc(e.previousSibling)?L.some(U8(e.previousSibling)):e.previousSibling?Ka(e.previousSibling):L.none(),lE=e=>Qc(e.nextSibling)?L.some(z8(e.nextSibling)):e.nextSibling?Ir(e.nextSibling):L.none(),W8=(e,n)=>L.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>Ta(e,xe.before(o))).orThunk(()=>$r(e,xe.after(n))),Z8=(e,n)=>$r(e,xe.after(n)).orThunk(()=>Ta(e,xe.before(n))),j8=(e,n)=>iE(n).orThunk(()=>lE(n)).orThunk(()=>W8(e,n)),G8=(e,n)=>lE(n).orThunk(()=>iE(n)).orThunk(()=>Z8(e,n)),q8=(e,n,o)=>e?G8(n,o):j8(n,o),K8=(e,n,o)=>q8(e,n,o).map(Le(V8,o)),HP=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},Y8=e=>n=>n.dom===e,VP=(e,n)=>n&&It(e.schema.getBlockElements(),Tn(n)),X8=(e,n,o)=>{if(Mr(e,n)){const r=ee.fromHtml('<br data-mce-bogus="1">');return o?_e(Js(n),c=>{cp(c)||fo(c)}):Sm(n),Fs(n,r),L.some(xe.before(r.dom))}else return L.none()},J8=(e,n,o,r)=>{const c=jl(e).filter(Xs),u=Wr(e).filter(Xs);return fo(e),zd(c,u,n,(m,v,w)=>{const E=m.dom,M=v.dom,N=E.data.length;return SO(E,M,o,r),w.container()===M?xe(E,N):w}).orThunk(()=>(r&&(c.each(m=>xO(m.dom,m.dom.length,o)),u.each(m=>cE(m.dom,0,o))),n))},pp=(e,n)=>It(e.schema.getTextInlineElements(),Tn(n)),bp=(e,n,o,r=!0,c=!1)=>{const u=K8(n,e.getBody(),o.dom),m=ko(o,Le(VP,e),Y8(e.getBody())),v=J8(o,u,e.schema,pp(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):m.bind(w=>X8(e.schema,w,c)).fold(()=>{r&&HP(e,n,v)},w=>{r&&HP(e,n,L.some(w))})},zP=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Q8=e=>zP.test(e),vp=(e,n)=>Ha(ee.fromDom(n),wc(e))&&!tf(e.schema,n)&&e.dom.isEditable(n),EO=e=>{var n;return to.DOM.getStyle(e,"direction",!0)==="rtl"||Q8((n=e.textContent)!==null&&n!==void 0?n:"")},UP=(e,n,o)=>Pt(to.DOM.getParents(o.container(),"*",n),e),qf=(e,n,o)=>{const r=UP(e,n,o);return L.from(r[r.length-1])},WP=(e,n,o)=>{const r=_a(n,e),c=_a(o,e);return De(r)&&r===c},Ra=e=>yl(e)||eu(e),Li=(e,n)=>{const o=n.container(),r=n.offset();return e?Xc(o)?Fe(o.nextSibling)?xe(o.nextSibling,0):xe.after(o):yl(n)?xe(o,r+1):n:Xc(o)?Fe(o.previousSibling)?xe(o.previousSibling,o.previousSibling.data.length):xe.before(o):eu(n)?xe(o,r-1):n},ZP=Le(Li,!0),jP=Le(Li,!1),GP=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},e7=e=>{e.execCommand("delete")},xd=e=>GP(e,"Delete"),qP=e=>GP(e,"ForwardDelete"),t7=e=>n=>Xo(Hc(n),e,kn),Ao=e=>xa(e)||pf(e),yp=(e,n)=>mc(e,n)?zo(n,Ao,t7(e)):L.none(),wg=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},KP=(e,n,o)=>Qt(Ir(o),Ka(o),(r,c)=>{const u=Li(!0,r),m=Li(!1,c),v=Li(!1,n);return e?$r(o,v).exists(w=>w.isEqual(m)&&n.isEqual(u)):Ta(o,v).exists(w=>w.isEqual(u)&&n.isEqual(m))}).getOr(!0),Cp=e=>(ww(e)?jl(e):Cm(e)).bind(Cp).orThunk(()=>L.some(e)),oi=(e,n,o,r=!0)=>{var c;n.deleteContents();const u=Cp(o).getOr(o),m=ee.fromDom((c=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&c!==void 0?c:o.dom);if(m.dom===e.getBody()?wg(e,r):Mr(e.schema,m,{checkRootAsContent:!1})&&(vl(m),r&&e.selection.setCursorLocation(m.dom,0)),!kn(o,m)){const v=Xo(Hc(m),o)?[]:Ow(m);_e(v.concat(Js(o)),w=>{!kn(w,m)&&!mc(w,m)&&Mr(e.schema,w)&&fo(w)})}},D2=e=>n=>kn(e,n),Kn=e=>jr(e,"td,th"),y0=(e,n)=>op(ee.fromDom(e),n),YP=e=>Qt(e.startTable,e.endTable,(n,o)=>{const r=Nv(n,u=>kn(u,o)),c=Nv(o,u=>kn(u,n));return!r&&!c?e:{...e,startTable:r?L.none():e.startTable,endTable:c?L.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),XP=e=>YP(e),_O=(e,n)=>{const o=y0(e.startContainer,n),r=y0(e.endContainer,n),c=o.isSome(),u=r.isSome(),m=Qt(o,r,kn).getOr(!1);return XP({startTable:o,endTable:r,isStartInTable:c,isEndInTable:u,isSameTable:m,isMultiTable:!m&&c&&u})},M2=(e,n)=>({start:e,end:n}),TO=(e,n,o)=>({rng:e,table:n,cells:o}),wp=Cc.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),xp=(e,n)=>Iu(ee.fromDom(e),"td,th",n),uE=e=>!kn(e.start,e.end),kO=(e,n)=>op(e.start,n).bind(o=>op(e.end,n).bind(r=>yi(kn(o,r),o))),JP=(e,n)=>!uE(e)&&kO(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),QP=(e,n)=>{const o=xp(e.startContainer,n),r=xp(e.endContainer,n);return Qt(o,r,M2)},eN=e=>n=>op(n,e).bind(o=>Hl(Kn(o)).map(r=>M2(n,r))),tN=e=>n=>op(n,e).bind(o=>Ar(Kn(o)).map(r=>M2(r,n))),xg=e=>n=>kO(n,e).map(o=>TO(n,o,Kn(o))),OO=(e,n,o,r)=>{if(o.collapsed||!e.forall(uE))return L.none();if(n.isSameTable){const c=e.bind(xg(r));return L.some({start:c,end:c})}else{const c=xp(o.startContainer,r),u=xp(o.endContainer,r),m=c.bind(eN(r)).bind(xg(r)),v=u.bind(tN(r)).bind(xg(r));return L.some({start:m,end:v})}},dE=(e,n)=>ga(e,o=>kn(o,n)),AO=e=>Qt(dE(e.cells,e.rng.start),dE(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),n7=(e,n,o)=>e.exists(r=>JP(r,o)&&u2(r.start,n)),RO=(e,n)=>{const{startTable:o,endTable:r}=n,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},nN=(e,n,o,r)=>OO(e,n,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=n,m=AO(c).getOr([]);if(u&&c.cells.length===m.length)return L.some(wp.fullTable(c.table));if(m.length>0){if(u)return L.some(wp.partialTable(m,L.none()));{const v=RO(o,n);return L.some(wp.partialTable(m,L.some({...n,rng:v})))}}else return L.none()}),oN=(e,n,o,r)=>OO(e,n,o,r).bind(({start:c,end:u})=>{const m=c.bind(AO).getOr([]),v=u.bind(AO).getOr([]);if(m.length>0&&v.length>0){const w=RO(o,n);return L.some(wp.multiTable(m,v,w))}else return L.none()}),fE=(e,n)=>{const o=D2(e),r=QP(n,o),c=_O(n,o);return n7(r,n,o)?r.map(u=>wp.singleCellTable(n,u.start)):c.isMultiTable?oN(r,c,n,o):nN(r,c,n,o)},DO=e=>_e(e,n=>{$s(n,"contenteditable"),vl(n)}),sN=(e,n)=>L.from(e.dom.getParent(n,e.dom.isBlock)).map(ee.fromDom),rN=(e,n,o)=>{o.each(r=>{n?fo(r):(vl(r),e.selection.setCursorLocation(r.dom,0))})},mE=(e,n,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(n.dom.lastChild)):(c.setStartBefore(n.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),gE(e,c,n,!1).each(u=>u())},MO=e=>{const n=ig(e),o=ee.fromDom(e.selection.getNode());F1(o.dom)&&Mr(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&ho(n,r=>kn(r,o))&&ur(o,"data-mce-selected","1")},PO=(e,n,o)=>L.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:m})=>{const v=sN(e,m?u.endContainer:u.startContainer);u.deleteContents(),rN(e,m,v.filter(Le(Mr,e.schema)));const w=m?n[0]:n[n.length-1];return mE(e,w,r,m),Mr(e.schema,w)?L.none():L.some(m?n.slice(1):n.slice(0,-1))}).getOr(n);DO(c),MO(e)}),aN=(e,n,o,r)=>L.some(()=>{const c=e.selection.getRng(),u=n[0],m=o[o.length-1];mE(e,u,c,!0),mE(e,m,c,!1);const v=Mr(e.schema,u)?n:n.slice(1),w=Mr(e.schema,m)?o:o.slice(0,-1);DO(v.concat(w)),r.deleteContents(),MO(e)}),gE=(e,n,o,r=!0)=>L.some(()=>{oi(e,n,o,r)}),cN=(e,n)=>L.some(()=>bp(e,!1,n)),iN=(e,n,o)=>fE(n,o).bind(r=>r.fold(Le(gE,e),Le(cN,e),Le(PO,e),Le(aN,e))),NO=(e,n)=>P2(e,n),lN=(e,n,o,r)=>hE(n,r).fold(()=>iN(e,n,o),c=>NO(e,c)),uN=(e,n,o)=>{const r=ee.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?PO(e,o,L.none()):lN(e,r,c,n)},BO=(e,n)=>us(wd(n,e),Ah),hE=(e,n)=>us(wd(n,e),il("caption")),dN=(e,n,o,r,c)=>md(o,e.getBody(),c).bind(u=>BO(n,ee.fromDom(u.getNode())).bind(m=>kn(m,r)?L.none():L.some(Dt))),P2=(e,n)=>L.some(()=>{vl(n),e.selection.setCursorLocation(n.dom,0)}),$O=(e,n,o,r)=>Ir(e.dom).bind(c=>Ka(e.dom).map(u=>n?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),pE=(e,n)=>P2(e,n),IO=(e,n,o)=>hE(e,ee.fromDom(o.getNode())).fold(()=>L.some(Dt),r=>yi(!kn(r,n),Dt)),bE=(e,n,o,r,c)=>md(o,e.getBody(),c).fold(()=>L.some(Dt),u=>$O(r,o,c,u)?pE(e,r):IO(n,r,u)),fN=(e,n,o,r)=>{const c=xe.fromRangeStart(e.selection.getRng());return BO(o,r).bind(u=>Mr(e.schema,u,{checkRootAsContent:!1})?P2(e,u):dN(e,o,n,u,c))},vE=(e,n,o,r)=>{const c=xe.fromRangeStart(e.selection.getRng());return Mr(e.schema,r)?P2(e,r):bE(e,o,n,r,c)},yE=(e,n)=>e?sE(n):gO(n),N2=(e,n)=>{const o=xe.fromRangeStart(e.selection.getRng());return yE(n,o)||qa(n,e.getBody(),o).exists(r=>yE(n,r))},FO=(e,n,o)=>{const r=ee.fromDom(e.getBody());return hE(r,o).fold(()=>fN(e,n,r,o).orThunk(()=>yi(N2(e,n),Dt)),c=>vE(e,n,r,c))},CE=(e,n)=>{const o=ee.fromDom(e.selection.getStart(!0)),r=ig(e);return e.selection.isCollapsed()&&r.length===0?FO(e,n,o):uN(e,o,r)},Tl=(e,n)=>{let o=n;for(;o&&o!==e;){if(Oe(o)||$n(o))return o;o=o.parentNode}return null},LO=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],HO=We.each,Sg=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,m)=>{if(u.nodeName!==m.nodeName||u.nodeType!==m.nodeType)return!1;const v=E=>{const M={};return HO(n.getAttribs(E),N=>{const B=N.nodeName.toLowerCase();B!=="style"&&!c(B)&&(M[B]=n.getAttrib(E,B))}),M},w=(E,M)=>{for(const N in E)if(It(E,N)){const B=M[N];if(Go(B)||E[N]!==B)return!1;delete M[N]}for(const N in M)if(It(M,N))return!1;return!0};return ot(u)&&ot(m)&&(!w(v(u),v(m))||!w(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(m,"style"))))?!1:!ka(u)&&!ka(m)},c=u=>ho(LO,m=>hs(u,m))||o.has(u);return{compare:r,isAttributeInternal:c}},Kf=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),mN=e=>e.name==="summary",o7=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},gN=(e,n,o,r)=>{const c=o.name;for(let u=0,m=e.length;u<m;u++){const v=e[u];if(v.name===c){const w=r.nodes[c];w?w.nodes.push(o):r.nodes[c]={filter:v,nodes:[o]}}}if(o.attributes)for(let u=0,m=n.length;u<m;u++){const v=n[u],w=v.name;if(w in o.attributes.map){const E=r.attributes[w];E?E.nodes.push(o):r.attributes[w]={filter:v,nodes:[o]}}}},hN=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&o7(o,c=>{gN(e,n,c,r)}),r},VO=(e,n)=>{const o=(r,c)=>{it(r,u=>{const m=ha(u.nodes);_e(u.filter.callbacks,v=>{for(let w=m.length-1;w>=0;w--){const E=m[w];(!(c?E.attr(u.filter.name)!==void 0:E.name===u.filter.name)||An(E.parent))&&m.splice(w,1)}m.length>0&&v(m,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},zO=(e,n,o,r={})=>{const c=hN(e,n,o);VO(c,r)},UO=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new Aa("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new Aa("#text",3)).value=ks},Eg=e=>{var n;return _g(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===ks},_g=(e,n)=>{const o=e==null?void 0:e.firstChild;return De(o)&&o===e.lastChild&&o.name===n},uK=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},Ms=(e,n,o,r)=>r.isEmpty(n,o,c=>uK(e,c)),s7=(e,n)=>De(e)&&(n(e)||e.name==="br"),r7=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return L.from(n)},lu=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!n.isValidChild(o.name,c.name)&&lu(c,n,o);e.unwrap()}},Nn=(e,n,o,r=Dt)=>{const c=n.getTextBlockElements(),u=n.getNonEmptyElements(),m=n.getWhitespaceElements(),v=We.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),w=new Set,E=M=>M!==o&&!v[M.name];for(let M=0;M<e.length;M++){const N=e[M];let B,U,G;if(!N.parent||w.has(N))continue;if(c[N.name]&&N.parent.name==="li"){let K=N.next;for(;K&&c[K.name];){K.name="li",w.add(K),N.parent.insert(K,N.parent);K=K.next}N.unwrap();continue}const W=[N];for(B=N.parent;B&&!n.isValidChild(B.name,N.name)&&E(B);B=B.parent)W.push(B);if(B&&W.length>1)if(WO(n,N,B))lu(N,n);else{W.reverse(),U=W[0].clone(),r(U);let K=U;for(let ne=0;ne<W.length-1;ne++){n.isValidChild(K.name,W[ne].name)&&ne>0?(G=W[ne].clone(),r(G),K.append(G)):G=K;for(let re=W[ne].firstChild;re&&re!==W[ne+1];){const le=re.next;G.append(re),re=le}K=G}Ms(n,u,m,U)?B.insert(N,W[0],!0):(B.insert(U,W[0],!0),B.insert(N,U)),B=W[0],(Ms(n,u,m,B)||_g(B,"br"))&&B.empty().remove()}else if(N.parent){if(N.name==="li"){let K=N.prev;if(K&&(K.name==="ul"||K.name==="ol")){K.append(N);continue}if(K=N.next,K&&(K.name==="ul"||K.name==="ol")&&K.firstChild){K.insert(N,K.firstChild,!0);continue}const ne=new Aa("ul",1);r(ne),N.wrap(ne);continue}if(n.isValidChild(N.parent.name,"div")&&n.isValidChild("div",N.name)){const K=new Aa("div",1);r(K),N.wrap(K)}else lu(N,n)}}},dK=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},WO=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&dK(o,"a")?!0:mN(o)&&Kf(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,a7=(e,n,o,r)=>{const c=document.createRange();return c.setStart(e,n),c.setEnd(o,r),c},vo=e=>{const n=xe.fromRangeStart(e),o=xe.fromRangeEnd(e),r=e.commonAncestorContainer;return qa(!1,r,o).map(c=>!Ni(n,o,r)&&Ni(n,c,r)?a7(n.container(),n.offset(),c.container(),c.offset()):e).getOr(e)},wE=e=>e.collapsed?e:vo(e),B2=e=>De(e.firstChild)&&e.firstChild===e.lastChild,$2=e=>e.name==="br"||e.value===ks,I2=(e,n)=>e.getBlockElements()[n.name]&&B2(n)&&$2(n.firstChild),F2=(e,n)=>{const o=e.getNonEmptyElements();return De(n)&&(n.isEmpty(o)||I2(e,n))},pN=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),F2(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},fK=e=>{var n,o;const r=e.firstChild,c=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),c&&c.id==="mce_marker"&&((o=c.parentNode)===null||o===void 0||o.removeChild(c)),e},mK=(e,n,o)=>{const r=n.serialize(o),c=e.createFragment(r);return fK(c)},gK=e=>{var n;return Pt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},hK=e=>e.data===ks||Bn(e),c7=e=>De(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&hK(e.firstChild),pK=e=>!e.firstChild||c7(e),i7=e=>e.length>0&&pK(e[e.length-1])?e.slice(0,-1):e,ZO=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},bK=(e,n)=>!!ZO(e,n),l7=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},Wo=(e,n)=>{const o=xe.before(e),c=hr(n).next(o);return c?c.toRange():null},jO=(e,n)=>{const o=xe.after(e),c=hr(n).prev(o);return c?c.toRange():null},bN=(e,n,o,r)=>{const c=l7(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),We.each(n,m=>{u.insertBefore(m,e)}),u.insertBefore(c[1],e),u.removeChild(e)),jO(n[n.length-1],o)},u7=(e,n,o)=>{const r=e.parentNode;return r&&We.each(n,c=>{r.insertBefore(c,e)}),Wo(e,o)},d7=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),jO(n[0],o)),f7=(e,n,o,r)=>{const c=mK(n,e,r),u=ZO(n,o.startContainer),m=i7(gK(c.firstChild)),v=1,w=2,E=n.getRoot(),M=N=>{const B=xe.fromRangeStart(o),U=hr(n.getRoot()),G=N===v?U.prev(B):U.next(B),W=G==null?void 0:G.getNode();return W?ZO(n,W)!==u:!0};return u?M(v)?u7(u,m,E):M(w)?d7(u,m,E,n):bN(u,m,E,o):null},kc=["pre"],kl=(e,n,o,r)=>{var c;const u=n.firstChild,m=n.lastChild,v=m.attr("data-mce-type")==="bookmark"?m.prev:m,w=u===v,E=Zt(kc,u.name);if(w&&E){const M=u.attr("contenteditable")!=="false",N=((c=e.getParent(o,e.isBlock))===null||c===void 0?void 0:c.nodeName.toLowerCase())===u.name,B=L.from(Tl(r,o)).forall(Oe);return M&&N&&B}else return!1},xE=F1,GO=(e,n,o)=>{if(De(o)){const r=e.getParent(n.endContainer,xE);return o===r&&u2(ee.fromDom(o),n)}else return!1},qO=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const c=o.firstChild,u=o.lastChild;!c||c===u&&c.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},SE=(e,n,o)=>{L.from(e.getParent(n,"td,th")).map(ee.fromDom).each(r=>Dk(r,o))},vN=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const c=e.getBody(),u=Sg(e),m="*[data-mce-fragment]",v=r.select(m);We.each(v,w=>{const E=B=>De(o[B.nodeName.toLowerCase()]),M=B=>B.childNodes.length===1;if((B=>!(SP(r,B)||S8(r,B)))(w)&&E(w)&&M(w)){const B=p0(r,w),U=(ne,re)=>ir(ne,le=>Zt(re,le)),G=ne=>M(w)&&r.is(ne,m)&&E(ne)&&(ne.nodeName===w.nodeName&&U(B,p0(r,ne))||G(ne.children[0])),W=ne=>De(ne)&&ne!==c&&(u.compare(w,ne)||W(ne.parentElement)),K=ne=>De(ne)&&ne!==c&&r.is(ne,m)&&(_8(r,w,ne)||K(ne.parentElement));(G(w.children[0])||W(w.parentElement)&&!K(w.parentElement))&&r.remove(w,!0)}})}},L2=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},EE=e=>{We.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},KO=e=>!!e.getAttribute("data-mce-fragment"),yN=(e,n)=>De(n)&&!e.schema.getVoidElements()[n.nodeName],H2=(e,n)=>{var o,r,c;let u;const m=e.dom,v=e.selection;if(!n)return;v.scrollIntoView(n);const w=Tl(e.getBody(),n);if(w&&m.getContentEditable(w)==="false"){m.remove(n),v.select(w);return}let E=m.createRng();const M=n.previousSibling;if(Fe(M)){E.setStart(M,(r=(o=M.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const U=n.nextSibling;Fe(U)&&(M.appendData(U.data),(c=U.parentNode)===null||c===void 0||c.removeChild(U))}else E.setStartBefore(n),E.setEndBefore(n);const N=U=>{let G=xe.fromRangeStart(U);return G=hr(e.getBody()).next(G),G==null?void 0:G.toRange()},B=m.getParent(n,m.isBlock);if(m.remove(n),B&&m.isEmpty(B)){const U=xE(B);Sm(ee.fromDom(B)),E.setStart(B,0),E.setEnd(B,0),!U&&!KO(B)&&(u=N(E))?(E=u,m.remove(B)):m.add(B,m.create("br",U?{}:{"data-mce-bogus":"1"}))}v.setRng(E)},m7=e=>{const n=e.dom,o=wE(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,xE);GO(n,o,r)?gE(e,o,ee.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&Fe(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},g7=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return L.some(n);return L.none()},uu=(e,n,o)=>{var r;return ho(o.children(),Kf)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},Oc=(e,n,o)=>{var r,c;const u=e.selection,m=e.dom,v=e.parser,w=o.merge,E=bg({validate:!0},e.schema),M='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=bc(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,M);let N=u.getRng();const B=N.startContainer,U=e.getBody();B===U&&u.isCollapsed()&&m.isBlock(U.firstChild)&&yN(e,U.firstChild)&&m.isEmpty(U.firstChild)&&(N=m.createRng(),N.setStart(U.firstChild,0),N.setEnd(U.firstChild,0),u.setRng(N)),u.isCollapsed()||m7(e);const G=u.getNode(),W={context:G.nodeName.toLowerCase(),data:o.data,insert:!0},K=v.parse(n,W);if(o.paste===!0&&pN(e.schema,K)&&bK(m,G))return N=f7(E,m,u.getRng(),K),N&&u.setRng(N),n;o.paste===!0&&kl(m,K,G,e.getBody())&&((r=K.firstChild)===null||r===void 0||r.unwrap()),L2(K);let ne=K.lastChild;if(ne&&ne.attr("id")==="mce_marker"){const re=ne;for(ne=ne.prev;ne&&ne.name!=="table";ne=ne.walk(!0))if(ne.type===3||!m.isBlock(ne.name)){ne.parent&&e.schema.isValidChild(ne.parent.name,"span")&&ne.parent.insert(re,ne,ne.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(G),!W.invalid&&!uu(m,G,K))n=E.serialize(K),qO(e,n,G);else{e.selection.setContent(M);let re=u.getNode(),le;const de=e.getBody();for(Tm(re)?re=le=de:le=re;le&&le!==de;)re=le,le=le.parentNode;n=re===de?de.innerHTML:m.getOuterHTML(re);const Ae=v.parse(n),Ve=g7(Ae),ct=Ve.bind(r7).getOr(Ae);Ve.each(lt=>lt.replace(K));const Ee=K.children(),be=(c=K.parent)!==null&&c!==void 0?c:Ae;K.unwrap();const Me=Pt(Ee,lt=>WO(e.schema,lt,be));Nn(Me,e.schema,ct),zO(v.getNodeFilters(),v.getAttributeFilters(),Ae),n=E.serialize(Ae),re===de?m.setHTML(de,n):m.setOuterHTML(re,n)}return vN(e,w),H2(e,m.get("mce_marker")),EE(e.getBody()),SE(m,u.getStart(),e.schema),Uv(e.schema,e.getBody(),u.getStart()),n},Tg=e=>e instanceof Aa,Hi=e=>{h0(e)&&Ir(e.getBody()).each(n=>{const o=n.getNode(),r=Ei(o)?Ir(o).getOr(n):n;e.selection.setRng(r.toRange())})},YO=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&Hi(e)},co=(e,n,o,r)=>{if(o=bc(o),o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+c+"</li>");const u=gr(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,ad(e),o)):o||(o=c),YO(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=bg({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=ib(ee.fromDom(n))?o:We.trim(o);return YO(e,c,r.no_selection),{content:c,html:c}}},h7=(e,n,o,r)=>{zO(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=bg({validate:!1},e.schema).serialize(o),u=bc(ib(ee.fromDom(n))?c:We.trim(c));return YO(e,u,r.no_selection),{content:o,html:u}},Sp=(e,n,o)=>L.from(e.getBody()).map(r=>Tg(n)?h7(e,r,n,o):co(e,r,n,o)).getOr({content:n,html:Tg(o.content)?"":o.content}),C0=e=>se(e)?e:Ne,CN=(e,n,o)=>{let r=e.dom;const c=C0(o);for(;r.parentNode;){r=r.parentNode;const u=ee.fromDom(r),m=n(u);if(m.isSome())return m;if(c(u))break}return L.none()},V2=(e,n,o)=>{const r=n(e),c=C0(o);return r.orThunk(()=>c(e)?L.none():CN(e,n,c))},z2=qb,wN=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if(Sc(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},U2=(e,n,o,r,c)=>{const u=e.dom.getRoot();if(n===u)return!1;const m=e.dom.getParent(n,v=>wN(e,v,o)?!0:v.parentNode===u||!!du(e,v,o,r,!0));return!!du(e,m,o,r,c)},_E=(e,n,o)=>Us(o)&&z2(n,o.inline)||El(o)&&z2(n,o.block)?!0:Sc(o)?ot(n)&&e.is(n,o.selector):!1,XO=(e,n,o,r,c,u)=>{const m=o[r],v=r==="attributes";if(se(o.onmatch))return o.onmatch(n,o,r);if(m){if(gv(m)){for(let w=0;w<m.length;w++)if(v?e.getAttrib(n,m[w]):f2(e,n,m[w]))return!0}else for(const w in m)if(It(m,w)){const E=v?e.getAttrib(n,w):f2(e,n,w),M=Lf(m[w],u),N=An(E)||$a(E);if(N&&An(M))continue;if(c&&N&&!o.exact||(!c||o.exact)&&!z2(E,bd(M,w)))return!1}}return!0},du=(e,n,o,r,c)=>{const u=e.formatter.get(o),m=e.dom;if(u&&ot(n))for(let v=0;v<u.length;v++){const w=u[v];if(_E(e.dom,n,w)&&XO(m,n,w,"attributes",c,r)&&XO(m,n,w,"styles",c,r)){const E=w.classes;if(E){for(let M=0;M<E.length;M++)if(!e.dom.hasClass(n,Lf(E[M],r)))return}return w}}},W2=(e,n,o,r,c)=>{if(r)return U2(e,r,n,o,c);if(r=e.selection.getNode(),U2(e,r,n,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&U2(e,u,n,o,c))},xN=(e,n,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,m=>{for(let v=0;v<n.length;v++){const w=n[v];!c[w]&&du(e,m,w,o)&&(c[w]=!0,r.push(w))}},e.dom.getRoot()),r},TE=(e,n)=>{const o=c=>kn(c,ee.fromDom(e.getBody())),r=(c,u)=>du(e,c.dom,u)?L.some(u):L.none();return L.from(e.selection.getStart(!0)).bind(c=>V2(ee.fromDom(c),u=>Nd(n,m=>r(u,m)),o)).getOrNull()},p7=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const c=e.selection.getStart(),u=Hf(r,c);for(let m=o.length-1;m>=0;m--){const v=o[m];if(!Sc(v))return!0;for(let w=u.length-1;w>=0;w--)if(r.is(u[w],v.selector))return!0}}return!1},b7=(e,n,o)=>Ko(o,(r,c)=>{const u=RS(e,c);return e.formatter.matchNode(n,c,{},u)?r.concat([c]):r},[]),Z2=Rs,v7=(e,n)=>e.importNode(n,!0),SN=e=>{if(e){const n=new Ts(e,e);for(let o=n.current();o;o=n.next())if(Fe(o))return o}return null},kE=e=>{const n=ee.fromTag("span");return Ur(n,{id:Fb,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Fs(n,ee.fromText(Z2)),n},y7=e=>{const n=SN(e);return n&&n.data.charAt(0)===Z2&&n.deleteData(0,1),n},JO=(e,n,o)=>{const r=e.dom,c=e.selection;if(PS(n))bp(e,!1,ee.fromDom(n),o,!0);else{const u=c.getRng(),m=r.getParent(n,r.isBlock),v=u.startContainer,w=u.startOffset,E=u.endContainer,M=u.endOffset,N=y7(n);r.remove(n,!0),v===N&&w>0&&u.setStart(N,w-1),E===N&&M>0&&u.setEnd(N,M-1),m&&r.isEmpty(m)&&vl(ee.fromDom(m)),c.setRng(u)}},OE=(e,n,o)=>{const r=e.dom,c=e.selection;if(n)JO(e,n,o);else if(n=Pf(e.getBody(),c.getStart()),!n)for(;n=r.get(Fb);)JO(e,n,o)},C7=(e,n,o)=>{var r,c;const u=e.dom,m=u.getParent(o,Le(rp,e.schema));m&&u.isEmpty(m)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(iy(ee.fromDom(o)),u.isEmpty(o)?(c=o.parentNode)===null||c===void 0||c.replaceChild(n,o):u.insertAfter(n,o))},QO=(e,n)=>(e.appendChild(n),n),w0=(e,n)=>{var o;const r=Pd(e,(u,m)=>QO(u,m.cloneNode(!1)),n),c=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return QO(r,c.createTextNode(Z2))},w7=(e,n,o,r,c,u)=>{const m=e.formatter,v=e.dom,w=Pt(zr(m.get()),N=>N!==r&&!br(N,"removeformat")),E=b7(e,o,w);if(Pt(E,N=>!DS(e,N,r)).length>0){const N=o.cloneNode(!1);return v.add(n,N),m.remove(r,c,N,u),v.remove(N),L.some(N)}else return L.none()},EN=e=>Um(e,zm(e).replace(new RegExp(`${ks}$`)," ")),eA=(e,n)=>{const o=()=>{n!==null&&!e.dom.isEmpty(n)&&jl(ee.fromDom(n)).each(r=>{Xs(r)?EN(r):Av(r,c=>Xs(c)).each(c=>{Xs(c)&&EN(c)})})};e.once("input",r=>{r.data&&!Bf(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},x7=(e,n,o)=>{let r;const c=e.selection,u=e.formatter.get(n);if(!u)return;const m=c.getRng();let v=m.startOffset;const E=m.startContainer.nodeValue;r=Pf(e.getBody(),c.getStart());const M=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(E&&v>0&&v<E.length&&M.test(E.charAt(v))&&M.test(E.charAt(v-1))){const N=c.getBookmark();m.collapse(!0);let B=vd(e.dom,m,u);B=bt(B),e.formatter.apply(n,o,B),c.moveToBookmark(N)}else{let N=r?SN(r):null;(!r||(N==null?void 0:N.data)!==Z2)&&(r=v7(e.getDoc(),kE(!0).dom),N=r.firstChild,m.insertNode(r),v=1,eA(e,r)),e.formatter.apply(n,o,r),c.setCursorLocation(N,v)}},_N=(e,n,o,r)=>{const c=e.dom,u=e.selection;let m=!1;const v=e.formatter.get(n);if(!v)return;const w=u.getRng(),E=w.startContainer,M=w.startOffset;let N=E;Fe(E)&&(M!==E.data.length&&(m=!0),N=N.parentNode);const B=[];let U;for(;N;){if(du(e,N,n,o,r)){U=N;break}N.nextSibling&&(m=!0),B.push(N),N=N.parentNode}if(U)if(m){const G=u.getBookmark();w.collapse(!0);let W=vd(c,w,v,!0);W=bt(W),e.formatter.remove(n,o,W,r),u.moveToBookmark(G)}else{const G=Pf(e.getBody(),U),W=De(G)?c.getParents(U.parentNode,dt,G):[],K=kE(!1).dom;C7(e,K,G??U);const ne=w7(e,K,U,n,o,r),re=w0([...B,...ne.toArray(),...W],K);G&&JO(e,G,De(G)),u.setCursorLocation(re,1),eA(e,K),c.isEmpty(U)&&c.remove(U)}},Vi=(e,n,o)=>{const r=e.selection,c=e.getBody();OE(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===Z2&&OE(e,Pf(c,r.getStart()),!0),(n===37||n===39)&&OE(e,Pf(c,r.getStart()),!0)},S7=e=>Fe(e)&&Ul(e.data,ks),TN=e=>{e.on("mouseup keydown",n=>{Vi(e,n.keyCode,S7(e.selection.getRng().endContainer))})},AE=e=>{const n=kE(!1),o=w0(e,n.dom);return{caretContainer:n,caretPosition:xe(o,0)}},RE=(e,n)=>{const{caretContainer:o,caretPosition:r}=AE(n);return uo(ee.fromDom(e),o),fo(ee.fromDom(e)),r},kN=(e,n)=>{const{caretContainer:o,caretPosition:r}=AE(n);return e.insertNode(o.dom),r},tA=(e,n)=>{if(Ya(n.dom))return!1;const o=e.schema.getTextInlineElements();return It(o,Tn(n))&&!Ya(n.dom)&&!ql(n.dom)},j2={},ON=Zc(["pre"]),AN=(e,n)=>{j2[e]||(j2[e]=[]),j2[e].push(n)},RN=(e,n)=>{It(j2,e)&&_e(j2[e],o=>{o(n)})};AN("pre",e=>{const n=e.selection.getRng(),o=c=>u=>{const m=u.previousSibling;return ON(m)&&Zt(c,m)},r=(c,u)=>{const m=ee.fromDom(u),v=Bu(m).dom;fo(m),Fu(ee.fromDom(c),[ee.fromTag("br",v),ee.fromTag("br",v),...Js(m)])};if(!n.collapsed){const c=e.selection.getSelectedBlocks(),u=Pt(Pt(c,ON),o(c));_e(u,m=>{r(m.previousSibling,m)})}});const si=["fontWeight","fontStyle","color","fontSize","fontFamily"],E7=e=>Kt(e.styles)&&ho(zr(e.styles),n=>Zt(si,n)),_7=e=>us(e,n=>Us(n)&&n.inline==="span"&&E7(n)),T7=(e,n)=>{const o=e.get(n);return ln(o)?_7(o):L.none()},DE=(e,n)=>Ta(n,xe.fromRangeStart(e)).isNone(),DN=(e,n)=>$r(n,xe.fromRangeEnd(e)).exists(o=>!Bn(o.getNode())||$r(n,o).isSome())===!1,k7=e=>n=>jc(n)&&e.isEditable(n),O7=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return DE(o,n[0])&&DN(o,n[0])?n:[];{const r=Ar(n).filter(m=>DE(o,m)).toArray(),c=Hl(n).filter(m=>DN(o,m)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(c)}},nA=e=>Pt(O7(e),k7(e.dom)),Ol=e=>Pt(e.getSelectedBlocks(),k7(e.dom)),G2=We.each,x0=e=>ot(e)&&!ka(e)&&!Ya(e)&&!ql(e),ME=(e,n)=>{for(let o=e;o;o=o[n]){if(Fe(o)&&oo(o.data))return e;if(ot(o)&&!ka(o))return o}return e},MN=(e,n,o)=>{const r=Sg(e),c=Wc(n)&&e.dom.isEditable(n),u=Wc(o)&&e.dom.isEditable(o);if(c&&u){const m=ME(n,"previousSibling"),v=ME(o,"nextSibling");if(r.compare(m,v)){for(let w=m.nextSibling;w&&w!==v;){const E=w;w=w.nextSibling,m.appendChild(E)}return e.dom.remove(v),We.each(We.grep(v.childNodes),w=>{m.appendChild(w)}),m}}return o},oA=(e,n,o,r)=>{var c;if(r&&n.merge_siblings!==!1){const u=(c=MN(e,d2(r),r))!==null&&c!==void 0?c:r;MN(e,u,d2(u,!0))}},A7=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";G2(e.select(r,o),c=>{x0(c)&&e.isEditable(c)&&G2(n.styles,(u,m)=>{e.setStyle(c,m,"")})})}},PE=(e,n,o)=>{G2(e.childNodes,r=>{x0(r)&&(n(r)&&o(r),r.hasChildNodes()&&PE(r,n,o))})},sA=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},PN=(e,n)=>o=>!!(o&&f2(e,o,n)),rA=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),sA(e,r)},Ep=Cc.generate([{keep:[]},{rename:["name"]},{removed:[]}]),_p=/^(src|href|style)$/,NE=We.each,BE=qb,NN=e=>/^(TR|TH|TD)$/.test(e.nodeName),BN=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),$N=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],c=n[o?"startOffset":"endOffset"];if(ot(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return Fe(r)&&o&&c>=r.data.length&&(r=new Ts(r,e.getBody()).next()||r),Fe(r)&&!o&&c===0&&(r=new Ts(r,e.getBody()).prev()||r),r},IN=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return NN(e)&&r?e.nodeName==="TR"&&r[o]||r:e},aA=(e,n,o,r)=>{var c;const u=e.create(o,r);return(c=n.parentNode)===null||c===void 0||c.insertBefore(u,n),u.appendChild(n),u},FN=(e,n,o,r,c)=>{const u=ee.fromDom(n),m=ee.fromDom(e.create(r,c)),v=o?O1(u):Aw(u);return Fu(m,v),o?(uo(u,m),qd(m,u)):(Si(u,m),Fs(m,u)),m.dom},LN=(e,n)=>n.links&&e.nodeName==="A",HN=(e,n,o)=>{const r=n.parentNode;let c;const u=e.dom,m=gr(e);El(o)&&r===u.getRoot()&&(!o.list_block||!BE(n,o.list_block))&&_e(ha(n.childNodes),v=>{Ff(e,m,v.nodeName.toLowerCase())?c?c.appendChild(v):(c=aA(u,v,m),u.setAttribs(c,ad(e))):c=null}),!(T4(o)&&!BE(o.inline,n))&&u.remove(n,!0)},$E=(e,n,o)=>fa(e)?{name:n,value:null}:{name:e,value:Lf(n,o)},kg=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},VN=(e,n,o,r,c)=>{let u=!1;NE(o.styles,(m,v)=>{const{name:w,value:E}=$E(v,m,r),M=bd(E,w);(o.remove_similar||oe(E)||!ot(c)||BE(f2(e,c,w),M))&&e.setStyle(n,w,""),u=!0}),u&&kg(e,n)},R7=(e,n,o)=>{n==="removeformat"?_e(Ol(e.selection),r=>{_e(si,c=>e.dom.setStyle(r,c,"")),kg(e.dom,r)}):T7(e.formatter,n).each(r=>{_e(Ol(e.selection),c=>VN(e.dom,c,r,o,null))})},q2=(e,n,o,r,c)=>{const u=e.dom,m=Sg(e),v=e.schema;if(Us(n)&&hc(v,n.inline)&&tf(v,r)&&r.parentElement===e.getBody())return HN(e,r,n),Ep.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!_E(u,r,n)&&!LN(r,n))return Ep.keep();const w=r,E=n.preserve_attributes;if(Us(n)&&n.remove==="all"&&ln(E)){const M=Pt(u.getAttribs(w),N=>Zt(E,N.name.toLowerCase()));if(u.removeAllAttribs(w),_e(M,N=>u.setAttrib(w,N.name,N.value)),M.length>0)return Ep.rename("span")}if(n.remove!=="all"){VN(u,w,n,o,c),NE(n.attributes,(N,B)=>{const{name:U,value:G}=$E(B,N,o);if(n.remove_similar||oe(G)||!ot(c)||BE(u.getAttrib(c,U),G)){if(U==="class"){const W=u.getAttrib(w,U);if(W){let K="";if(_e(W.split(/\s+/),ne=>{/mce\-\w+/.test(ne)&&(K+=(K?" ":"")+ne)}),K){u.setAttrib(w,U,K);return}}}if(_p.test(U)&&w.removeAttribute("data-mce-"+U),U==="style"&&Zc(["li"])(w)&&u.getStyle(w,"list-style-type")==="none"){w.removeAttribute(U),u.setStyle(w,"list-style-type","none");return}U==="class"&&w.removeAttribute("className"),w.removeAttribute(U)}}),NE(n.classes,N=>{N=Lf(N,o),(!ot(c)||u.hasClass(c,N))&&u.removeClass(w,N)});const M=u.getAttribs(w);for(let N=0;N<M.length;N++){const B=M[N].nodeName;if(!m.isAttributeInternal(B))return Ep.keep()}}return n.remove!=="none"?(HN(e,w,n),Ep.removed()):Ep.keep()},zN=(e,n,o,r,c)=>{let u;return n.parentNode&&_e(Hf(e.dom,n.parentNode).reverse(),m=>{if(!u&&ot(m)&&m.id!=="_start"&&m.id!=="_end"){const v=du(e,m,o,r,c);v&&v.split!==!1&&(u=m)}}),u},UN=(e,n,o,r)=>q2(e,n,o,r,r).fold(Je(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),Je(null)),D7=(e,n,o,r,c,u,m,v)=>{var w,E;let M,N;const B=e.dom;if(o){const U=o.parentNode;for(let G=r.parentNode;G&&G!==U;G=G.parentNode){let W=B.clone(G,!1);for(let K=0;K<n.length&&(W=UN(e,n[K],v,W),W!==null);K++);W&&(M&&W.appendChild(M),N||(N=W),M=W)}(!m.mixed||!B.isBlock(o))&&(r=(w=B.split(o,r))!==null&&w!==void 0?w:r),M&&N&&((E=c.parentNode)===null||E===void 0||E.insertBefore(M,c),N.appendChild(c),Us(m)&&oA(e,m,v,M))}return r},WN=(e,n,o,r,c)=>{const u=e.formatter.get(n),m=u[0],v=e.dom,w=e.selection,E=W=>{const K=zN(e,W,n,o,c);return D7(e,u,K,W,W,!0,m,o)},M=W=>ka(W)&&ot(W)&&(W.id==="_start"||W.id==="_end"),N=W=>ho(u,K=>fu(e,K,o,W,W)),B=W=>{const K=ha(W.childNodes),re=N(W)||ho(u,Ae=>_E(v,W,Ae)),le=W.parentNode;if(!re&&De(le)&&Bi(m)&&N(le),m.deep&&K.length)for(let Ae=0;Ae<K.length;Ae++)B(K[Ae]);_e(["underline","line-through","overline"],Ae=>{ot(W)&&e.dom.getStyle(W,"text-decoration")===Ae&&W.parentNode&&m2(v,W.parentNode)===Ae&&fu(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Ae}},void 0,W)})},U=W=>{const K=v.get(W?"_start":"_end");if(K){let ne=K[W?"firstChild":"lastChild"];return M(ne)&&(ne=ne[W?"firstChild":"lastChild"]),Fe(ne)&&ne.data.length===0&&(ne=W?K.previousSibling||K.nextSibling:K.nextSibling||K.previousSibling),v.remove(K,!0),ne}else return null},G=W=>{let K,ne,re=vd(v,W,u,W.collapsed);if(m.split){if(re=bt(re),K=$N(e,re,!0),ne=$N(e,re),K!==ne){if(K=IN(K,!0),ne=IN(ne,!1),BN(v,K,ne)){const de=L.from(K.firstChild).getOr(K);E(FN(v,de,!0,"span",{id:"_start","data-mce-type":"bookmark"})),U(!0);return}if(BN(v,ne,K)){const de=L.from(ne.lastChild).getOr(ne);E(FN(v,de,!1,"span",{id:"_end","data-mce-type":"bookmark"})),U(!1);return}K=aA(v,K,"span",{id:"_start","data-mce-type":"bookmark"}),ne=aA(v,ne,"span",{id:"_end","data-mce-type":"bookmark"});const le=v.createRng();le.setStartAfter(K),le.setEndBefore(ne),fg(v,le,de=>{_e(de,Ae=>{!ka(Ae)&&!ka(Ae.parentNode)&&E(Ae)})}),E(K),E(ne),K=U(!0),ne=U()}else K=ne=E(K);re.startContainer=K.parentNode?K.parentNode:K,re.startOffset=v.nodeIndex(K),re.endContainer=ne.parentNode?ne.parentNode:ne,re.endOffset=v.nodeIndex(ne)+1}fg(v,re,le=>{_e(le,B)})};if(r){if(If(r)){const W=v.createRng();W.setStartBefore(r),W.setEndAfter(r),G(W)}else G(r);lp(e,n,r,o);return}!w.isCollapsed()||!Us(m)||ig(e).length?(pd(e,()=>lg(e,G),W=>Us(m)&&W2(e,n,o,W)),e.nodeChanged()):_N(e,n,o,c),R7(e,n,o),lp(e,n,r,o)},ZN=(e,n,o,r,c)=>{(r||e.selection.isEditable())&&WN(e,n,o,r,c)},fu=(e,n,o,r,c)=>q2(e,n,o,r,c).fold(Ne,u=>(e.dom.rename(r,u),!0),dt),cA=We.each,jN=(e,n,o,r)=>{const c=u=>{if(Wc(u)&&ot(u.parentNode)&&e.isEditable(u)){const m=m2(e,u.parentNode);e.getStyle(u,"color")&&m?e.setStyle(u,"text-decoration",m):e.getStyle(u,"text-decoration")===m&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(We.walk(r,c,"childNodes"),c(r))},GN=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const c=PN(e,"fontSize");PE(r,u=>c(u)&&e.isEditable(u),rA(e,"backgroundColor",Lf(n.styles.backgroundColor,o)))}},IE=(e,n,o,r)=>{if(Us(n)&&(n.inline==="sub"||n.inline==="sup")){const c=PN(e,"fontSize");PE(r,m=>c(m)&&e.isEditable(m),rA(e,"fontSize",""));const u=Pt(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},qN=(e,n,o,r)=>{cA(n,c=>{Us(c)&&cA(e.dom.select(c.inline,r),u=>{x0(u)&&fu(e,c,o,u,c.exact?u:null)}),A7(e.dom,c,r)})},M7=(e,n,o,r,c)=>{const u=c.parentNode;du(e,u,o,r)&&fu(e,n,r,c)||n.merge_with_parents&&u&&e.dom.getParent(u,m=>du(e,m,o,r)?(fu(e,n,r,c),!0):!1)},K2=We.each,P7=(e,n,o,r)=>{if(Ux(e)&&Us(n)&&o.parentNode){const c=Gv(e.schema),u=$w(ee.fromDom(o),m=>Ya(m.dom));return pa(c,r)&&Hs(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},KN=(e,n,o,r)=>{if(K2(o.styles,(c,u)=>{e.setStyle(n,u,Lf(c,r))}),o.styles){const c=e.getAttrib(n,"style");c&&e.setAttrib(n,"data-mce-style",c)}},FE=(e,n,o,r)=>{const c=e.formatter.get(n),u=c[0],m=!r&&e.selection.isCollapsed(),v=e.dom,w=e.selection,E=(G,W=u)=>{se(W.onformat)&&W.onformat(G,W,o,r),KN(v,G,W,o),K2(W.attributes,(K,ne)=>{v.setAttrib(G,ne,Lf(K,o))}),K2(W.classes,K=>{const ne=Lf(K,o);v.hasClass(G,ne)||v.addClass(G,ne)})},M=(G,W)=>{let K=!1;return K2(G,ne=>Sc(ne)?v.getContentEditable(W)==="false"&&!ne.ceFalseOverride||De(ne.collapsed)&&ne.collapsed!==m?!0:v.is(W,ne.selector)&&!Ya(W)?(E(W,ne),K=!0,!1):!0:!1),K},N=G=>{if(Q(G)){const W=v.create(G);return E(W),W}else return null},B=(G,W,K)=>{const ne=[];let re=!0;const le=u.inline||u.block,de=N(le),Ae=Ee=>MS(u)&&du(e,Ee,n,o),Ve=(Ee,be,Me)=>{const lt=Kb(u)&&rp(e.schema,Ee)&&Ff(e,be,le);return Me&&lt},ct=(Ee,be,Me,lt)=>{const xt=Ee.nodeName.toLowerCase(),dn=Ff(e,le,xt)&&Ff(e,be,le),fn=!K&&Fe(Ee)&&Rh(Ee.data),Fn=Ya(Ee),Gn=!Us(u)||!G.isBlock(Ee);return(Me||lt)&&dn&&!fn&&!Fn&&Gn};fg(G,W,Ee=>{let be;const Me=lt=>{let xt=!1,dn=re,fn=!1;const Fn=lt.parentNode,Gn=Fn.nodeName.toLowerCase(),ns=G.getContentEditable(lt);De(ns)&&(dn=re,re=ns==="true",xt=!0,fn=_4(e,lt));const _r=re&&!xt;if(Bn(lt)&&!P7(e,u,lt,Gn)){be=null,El(u)&&G.remove(lt);return}if(Ae(lt)){be=null;return}if(Ve(lt,Gn,_r)){const cs=G.rename(lt,le);E(cs),ne.push(cs),be=null;return}if(Sc(u)){let cs=M(c,lt);if(!cs&&De(Fn)&&Bi(u)&&(cs=M(c,Fn)),!Us(u)||cs){be=null;return}}De(de)&&ct(lt,Gn,_r,fn)?(be||(be=G.clone(de,!1),Fn.insertBefore(be,lt),ne.push(be)),fn&&xt&&(re=dn),be.appendChild(lt)):(be=null,_e(ha(lt.childNodes),Me),xt&&(re=dn),be=null)};_e(Ee,Me)}),u.links===!0&&_e(ne,Ee=>{const be=Me=>{Me.nodeName==="A"&&E(Me,u),_e(ha(Me.childNodes),be)};be(Ee)}),_e(ne,Ee=>{const be=xt=>{let dn=0;return _e(xt.childNodes,fn=>{!Gb(fn)&&!ka(fn)&&dn++}),dn},Me=xt=>us(xt.childNodes,_n).filter(fn=>G.getContentEditable(fn)!=="false"&&_E(G,fn,u)).map(fn=>{const Fn=G.clone(fn,!1);return E(Fn),G.replace(Fn,xt,!0),G.remove(fn,!0),Fn}).getOr(xt),lt=be(Ee);if((ne.length>1||!G.isBlock(Ee))&&lt===0){G.remove(Ee,!0);return}(Us(u)||El(u)&&u.wrapper)&&(!u.exact&&lt===1&&(Ee=Me(Ee)),qN(e,c,o,Ee),M7(e,u,n,o,Ee),GN(G,u,o,Ee),jN(G,u,o,Ee),IE(G,u,o,Ee),oA(e,u,o,Ee))})},U=If(r)?r:w.getNode();if(v.getContentEditable(U)==="false"&&!_4(e,U)){r=U,M(c,r),Ja(e,n,r,o);return}if(u){if(r)if(If(r)){if(!M(c,r)){const G=v.createRng();G.setStartBefore(r),G.setEndAfter(r),B(v,vd(v,G,c),!0)}}else B(v,r,!0);else!m||!Us(u)||ig(e).length?(w.setRng(wE(w.getRng())),pd(e,()=>{lg(e,(G,W)=>{const K=W?G:vd(v,G,c);B(v,K,!1)})},dt),e.nodeChanged()):x7(e,n,o),T7(e.formatter,n).each(G=>{_e(nA(e.selection),W=>KN(v,W,G,o))});RN(n,e)}Ja(e,n,r,o)},iA=(e,n,o,r)=>{(r||e.selection.isEditable())&&FE(e,n,o,r)},LE=e=>It(e,"vars"),N7=(e,n)=>{e.set({}),n.on("NodeChange",o=>{uA(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=L.from(o.node).map(c=>If(c)?c:c.startContainer).bind(c=>ot(c)?L.some(c):L.from(c.parentElement)).getOrThunk(()=>YN(n));uA(n,r,e.get())})},YN=e=>e.selection.getStart(),lA=(e,n,o,r,c)=>Yg(n,v=>{const w=e.formatter.matchNode(v,o,c??{},r);return!Go(w)},v=>wN(e,v,o)?!0:r?!1:De(e.formatter.matchNode(v,o,c,!0))),HE=(e,n)=>{const o=n??YN(e);return Pt(Hf(e.dom,o),r=>ot(r)&&!ql(r))},uA=(e,n,o)=>{const r=HE(e,n);it(o,(c,u)=>{const m=v=>{const w=lA(e,r,u,v.similar,LE(v)?v.vars:void 0),E=w.isSome();if(v.state.get()!==E){v.state.set(E);const M=w.getOr(n);LE(v)?v.callback(E,{node:M,format:u,parents:r}):_e(v.callbacks,N=>N(E,{node:M,format:u,parents:r}))}};_e([c.withSimilar,c.withoutSimilar],m),_e(c.withVars,m)})},B7=(e,n,o,r,c,u)=>{const m=n.get();_e(o.split(","),v=>{const w=Co(m,v).getOrThunk(()=>{const M={withSimilar:{state:mo(!1),similar:!0,callbacks:[]},withoutSimilar:{state:mo(!1),similar:!1,callbacks:[]},withVars:[]};return m[v]=M,M}),E=()=>{const M=HE(e);return lA(e,M,v,c,u).isSome()};if(Go(u)){const M=c?w.withSimilar:w.withoutSimilar;M.callbacks.push(r),M.callbacks.length===1&&M.state.set(E())}else w.withVars.push({state:mo(E()),similar:c,vars:u,callback:r})}),n.set(m)},$7=(e,n,o)=>{const r=e.get();_e(n.split(","),c=>Co(r,c).each(u=>{r[c]={withSimilar:{...u.withSimilar,callbacks:Pt(u.withSimilar.callbacks,m=>m!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:Pt(u.withoutSimilar.callbacks,m=>m!==o)},withVars:Pt(u.withVars,m=>m.callback!==o)}})),e.set(r)},I7=(e,n,o,r,c,u)=>(B7(e,n,o,r,c,u),{unbind:()=>$7(n,o,r)}),VE=(e,n,o,r)=>{const c=e.formatter.get(n);c&&(W2(e,n,o,r)&&(!("toggle"in c[0])||c[0].toggle)?ZN(e,n,o,r):iA(e,n,o,r))},Sd=We.explode,XN=()=>{const e={};return{addFilter:(c,u)=>{_e(Sd(c),m=>{It(e,m)||(e[m]={name:m,callbacks:[]}),e[m].callbacks.push(u)})},getFilters:()=>fm(e),removeFilter:(c,u)=>{_e(Sd(c),m=>{if(It(e,m))if(De(u)){const v=e[m],w=Pt(v.callbacks,E=>E!==u);w.length>0?v.callbacks=w:delete e[m]}else delete e[m]})}}},dA=(e,n)=>{_e(n,o=>{e.attr(o,null)})},ms=(e,n,o)=>{e.addNodeFilter("font",r=>{_e(r,c=>{const u=n.parse(c.attr("style")),m=c.attr("color"),v=c.attr("face"),w=c.attr("size");m&&(u.color=m),v&&(u["font-family"]=v),w&&Fd(w).each(E=>{u["font-size"]=o[E-1]}),c.name="span",c.attr("style",n.serialize(u)),dA(c,["color","face","size"])})})},fA=(e,n,o)=>{e.addNodeFilter("strike",r=>{const c=n.type!=="html4";_e(r,u=>{if(c)u.name="s";else{const m=o.parse(u.attr("style"));m["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(m))}})})},mA=(e,n,o)=>{var r;const c=Ku();n.convert_fonts_to_spans&&ms(e,c,We.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),fA(e,o,c)},Yf=(e,n,o)=>{n.inline_styles&&mA(e,n,o)},JN=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),QN=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},Tp=e=>{const[n,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(c){const u=c[2]===";base64",m=u?QN(r):decodeURIComponent(r);return L.some({type:c[1],data:m,base64Encoded:u})}else return L.none()},eB=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return L.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return L.some(new Blob([c],{type:e}))},F7=e=>new Promise((n,o)=>{Tp(e).bind(({type:r,data:c,base64Encoded:u})=>eB(r,c,u)).fold(()=>o("Invalid data URI"),n)}),S0=e=>hs(e,"blob:")?JN(e):hs(e,"data:")?F7(e):Promise.reject("Unknown URI format"),tB=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var c;o((c=r.error)===null||c===void 0?void 0:c.message)},r.readAsDataURL(e)});let kp=0;const L7=e=>"blobid"+kp++,Xf=(e,n,o)=>Tp(e).bind(({data:r,type:c,base64Encoded:u})=>{if(n&&!u)return L.none();{const m=u?r:btoa(r);return o(m,c)}}),nB=(e,n,o)=>{const r=e.create(L7(),n,o);return e.add(r),r},ri=(e,n,o=!1)=>Xf(n,o,(r,c)=>L.from(e.getByData(r,c)).orThunk(()=>eB(c,r).map(u=>nB(e,u,r)))),Y2=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(hs(n,"blob:")){const r=e.getByUri(n);return De(r)?Promise.resolve(r):S0(n).then(c=>tB(c).then(u=>Xf(u,!1,m=>L.some(nB(e,c,m))).getOrThunk(o)))}else return hs(n,"data:")?ri(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},gA=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,hA=e=>L.from(e.match(gA)).bind(n=>dm(n,1)).map(n=>hs(n,"www.")?n.substring(4):n),oB=(e,n)=>{L.from(e.attr("src")).bind(hA).forall(o=>!Zt(n,o))&&e.attr("sandbox","")},E0=(e,n)=>hs(e,`${n}/`),H7=e=>Go(e)?"iframe":E0(e,"image")?"img":E0(e,"video")?"video":E0(e,"audio")?"audio":"iframe",Al=({type:e,src:n,width:o,height:r}={},c,u)=>{const m=H7(e),v=new Aa(m,1);return v.attr(m==="audio"?{src:n}:{src:n,width:o,height:r}),(m==="audio"||m==="video")&&v.attr("controls",""),m==="iframe"&&c&&oB(v,u),v},zE=e=>De(e.attr("data-mce-bogus")),sB=e=>e.attr("src")===Jt.transparentSrc||De(e.attr("data-mce-placeholder")),pA=(e,n)=>{const{blob_cache:o}=n;if(o){const r=c=>{const u=c.attr("src");sB(c)||zE(c)||An(u)||ri(o,u,!0).each(m=>{c.attr("src",m.blobUri())})};e.addAttributeFilter("src",c=>_e(c,r))}},bA=(e,n)=>{var o,r;const c=e.schema;e.addAttributeFilter("href",w=>{let E=w.length;const M=B=>B.split(" ").filter(G=>G.length>0).concat(["noopener"]).sort().join(" "),N=B=>{const U=B?We.trim(B):"";return/\b(noopener)\b/g.test(U)?U:M(U)};if(!n.allow_unsafe_link_target)for(;E--;){const B=w[E];B.name==="a"&&B.attr("target")==="_blank"&&B.attr("rel",N(B.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",w=>{let E=w.length,M,N,B,U;for(;E--;)if(U=w[E],U.name==="a"&&U.firstChild&&!U.attr("href"))for(B=U.parent,M=U.lastChild;M&&B;)N=M.prev,B.insert(M,U),M=N}),n.fix_list_elements&&e.addNodeFilter("ul,ol",w=>{let E=w.length,M,N;for(;E--;)if(M=w[E],N=M.parent,N&&(N.name==="ul"||N.name==="ol"))if(M.prev&&M.prev.name==="li")M.prev.append(M);else{const B=new Aa("li",1);B.attr("style","list-style-type: none"),M.wrap(B)}});const u=c.getValidClasses();n.validate&&u&&e.addAttributeFilter("class",w=>{var E;let M=w.length;for(;M--;){const N=w[M],B=(E=N.attr("class"))!==null&&E!==void 0?E:"",U=We.explode(B," ");let G="";for(let W=0;W<U.length;W++){const K=U[W];let ne=!1,re=u["*"];re&&re[K]&&(ne=!0),re=u[N.name],!ne&&re&&re[K]&&(ne=!0),ne&&(G&&(G+=" "),G+=K)}G.length||(G=null),N.attr("class",G)}}),pA(e,n);const m=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,v=Xg((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",w=>_e(w,E=>{E.replace(Al({type:E.attr("type"),src:E.name==="object"?E.attr("data"):E.attr("src"),width:E.attr("width"),height:E.attr("height")},m,v))})),m&&e.addNodeFilter("iframe",w=>_e(w,E=>oB(E,v)))};/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:Og,setPrototypeOf:UE,isFrozen:V7,getPrototypeOf:rB,getOwnPropertyDescriptor:z7}=Object;let{freeze:Ac,seal:Rl,create:aB}=Object,{apply:Op,construct:vA}=typeof Reflect<"u"&&Reflect;Ac||(Ac=function(n){return n}),Rl||(Rl=function(n){return n}),Op||(Op=function(n,o,r){return n.apply(o,r)}),vA||(vA=function(n,o){return new n(...o)});const X2=zi(Array.prototype.forEach),WE=zi(Array.prototype.pop),J2=zi(Array.prototype.push),Q2=zi(String.prototype.toLowerCase),ZE=zi(String.prototype.toString),cB=zi(String.prototype.match),eC=zi(String.prototype.replace),U7=zi(String.prototype.indexOf),W7=zi(String.prototype.trim),mu=zi(Object.prototype.hasOwnProperty),Rc=zi(RegExp.prototype.test),tC=Z7(TypeError);function zi(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return Op(e,n,r)}}function Z7(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return vA(e,o)}}function io(e,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Q2;UE&&UE(e,null);let r=n.length;for(;r--;){let c=n[r];if(typeof c=="string"){const u=o(c);u!==c&&(V7(n)||(n[r]=u),c=u)}e[c]=!0}return e}function j7(e){for(let n=0;n<e.length;n++)mu(e,n)||(e[n]=null);return e}function Ap(e){const n=aB(null);for(const[o,r]of Og(e))mu(e,o)&&(Array.isArray(r)?n[o]=j7(r):r&&typeof r=="object"&&r.constructor===Object?n[o]=Ap(r):n[o]=r);return n}function nC(e,n){for(;e!==null;){const r=z7(e,n);if(r){if(r.get)return zi(r.get);if(typeof r.value=="function")return zi(r.value)}e=rB(e)}function o(){return null}return o}const yA=Ac(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),CA=Ac(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ag=Ac(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),G7=Ac(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),wA=Ac(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),q7=Ac(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),iB=Ac(["#text"]),xA=Ac(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),SA=Ac(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),lB=Ac(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),jE=Ac(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),K7=Rl(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Y7=Rl(/<%[\w\W]*|[\w\W]*%>/gm),X7=Rl(/\${[\w\W]*}/gm),J7=Rl(/^data-[\-\w.\u00B7-\uFFFF]/),Q7=Rl(/^aria-[\-\w]+$/),uB=Rl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),eH=Rl(/^(?:\w+script|data):/i),EA=Rl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),_A=Rl(/^html$/i),vK=Rl(/^[a-z][.\w]*(-[.\w]+)+$/i);var _0=Object.freeze({__proto__:null,MUSTACHE_EXPR:K7,ERB_EXPR:Y7,TMPLIT_EXPR:X7,DATA_ATTR:J7,ARIA_ATTR:Q7,IS_ALLOWED_URI:uB,IS_SCRIPT_OR_DATA:eH,ATTR_WHITESPACE:EA,DOCTYPE_NAME:_A,CUSTOM_ELEMENT:vK});const oC={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},yK=function(){return typeof window>"u"?null:window},CK=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const c="data-tt-policy-suffix";o&&o.hasAttribute(c)&&(r=o.getAttribute(c));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(m){return m},createScriptURL(m){return m}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function tH(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:yK();const n=vn=>tH(vn);if(n.version="3.1.7",n.removed=[],!e||!e.document||e.document.nodeType!==oC.document)return n.isSupported=!1,n;let{document:o}=e;const r=o,c=r.currentScript,{DocumentFragment:u,HTMLTemplateElement:m,Node:v,Element:w,NodeFilter:E,NamedNodeMap:M=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:N,DOMParser:B,trustedTypes:U}=e,G=w.prototype,W=nC(G,"cloneNode"),K=nC(G,"remove"),ne=nC(G,"nextSibling"),re=nC(G,"childNodes"),le=nC(G,"parentNode");if(typeof m=="function"){const vn=o.createElement("template");vn.content&&vn.content.ownerDocument&&(o=vn.content.ownerDocument)}let de,Ae="";const{implementation:Ve,createNodeIterator:ct,createDocumentFragment:Ee,getElementsByTagName:be}=o,{importNode:Me}=r;let lt={};n.isSupported=typeof Og=="function"&&typeof le=="function"&&Ve&&Ve.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:xt,ERB_EXPR:dn,TMPLIT_EXPR:fn,DATA_ATTR:Fn,ARIA_ATTR:Gn,IS_SCRIPT_OR_DATA:ns,ATTR_WHITESPACE:_r,CUSTOM_ELEMENT:cs}=_0;let{IS_ALLOWED_URI:Ke}=_0,wt=null;const Rn=io({},[...yA,...CA,...Ag,...wA,...iB]);let st=null;const Rt=io({},[...xA,...SA,...lB,...jE]);let Mt=Object.seal(aB(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Qe=null,mn=null,pn=!0,xs=!0,eo=!1,Tr=!0,oc=!1,xu=!0,ea=!1,di=!1,Ji=!1,Lr=!1,sc=!1,Ct=!1,On=!0,Zo=!1;const Ss="user-content-";let qs=!0,Es=!1,Ro={},Bo=null;const Pa=io({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Qi=null;const Su=io({},["audio","video","img","source","image","track"]);let Bl=null;const o1=io({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),jg="http://www.w3.org/1998/Math/MathML",sm="http://www.w3.org/2000/svg",Pc="http://www.w3.org/1999/xhtml";let rm=Pc,cv=!1,s1=null;const HT=io({},[jg,sm,Pc],ZE);let r1=null;const oM=["application/xhtml+xml","text/html"],uL="text/html";let Hr=null,el=null;const VT=o.createElement("form"),pe=function(ve){return ve instanceof RegExp||ve instanceof Function},he=function(){let ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(el&&el===ve)){if((!ve||typeof ve!="object")&&(ve={}),ve=Ap(ve),r1=oM.indexOf(ve.PARSER_MEDIA_TYPE)===-1?uL:ve.PARSER_MEDIA_TYPE,Hr=r1==="application/xhtml+xml"?ZE:Q2,wt=mu(ve,"ALLOWED_TAGS")?io({},ve.ALLOWED_TAGS,Hr):Rn,st=mu(ve,"ALLOWED_ATTR")?io({},ve.ALLOWED_ATTR,Hr):Rt,s1=mu(ve,"ALLOWED_NAMESPACES")?io({},ve.ALLOWED_NAMESPACES,ZE):HT,Bl=mu(ve,"ADD_URI_SAFE_ATTR")?io(Ap(o1),ve.ADD_URI_SAFE_ATTR,Hr):o1,Qi=mu(ve,"ADD_DATA_URI_TAGS")?io(Ap(Su),ve.ADD_DATA_URI_TAGS,Hr):Su,Bo=mu(ve,"FORBID_CONTENTS")?io({},ve.FORBID_CONTENTS,Hr):Pa,Qe=mu(ve,"FORBID_TAGS")?io({},ve.FORBID_TAGS,Hr):{},mn=mu(ve,"FORBID_ATTR")?io({},ve.FORBID_ATTR,Hr):{},Ro=mu(ve,"USE_PROFILES")?ve.USE_PROFILES:!1,pn=ve.ALLOW_ARIA_ATTR!==!1,xs=ve.ALLOW_DATA_ATTR!==!1,eo=ve.ALLOW_UNKNOWN_PROTOCOLS||!1,Tr=ve.ALLOW_SELF_CLOSE_IN_ATTR!==!1,oc=ve.SAFE_FOR_TEMPLATES||!1,xu=ve.SAFE_FOR_XML!==!1,ea=ve.WHOLE_DOCUMENT||!1,Lr=ve.RETURN_DOM||!1,sc=ve.RETURN_DOM_FRAGMENT||!1,Ct=ve.RETURN_TRUSTED_TYPE||!1,Ji=ve.FORCE_BODY||!1,On=ve.SANITIZE_DOM!==!1,Zo=ve.SANITIZE_NAMED_PROPS||!1,qs=ve.KEEP_CONTENT!==!1,Es=ve.IN_PLACE||!1,Ke=ve.ALLOWED_URI_REGEXP||uB,rm=ve.NAMESPACE||Pc,Mt=ve.CUSTOM_ELEMENT_HANDLING||{},ve.CUSTOM_ELEMENT_HANDLING&&pe(ve.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Mt.tagNameCheck=ve.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ve.CUSTOM_ELEMENT_HANDLING&&pe(ve.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Mt.attributeNameCheck=ve.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ve.CUSTOM_ELEMENT_HANDLING&&typeof ve.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Mt.allowCustomizedBuiltInElements=ve.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),oc&&(xs=!1),sc&&(Lr=!0),Ro&&(wt=io({},iB),st=[],Ro.html===!0&&(io(wt,yA),io(st,xA)),Ro.svg===!0&&(io(wt,CA),io(st,SA),io(st,jE)),Ro.svgFilters===!0&&(io(wt,Ag),io(st,SA),io(st,jE)),Ro.mathMl===!0&&(io(wt,wA),io(st,lB),io(st,jE))),ve.ADD_TAGS&&(wt===Rn&&(wt=Ap(wt)),io(wt,ve.ADD_TAGS,Hr)),ve.ADD_ATTR&&(st===Rt&&(st=Ap(st)),io(st,ve.ADD_ATTR,Hr)),ve.ADD_URI_SAFE_ATTR&&io(Bl,ve.ADD_URI_SAFE_ATTR,Hr),ve.FORBID_CONTENTS&&(Bo===Pa&&(Bo=Ap(Bo)),io(Bo,ve.FORBID_CONTENTS,Hr)),qs&&(wt["#text"]=!0),ea&&io(wt,["html","head","body"]),wt.table&&(io(wt,["tbody"]),delete Qe.tbody),ve.TRUSTED_TYPES_POLICY){if(typeof ve.TRUSTED_TYPES_POLICY.createHTML!="function")throw tC('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ve.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw tC('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');de=ve.TRUSTED_TYPES_POLICY,Ae=de.createHTML("")}else de===void 0&&(de=CK(U,c)),de!==null&&typeof Ae=="string"&&(Ae=de.createHTML(""));Ac&&Ac(ve),el=ve}},Ye=io({},["mi","mo","mn","ms","mtext"]),ze=io({},["annotation-xml"]),Ot=io({},["title","style","font","a","script"]),Dn=io({},[...CA,...Ag,...G7]),jo=io({},[...wA,...q7]),Eu=function(ve){let Tt=le(ve);(!Tt||!Tt.tagName)&&(Tt={namespaceURI:rm,tagName:"template"});const cn=Q2(ve.tagName),t=Q2(Tt.tagName);return s1[ve.namespaceURI]?ve.namespaceURI===sm?Tt.namespaceURI===Pc?cn==="svg":Tt.namespaceURI===jg?cn==="svg"&&(t==="annotation-xml"||Ye[t]):!!Dn[cn]:ve.namespaceURI===jg?Tt.namespaceURI===Pc?cn==="math":Tt.namespaceURI===sm?cn==="math"&&ze[t]:!!jo[cn]:ve.namespaceURI===Pc?Tt.namespaceURI===sm&&!ze[t]||Tt.namespaceURI===jg&&!Ye[t]?!1:!jo[cn]&&(Ot[cn]||!Dn[cn]):!!(r1==="application/xhtml+xml"&&s1[ve.namespaceURI]):!1},tl=function(ve){J2(n.removed,{element:ve});try{le(ve).removeChild(ve)}catch{K(ve)}},a1=function(ve,Tt){try{J2(n.removed,{attribute:Tt.getAttributeNode(ve),from:Tt})}catch{J2(n.removed,{attribute:null,from:Tt})}if(Tt.removeAttribute(ve),ve==="is"&&!st[ve])if(Lr||sc)try{tl(Tt)}catch{}else try{Tt.setAttribute(ve,"")}catch{}},dL=function(ve){let Tt=null,cn=null;if(Ji)ve="<remove></remove>"+ve;else{const a=cB(ve,/^[\r\n\t ]+/);cn=a&&a[0]}r1==="application/xhtml+xml"&&rm===Pc&&(ve='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ve+"</body></html>");const t=de?de.createHTML(ve):ve;if(rm===Pc)try{Tt=new B().parseFromString(t,r1)}catch{}if(!Tt||!Tt.documentElement){Tt=Ve.createDocument(rm,"template",null);try{Tt.documentElement.innerHTML=cv?Ae:t}catch{}}const s=Tt.body||Tt.documentElement;return ve&&cn&&s.insertBefore(o.createTextNode(cn),s.childNodes[0]||null),rm===Pc?be.call(Tt,ea?"html":"body")[0]:ea?Tt.documentElement:s},fL=function(ve){return ct.call(ve.ownerDocument||ve,ve,E.SHOW_ELEMENT|E.SHOW_COMMENT|E.SHOW_TEXT|E.SHOW_PROCESSING_INSTRUCTION|E.SHOW_CDATA_SECTION,null)},sM=function(ve){return ve instanceof N&&(typeof ve.nodeName!="string"||typeof ve.textContent!="string"||typeof ve.removeChild!="function"||!(ve.attributes instanceof M)||typeof ve.removeAttribute!="function"||typeof ve.setAttribute!="function"||typeof ve.namespaceURI!="string"||typeof ve.insertBefore!="function"||typeof ve.hasChildNodes!="function")},mL=function(ve){return typeof v=="function"&&ve instanceof v},am=function(ve,Tt,cn){lt[ve]&&X2(lt[ve],t=>{t.call(n,Tt,cn,el)})},gL=function(ve){let Tt=null;if(am("beforeSanitizeElements",ve,null),sM(ve))return tl(ve),!0;const cn=Hr(ve.nodeName);if(am("uponSanitizeElement",ve,{tagName:cn,allowedTags:wt}),ve.hasChildNodes()&&!mL(ve.firstElementChild)&&Rc(/<[/\w]/g,ve.innerHTML)&&Rc(/<[/\w]/g,ve.textContent)||ve.nodeType===oC.progressingInstruction||xu&&ve.nodeType===oC.comment&&Rc(/<[/\w]/g,ve.data))return tl(ve),!0;if(!wt[cn]||Qe[cn]){if(!Qe[cn]&&pL(cn)&&(Mt.tagNameCheck instanceof RegExp&&Rc(Mt.tagNameCheck,cn)||Mt.tagNameCheck instanceof Function&&Mt.tagNameCheck(cn)))return!1;if(qs&&!Bo[cn]){const t=le(ve)||ve.parentNode,s=re(ve)||ve.childNodes;if(s&&t){const a=s.length;for(let i=a-1;i>=0;--i){const d=W(s[i],!0);d.__removalCount=(ve.__removalCount||0)+1,t.insertBefore(d,ne(ve))}}}return tl(ve),!0}return ve instanceof w&&!Eu(ve)||(cn==="noscript"||cn==="noembed"||cn==="noframes")&&Rc(/<\/no(script|embed|frames)/i,ve.innerHTML)?(tl(ve),!0):(oc&&ve.nodeType===oC.text&&(Tt=ve.textContent,X2([xt,dn,fn],t=>{Tt=eC(Tt,t," ")}),ve.textContent!==Tt&&(J2(n.removed,{element:ve.cloneNode()}),ve.textContent=Tt)),am("afterSanitizeElements",ve,null),!1)},hL=function(ve,Tt,cn){if(On&&(Tt==="id"||Tt==="name")&&(cn in o||cn in VT))return!1;if(!(xs&&!mn[Tt]&&Rc(Fn,Tt))){if(!(pn&&Rc(Gn,Tt))){if(!st[Tt]||mn[Tt]){if(!(pL(ve)&&(Mt.tagNameCheck instanceof RegExp&&Rc(Mt.tagNameCheck,ve)||Mt.tagNameCheck instanceof Function&&Mt.tagNameCheck(ve))&&(Mt.attributeNameCheck instanceof RegExp&&Rc(Mt.attributeNameCheck,Tt)||Mt.attributeNameCheck instanceof Function&&Mt.attributeNameCheck(Tt))||Tt==="is"&&Mt.allowCustomizedBuiltInElements&&(Mt.tagNameCheck instanceof RegExp&&Rc(Mt.tagNameCheck,cn)||Mt.tagNameCheck instanceof Function&&Mt.tagNameCheck(cn))))return!1}else if(!Bl[Tt]){if(!Rc(Ke,eC(cn,_r,""))){if(!((Tt==="src"||Tt==="xlink:href"||Tt==="href")&&ve!=="script"&&U7(cn,"data:")===0&&Qi[ve])){if(!(eo&&!Rc(ns,eC(cn,_r,"")))){if(cn)return!1}}}}}}return!0},pL=function(ve){return ve!=="annotation-xml"&&cB(ve,cs)},rM=function(ve){am("beforeSanitizeAttributes",ve,null);const{attributes:Tt}=ve;if(!Tt)return;const cn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:st};let t=Tt.length;for(;t--;){const s=Tt[t],{name:a,namespaceURI:i,value:d}=s,g=Hr(a);let h=a==="value"?d:W7(d);const C=h;if(cn.attrName=g,cn.attrValue=h,cn.keepAttr=!0,cn.forceKeepAttr=void 0,am("uponSanitizeAttribute",ve,cn),h=cn.attrValue,cn.forceKeepAttr)continue;if(!cn.keepAttr){a1(a,ve);continue}if(!Tr&&Rc(/\/>/i,h)){a1(a,ve);continue}oc&&X2([xt,dn,fn],T=>{h=eC(h,T," ")});const S=Hr(ve.nodeName);if(!hL(S,g,h)){a1(a,ve);continue}if(Zo&&(g==="id"||g==="name")&&(a1(a,ve),h=Ss+h),xu&&Rc(/((--!?|])>)|<\/(style|title)/i,h)){a1(a,ve);continue}if(de&&typeof U=="object"&&typeof U.getAttributeType=="function"&&!i)switch(U.getAttributeType(S,g)){case"TrustedHTML":{h=de.createHTML(h);break}case"TrustedScriptURL":{h=de.createScriptURL(h);break}}if(h!==C)try{i?ve.setAttributeNS(i,a,h):ve.setAttribute(a,h),sM(ve)?tl(ve):WE(n.removed)}catch{}}am("afterSanitizeAttributes",ve,null)},bL=function vn(ve){let Tt=null;const cn=fL(ve);for(am("beforeSanitizeShadowDOM",ve,null);Tt=cn.nextNode();)am("uponSanitizeShadowNode",Tt,null),!gL(Tt)&&(Tt.content instanceof u&&vn(Tt.content),rM(Tt));am("afterSanitizeShadowDOM",ve,null)};return n.sanitize=function(vn){let ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Tt=null,cn=null,t=null,s=null;if(cv=!vn,cv&&(vn="<!-->"),typeof vn!="string"&&!mL(vn))if(typeof vn.toString=="function"){if(vn=vn.toString(),typeof vn!="string")throw tC("dirty is not a string, aborting")}else throw tC("toString is not a function");if(!n.isSupported)return vn;if(di||he(ve),n.removed=[],typeof vn=="string"&&(Es=!1),Es){if(vn.nodeName){const d=Hr(vn.nodeName);if(!wt[d]||Qe[d])throw tC("root node is forbidden and cannot be sanitized in-place")}}else if(vn instanceof v)Tt=dL("<!---->"),cn=Tt.ownerDocument.importNode(vn,!0),cn.nodeType===oC.element&&cn.nodeName==="BODY"||cn.nodeName==="HTML"?Tt=cn:Tt.appendChild(cn);else{if(!Lr&&!oc&&!ea&&vn.indexOf("<")===-1)return de&&Ct?de.createHTML(vn):vn;if(Tt=dL(vn),!Tt)return Lr?null:Ct?Ae:""}Tt&&Ji&&tl(Tt.firstChild);const a=fL(Es?vn:Tt);for(;t=a.nextNode();)gL(t)||(t.content instanceof u&&bL(t.content),rM(t));if(Es)return vn;if(Lr){if(sc)for(s=Ee.call(Tt.ownerDocument);Tt.firstChild;)s.appendChild(Tt.firstChild);else s=Tt;return(st.shadowroot||st.shadowrootmode)&&(s=Me.call(r,s,!0)),s}let i=ea?Tt.outerHTML:Tt.innerHTML;return ea&&wt["!doctype"]&&Tt.ownerDocument&&Tt.ownerDocument.doctype&&Tt.ownerDocument.doctype.name&&Rc(_A,Tt.ownerDocument.doctype.name)&&(i="<!DOCTYPE "+Tt.ownerDocument.doctype.name+`>
`+i),oc&&X2([xt,dn,fn],d=>{i=eC(i,d," ")}),de&&Ct?de.createHTML(i):i},n.setConfig=function(){let vn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};he(vn),di=!0},n.clearConfig=function(){el=null,di=!1},n.isValidAttribute=function(vn,ve,Tt){el||he({});const cn=Hr(vn),t=Hr(ve);return hL(cn,t,Tt)},n.addHook=function(vn,ve){typeof ve=="function"&&(lt[vn]=lt[vn]||[],J2(lt[vn],ve))},n.removeHook=function(vn){if(lt[vn])return WE(lt[vn])},n.removeHooks=function(vn){lt[vn]&&(lt[vn]=[])},n.removeAllHooks=function(){lt={}},n}var dB=tH();const ai=We.each,GE=We.trim,Rg=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Dg={ftp:21,http:80,https:443,mailto:25},fB=["img","video"],sC=(e,n)=>De(e)?!e:De(n)?!Zt(fB,n):!0,mB=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},as=(e,n,o)=>{const r=mB(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?sC(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Dl{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const c=ju.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!as(r,c,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=GE(n),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){c.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const v=r?r.path:new Dl(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+c.toAbsPath(v,n);else{const w=/([^#?]*)([#?]?.*)/.exec(n);w&&(n=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(v,w[1])+w[2])}}n=n.replace(/@@/g,"(mce_at)");const m=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);m&&ai(Rg,(v,w)=>{let E=m[w];E&&(E=E.replace(/\(mce_at\)/g,"@@")),c[v]=E}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new Dl(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new Dl(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?Dg[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,c="",u,m;const v=n.substring(0,n.lastIndexOf("/")).split("/"),w=o.split("/");if(v.length>=w.length){for(u=0,m=v.length;u<m;u++)if(u>=w.length||v[u]!==w[u]){r=u+1;break}}if(v.length<w.length){for(u=0,m=w.length;u<m;u++)if(u>=v.length||v[u]!==w[u]){r=u+1;break}}if(r===1)return o;for(u=0,m=v.length-(r-1);u<m;u++)c+="../";for(u=r-1,m=w.length;u<m;u++)u!==r-1?c+="/"+w[u]:c+=w[u];return c}toAbsPath(n,o){let r=0;const c=/\/$/.test(o)?"/":"",u=n.split("/"),m=o.split("/"),v=[];ai(u,N=>{N&&v.push(N)});const w=[];for(let N=m.length-1;N>=0;N--)if(!(m[N].length===0||m[N]===".")){if(m[N]===".."){r++;continue}if(r>0){r--;continue}w.push(m[N])}const E=v.length-r;let M;return E<=0?M=Fo(w).join("/"):M=v.slice(0,E).join("/")+"/"+Fo(w).join("/"),M.indexOf("/")!==0&&(M="/"+M),c&&M.lastIndexOf("/")!==M.length-1&&(M+=c),M}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const nH=We.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Mg="data-mce-type";let Rp=0;const Dp=(e,n,o,r,c)=>{var u,m,v,w;const E=n.validate,M=o.getSpecialElements();e.nodeType===Vo&&!n.allow_conditional_comments&&/^\[if/i.test((u=e.nodeValue)!==null&&u!==void 0?u:"")&&(e.nodeValue=" "+e.nodeValue);const N=(m=c==null?void 0:c.tagName)!==null&&m!==void 0?m:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){De(c)&&(c.allowedTags[N]=!0);return}if(e.nodeType!==w1||N==="body")return;const B=ee.fromDom(e),U=fc(B,Mg),G=aa(B,"data-mce-bogus");if(!U&&Q(G)){G==="all"?fo(B):Lu(B);return}const W=o.getElementRule(N);if(E&&!W){It(M,N)?fo(B):Lu(B);return}else De(c)&&(c.allowedTags[N]=!0);if(E&&W&&!U){if(_e((v=W.attributesForced)!==null&&v!==void 0?v:[],K=>{ur(B,K.name,K.value==="{$uid}"?`mce_${Rp++}`:K.value)}),_e((w=W.attributesDefault)!==null&&w!==void 0?w:[],K=>{fc(B,K.name)||ur(B,K.name,K.value==="{$uid}"?`mce_${Rp++}`:K.value)}),W.attributesRequired&&!ho(W.attributesRequired,K=>fc(B,K))){Lu(B);return}if(W.removeEmptyAttrs&&eh(B)){Lu(B);return}W.outputName&&W.outputName!==N&&ox(B,W.outputName)}},TA=(e,n,o,r,c)=>{const u=e.tagName.toLowerCase(),{attrName:m,attrValue:v}=c;c.keepAttr=qE(n,o,r,u,m,v),c.keepAttr?(c.allowedAttributes[m]=!0,OA(m,o)&&(c.attrValue=m),n.allow_svg_data_urls&&hs(v,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):kA(e,m)&&(c.forceKeepAttr=!0)},qE=(e,n,o,r,c,u)=>o!=="html"&&!po(r)?!0:!(c in nH&&as(e,u,r))&&(!e.validate||n.isValid(r,c)||hs(c,"data-")||hs(c,"aria-")),kA=(e,n)=>e.hasAttribute(Mg)&&(n==="id"||n==="class"||n==="style"),OA=(e,n)=>e in n.getBoolAttrs(),oH=(e,n,o,r)=>{const{attributes:c}=e;for(let u=c.length-1;u>=0;u--){const m=c[u],v=m.name,w=m.value;!qE(n,o,r,e.tagName.toLowerCase(),v,w)&&!kA(e,v)?e.removeAttribute(v):OA(v,o)&&e.setAttribute(v,v)}},sH=(e,n,o)=>{const r=dB();return r.addHook("uponSanitizeElement",(c,u)=>{Dp(c,e,n,o.track(c),u)}),r.addHook("uponSanitizeAttribute",(c,u)=>{TA(c,e,n,o.current(),u)}),r},gB=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},rH=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};dB().sanitize(e,o)},aH=(e,n)=>{const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},r=dB();r.addHook("uponSanitizeElement",(c,u)=>{var m;const v=(m=u.tagName)!==null&&m!==void 0?m:c.nodeName.toLowerCase(),w=n.allow_mathml_annotation_encodings;if(v==="annotation"&&ln(w)&&w.length>0){const E=c.getAttribute("encoding");Q(E)&&Zt(w,E)&&(u.allowedTags[v]=!0)}}),r.sanitize(e,o)},cH=e=>n=>{const o=zu(n);if(o==="svg")rH(n);else if(o==="math")aH(n,e);else throw new Error("Not a namespace element")},iH=(e,n)=>{const o=bh();if(e.sanitize){const r=sH(e,n,o);return{sanitizeHtmlElement:(u,m)=>{r.sanitize(u,gB(e,m)),r.removed=[],o.reset()},sanitizeNamespaceElement:cH(e)}}else return{sanitizeHtmlElement:(u,m)=>{const v=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let w;for(;w=v.nextNode();){const E=o.track(w);Dp(w,e,n,E),ot(w)&&oH(w,e,n,E)}o.reset()},sanitizeNamespaceElement:Dt}},hB=We.makeMap,AA=We.extend,pB=(e,n,o,r)=>{const c=e.name,u=c in o&&c!=="title"&&c!=="textarea"&&c!=="noscript",m=n.childNodes;for(let v=0,w=m.length;v<w;v++){const E=m[v],M=new Aa(E.nodeName.toLowerCase(),E.nodeType);if(ot(E)){const N=E.attributes;for(let B=0,U=N.length;B<U;B++){const G=N[B];M.attr(G.name,G.value)}po(M.name)&&(r(E),M.value=E.innerHTML)}else Fe(E)?(M.value=E.data,u&&(M.raw=!0)):(Qo(E)||ca(E)||Qd(E))&&(M.value=E.data);po(M.name)||pB(M,E,o,r),e.append(M)}},rC=(e,n,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const m=c;_e(n,v=>v(m)),An(m.parent)&&m!==e?c=u:r.push(m)}for(let c=r.length-1;c>=0;c--){const u=r[c];_e(o,m=>m(u))}},bB=(e,n,o,r)=>{const c=o.validate,u=n.getNonEmptyElements(),m=n.getWhitespaceElements(),v=AA(hB("script,style,head,html,body,title,meta,param"),n.getBlockElements()),w=Gv(n),E=/[ \t\r\n]+/g,M=/^[ \t\r\n]+/,N=/[ \t\r\n]+$/,B=re=>{let le=re.parent;for(;De(le);){if(le.name in m)return!0;le=le.parent}return!1},U=re=>{let le=re;for(;De(le);){if(le.name in w)return Ms(n,u,m,le);le=le.parent}return!1},G=re=>re.name in v||U1(n,re)||po(re.name)&&re.parent===e,W=(re,le)=>{const de=le?re.prev:re.next;return De(de)||An(re.parent)?!1:G(re.parent)&&(re.parent!==e||r.isRootContent===!0)};return[re=>{var le;if(re.type===3&&!B(re)){let de=(le=re.value)!==null&&le!==void 0?le:"";de=de.replace(E," "),(s7(re.prev,G)||W(re,!0))&&(de=de.replace(M,"")),de.length===0||de===" "&&re.prev&&re.prev.type===Vo&&re.next&&re.next.type===Vo?re.remove():re.value=de}},re=>{var le;if(re.type===1){const de=n.getElementRule(re.name);if(c&&de){const Ae=Ms(n,u,m,re);de.paddInEmptyBlock&&Ae&&U(re)?UO(o,r,G,re):de.removeEmpty&&Ae?G(re)?re.remove():re.unwrap():de.paddEmpty&&(Ae||Eg(re))&&UO(o,r,G,re)}}else if(re.type===3&&!B(re)){let de=(le=re.value)!==null&&le!==void 0?le:"";(re.next&&G(re.next)||W(re,!1))&&(de=de.replace(N,"")),de.length===0?re.remove():re.value=de}}]},lH=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},Mp=(e={},n=zn())=>{const o=XN(),r=XN(),c={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,m=iH(c,n),v=(le,de,Ae="html")=>{const Ve=Ae==="xhtml"?"application/xhtml+xml":"text/html",ct=It(n.getSpecialElements(),de.toLowerCase()),Ee=ct?`<${de}>${le}</${de}>`:le,be=()=>Ae==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Ee}</body></html>`:/^[\s]*<head/i.test(le)||/^[\s]*<html/i.test(le)||/^[\s]*<!DOCTYPE/i.test(le)?`<html>${Ee}</html>`:`<body>${Ee}</body>`,Me=u.parseFromString(be(),Ve).body;return m.sanitizeHtmlElement(Me,Ve),ct?Me.firstChild:Me},w=o.addFilter,E=o.getFilters,M=o.removeFilter,N=r.addFilter,B=r.getFilters,U=r.removeFilter,G=(le,de)=>{WO(n,le)&&de.push(le)},W=(le,de)=>{const Ae=Q(de.attr(Mg)),Ve=de.type===1&&!It(le,de.name)&&!U1(n,de)&&!po(de.name);return de.type===3||Ve&&!Ae},K=(le,de)=>{const Ae=AA(hB("script,style,head,html,body,title,meta,param"),n.getBlockElements()),Ve=/^[ \t\r\n]+/,ct=/[ \t\r\n]+$/;let Ee=le.firstChild,be=null;const Me=lt=>{var xt,dn;lt&&(Ee=lt.firstChild,Ee&&Ee.type===3&&(Ee.value=(xt=Ee.value)===null||xt===void 0?void 0:xt.replace(Ve,"")),Ee=lt.lastChild,Ee&&Ee.type===3&&(Ee.value=(dn=Ee.value)===null||dn===void 0?void 0:dn.replace(ct,"")))};if(n.isValidChild(le.name,de.toLowerCase())){for(;Ee;){const lt=Ee.next;W(Ae,Ee)?(be||(be=new Aa(de,1),be.attr(c.forced_root_block_attrs),le.insert(be,Ee)),be.append(Ee)):(Me(be),be=null),Ee=lt}Me(be)}},re={schema:n,addAttributeFilter:N,getAttributeFilters:B,removeAttributeFilter:U,addNodeFilter:w,getNodeFilters:E,removeNodeFilter:M,parse:(le,de={})=>{var Ae;const Ve=c.validate,ct=(Ae=de.context)!==null&&Ae!==void 0?Ae:c.root_name,Ee=v(le,ct,de.format);vh(n,Ee);const be=new Aa(ct,11);pB(be,Ee,n.getSpecialElements(),m.sanitizeNamespaceElement),Ee.innerHTML="";const[Me,lt]=bB(be,n,c,de),xt=[],dn=Ve?ns=>G(ns,xt):Dt,fn={nodes:{},attributes:{}},Fn=ns=>gN(E(),B(),ns,fn);if(rC(be,[Me,Fn],[lt,dn]),xt.reverse(),Ve&&xt.length>0)if(de.context){const{pass:ns,fail:_r}=Or(xt,cs=>cs.parent===be);Nn(_r,n,be,Fn),de.invalid=ns.length>0}else Nn(xt,n,be,Fn);const Gn=lH(c,de);return Gn&&(be.name==="body"||de.isRootContent)&&K(be,Gn),de.invalid||VO(fn,de),be}};return bA(re,c),Yf(re,c,n),re},uH=e=>Tg(e)?bg({validate:!1}).serialize(e):e,RA=(e,n,o)=>{const r=uH(e),c=n(r);if(c.isDefaultPrevented())return c;if(Tg(e))if(c.content!==r){const u=Mp({validate:!1,forced_root_block:!1,...o}).parse(c.content,{context:e.name});return{...c,content:u}}else return{...c,content:e};else return c},vB=e=>({sanitize:nS(e),sandbox_iframes:qh(e),sandbox_iframes_exclusions:zy(e)}),yB=(e,n)=>{if(n.no_events)return bs.value(n);{const o=t0(e,n);return o.isDefaultPrevented()?bs.error(B4(e,{content:"",...o}).content):bs.value(o)}},DA=(e,n,o)=>o.no_events?n:RA(n,c=>B4(e,{...o,content:c}),vB(e)).content,KE=(e,n)=>{if(n.no_events)return bs.value(n);{const o=RA(n.content,r=>b2(e,{...n,content:r}),vB(e));return o.isDefaultPrevented()?(VS(e,o),bs.error(void 0)):bs.value(o)}},YE=(e,n,o)=>{o.no_events||VS(e,{...o,content:n})},XE=(e,n,o)=>({element:e,width:n,rows:o}),MA=(e,n)=>({element:e,cells:n}),CB=(e,n)=>({x:e,y:n}),wB=(e,n)=>dc(e,n).bind(Fd).getOr(1),dH=(e,n,o,r,c)=>{const u=wB(c,"rowspan"),m=wB(c,"colspan"),v=e.rows;for(let w=o;w<o+u;w++){v[w]||(v[w]=MA(Oh(r),[]));for(let E=n;E<n+m;E++){const M=v[w].cells;M[E]=w===o&&E===n?c:Yc(c)}}},fH=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},PA=(e,n,o)=>{for(;fH(e,n,o);)n++;return n},T0=e=>Ko(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),NA=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if(kn(c[u],n))return L.some(CB(u,r))}return L.none()},BA=(e,n,o,r,c)=>{const u=[],m=e.rows;for(let v=o;v<=c;v++){const w=m[v].cells,E=n<r?w.slice(n,r+1):w.slice(r,n+1);u.push(MA(m[v].element,E))}return u},JE=(e,n,o)=>{const r=n.x,c=n.y,u=o.x,m=o.y,v=c<m?BA(e,r,c,u,m):BA(e,r,m,u,c);return XE(e.element,T0(v),v)},mH=(e,n)=>{const o=Yc(e.element),r=ee.fromTag("tbody");return Fu(r,n),Fs(o,r),o},gH=e=>Yt(e.rows,n=>{const o=Yt(n.cells,c=>{const u=Oh(c);return $s(u,"colspan"),$s(u,"rowspan"),u}),r=Yc(n.element);return Fu(r,o),r}),Pp=e=>{const n=XE(Yc(e),0,[]);return _e(jr(e,"tr"),(o,r)=>{_e(jr(o,"td,th"),(c,u)=>{dH(n,PA(n,u,r),r,o,c)})}),XE(n.element,T0(n.rows),n.rows)},$A=e=>mH(e,gH(e)),xB=(e,n,o)=>NA(e,n).bind(r=>NA(e,o).map(c=>JE(e,r,c))),aC=e=>us(e,n=>Tn(n)==="ul"||Tn(n)==="ol"),SB=(e,n)=>us(e,o=>Tn(o)==="li"&&u2(o,n)).fold(Je([]),o=>aC(e).map(r=>{const c=ee.fromTag(Tn(r)),u=To(Va(r),(m,v)=>hs(v,"list-style"));return on(c,u),[ee.fromTag("li"),c]}).getOr([])),IA=(e,n)=>{const o=Ko(n,(r,c)=>(Fs(c,r),c),e);return n.length>0?l0([o]):o},EB=e=>pf(e)?Hc(e).filter(Mi).fold(Je([]),n=>[e,n]):Mi(e)?[e]:[],_B=(e,n,o)=>{const r=ee.fromDom(n.commonAncestorContainer),c=wd(r,e),u=Pt(c,w=>o.isWrapper(Tn(w))),m=SB(c,n),v=u.concat(m.length?m:EB(r));return Yt(v,Yc)},TB=()=>l0([]),hH=(e,n,o)=>IA(ee.fromDom(n.cloneContents()),_B(e,n,o)),pH=(e,n)=>Is(n,"table",Le(kn,e)),FA=(e,n)=>pH(e,n[0]).bind(o=>{const r=n[0],c=n[n.length-1],u=Pp(o);return xB(u,r,c).map(m=>l0([$A(m)]))}).getOrThunk(TB),bH=(e,n,o)=>n.length>0&&n[0].collapsed?TB():hH(e,n[0],o),kB=(e,n,o)=>{const r=$f(n,e);return r.length>0?FA(e,r):bH(e,n,o)},QE=(e,n)=>n>=0&&n<e.length&&Bf(e.charAt(n)),OB=e=>bc(e.innerText),vH=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),yH=e=>L.from(e.selection.getRng()).map(n=>{var o;const r=L.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),c=e.getBody(),u=vH(r),m=ee.fromDom(n.cloneContents());bP(m),vP(m);const v=e.dom.add(c,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},m.dom),w=OB(v),E=bc((o=v.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(v),QE(E,0)||QE(E,E.length-1)){const M=r.getOr(c),N=OB(M),B=N.indexOf(w);if(B===-1)return w;{const U=QE(N,B-1),G=QE(N,B+w.length);return(U?" ":"")+w+(G?" ":"")}}else return w}).getOr(""),CH=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=nE(e,Ub(c)),m=n.contextual?kB(ee.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return m&&r.appendChild(m),e.selection.serializer.serialize(r,n)},wH=(e,n)=>{if(n.format==="text")return yH(e);{const o=CH(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},xH=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),SH=(e,n,o={})=>{const r=xH(o,n);return yB(e,r).fold(qo,c=>{const u=wH(e,c);return DA(e,u,c)})},LA=0,AB=1,RB=2,e_=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),c=new Array(o),u=(M,N,B)=>({start:M,end:N,diag:B}),m=(M,N,B,U,G)=>{const W=w(M,N,B,U);if(W===null||W.start===N&&W.diag===N-U||W.end===M&&W.diag===M-B){let K=M,ne=B;for(;K<N||ne<U;)K<N&&ne<U&&e[K]===n[ne]?(G.push([LA,e[K]]),++K,++ne):N-M>U-B?(G.push([RB,e[K]]),++K):(G.push([AB,n[ne]]),++ne)}else{m(M,W.start,B,W.start-W.diag,G);for(let K=W.start;K<W.end;++K)G.push([LA,e[K]]);m(W.end,N,W.end-W.diag,U,G)}},v=(M,N,B,U)=>{let G=M;for(;G-N<U&&G<B&&e[G]===n[G-N];)++G;return u(M,G,N)},w=(M,N,B,U)=>{const G=N-M,W=U-B;if(G===0||W===0)return null;const K=G-W,ne=W+G,re=(ne%2===0?ne:ne+1)/2;r[1+re]=M,c[1+re]=N+1;let le,de,Ae,Ve,ct;for(le=0;le<=re;++le){for(de=-le;de<=le;de+=2){for(Ae=de+re,de===-le||de!==le&&r[Ae-1]<r[Ae+1]?r[Ae]=r[Ae+1]:r[Ae]=r[Ae-1]+1,Ve=r[Ae],ct=Ve-M+B-de;Ve<N&&ct<U&&e[Ve]===n[ct];)r[Ae]=++Ve,++ct;if(K%2!==0&&K-le<=de&&de<=K+le&&c[Ae-K]<=r[Ae])return v(c[Ae-K],de+M-B,N,U)}for(de=K-le;de<=K+le;de+=2){for(Ae=de+re-K,de===K-le||de!==K+le&&c[Ae+1]<=c[Ae-1]?c[Ae]=c[Ae+1]-1:c[Ae]=c[Ae-1],Ve=c[Ae]-1,ct=Ve-M+B-de;Ve>=M&&ct>=B&&e[Ve]===n[ct];)c[Ae]=Ve--,ct--;if(K%2===0&&-le<=de&&de<=le&&c[Ae]<=r[Ae+K])return v(c[Ae],de+M-B,N,U)}}return null},E=[];return m(0,e.length,0,n.length,E),E},Jr=e=>ot(e)?e.outerHTML:Fe(e)?ju.encodeRaw(e.data,!1):Qo(e)?"<!--"+e.data+"-->":"",EH=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},t_=(e,n,o)=>{const r=EH(n);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},Np=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},DB=(e,n)=>{let o=0;_e(e,r=>{r[0]===LA?o++:r[0]===AB?(t_(n,r[1],o),o++):r[0]===RB&&Np(n,o)})},Dc=(e,n)=>Pt(Yt(ha(e.childNodes),R(bc,Jr)),o=>o.length>0),Bp=(e,n)=>{const o=Yt(ha(n.childNodes),Jr);return DB(e_(o,e),n),n},MB=sl(()=>document.implementation.createHTMLDocument("undo")),_H=e=>e.querySelector("iframe")!==null,PB=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),TH=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),cC=e=>{const n=e.serializer.getTempAttrs(),o=pP(e.getBody(),n);return _H(o)?PB(Dc(o)):TH(bc(o.innerHTML))},$p=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?Bp(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:De(r)&&w4(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},iC=e=>e.type==="fragmented"?e.fragments.join(""):e.content,NB=e=>{const n=ee.fromTag("body",MB());return D1(n,iC(e)),_e(jr(n,"*[data-mce-bogus]"),Lu),Uo(n)},BB=(e,n)=>iC(e)===iC(n),kH=(e,n)=>NB(e)===NB(n),lC=(e,n)=>!e||!n?!1:BB(e,n)?!0:kH(e,n),uC=e=>e.get()===0,n_=(e,n,o)=>{uC(o)&&(e.typing=n)},$B=(e,n)=>{e.typing&&(n_(e,!1,n),e.add())},IB=e=>{e.typing&&(e.typing=!1,e.add())},gu=(e,n,o)=>{uC(n)&&o.set(yb(e.selection))},HA=(e,n,o,r,c,u,m)=>{const v=cC(e),w=We.extend(u||{},v);if(!uC(r)||e.removed)return null;const E=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:w,lastLevel:E,originalEvent:m}).isDefaultPrevented()||E&&lC(E,w))return null;n.data[o.get()]&&c.get().each(B=>{n.data[o.get()].beforeBookmark=B});const M=Tb(e);if(M&&n.data.length>M){for(let B=0;B<n.data.length-1;B++)n.data[B]=n.data[B+1];n.data.length--,o.set(n.data.length)}w.bookmark=yb(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(w),o.set(n.data.length-1);const N={level:w,lastLevel:E,originalEvent:m};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",N),e.dispatch("change",N)):e.dispatch("AddUndo",N),w},OH=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},o_=(e,n,o,r,c)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,m=n.data[o.get()-1];$p(e,m,!0),n.transact(c)&&(n.data[o.get()-1].beforeBookmark=u)}},VA=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],$p(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},FB=(e,n,o,r)=>{let c;return n.typing&&(n.add(),n.typing=!1,n_(n,!1,o)),r.get()>0&&(r.set(r.get()-1),c=n.data[r.get()],$p(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},LB=e=>{e.clear(),e.add()},HB=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!lC(cC(e),n.data[0]),AH=(e,n)=>n.get()<e.data.length-1&&!e.typing,RH=(e,n,o)=>($B(e,n),e.beforeChange(),e.ignore(o),e.add()),DH=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},MH=(e,n)=>{const o=e.dom,r=De(n)?n:e.getBody();_e(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=qx(e),m=o.getAttrib(c,"border");(!m||m==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const v=o.getAttrib(c,"name")||c.id,w=$y(e);v&&e.hasVisual?o.addClass(c,w):o.removeClass(c,w)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},VB=e=>({init:{bindEvents:Dt},undoManager:{beforeChange:(n,o)=>gu(e,n,o),add:(n,o,r,c,u,m)=>HA(e,n,o,r,c,u,m),undo:(n,o,r)=>FB(e,n,o,r),redo:(n,o)=>VA(e,n,o),clear:(n,o)=>OH(e,n,o),reset:n=>LB(n),hasUndo:(n,o)=>HB(e,n,o),hasRedo:(n,o)=>AH(n,o),transact:(n,o,r)=>RH(n,o,r),ignore:(n,o)=>DH(n,o),extra:(n,o,r,c)=>o_(e,n,o,r,c)},formatter:{match:(n,o,r,c)=>W2(e,n,o,r,c),matchAll:(n,o)=>xN(e,n,o),matchNode:(n,o,r,c)=>du(e,n,o,r,c),canApply:n=>p7(e,n),closest:n=>TE(e,n),apply:(n,o,r)=>iA(e,n,o,r),remove:(n,o,r,c)=>ZN(e,n,o,r,c),toggle:(n,o,r)=>VE(e,n,o,r),formatChanged:(n,o,r,c,u)=>I7(e,n,o,r,c,u)},editor:{getContent:n=>y8(e,n),setContent:(n,o)=>Sp(e,n,o),insertContent:(n,o)=>Oc(e,n,o),addVisual:n=>MH(e,n)},selection:{getContent:(n,o)=>SH(e,n,o)},autocompleter:{addDecoration:Dt,removeDecoration:Dt},raw:{getModel:()=>L.none()}}),zB=e=>{const n=E=>Kt(E)?E:{},{init:o,undoManager:r,formatter:c,editor:u,selection:m,autocompleter:v,raw:w}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(E,M,N)=>r.transact(N),ignore:(E,M)=>r.ignore(M),extra:(E,M,N,B)=>r.extra(N,B)},formatter:{match:(E,M,N,B)=>c.match(E,n(M),B),matchAll:c.matchAll,matchNode:c.matchNode,canApply:E=>c.canApply(E),closest:E=>c.closest(E),apply:(E,M,N)=>c.apply(E,n(M)),remove:(E,M,N,B)=>c.remove(E,n(M)),toggle:(E,M,N)=>c.toggle(E,n(M)),formatChanged:(E,M,N,B,U)=>c.formatChanged(M,N,B,U)},editor:{getContent:E=>u.getContent(E),setContent:(E,M)=>({content:u.setContent(E,M),html:""}),insertContent:(E,M)=>(u.insertContent(E),""),addVisual:u.addVisual},selection:{getContent:(E,M)=>m.getContent(M)},autocompleter:{addDecoration:v.addDecoration,removeDecoration:v.removeDecoration},raw:{getModel:()=>L.some(w.getRawModel())}}},PH=()=>{const e=Je(null),n=Je("");return{init:{bindEvents:Dt},undoManager:{beforeChange:Dt,add:e,undo:e,redo:e,clear:Dt,reset:Dt,hasUndo:Ne,hasRedo:Ne,transact:e,ignore:Dt,extra:Dt},formatter:{match:Ne,matchAll:Je([]),matchNode:Je(void 0),canApply:Ne,closest:n,apply:Dt,remove:Dt,toggle:Dt,formatChanged:Je({unbind:Dt})},editor:{getContent:n,setContent:Je({content:"",html:""}),insertContent:Je(""),addVisual:Dt},selection:{getContent:n},autocompleter:{addDecoration:Dt,removeDecoration:Dt},raw:{getModel:Je(L.none())}}},Ed=e=>It(e.plugins,"rtc"),NH=e=>Co(e.plugins,"rtc").bind(n=>L.from(n.setup)),UB=e=>{const n=e;return NH(e).fold(()=>(n.rtcInstance=VB(e),L.none()),o=>(n.rtcInstance=PH(),L.some(()=>o().then(r=>(n.rtcInstance=zB(r),r.rtc.isRemote)))))},dC=e=>e.rtcInstance?e.rtcInstance:VB(e),Ps=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},WB=(e,n,o)=>{Ps(e).undoManager.beforeChange(n,o)},zA=(e,n,o,r,c,u,m)=>Ps(e).undoManager.add(n,o,r,c,u,m),ZB=(e,n,o,r)=>Ps(e).undoManager.undo(n,o,r),jB=(e,n,o)=>Ps(e).undoManager.redo(n,o),UA=(e,n,o)=>{Ps(e).undoManager.clear(n,o)},GB=(e,n)=>{Ps(e).undoManager.reset(n)},qB=(e,n,o)=>Ps(e).undoManager.hasUndo(n,o),KB=(e,n,o)=>Ps(e).undoManager.hasRedo(n,o),BH=(e,n,o,r)=>Ps(e).undoManager.transact(n,o,r),WA=(e,n,o)=>{Ps(e).undoManager.ignore(n,o)},$H=(e,n,o,r,c)=>{Ps(e).undoManager.extra(n,o,r,c)},s_=(e,n,o,r,c)=>Ps(e).formatter.match(n,o,r,c),IH=(e,n,o)=>Ps(e).formatter.matchAll(n,o),FH=(e,n,o,r,c)=>Ps(e).formatter.matchNode(n,o,r,c),LH=(e,n)=>Ps(e).formatter.canApply(n),YB=(e,n)=>Ps(e).formatter.closest(n),XB=(e,n,o,r)=>{Ps(e).formatter.apply(n,o,r)},HH=(e,n,o,r,c)=>{Ps(e).formatter.remove(n,o,r,c)},VH=(e,n,o,r)=>{Ps(e).formatter.toggle(n,o,r)},zH=(e,n,o,r,c,u)=>Ps(e).formatter.formatChanged(n,o,r,c,u),UH=(e,n)=>dC(e).editor.getContent(n),WH=(e,n,o)=>dC(e).editor.setContent(n,o),JB=(e,n,o)=>dC(e).editor.insertContent(n,o),wK=(e,n,o)=>Ps(e).selection.getContent(n,o),ZH=(e,n)=>Ps(e).editor.addVisual(n),QB=e=>Ps(e).init.bindEvents(),jH=(e,n={})=>{const o=n.format?n.format:"html";return wK(e,o,n)},e5=e=>e.dom.length===0?(fo(e),L.none()):L.some(e),GH=(e,n)=>e.filter(o=>Uf.isBookmarkNode(o.dom)).bind(n?Wr:jl),qH=(e,n,o,r,c)=>{const u=e.dom,m=n.dom,v=r?u.length:m.length;r?(SO(u,m,c,!1,!r),o.setStart(m,v)):(SO(m,u,c,!1,!r),o.setEnd(m,v))},KH=(e,n,o)=>{Hc(e).each(r=>{const c=e.dom;n&&O2(r,xe(c,0),o)?cE(c,0,o):!n&&A2(r,xe(c,c.length),o)&&xO(c,c.length,o)})},ZA=(e,n,o,r,c)=>{e.bind(u=>((r?xO:cE)(u.dom,r?u.dom.length:0,c),n.filter(Xs).map(v=>qH(u,v,o,r,c)))).orThunk(()=>GH(n,r).or(n).filter(Xs).map(m=>KH(m,r,c)))},YH=(e,n,o)=>{const r=L.from(n.firstChild).map(ee.fromDom),c=L.from(n.lastChild).map(ee.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind(jl).filter(Xs).bind(e5),m=c.bind(Wr).filter(Xs).bind(e5);ZA(u,r,e,!0,o),ZA(m,c,e,!1,o),e.collapse(!1)},XH=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),JH=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...c,...n});return bg({validate:!1},e.schema).serialize(u)}else return n.content},QH=(e,n,o={})=>{const r=XH(o,n);KE(e,r).each(c=>{const u=JH(e,c),m=e.selection.getRng();YH(m,m.createContextualFragment(u),e.schema),e.selection.setRng(m),Gf(e,m),YE(e,u,c)})},t5=(e,n,o)=>{if(It(e,n)){const r=Pt(e[n],c=>c!==o);r.length===0?delete e[n]:e[n]=r}};var xK=(e,n)=>{let o,r;const c=(v,w)=>us(w,E=>e.is(E,v)),u=v=>e.getParents(v,void 0,e.getRoot()),m=()=>{o={},r={},n.on("NodeChange",v=>{const w=v.element,E=u(w),M={};it(o,(N,B)=>{c(B,E).each(U=>{r[B]||(_e(N,G=>{G(!0,{node:U,selector:B,parents:E})}),r[B]=N),M[B]=N})}),it(r,(N,B)=>{M[B]||(delete r[B],_e(N,U=>{U(!1,{node:w,selector:B,parents:E})}))})})};return{selectorChangedWithUnbind:(v,w)=>(o||m(),o[v]||(o[v]=[]),o[v].push(w),c(v,u(n.selection.getStart())).each(()=>{r[v]=o[v]}),{unbind:()=>{t5(o,v,w),t5(r,v,w)}})}};const eV=e=>!!(e&&e.ownerDocument)&&mc(ee.fromDom(e.ownerDocument),ee.fromDom(e)),tV=e=>e?eV(e.startContainer)&&eV(e.endContainer):!1,n5=(e,n,o,r)=>{let c,u;const{selectorChangedWithUnbind:m}=xK(e,r),v=(Ke,wt)=>{const Rn=e.createRng();De(Ke)&&De(wt)?(Rn.setStart(Ke,wt),Rn.setEnd(Ke,wt),de(Rn),ne(!1)):(kS(e,Rn,r.getBody(),!0),de(Rn))},w=Ke=>jH(r,Ke),E=(Ke,wt)=>QH(r,Ke,wt),M=Ke=>rP(r.getBody(),le(),Ke),N=Ke=>aP(r.getBody(),le(),Ke),B=(Ke,wt)=>_r.getBookmark(Ke,wt),U=Ke=>_r.moveToBookmark(Ke),G=(Ke,wt)=>(iP(e,Ke,wt).each(de),Ke),W=()=>{const Ke=le(),wt=re();return!Ke||Ke.item?!1:Ke.compareEndPoints?Ke.compareEndPoints("StartToEnd",Ke)===0:!wt||Ke.collapsed},K=()=>{if(r.mode.isReadOnly())return!1;const Ke=le(),wt=r.getBody().querySelectorAll('[data-mce-selected="1"]');return wt.length>0?ir(wt,Rn=>e.isEditable(Rn.parentElement)):cO(e,Ke)},ne=Ke=>{const wt=le();wt.collapse(!!Ke),de(wt)},re=()=>n.getSelection?n.getSelection():n.document.selection,le=()=>{let Ke;const wt=(st,Rt,Mt)=>{try{return Rt.compareBoundaryPoints(st,Mt)}catch{return-1}},Rn=n.document;if(De(r.bookmark)&&!h0(r)){const st=KS(r);if(st.isSome())return st.map(Rt=>nE(r,[Rt])[0]).getOr(Rn.createRange())}try{const st=re();st&&!Xd(st.anchorNode)&&(st.rangeCount>0?Ke=st.getRangeAt(0):Ke=Rn.createRange(),Ke=nE(r,[Ke])[0])}catch{}if(Ke||(Ke=Rn.createRange()),Tm(Ke.startContainer)&&Ke.collapsed){const st=e.getRoot();Ke.setStart(st,0),Ke.setEnd(st,0)}return c&&u&&(wt(Ke.START_TO_START,Ke,c)===0&&wt(Ke.END_TO_END,Ke,c)===0?Ke=u:(c=null,u=null)),Ke},de=(Ke,wt)=>{if(!tV(Ke))return;const Rn=re();if(Ke=r.dispatch("SetSelectionRange",{range:Ke,forward:wt}).range,Rn){u=Ke;try{Rn.removeAllRanges(),Rn.addRange(Ke)}catch{}wt===!1&&Rn.extend&&(Rn.collapse(Ke.endContainer,Ke.endOffset),Rn.extend(Ke.startContainer,Ke.startOffset)),c=Rn.rangeCount>0?Rn.getRangeAt(0):null}if(!Ke.collapsed&&Ke.startContainer===Ke.endContainer&&(Rn!=null&&Rn.setBaseAndExtent)&&Ke.endOffset-Ke.startOffset<2&&Ke.startContainer.hasChildNodes()){const Rt=Ke.startContainer.childNodes[Ke.startOffset];Rt&&Rt.nodeName==="IMG"&&(Rn.setBaseAndExtent(Ke.startContainer,Ke.startOffset,Ke.endContainer,Ke.endOffset),(Rn.anchorNode!==Ke.startContainer||Rn.focusNode!==Ke.endContainer)&&Rn.setBaseAndExtent(Rt,0,Rt,1))}r.dispatch("AfterSetSelectionRange",{range:Ke,forward:wt})},Ae=Ke=>(E(e.getOuterHTML(Ke)),Ke),Ve=()=>l8(r.getBody(),le()),ct=(Ke,wt)=>tE(e,le(),Ke,wt),Ee=()=>{const Ke=re(),wt=Ke==null?void 0:Ke.anchorNode,Rn=Ke==null?void 0:Ke.focusNode;if(!Ke||!wt||!Rn||Xd(wt)||Xd(Rn))return!0;const st=e.createRng(),Rt=e.createRng();try{st.setStart(wt,Ke.anchorOffset),st.collapse(!0),Rt.setStart(Rn,Ke.focusOffset),Rt.collapse(!0)}catch{return!0}return st.compareBoundaryPoints(st.START_TO_START,Rt)<=0},ns={dom:e,win:n,serializer:o,editor:r,expand:(Ke={type:"word"})=>de(Pe(e).expand(le(),Ke)),collapse:ne,setCursorLocation:v,getContent:w,setContent:E,getBookmark:B,moveToBookmark:U,select:G,isCollapsed:W,isEditable:K,isForward:Ee,setNode:Ae,getNode:Ve,getSel:re,setRng:de,getRng:le,getStart:M,getEnd:N,getSelectedBlocks:ct,normalize:()=>{const Ke=le(),wt=re();if(!S4(wt)&&Zb(r)){const Rn=Xe(e,Ke);return Rn.each(st=>{de(st,Ee())}),Rn.getOr(Ke)}return Ke},selectorChanged:(Ke,wt)=>(m(Ke,wt),ns),selectorChangedWithUnbind:m,getScrollContainer:()=>{let Ke,wt=e.getRoot();for(;wt&&wt.nodeName!=="BODY";){if(wt.scrollHeight>wt.clientHeight){Ke=wt;break}wt=wt.parentNode}return Ke},scrollIntoView:(Ke,wt)=>{De(Ke)?YL(r,Ke,wt):Gf(r,le(),wt)},placeCaretAt:(Ke,wt)=>de(p(Ke,wt,r.getDoc())),getBoundingClientRect:()=>{const Ke=le();return Ke.collapsed?xe.fromRangeStart(Ke).getClientRects()[0]:Ke.getBoundingClientRect()},destroy:()=>{n=c=u=null,cs.destroy()}},_r=Uf(ns),cs=y2(ns,r);return ns.bookmarkManager=_r,ns.controlSelection=cs,ns},SK=(e,n,o)=>{n.addNodeFilter("br",(r,c,u)=>{const m=We.extend({},o.getBlockElements()),v=o.getNonEmptyElements(),w=o.getWhitespaceElements();m.body=1;const E=M=>M.name in m||U1(o,M);for(let M=0,N=r.length;M<N;M++){let B=r[M],U=B.parent;if(U&&E(U)&&B===U.lastChild){let G=B.prev;for(;G;){const W=G.name;if(W!=="span"||G.attr("data-mce-type")!=="bookmark"){W==="br"&&(B=null);break}G=G.prev}if(B&&(B.remove(),Ms(o,v,w,U))){const W=o.getElementRule(U.name);W&&(W.removeEmpty?U.remove():W.paddEmpty&&UO(e,u,E,U))}}else{let G=B;for(;U&&U.firstChild===G&&U.lastChild===G&&(G=U,!m[U.name]);)U=U.parent;if(G===U){const W=new Aa("#text",3);W.value=ks,B.replace(W)}}}})},nV=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const m=r[u];m.attr("tabindex",m.attr("data-mce-tabindex")),m.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,m=n.url_converter,v=n.url_converter_scope;let w=r.length;for(;w--;){const E=r[w];let M=E.attr(u);M!==void 0?(E.attr(c,M.length>0?M:null),E.attr(u,null)):(M=E.attr(c),c==="style"?M=o.serializeStyle(o.parseStyle(M),E.name):m&&(M=m.call(v,M,c,E.name)),E.attr(c,M.length>0?M:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let m=u.attr("class");m&&(m=m.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",m.length>0?m:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let m=r.length;for(;m--;){const v=r[m];v.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(L.from(v.firstChild).exists(E=>{var M;return!Rh((M=E.value)!==null&&M!==void 0?M:"")})?v.unwrap():v.remove())}}),e.addNodeFilter("script,style",(r,c)=>{var u;const m=w=>w.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let v=r.length;for(;v--;){const w=r[v],E=w.firstChild,M=(u=E==null?void 0:E.value)!==null&&u!==void 0?u:"";if(c==="script"){const N=w.attr("type");N&&w.attr("type",N==="mce-no/type"?null:N.replace(/^mce\-/,"")),n.element_format==="xhtml"&&E&&M.length>0&&(E.value=`// <![CDATA[
`+m(M)+`
// ]]>`)}else n.element_format==="xhtml"&&E&&M.length>0&&(E.value=`<!--
`+m(M)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],m=u.value;n.preserve_cdata&&(m==null?void 0:m.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(m.replace(/^\[CDATA\[|\]\]$/g,""))):(m==null?void 0:m.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(m).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const m=r[u];m.type===7?m.remove():m.type===1&&c==="input"&&!m.attr("type")&&m.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{_e(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.remove_trailing_brs&&SK(n,e,e.schema)},ts=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},jA=(e,n,o)=>{let r;const c=e.dom;let u=n.cloneNode(!0);const m=document.implementation;if(m.createHTMLDocument){const v=m.createHTMLDocument("");We.each(u.nodeName==="BODY"?u.childNodes:[u],w=>{v.body.appendChild(v.importNode(w,!0))}),u.nodeName!=="BODY"?u=v.body.firstChild:u=v.body,r=c.doc,c.doc=v}return Jb(e,{...o,node:u}),r&&(c.doc=r),u},EK=(e,n)=>De(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,oV=(e,n,o)=>EK(e,o)?jA(e,n,o):n,sV=(e,n,o)=>{We.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.push(o))},k0=(e,n,o)=>!n.no_events&&e?Qb(e,{...n,content:o}).content:o,_K=(e,n,o)=>{const r=bc(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||ib(ee.fromDom(n))?r:We.trim(r)},TK=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(n,r);return ts(c),c},Fr=(e,n,o)=>bg(e,n).serialize(o),o5=(e,n,o,r,c)=>{const u=Fr(n,o,r);return k0(e,c,u)},s5=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},c=n&&n.dom?n.dom:to.DOM,u=n&&n.schema?n.schema:zn(r),m=Mp(r,u);nV(m,r,c);const v=(w,E={})=>{const M={format:"html",...E},N=oV(n,w,M),B=_K(c,N,M),U=TK(m,B,M);return M.format==="tree"?U:o5(n,r,u,U,M)};return{schema:u,addNodeFilter:m.addNodeFilter,addAttributeFilter:m.addAttributeFilter,serialize:v,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:Le(sV,m,o),getTempAttrs:Je(o),getNodeFilters:m.getNodeFilters,getAttributeFilters:m.getAttributeFilters,removeNodeFilter:m.removeNodeFilter,removeAttributeFilter:m.removeAttributeFilter}},GA=(e,n)=>{const o=s5(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},rV="html",aV=(e,n)=>({...e,format:n,get:!0,getInner:!0}),r_=(e,n={})=>{const o=n.format?n.format:rV,r=aV(n,o);return yB(e,r).fold(qo,c=>{const u=UH(e,c);return DA(e,u,c)})},cV="html",qA=(e,n)=>({format:cV,...e,set:!0,content:n}),KA=(e,n,o={})=>{const r=qA(o,n);return KE(e,r).map(c=>{const u=WH(e,c.content,c);return YE(e,u.html,c),u.content}).getOr(n)},r5="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),a5=[],YA="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),XA=[],a_=(e,n)=>{const o=Pt(n,r=>It(e,r));return Lo(o)},iV=e=>{const n=a_(e,r5),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Lo(n)},lV=e=>a_(e,a5),c5=(e,n)=>{const o=We.makeMap(e.plugins," "),c=Pt(n,u=>It(o,u));return Lo(c)},ci=e=>c5(e,YA),uV=e=>c5(e,XA.map(n=>n.name)),dV=(e,n)=>{const o=iV(e),r=ci(n),c=r.length>0,u=o.length>0,m=n.theme==="mobile";if(c||u||m){const v=`
- `,w=m?`

Themes:${v}mobile`:"",E=c?`

Plugins:${v}${r.join(v)}`:"",M=u?`

Options:${v}${o.join(v)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+w+E+M)}},fV=e=>us(XA,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),mV=(e,n)=>{const o=lV(e),r=uV(n),c=r.length>0,u=o.length>0;if(c||u){const m=`
- `,v=c?`

Plugins:${m}${r.map(fV).join(m)}`:"",w=u?`

Options:${m}${o.join(m)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+v+w)}},gV=(e,n)=>{dV(e,n),mV(e,n)},fC=to.DOM,hV=e=>{fC.setStyle(e.id,"display",e.orgDisplay)},c_=e=>L.from(e).each(n=>n.destroy()),pV=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},i_=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),fC.unbind(n,"submit reset",e.formEventDelegate))},bV=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&De(c==null?void 0:c.nextSibling)&&fC.remove(c.nextSibling),D4(e),e.editorManager.remove(e),!e.inline&&r&&hV(e),M4(e),fC.remove(e.getContainer()),c_(n),c_(o),e.destroy()}},vV=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),c_(o),c_(r)),i_(e),pV(e),e.destroyed=!0}},O0=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>It(e,c)}})(),A0=Nr.ModelManager,i5=(e,n)=>n.dom[e],CV=(e,n)=>parseInt(os(n,e),10),wV=Le(i5,"clientWidth"),mC=Le(i5,"clientHeight"),l5=Le(CV,"margin-top"),u5=Le(CV,"margin-left"),xV=e=>e.dom.getBoundingClientRect(),d5=(e,n,o)=>{const r=wV(e),c=mC(e);return n>=0&&o>=0&&n<=r&&o<=c},SV=(e,n,o,r)=>{const c=xV(n),u=e?c.left+n.dom.clientLeft+u5(n):0,m=e?c.top+n.dom.clientTop+l5(n):0,v=o-u,w=r-m;return{x:v,y:w}},EV=(e,n,o)=>{const r=ee.fromDom(e.getBody()),c=e.inline?r:kw(r),u=SV(e.inline,c,n,o);return d5(c,u.x,u.y)},_V=e=>L.from(e).map(ee.fromDom),TV=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return _V(n).map(xm).getOr(!1)};var f5=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const m5=e=>{const n=[],o=()=>{const B=e.theme;return B&&B.getNotificationManagerImpl?B.getNotificationManagerImpl():f5()},r=()=>L.from(n[0]),c=(B,U)=>B.type===U.type&&B.text===U.text&&!B.progressBar&&!B.timeout&&!U.progressBar&&!U.timeout,u=()=>{r().each(B=>{B.reposition()})},m=B=>{n.push(B)},v=B=>{ga(n,U=>U===B).each(U=>{n.splice(U,1)})},w=(B,U=!0)=>e.removed||!TV(e)?{}:(U&&e.dispatch("BeforeOpenNotification",{notification:B}),us(n,G=>c(o().getArgs(G),B)).getOrThunk(()=>{e.editorManager.setActive(e);const G=o().open(B,()=>{v(G)},()=>oP(e));return m(G),u(),e.dispatch("OpenNotification",{notification:{...G}}),G})),E=()=>{r().each(B=>{o().close(B),v(B),u()})},M=Je(n);return(B=>{B.on("SkinLoaded",()=>{const U=My(B);U&&w({text:U,type:"warning",timeout:0},!1),u()}),B.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(u)}),B.on("remove",()=>{_e(n.slice(),U=>{o().close(U)})}),B.on("keydown",U=>{var G;const W=((G=U.key)===null||G===void 0?void 0:G.toLowerCase())==="f12"||U.keyCode===123;U.altKey&&W&&(U.preventDefault(),r().map(K=>ee.fromDom(K.getEl())).each(K=>hp(K)))})})(e),{open:w,close:E,getNotifications:M}},R0=Nr.PluginManager,hu=Nr.ThemeManager;var g5=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const JA=e=>{let n=[];const o=()=>{const W=e.theme;return W&&W.getWindowManagerImpl?W.getWindowManagerImpl():g5()},r=(W,K)=>(...ne)=>K?K.apply(W,ne):void 0,c=W=>{e.dispatch("OpenWindow",{dialog:W})},u=W=>{e.dispatch("CloseWindow",{dialog:W})},m=W=>{n.push(W),c(W)},v=W=>{u(W),n=Pt(n,K=>K!==W),n.length===0&&e.focus()},w=()=>L.from(n[n.length-1]),E=W=>{e.editorManager.setActive(e),E2(e),e.ui.show();const K=W();return m(K),K},M=(W,K)=>E(()=>o().open(W,K,v)),N=W=>E(()=>o().openUrl(W,v)),B=(W,K,ne)=>{const re=o();re.alert(W,r(ne||re,K))},U=(W,K,ne)=>{const re=o();re.confirm(W,r(ne||re,K))},G=()=>{w().each(W=>{o().close(W),v(W)})};return e.on("remove",()=>{_e(n,W=>{o().close(W)})}),{open:M,openUrl:N,alert:B,confirm:U,close:G}},h5=(e,n)=>{e.notificationManager.open({type:"error",text:n})},l_=(e,n)=>{e._skinLoaded?h5(e,n):e.on("SkinLoaded",()=>{h5(e,n)})},kV=(e,n)=>{l_(e,Di.translate(["Failed to upload image: {0}",n]))},D0=(e,n,o)=>{_c(e,n,{message:o}),console.error(o)},gC=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,OV=(e,n,o)=>{D0(e,"PluginLoadError",gC("plugin",n,o))},AV=(e,n,o)=>{D0(e,"IconsLoadError",gC("icons",n,o))},RV=(e,n,o)=>{D0(e,"LanguageLoadError",gC("language",n,o))},kK=(e,n,o)=>{D0(e,"ThemeLoadError",gC("theme",n,o))},pu=(e,n,o)=>{D0(e,"ModelLoadError",gC("model",n,o))},QA=(e,n,o)=>{const r=Di.translate(["Failed to initialize plugin: {0}",n]);_c(e,"PluginLoadError",{message:r}),u_(r,o),l_(e,r)},u_=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},DV=e=>/^[a-z0-9\-]+$/i.test(e),e3=e=>"content/"+e+"/content.css",MV=e=>tinymce.Resource.has(e3(e)),Hn=e=>M0(e,Tf(e)),PV=e=>M0(e,Xk(e)),M0=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return Yt(n,u=>MV(u)?u:DV(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},NV=e=>{e.contentCSS=e.contentCSS.concat(Hn(e),PV(e))},BV=e=>e?ha(e.getElementsByTagName("img")):[],$V=(e,n)=>{const o={};return{findAll:(c,u=dt)=>{const m=Pt(BV(c),w=>{const E=w.src;return w.hasAttribute("data-mce-bogus")||w.hasAttribute("data-mce-placeholder")||!E||E===Jt.transparentSrc?!1:hs(E,"blob:")?!e.isUploaded(E)&&u(w):hs(E,"data:")?u(w):!1}),v=Yt(m,w=>{const E=w.src;if(It(o,E))return o[E].then(M=>Q(M)?M:{image:w,blobInfo:M.blobInfo});{const M=Y2(n,E).then(N=>(delete o[E],{image:w,blobInfo:N})).catch(N=>(delete o[E],N));return o[E]=M,M}});return Promise.all(v)}}},t3=()=>{let o={};const r=(B,U)=>({status:B,resultUri:U}),c=B=>B in o;return{hasBlobUri:c,getResultUri:B=>{const U=o[B];return U?U.resultUri:null},isPending:B=>c(B)?o[B].status===1:!1,isUploaded:B=>c(B)?o[B].status===2:!1,markPending:B=>{o[B]=r(1,null)},markUploaded:(B,U)=>{o[B]=r(2,U)},removeFailed:B=>{delete o[B]},destroy:()=>{o={}}}};let Pg=0;const ec=()=>{const e=()=>Math.round(kh()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},hC=e=>e+Pg+++ec(),Ng=()=>{let e=[];const n=N=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[N.toLowerCase()]||"dat",o=(N,B,U,G,W)=>{if(Q(N))return r({id:N,name:G,filename:W,blob:B,base64:U});if(Kt(N))return r(N);throw new Error("Unknown input type")},r=N=>{if(!N.blob||!N.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const B=N.id||hC("blobid"),U=N.name||B,G=N.blob;return{id:Je(B),name:Je(U),filename:Je(N.filename||U+"."+n(G.type)),blob:Je(G),base64:Je(N.base64),blobUri:Je(N.blobUri||URL.createObjectURL(G)),uri:Je(N.uri)}},c=N=>{m(N.id())||e.push(N)},u=N=>us(e,N).getOrUndefined(),m=N=>u(B=>B.id()===N);return{create:o,add:c,get:m,getByUri:N=>u(B=>B.blobUri()===N),getByData:(N,B)=>u(U=>U.base64()===N&&U.blob().type===B),findFirst:u,removeByUri:N=>{e=Pt(e,B=>B.blobUri()===N?(URL.revokeObjectURL(B.blobUri()),!1):!0)},destroy:()=>{_e(e,N=>{URL.revokeObjectURL(N.blobUri())}),e=[]}}},_d=(e,n)=>{const o={},r=(W,K)=>W?W.replace(/\/$/,"")+"/"+K.replace(/^\//,""):K,c=(W,K)=>new Promise((ne,re)=>{const le=new XMLHttpRequest;le.open("POST",n.url),le.withCredentials=n.credentials,le.upload.onprogress=Ae=>{K(Ae.loaded/Ae.total*100)},le.onerror=()=>{re("Image upload failed due to a XHR Transport error. Code: "+le.status)},le.onload=()=>{if(le.status<200||le.status>=300){re("HTTP Error: "+le.status);return}const Ae=JSON.parse(le.responseText);if(!Ae||!Q(Ae.location)){re("Invalid JSON: "+le.responseText);return}ne(r(n.basePath,Ae.location))};const de=new FormData;de.append("file",W.blob(),W.filename()),le.send(de)}),u=se(n.handler)?n.handler:c,m=()=>new Promise(W=>{W([])}),v=(W,K)=>({url:K,blobInfo:W,status:!0}),w=(W,K)=>({url:"",blobInfo:W,status:!1,error:K}),E=(W,K)=>{We.each(o[W],ne=>{ne(K)}),delete o[W]},M=(W,K,ne)=>(e.markPending(W.blobUri()),new Promise(re=>{let le,de;try{const Ae=()=>{le&&(le.close(),de=Dt)},Ve=Ee=>{Ae(),e.markUploaded(W.blobUri(),Ee),E(W.blobUri(),v(W,Ee)),re(v(W,Ee))},ct=Ee=>{Ae(),e.removeFailed(W.blobUri()),E(W.blobUri(),w(W,Ee)),re(w(W,Ee))};de=Ee=>{Ee<0||Ee>100||L.from(le).orThunk(()=>L.from(ne).map(ls)).each(be=>{le=be,be.progressBar.value(Ee)})},K(W,de).then(Ve,Ee=>{ct(Q(Ee)?{message:Ee}:Ee)})}catch(Ae){re(w(W,Ae))}})),N=W=>W===c,B=W=>{const K=W.blobUri();return new Promise(ne=>{o[K]=o[K]||[],o[K].push(ne)})},U=(W,K)=>(W=We.grep(W,ne=>!e.isUploaded(ne.blobUri())),Promise.all(We.map(W,ne=>e.isPending(ne.blobUri())?B(ne):M(ne,u,K))));return{upload:(W,K)=>!n.url&&N(u)?m():U(W,K)}},P0=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),d_=(e,n)=>_d(n,{url:Ay(e),basePath:Ry(e),credentials:Dy(e),handler:Fx(e)}),n3=e=>{const n=t3(),o=d_(e,n);return{upload:(r,c=!0)=>o.upload(r,c?P0(e):void 0)}},p5=(e,n)=>e.dom.isEmpty(n.dom)&&De(e.schema.getTextBlockElements()[Tn(n)]),b5=e=>n=>{p5(e,n)&&Fs(n,ee.fromHtml('<br data-mce-bogus="1" />'))},IV=e=>{const n=Ng();let o,r;const c=t3(),u=[],m=le=>de=>e.selection?le(de):[],v=le=>le+(le.indexOf("?")===-1?"?":"&")+new Date().getTime(),w=(le,de,Ae)=>{let Ve=0;do Ve=le.indexOf(de,Ve),Ve!==-1&&(le=le.substring(0,Ve)+Ae+le.substr(Ve+de.length),Ve+=Ae.length-de.length+1);while(Ve!==-1);return le},E=(le,de,Ae)=>{const Ve=`src="${Ae}"${Ae===Jt.transparentSrc?' data-mce-placeholder="1"':""}`;return le=w(le,`src="${de}"`,Ve),le=w(le,'data-mce-src="'+de+'"','data-mce-src="'+Ae+'"'),le},M=(le,de)=>{_e(e.undoManager.data,Ae=>{Ae.type==="fragmented"?Ae.fragments=Yt(Ae.fragments,Ve=>E(Ve,le,de)):Ae.content=E(Ae.content,le,de)})},N=(le,de)=>{const Ae=e.convertURL(de,"src");M(le.src,de),Ur(ee.fromDom(le),{src:Cs(e)?v(de):de,"data-mce-src":Ae})},B=()=>(o||(o=d_(e,c)),K().then(m(le=>{const de=Yt(le,Ae=>Ae.blobInfo);return o.upload(de,P0(e)).then(m(Ae=>{const Ve=[];let ct=!1;const Ee=Yt(Ae,(be,Me)=>{const{blobInfo:lt,image:xt}=le[Me];let dn=!1;return be.status&&Ln(e)?(be.url&&!br(xt.src,be.url)&&(ct=!0),n.removeByUri(xt.src),Ed(e)||N(xt,be.url)):be.error&&(be.error.remove&&(M(xt.src,Jt.transparentSrc),Ve.push(xt),dn=!0),kV(e,be.error.message)),{element:xt,status:be.status,uploadUri:be.url,blobInfo:lt,removed:dn}});return Ve.length>0&&!Ed(e)?e.undoManager.transact(()=>{_e(Dv(Ve),be=>{const Me=Hc(be);fo(be),Me.each(b5(e)),n.removeByUri(be.dom.src)})}):ct&&e.undoManager.dispatchChange(),Ee}))}))),U=()=>or(e)?B():Promise.resolve([]),G=le=>ir(u,de=>de(le)),W=le=>{u.push(le)},K=()=>(r||(r=$V(c,n)),r.findAll(e.getBody(),G).then(m(le=>{const de=Pt(le,Ae=>Q(Ae)?(l_(e,Ae),!1):Ae.uriType!=="blob");return Ed(e)||_e(de,Ae=>{M(Ae.image.src,Ae.blobInfo.blobUri()),Ae.image.src=Ae.blobInfo.blobUri(),Ae.image.removeAttribute("data-mce-src")}),de}))),ne=()=>{n.destroy(),c.destroy(),r=o=null},re=le=>le.replace(/src="(blob:[^"]+)"/g,(de,Ae)=>{const Ve=c.getResultUri(Ae);if(Ve)return'src="'+Ve+'"';let ct=n.getByUri(Ae);return ct||(ct=Ko(e.editorManager.get(),(Ee,be)=>Ee||be.editorUpload&&be.editorUpload.blobCache.getByUri(Ae),void 0)),ct?'src="data:'+ct.blob().type+";base64,"+ct.base64()+'"':de});return e.on("SetContent",()=>{or(e)?U():K()}),e.on("RawSaveContent",le=>{le.content=re(le.content)}),e.on("GetContent",le=>{le.source_view||le.format==="raw"||le.format==="tree"||(le.content=re(le.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",le=>{_e(le,de=>{const Ae=de.attr("src");if(!Ae||n.getByUri(Ae))return;const Ve=c.getResultUri(Ae);Ve&&de.attr("src",Ve)})})}),{blobCache:n,addFilter:W,uploadImages:B,uploadImagesAuto:U,scanForImages:K,destroy:ne}},FV=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},m={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[m,c,u]:[c,m,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,m)=>ot(c)&&c.hasAttribute("href"),onformat:(c,u,m)=>{We.each(m,(v,w)=>{n.setAttrib(c,w,v)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return(u=c==null?void 0:c.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return We.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},o3={remove_similar:!0,inherit:!1},Ip={selector:"td,th",...o3},v5={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Ip},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Ip},tablecellbordercolor:{styles:{borderColor:"%value"},...Ip},tablecellclass:{classes:["%value"],...Ip},tableclass:{selector:"table",classes:["%value"],...o3},tablecellborderstyle:{styles:{borderStyle:"%value"},...Ip},tablecellborderwidth:{styles:{borderWidth:"%value"},...Ip}},y5=Je(v5),s3=e=>{const n={},o=m=>De(m)?n[m]:n,r=m=>It(n,m),c=(m,v)=>{m&&(Q(m)?(ln(v)||(v=[v]),_e(v,w=>{Go(w.deep)&&(w.deep=!Sc(w)),Go(w.split)&&(w.split=!Sc(w)||Us(w)),Go(w.remove)&&Sc(w)&&!Us(w)&&(w.remove="none"),Sc(w)&&Us(w)&&(w.mixed=!0,w.block_expand=!0),Q(w.classes)&&(w.classes=w.classes.split(/\s+/))}),n[m]=v):it(m,(w,E)=>{c(E,w)}))},u=m=>(m&&n[m]&&delete n[m],n);return c(FV(e)),c(y5()),c(_b(e)),{get:o,has:r,register:c,unregister:u}},r3=We.each,Ui=to.DOM,C5=e=>De(e)&&Kt(e),w5=(e,n)=>{const o=n&&n.schema||zn({}),r=(w,E)=>{E.classes.length>0&&Ui.addClass(w,E.classes.join(" ")),Ui.setAttribs(w,E.attrs)},c=w=>{const E=Q(w)?{name:w,classes:[],attrs:{}}:w,M=Ui.create(E.name);return r(M,E),M},u=(w,E)=>{const M=o.getElementRule(w.nodeName.toLowerCase()),N=M==null?void 0:M.parentsRequired;return N&&N.length?E&&Zt(N,E)?E:N[0]:!1},m=(w,E,M)=>{let N;const B=E[0],U=C5(B)?B.name:void 0,G=u(w,U);if(G)U===G?(N=B,E=E.slice(1)):N=G;else if(B)N=B,E=E.slice(1);else if(!M)return w;const W=N?c(N):Ui.create("div");W.appendChild(w),M&&We.each(M,ne=>{const re=c(ne);W.insertBefore(re,w)});const K=C5(N)?N.siblings:void 0;return m(W,E,K)},v=Ui.create("div");if(e.length>0){const w=e[0],E=c(w),M=C5(w)?w.siblings:void 0;v.appendChild(m(E,e.slice(1),M))}return v},LV=e=>{e=We.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,m,v)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":We.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(m==="["){const w=v.match(/([\w\-]+)(?:\=\"([^\"]+))?/);w&&(o.attrs[w[1]]=w[2])}return""})),o.name=n||"div",o},Td=e=>Q(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),We.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=We.map(n.split(/(?:~\+|~|\+)/),LV),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],OK=(e,n)=>{let o="",r=zx(e);if(r==="")return"";const c=B=>Q(B)?B.replace(/%(\w+)/g,""):"",u=(B,U)=>Ui.getStyle(U??e.getBody(),B,!0);if(Q(n)){const B=e.formatter.get(n);if(!B)return"";n=B[0]}if("preview"in n){const B=n.preview;if(B===!1)return"";r=B||r}let m=n.block||n.inline||"span",v;const w=Td(n.selector);w.length>0?(w[0].name||(w[0].name=m),m=n.selector,v=w5(w,e)):v=w5([m],e);const E=Ui.select(m,v)[0]||v.firstChild;r3(n.styles,(B,U)=>{const G=c(B);G&&Ui.setStyle(E,U,G)}),r3(n.attributes,(B,U)=>{const G=c(B);G&&Ui.setAttrib(E,U,G)}),r3(n.classes,B=>{const U=c(B);Ui.hasClass(E,U)||Ui.addClass(E,U)}),e.dispatch("PreviewFormats"),Ui.setStyles(v,{position:"absolute",left:-65535}),e.getBody().appendChild(v);const M=u("fontSize"),N=/px$/.test(M)?parseInt(M,10):0;return r3(r.split(" "),B=>{let U=u(B,E);if(!(B==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(U)&&(U=u(B),Eh(U).toLowerCase()==="#ffffff"))&&!(B==="color"&&Eh(U).toLowerCase()==="#000000")){if(B==="font-size"&&/em|%$/.test(U)){if(N===0)return;U=parseFloat(U)/(/%$/.test(U)?100:1)*N+"px"}B==="border"&&U&&(o+="padding:0 2px;"),o+=B+":"+U+";"}}),e.dispatch("AfterPreviewFormats"),Ui.remove(v),o},AK=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},x5=e=>{const n=s3(e),o=mo({});return AK(e),TN(e),Ed(e)||N7(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,c,u)=>{XB(e,r,c,u)},remove:(r,c,u,m)=>{HH(e,r,c,u,m)},toggle:(r,c,u)=>{VH(e,r,c,u)},match:(r,c,u,m)=>s_(e,r,c,u,m),closest:r=>YB(e,r),matchAll:(r,c)=>IH(e,r,c),matchNode:(r,c,u,m)=>FH(e,r,c,u,m),canApply:r=>LH(e,r),formatChanged:(r,c,u,m)=>zH(e,o,r,c,u,m),getCssText:Le(OK,e)}},N0=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},HV=(e,n,o)=>{const r=mo(!1),c=w=>{n_(n,!1,o),n.add({},w)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",w=>{const E=w.command;N0(E)||($B(n,o),n.beforeChange())}),e.on("ExecCommand",w=>{const E=w.command;N0(E)||c(w)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",w=>{const E=w.keyCode;if(w.isDefaultPrevented())return;const M=Jt.os.isMacOS()&&w.key==="Meta";(E>=33&&E<=36||E>=37&&E<=40||E===45||w.ctrlKey||M)&&(c(),e.nodeChanged()),(E===46||E===8)&&e.nodeChanged(),r.get()&&n.typing&&!lC(cC(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",w=>{const E=w.keyCode;if(w.isDefaultPrevented())return;if(E>=33&&E<=36||E>=37&&E<=40||E===45){n.typing&&c(w);return}const M=w.ctrlKey&&!w.altKey||w.metaKey;if((E<16||E>20)&&E!==224&&E!==91&&!n.typing&&!M){n.beforeChange(),n_(n,!0,o),n.add({},w),r.set(!0);return}(Jt.os.isMacOS()?w.metaKey:w.ctrlKey&&!w.altKey)&&n.beforeChange()}),e.on("mousedown",w=>{n.typing&&c(w)});const u=w=>w.inputType==="insertReplacementText",m=w=>w.inputType==="insertText"&&w.data===null,v=w=>w.inputType==="insertFromPaste"||w.inputType==="insertFromDrop";e.on("input",w=>{w.inputType&&(u(w)||m(w)||v(w))&&c(w)}),e.on("AddUndo Undo Redo ClearUndos",w=>{w.isDefaultPrevented()||e.nodeChanged()})},S5=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},a3=e=>{const n=Qs(),o=mo(0),r=mo(0),c={data:[],typing:!1,beforeChange:()=>{WB(e,o,n)},add:(u,m)=>zA(e,c,r,o,n,u,m),dispatchChange:()=>{e.setDirty(!0);const u=cC(e);u.bookmark=yb(e.selection),e.dispatch("change",{level:u,lastLevel:dm(c.data,r.get()).getOrUndefined()})},undo:()=>ZB(e,c,o,r),redo:()=>jB(e,r,c.data),clear:()=>{UA(e,c,r)},reset:()=>{GB(e,c)},hasUndo:()=>qB(e,c,r),hasRedo:()=>KB(e,c,r),transact:u=>BH(e,c,o,u),ignore:u=>{WA(e,o,u)},extra:(u,m)=>{$H(e,c,r,u,m)}};return Ed(e)||HV(e,c,o),S5(e),c},E5=[9,27,at.HOME,at.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,at.DOWN,at.UP,at.LEFT,at.RIGHT].concat(Jt.browser.isFirefox()?[224]:[]),_5="data-mce-placeholder",T5=e=>e.type==="keydown"||e.type==="keyup",Jf=e=>{const n=e.keyCode;return n===at.BACKSPACE||n===at.DELETE},VV=e=>{if(T5(e)){const n=e.keyCode;return!Jf(e)&&(at.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||Zt(E5,n))}else return!1},zV=e=>T5(e)&&!(Jf(e)||e.type==="keyup"&&e.keyCode===229),UV=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},WV=e=>{var n;const o=e.dom,r=gr(e),c=(n=xl(e))!==null&&n!==void 0?n:"",u=(m,v)=>{if(VV(m))return;const w=e.getBody(),E=zV(m)?!1:UV(o,w,r);(o.getAttrib(w,_5)!==""!==E||v)&&(o.setAttrib(w,_5,E?c:null),xr(e,E),e.on(E?"keydown":"keyup",u),e.off(E?"keyup":"keydown",u))};oo(c)&&e.on("init",m=>{u(m,!0),e.on("change SetContent ExecCommand",u),e.on("paste",v=>ni.setEditorTimeout(e,()=>u(v)))})},ZV=(e,n)=>({block:e,position:n}),jV=(e,n)=>({from:e,to:n}),c3=(e,n)=>{const o=ee.fromDom(e),r=ee.fromDom(n.container());return yp(o,r).map(c=>ZV(c,n))},GV=e=>!(mc(e.to.block,e.from.block)||mc(e.from.block,e.to.block)),qV=e=>!kn(e.from.block,e.to.block),pC=(e,n)=>zo(n,c=>Ah(c)||Oe(c.dom),c=>kn(c,e)).filter(wo).getOr(e),KV=(e,n)=>{const o=ee.fromDom(e);return kn(pC(o,n.from.block),pC(o,n.to.block))},YV=e=>$n(e.from.block.dom)===!1&&$n(e.to.block.dom)===!1,RK=e=>{const n=o=>xa(o)||V1(o.dom)||pf(o);return n(e.from.block)&&n(e.to.block)},bC=(e,n,o,r)=>Bn(r.position.getNode())&&!Mr(e,r.block)?Mf(!1,r.block.dom).bind(c=>c.isEqual(r.position)?qa(o,n,c).bind(u=>c3(n,u)):L.some(r)).getOr(r):r,XV=(e,n,o,r)=>{const c=c3(n,xe.fromRangeStart(r)),u=c.bind(m=>qa(o,n,m.position).bind(v=>c3(n,v).map(w=>bC(e,n,o,w))));return Qt(c,u,jV).filter(m=>qV(m)&&KV(n,m)&&YV(m)&&RK(m)&&GV(m))},i3=(e,n,o,r)=>r.collapsed?XV(e,n,o,r):L.none(),JV=(e,n)=>{const o=Js(e);return ga(o,r=>n.isBlock(Tn(r))).fold(Je(o),r=>o.slice(0,r))},k5=(e,n)=>{const o=JV(e,n);return _e(o,fo),o},O5=(e,n,o)=>{const r=wd(o,n);return us(r.reverse(),c=>Mr(e,c)).each(fo)},QV=(e,n)=>Pt(Aw(n),o=>!Mr(e,o)).length===0,Fp=(e,n,o,r,c)=>{if(Mr(r,o))return vl(o),Ir(o.dom);QV(r,c)&&Mr(r,n)&&uo(c,ee.fromTag("br"));const u=Ta(o.dom,xe.before(c.dom));return _e(k5(n,r),m=>{uo(c,m)}),O5(r,e,n),u},Lp=(e,n)=>e.isInline(Tn(n)),f_=(e,n,o,r)=>{if(Mr(r,o)){if(Mr(r,n)){const m=Pd((v=>{const w=(E,M)=>Zr(E).fold(()=>M,N=>Lp(r,N)?w(N,M.concat(Yc(N))):M);return w(v,[])})(o),(v,w)=>(Kd(v,w),w),Pi());Sm(n),Fs(n,m)}return fo(o),Ir(n.dom)}const c=Ka(o.dom);return _e(k5(n,r),u=>{Fs(o,u)}),O5(r,e,n),c},m_=(e,n)=>{const o=wd(n,e);return L.from(o[o.length-1])},Hp=(e,n)=>mc(n,e)?m_(n,e):L.none(),Bg=(e,n)=>{Mf(e,n.dom).bind(o=>L.from(o.getNode())).map(ee.fromDom).filter(Ql).each(fo)},vC=(e,n,o,r)=>(Bg(!0,n),Bg(!1,o),Hp(n,o).fold(Le(f_,e,n,o,r),Le(Fp,e,n,o,r))),yC=(e,n,o,r,c)=>n?vC(e,r,o,c):vC(e,o,r,c),g_=(e,n)=>{const o=ee.fromDom(e.getBody());return i3(e.schema,o.dom,n,e.selection.getRng()).map(c=>()=>{yC(o,n,c.from.block,c.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},l3=(e,n,o)=>{const r=n.getRng();return Qt(yp(e,ee.fromDom(r.startContainer)),yp(e,ee.fromDom(r.endContainer)),(c,u)=>kn(c,u)?L.none():L.some(()=>{r.deleteContents(),yC(e,!0,c,u,o).each(m=>{n.setRng(m.toRange())})})).getOr(L.none())},h_=(e,n)=>{const o=ee.fromDom(n),r=Le(kn,e);return ko(o,Ah,r).isSome()},A5=(e,n)=>h_(e,n.startContainer)||h_(e,n.endContainer),R5=(e,n)=>{const o=Ta(e.dom,xe.fromRangeStart(n)).isNone(),r=$r(e.dom,xe.fromRangeEnd(n)).isNone();return!A5(e,n)&&o&&r},B0=e=>L.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),D5=e=>{const n=ee.fromDom(e.getBody()),o=e.selection.getRng();return R5(n,o)?B0(e):l3(n,e.selection,e.schema)},p_=(e,n)=>e.selection.isCollapsed()?L.none():D5(e),kd=(e,n,o,r,c)=>L.from(n._selectionOverrides.showCaret(e,o,r,c)),b_=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},$0=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?L.none():L.some(b_(n)),M5=(e,n,o)=>{const r=qy(1,e.getBody(),n),c=xe.fromRangeStart(r),u=c.getNode();if(Rf(u))return kd(1,e,u,!c.isAtEnd(),!1);const m=c.getNode(!0);if(Rf(m))return kd(1,e,m,!1,!1);const v=Tl(e.dom.getRoot(),c.getNode());return Rf(v)?kd(1,e,v,!1,o):L.none()},v_=(e,n,o)=>n.collapsed?M5(e,n,o).getOr(n):n,P5=e=>yg(e)||b0(e),Qf=e=>Cg(e)||T2(e),$g=(e,n)=>{Fe(n)&&n.data.length===0&&e.remove(n)},Wi=(e,n,o,r,c,u)=>{kd(r,e,u.getNode(!c),c,!0).each(m=>{if(n.collapsed){const v=n.cloneRange();c?v.setEnd(m.startContainer,m.startOffset):v.setStart(m.endContainer,m.endOffset),v.deleteContents()}else n.deleteContents();e.selection.setRng(m)}),$g(e.dom,o)},ez=(e,n)=>{const o=e.selection.getRng();if(!Fe(o.commonAncestorContainer))return L.none();const r=n?rr.Forwards:rr.Backwards,c=hr(e.getBody()),u=Le(Ky,n?c.next:c.prev),m=n?P5:Qf,v=Df(r,e.getBody(),o),w=u(v),E=w&&Li(n,w);if(!E||!Qh(v,E))return L.none();if(m(E))return L.some(()=>Wi(e,o,v.getNode(),r,n,E));const M=u(E);return M&&m(M)&&Qh(E,M)?L.some(()=>Wi(e,o,v.getNode(),r,n,M)):L.none()},u3=(e,n)=>ez(e,n),d3=(e,n)=>{const o=e.getBody();return n?Ir(o).filter(yg):Ka(o).filter(Cg)},f3=e=>{const n=e.selection.getRng();return!n.collapsed&&(d3(e,!0).exists(o=>o.isEqual(xe.fromRangeStart(n)))||d3(e,!1).exists(o=>o.isEqual(xe.fromRangeEnd(n))))},tz=e=>De(e)&&(Ah(ee.fromDom(e))||pf(ee.fromDom(e))),ii=Cc.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),nz=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return ot(o)&&o.getAttribute("data-mce-caret")===r},oz=(e,n,o,r,c)=>{const u=m=>c.isInline(m.nodeName.toLowerCase())&&!Ni(o,r,e);return $b(!n,o).fold(()=>$b(n,r).fold(Ne,u),u)},N5=(e,n,o,r,c)=>{const u=c.getNode(!o);return yp(ee.fromDom(n),ee.fromDom(r.getNode())).map(m=>Mr(e,m)?ii.remove(m.dom):ii.moveToElement(u)).orThunk(()=>L.some(ii.moveToElement(u)))},B5=(e,n,o,r)=>qa(n,e,o).bind(c=>tz(c.getNode())||oz(e,n,o,c,r)?L.none():n&&$n(c.getNode())||!n&&$n(c.getNode(!0))?N5(r,e,n,o,c):n&&Cg(o)||!n&&yg(o)?L.some(ii.moveToPosition(c)):L.none()),sz=(e,n)=>An(n)?L.none():e&&$n(n.nextSibling)?L.some(ii.moveToElement(n.nextSibling)):!e&&$n(n.previousSibling)?L.some(ii.moveToElement(n.previousSibling)):L.none(),rz=(e,n,o)=>o.fold(r=>L.some(ii.remove(r)),r=>L.some(ii.moveToElement(r)),r=>Ni(n,r,e)?L.none():L.some(ii.moveToPosition(r))),m3=(e,n,o,r)=>nz(n,o)?sz(n,o.getNode(!n)).orThunk(()=>B5(e,n,o,r)):B5(e,n,o,r).bind(c=>rz(e,o,c)),g3=(e,n,o,r)=>{const c=qy(n?1:-1,e,o),u=xe.fromRangeStart(c),m=ee.fromDom(e);return!n&&Cg(u)?L.some(ii.remove(u.getNode(!0))):n&&yg(u)?L.some(ii.remove(u.getNode())):!n&&yg(u)&&aE(m,u,r)?$t(m,u,r).map(v=>ii.remove(v.getNode())):n&&Cg(u)&&pO(m,u,r)?M8(m,u,r).map(v=>ii.remove(v.getNode())):m3(e,n,u,r)},$5=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),bp(e,n,ee.fromDom(o)),!0),az=(e,n)=>o=>{const r=n?xe.before(o):xe.after(o);return e.selection.setRng(r.toRange()),!0},cz=e=>n=>(e.selection.setRng(n.toRange()),!0),h3=(e,n)=>L.from(Tl(e.getBody(),n)),I5=(e,n)=>{const o=e.selection.getNode();return h3(e,o).filter($n).fold(()=>g3(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold($5(e,n),az(e,n),cz(e))),()=>L.some(Dt))},p3=e=>{_e(jr(e,".mce-offscreen-selection"),fo)},F5=(e,n)=>{const o=e.selection.getNode();return $n(o)&&!F1(o)?h3(e,o.parentNode).filter($n).fold(()=>L.some(()=>{p3(ee.fromDom(e.getBody())),bp(e,n,ee.fromDom(e.selection.getNode())),wg(e)}),()=>L.some(Dt)):f3(e)?L.some(()=>{oi(e,e.selection.getRng(),ee.fromDom(e.getBody()))}):L.none()},b3=e=>{const n=e.dom,o=e.selection,r=Tl(e.getBody(),o.getNode());if(Oe(r)&&n.isBlock(r)&&n.isEmpty(r)){const c=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(c),o.setRng(xe.before(c).toRange())}return!0},CC=(e,n)=>e.selection.isCollapsed()?I5(e,n):F5(e,n),L5=e=>e.hasOwnProperty("text"),H5=e=>e.hasOwnProperty("marker"),bu=(e,n)=>{const o=(u,m)=>{if(Fe(u))return{text:u,offset:m};{const v=n(),w=u.childNodes;return m<w.length?(u.insertBefore(v,w[m]),{marker:v,before:!0}):(u.appendChild(v),{marker:v,before:!1})}},r=o(e.endContainer,e.endOffset);return{start:o(e.startContainer,e.startOffset),end:r}},Zi=e=>{var n,o;const{start:r,end:c}=e,u=new window.Range;return L5(r)?u.setStart(r.text,r.offset):H5(r)&&(r.before?u.setStartBefore(r.marker):u.setStartAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),L5(c)?u.setEnd(c.text,c.offset):H5(c)&&(c.before?u.setEndBefore(c.marker):u.setEndAfter(c.marker),(o=c.marker.parentNode)===null||o===void 0||o.removeChild(c.marker)),u},I0=(e,n)=>{var o;const r=e.dom,c=r.getParent(e.selection.getStart(),r.isBlock),u=r.getParent(e.selection.getEnd(),r.isBlock),m=e.getBody();if(((o=c==null?void 0:c.nodeName)===null||o===void 0?void 0:o.toLowerCase())==="div"&&c&&u&&c===m.firstChild&&u===m.lastChild&&!r.isEmpty(m)){const w=c.cloneNode(!1),E=()=>{if(n?qP(e):xd(e),m.firstChild!==c){const M=bu(e.selection.getRng(),()=>document.createElement("span"));Array.from(m.childNodes).forEach(N=>w.appendChild(N)),m.appendChild(w),e.selection.setRng(Zi(M))}};return L.some(E)}return L.none()},V5=(e,n)=>{const o=xe.fromRangeStart(e.selection.getRng());return qa(n,e.getBody(),o).filter(r=>n?_t(r):kP(r)).bind(r=>Gy(n?0:-1,r)).map(r=>()=>e.selection.select(r))},F0=(e,n)=>e.selection.isCollapsed()?V5(e,n):L.none(),Vp=Fe,v3=e=>Vp(e)&&e.data[0]===Rs,y3=e=>Vp(e)&&e.data[e.data.length-1]===Rs,C3=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Rs)},z5=e=>{var n;if(Vp(e.previousSibling))return y3(e.previousSibling)||e.previousSibling.appendData(Rs),e.previousSibling;if(Vp(e))return v3(e)||e.insertData(0,Rs),e;{const o=C3(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},U5=e=>{var n,o;if(Vp(e.nextSibling))return v3(e.nextSibling)||e.nextSibling.insertData(0,Rs),e.nextSibling;if(Vp(e))return y3(e)||e.appendData(Rs),e;{const r=C3(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},zp=(e,n)=>e?z5(n):U5(n),w3=Le(zp,!0),iz=Le(zp,!1),W5=(e,n)=>Fe(e.container())?zp(n,e.container()):zp(n,e.getNode()),Z5=(e,n)=>{const o=n.get();return o&&e.container()===o&&Xc(o)},x3=(e,n)=>n.fold(o=>{Af(e.get());const r=w3(o);return e.set(r),L.some(xe(r,r.length-1))},o=>Ir(o).map(r=>{if(Z5(r,e)){const c=e.get();return xe(c,1)}else{Af(e.get());const c=W5(r,!0);return e.set(c),xe(c,1)}}),o=>Ka(o).map(r=>{if(Z5(r,e)){const c=e.get();return xe(c,c.length-1)}else{Af(e.get());const c=W5(r,!1);return e.set(c),xe(c,c.length-1)}}),o=>{Af(e.get());const r=iz(o);return e.set(r),L.some(xe(r,1))}),S3=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return L.none()},Da=Cc.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),j5=(e,n)=>{const o=_a(n,e);return o||e},E3=(e,n,o)=>{const r=ZP(o),c=j5(n,r.container());return qf(e,c,r).fold(()=>$r(c,r).bind(Le(qf,e,c)).map(u=>Da.before(u)),L.none)},lz=(e,n)=>Pf(e,n)===null,G5=(e,n,o)=>qf(e,n,o).filter(Le(lz,n)),uz=(e,n,o)=>{const r=jP(o);return G5(e,n,r).bind(c=>Ta(c,r).isNone()?L.some(Da.start(c)):L.none())},dz=(e,n,o)=>{const r=ZP(o);return G5(e,n,r).bind(c=>$r(c,r).isNone()?L.some(Da.end(c)):L.none())},fz=(e,n,o)=>{const r=jP(o),c=j5(n,r.container());return qf(e,c,r).fold(()=>Ta(c,r).bind(Le(qf,e,c)).map(u=>Da.after(u)),L.none)},q5=e=>!EO(L0(e)),Od=(e,n,o)=>S3([E3,uz,dz,fz],[e,n,o]).filter(q5),L0=e=>e.fold(qo,qo,qo,qo),y_=e=>e.fold(Je("before"),Je("start"),Je("end"),Je("after")),C_=e=>e.fold(Da.before,Da.before,Da.after,Da.after),_3=e=>e.fold(Da.start,Da.start,Da.end,Da.end),mz=(e,n)=>y_(e)===y_(n)&&L0(e)===L0(n),gz=(e,n,o,r,c,u)=>Qt(qf(n,o,r),qf(n,o,c),(m,v)=>m!==v&&WP(o,m,v)?Da.after(e?m:v):u).getOr(u),K5=(e,n)=>e.fold(dt,o=>!mz(o,n)),hz=(e,n,o,r,c)=>{const u=Li(e,c);return qa(e,o,u).map(Le(Li,e)).fold(()=>r.map(C_),w=>Od(n,o,w).map(Le(gz,e,n,o,u,w)).filter(Le(K5,r))).filter(q5)},pz=(e,n)=>e?n.fold(R(L.some,Da.start),L.none,R(L.some,Da.after),L.none):n.fold(L.none,R(L.some,Da.before),L.none,R(L.some,Da.end)),T3=(e,n,o,r)=>{const c=Li(e,r),u=Od(n,o,c);return Od(n,o,c).bind(Le(pz,e)).orThunk(()=>hz(e,n,o,u,r))},bz=e=>se(e.selection.getSel().modify),Y5=(e,n,o)=>{const r=e?1:-1;return n.setRng(xe(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},vz=(e,n)=>{const o=n.selection.getRng(),r=e?xe.fromRangeEnd(o):xe.fromRangeStart(o);return bz(n)?e&&yl(r)?Y5(!0,n.selection,r):!e&&eu(r)?Y5(!1,n.selection,r):!1:!1};var Ad;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Ad||(Ad={}));const w_=(e,n)=>e===rr.Backwards?Fo(n):n,yz=(e,n,o)=>e===rr.Forwards?n.next(o):n.prev(o),Cz=(e,n,o,r)=>Bn(r.getNode(n===rr.Forwards))?Ad.Br:Ni(o,r)===!1?Ad.Block:Ad.Wrap,wC=(e,n,o,r)=>{const c=hr(o);let u=r;const m=[];for(;u;){const v=yz(n,c,u);if(!v)break;if(Bn(v.getNode(!1)))return n===rr.Forwards?{positions:w_(n,m).concat([v]),breakType:Ad.Br,breakAt:L.some(v)}:{positions:w_(n,m),breakType:Ad.Br,breakAt:L.some(v)};if(!v.isVisible()){u=v;continue}if(e(u,v)){const w=Cz(o,n,u,v);return{positions:w_(n,m),breakType:w,breakAt:L.some(v)}}m.push(v),u=v}return{positions:w_(n,m),breakType:Ad.Eol,breakAt:L.none()}},xC=(e,n,o,r)=>n(o,r).breakAt.map(c=>{const u=n(o,c).positions;return e===rr.Backwards?u.concat(c):[c].concat(u)}).getOr([]),k3=(e,n)=>Ko(e,(o,r)=>o.fold(()=>L.some(r),c=>Qt(Ar(c.getClientRects()),Ar(r.getClientRects()),(u,m)=>{const v=Math.abs(n-u.left);return Math.abs(n-m.left)<=v?r:c}).or(o)),L.none()),x_=(e,n)=>Ar(n.getClientRects()).bind(o=>k3(e,o.left)),Ig=Le(wC,xe.isAbove,-1),SC=Le(wC,xe.isBelow,1),X5=Le(xC,-1,Ig),J5=Le(xC,1,SC),Q5=(e,n)=>Ig(e,n).breakAt.isNone(),e$=(e,n)=>SC(e,n).breakAt.isNone(),wz=e=>Ir(e).map(n=>[n].concat(SC(e,n).positions)).getOr([]),xz=e=>Ka(e).map(n=>Ig(e,n).positions.concat(n)).getOr([]),Sz=(e,n)=>x_(X5(e,n),n),Ez=(e,n)=>x_(J5(e,n),n),_z=$n,t$=(e,n)=>Math.abs(e.left-n),Tz=(e,n)=>Math.abs(e.right-n),Ml=e=>pa(e,"node"),S_=(e,n)=>Ba(e,(o,r)=>{const c=Math.min(t$(o,n),Tz(o,n)),u=Math.min(t$(r,n),Tz(r,n));return u===c&&Ml(r)&&_z(r.node)||u<c?r:o}),n$=e=>{const n=o=>Yt(o,r=>{const c=tu(r);return c.node=e,c});if(ot(e))return n(e.getClientRects());if(Fe(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},O3=e=>ic(e,n$);var EC;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(EC||(EC={}));const o$=(e,n,o,r)=>{let c=r;for(;c=Xh(c,e,px,n);)if(o(c))return},s$=(e,n,o,r,c,u)=>{let m=0;const v=[],w=N=>{let B=O3([N]);e===-1&&(B=B.reverse());for(let U=0;U<B.length;U++){const G=B[U];if(!o(G,E)){if(v.length>0&&n(G,Bc(v))&&m++,G.line=m,c(G))return!0;v.push(G)}}return!1},E=Bc(u.getClientRects());if(!E)return v;const M=u.getNode();return M&&(w(M),o$(e,r,w,M)),v},r$=(e,n)=>n.line>e,kz=(e,n)=>n.line===e,Oz=Le(s$,EC.Up,ro,Dh),Az=Le(s$,EC.Down,Dh,ro),Up=e=>Bc(e.getClientRects()),a$=(e,n,o,r)=>{const c=hr(n);let u,m,v,w;const E=[];let M=0;e===1?(u=c.next,m=Dh,v=ro,w=xe.after(r)):(u=c.prev,m=ro,v=Dh,w=xe.before(r));const N=Up(w);do{if(!w.isVisible())continue;const B=Up(w);if(v(B,N))continue;E.length>0&&m(B,Bc(E))&&M++;const U=tu(B);if(U.position=w,U.line=M,o(U))return E;E.push(U)}while(w=u(w));return E},A3=e=>n=>r$(e,n),E_=e=>n=>kz(e,n),vu=(e,n)=>{e.selection.setRng(n),Gf(e,e.selection.getRng())},R3=(e,n,o)=>L.some(v_(e,n,o)),c$=(e,n,o,r,c,u)=>{const m=n===rr.Forwards,v=hr(e.getBody()),w=Le(Ky,m?v.next:v.prev),E=m?r:c;if(!o.collapsed){const G=Mh(o);if(u(G))return kd(n,e,G,n===rr.Backwards,!1);if(f3(e)){const W=o.cloneRange();return W.collapse(n===rr.Backwards),L.from(W)}}const M=Df(n,e.getBody(),o);if(E(M))return $0(e,M.getNode(!m));let N=w(M);const B=so(o);if(N)N=Li(m,N);else return B?L.some(o):L.none();if(E(N))return kd(n,e,N.getNode(!m),m,!1);const U=w(N);return U&&E(U)&&Qh(N,U)?kd(n,e,U.getNode(!m),m,!1):B?R3(e,N.toRange(),!1):L.none()},i$=(e,n,o,r,c,u)=>{const m=Df(n,e.getBody(),o),v=Bc(m.getClientRects()),w=n===EC.Down,E=e.getBody();if(!v)return L.none();if(f3(e)){const K=w?xe.fromRangeEnd(o):xe.fromRangeStart(o);return(w?Ez:Sz)(E,K).orThunk(()=>L.from(K)).map(re=>re.toRange())}const N=(w?Az:Oz)(E,A3(1),m),B=Pt(N,E_(1)),U=v.left,G=S_(B,U);if(G&&u(G.node)){const K=Math.abs(U-G.left),ne=Math.abs(U-G.right);return kd(n,e,G.node,K<ne,!1)}let W;if(r(m)?W=m.getNode():c(m)?W=m.getNode(!0):W=Mh(o),W){const K=a$(n,E,A3(1),W);let ne=S_(Pt(K,E_(1)),U);if(ne||(ne=Bc(Pt(K,E_(0))),ne))return R3(e,ne.position.toRange(),!1)}return B.length===0?D3(e,w).filter(w?c:r).map(K=>v_(e,K.toRange(),!1)):L.none()},D3=(e,n)=>{const o=e.selection.getRng(),r=n?xe.fromRangeEnd(o):xe.fromRangeStart(o),c=b4(r.container(),e.getBody());if(n){const u=SC(c,r);return Hl(u.positions)}else{const u=Ig(c,r);return Ar(u.positions)}},Rz=(e,n,o)=>D3(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),M3=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},Dz=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},ji=(e,n,o)=>x3(n,o).map(r=>(M3(e,r),o)),Mz=(e,n,o)=>{const r=xe.fromRangeStart(e);if(e.collapsed)return r;{const c=xe.fromRangeEnd(e);return o?Ta(n,c).getOr(c):$r(n,r).getOr(r)}},Pz=(e,n,o)=>{const r=e.getBody(),c=Mz(e.selection.getRng(),r,o),u=Le(vp,e);return T3(o,u,r,c).bind(v=>ji(e,n,v))},Wp=(e,n,o)=>{const r=Yt(jr(ee.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),m=>m.dom),c=Pt(r,e),u=Pt(o,e);_e(f1(c,u),Le(Dz,!1)),_e(f1(u,c),Le(Dz,!0))},l$=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=xe.fromRangeStart(e.selection.getRng());xe.isTextPosition(r)&&!Ra(r)&&(M3(e,m4(o,r)),n.set(null))}},Nz=(e,n,o,r)=>{if(n.selection.isCollapsed()){const c=Pt(r,e);_e(c,u=>{const m=xe.fromRangeStart(n.selection.getRng());Od(e,n.getBody(),m).bind(v=>ji(n,o,v))})}},_C=(e,n,o)=>zh(e)?Pz(e,n,o).isSome():!1,u$=(e,n,o)=>zh(n)?vz(e,n):!1,Bz=e=>{const n=mo(null),o=Le(vp,e);return e.on("NodeChange",r=>{zh(e)&&(Wp(o,e.dom,r.parents),l$(e,n),Nz(o,e,n,r.parents))}),n},$z=Le(u$,!0),Iz=Le(u$,!1),TC=(e,n,o)=>{if(zh(e)){const r=D3(e,n).getOrThunk(()=>{const c=e.selection.getRng();return n?xe.fromRangeEnd(c):xe.fromRangeStart(c)});return Od(Le(vp,e),e.getBody(),r).exists(c=>{const u=C_(c);return x3(o,u).exists(m=>(M3(e,m),!0))})}else return!1},Fz=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},em=e=>Qt(Ir(e),Ka(e),(n,o)=>{const r=Li(!0,n),c=Li(!1,o);return $r(e,r).forall(u=>u.isEqual(c))}).getOr(!0),__=(e,n)=>o=>x3(n,o).map(r=>()=>M3(e,r)),d$=(e,n,o,r)=>{const c=e.getBody(),u=Le(vp,e);e.undoManager.ignore(()=>{e.selection.setRng(Fz(o,r)),xd(e),Od(u,c,xe.fromRangeStart(e.selection.getRng())).map(_3).bind(__(e,n)).each(ta)}),e.nodeChanged()},Lz=(e,n)=>{const o=_a(n,e);return o||e},Hz=(e,n,o,r)=>{const c=Lz(e.getBody(),r.container()),u=Le(vp,e),m=Od(u,c,r);return m.bind(w=>o?w.fold(Je(L.some(_3(w))),L.none,Je(L.some(C_(w))),L.none):w.fold(L.none,Je(L.some(C_(w))),L.none,Je(L.some(_3(w))))).map(__(e,n)).getOrThunk(()=>{const w=md(o,c,r),E=w.bind(M=>Od(u,c,M));return Qt(m,E,()=>qf(u,c,r).bind(M=>em(M)?L.some(()=>{bp(e,o,ee.fromDom(M))}):L.none())).getOrThunk(()=>E.bind(()=>w.map(M=>()=>{o?d$(e,n,r,M):d$(e,n,M,r)})))})},P3=(e,n,o)=>{if(e.selection.isCollapsed()&&zh(e)){const r=xe.fromRangeStart(e.selection.getRng());return Hz(e,n,o,r)}return L.none()},Vz=e=>A1(e)>1,T_=(e,n)=>{const o=ee.fromDom(e.getBody()),r=ee.fromDom(e.selection.getStart()),c=wd(r,o);return ga(c,n).fold(Je(c),u=>c.slice(0,u))},N3=e=>A1(e)===1,B3=e=>T_(e,n=>e.schema.isBlock(Tn(n))||Vz(n)),f$=e=>T_(e,n=>e.schema.isBlock(Tn(n))),$3=(e,n)=>{const o=Le(tA,e);return ic(n,r=>o(r)?[r.dom]:[])},I3=e=>{const n=f$(e);return $3(e,n)},zz=(e,n,o,r)=>{const c=$3(n,r);if(c.length===0)bp(n,e,o);else{const u=RE(o.dom,c);n.selection.setRng(u.toRange())}},kC=(e,n)=>{const o=Pt(B3(e),N3);return Hl(o).bind(r=>{const c=xe.fromRangeStart(e.selection.getRng());return KP(n,c,r.dom)&&!cp(r)?L.some(()=>zz(n,e,r,o)):L.none()})},k_=(e,n)=>{const o=n.parentElement;return Bn(n)&&!oe(o)&&e.dom.isEmpty(o)},m$=e=>cp(ee.fromDom(e)),F3=(e,n)=>{const o=e.selection.getStart(),r=k_(e,o)||m$(o)?RE(o,n):kN(e.selection.getRng(),n);e.selection.setRng(r.toRange())},g$=(e,n)=>{const o=f1(n,I3(e));o.length>0&&F3(e,o)},L3=e=>Fe(e.startContainer),O_=e=>e.startOffset===0&&L3(e),H3=(e,n)=>{const o=n.startContainer.parentElement;return!oe(o)&&tA(e,ee.fromDom(o))},OC=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!oe(n)&&!oe(o)&&n.isEqualNode(o)},Uz=e=>{const n=e.endContainer;return e.endOffset===(Fe(n)?n.length:n.childNodes.length)},h$=e=>OC(e)&&Uz(e),Wz=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),Zz=e=>h$(e)||Wz(e),p$=e=>{const n=e.selection.getRng();return O_(n)&&H3(e,n)&&Zz(n)},jz=e=>{if(p$(e)){const n=I3(e);return L.some(()=>{xd(e),g$(e,n)})}else return L.none()},A_=(e,n)=>e.selection.isCollapsed()?kC(e,n):jz(e),DK=(e,n)=>I1(e,o=>Ya(o.dom),o=>n.isBlock(Tn(o))),Gz=e=>DK(ee.fromDom(e.selection.getStart()),e.schema),qz=e=>{const n=e.selection.getRng();return n.collapsed&&(L3(n)||e.dom.isEmpty(n.startContainer))&&!Gz(e)},AC=e=>(qz(e)&&F3(e,[]),!0),V3=(e,n,o)=>De(o)?L.some(()=>{e._selectionOverrides.hideFakeCaret(),bp(e,n,ee.fromDom(o))}):L.none(),Kz=(e,n)=>{const o=n?b0:T2,r=n?rr.Forwards:rr.Backwards,c=Df(r,e.getBody(),e.selection.getRng());return o(c)?V3(e,n,c.getNode(!n)):L.from(Li(n,c)).filter(u=>o(u)&&Qh(c,u)).bind(u=>V3(e,n,u.getNode(!n)))},Yz=(e,n)=>{const o=e.selection.getNode();return yr(o)?V3(e,n,o):L.none()},z3=(e,n)=>e.selection.isCollapsed()?Kz(e,n):Yz(e,n),Xz=e=>zo(e,n=>Oe(n.dom)||$n(n.dom)).exists(n=>Oe(n.dom)),R_=e=>Fd(e??"").getOr(0),b$=(e,n)=>{const o=e||Rk(n)?"margin":"padding",r=os(n,"direction")==="rtl"?"-right":"-left";return o+r},Zp=(e,n,o,r,c,u)=>{const m=b$(o,ee.fromDom(u)),v=R_(e.getStyle(u,m));if(n==="outdent"){const w=Math.max(0,v-r);e.setStyle(u,m,w?w+c:"")}else{const w=v+r+c;e.setStyle(u,m,w)}},v$=(e,n)=>ir(n,o=>{const r=b$(Hx(e),o),c=R1(o,r).map(R_).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),D_=e=>{const n=tm(e);return!e.mode.isReadOnly()&&(n.length>1||v$(e,n))},U3=e=>Mi(e)||pf(e),W3=e=>Hc(e).exists(U3),tm=e=>Pt(Dv(e.selection.getSelectedBlocks()),n=>!U3(n)&&!W3(n)&&Xz(n)),Z3=(e,n)=>{var o,r;if(e.mode.isReadOnly())return;const{dom:c}=e,u=NM(e),m=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",v=R_(u),w=Hx(e);_e(tm(e),E=>{Zp(c,n,w,v,m,E.dom)})},Gi=e=>Z3(e,"indent"),Fg=e=>Z3(e,"outdent"),M_=e=>{if(e.selection.isCollapsed()&&D_(e)){const n=e.dom,o=e.selection.getRng(),r=xe.fromRangeStart(o),c=n.getParent(o.startContainer,n.isBlock);if(c!==null&&rE(ee.fromDom(c),r,e.schema))return L.some(()=>Fg(e))}return L.none()},y$=(e,n,o)=>Nd([M_,CC,u3,(r,c)=>P3(r,n,c),g_,CE,F0,z3,p_,A_,I0],r=>r(e,o)).filter(r=>e.selection.isEditable()),C$=(e,n)=>{y$(e,n,!1).fold(()=>{e.selection.isEditable()&&(xd(e),wg(e))},ta)},Jz=(e,n)=>{y$(e,n,!0).fold(()=>{e.selection.isEditable()&&qP(e)},ta)},Qz=(e,n)=>{e.addCommand("delete",()=>{C$(e,n)}),e.addCommand("forwardDelete",()=>{Jz(e,n)})},w$=5,e9=400,x$=e=>e.touches===void 0||e.touches.length!==1?L.none():L.some(e.touches[0]),S$=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>w$||r>w$},t9=e=>{const n=Qs(),o=mo(!1),r=sb(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},e9);e.on("touchstart",c=>{x$(c).each(u=>{r.cancel();const m={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),n.set(m)})},!0),e.on("touchmove",c=>{r.cancel(),x$(c).each(u=>{n.on(m=>{S$(u,m)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},j3=(e,n)=>It(e,n.nodeName),H0=(e,n)=>Fe(n)?!0:ot(n)?!j3(e.getBlockElements(),n)&&!ka(n)&&!tf(e,n)&&!H1(n):!1,P_=(e,n,o)=>ho(k2(ee.fromDom(o),ee.fromDom(n)),r=>j3(e,r.dom)),E$=(e,n)=>{if(Fe(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||j3(e,n.nextSibling)||H1(n.nextSibling)}return!1},N_=e=>e.dom.create(gr(e),ad(e)),G3=e=>{const n=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),m=e.getBody();let v,w,E=null;const M=gr(e);if(!u||!ot(u))return;const N=m.nodeName.toLowerCase();if(!r.isValidChild(N,M.toLowerCase())||P_(c,m,u))return;if(m.firstChild===m.lastChild&&Bn(m.firstChild)){v=N_(e),v.appendChild(Pi().dom),m.replaceChild(v,m.firstChild),e.selection.setCursorLocation(v,0),e.nodeChanged();return}let B=m.firstChild;for(;B;)if(ot(B)&&zv(r,B),H0(r,B)){if(E$(c,B)){w=B,B=B.nextSibling,n.remove(w);continue}if(!v){if(!E&&e.hasFocus()&&(E=bu(e.selection.getRng(),()=>document.createElement("span"))),!B.parentNode){B=null;break}v=N_(e),m.insertBefore(v,B)}w=B,B=B.nextSibling,v.appendChild(w)}else v=null,B=B.nextSibling;E&&(e.selection.setRng(Zi(E)),e.nodeChanged())},_$=(e,n,o)=>{const r=ee.fromDom(N_(e)),c=Pi();Fs(r,c),o(n,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},n9=e=>{e.on("NodeChange",()=>G3(e))},T$=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,o9=(e,n,o)=>function(r){const c=arguments,u=c[c.length-2],m=u>0?n.charAt(u-1):"";if(m==='"')return r;if(m===">"){const v=n.lastIndexOf("<",u);if(v!==-1&&n.substring(v,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},s9=(e,n,o)=>{let r=n.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(n[r],o9(e,c,Ob(e)));o.content=c}},r9=(e,n)=>ir(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),a9=e=>{const n="contenteditable",o=" "+We.trim(ti(e))+" ",r=" "+We.trim(Ob(e))+" ",c=T$(o),u=T$(r),m=Ab(e);m.length>0&&e.on("BeforeSetContent",v=>{s9(e,m,v)}),e.parser.addAttributeFilter("class",v=>{let w=v.length;for(;w--;){const E=v[w];c(E)?E.attr(n,"true"):u(E)&&E.attr(n,"false")}}),e.serializer.addAttributeFilter(n,v=>{let w=v.length;for(;w--;){const E=v[w];if(!c(E)&&!u(E))continue;const M=E.attr("data-mce-content");m.length>0&&M?r9(m,M)?(E.name="#text",E.type=3,E.raw=!0,E.value=M):E.remove():E.attr(n,null)}})},k$=e=>Et(ee.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),O$=(e,n)=>{n.hasAttribute("data-mce-caret")&&(Wm(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},c9=(e,n)=>{const o=k$(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),O$(e,o);return}lx(o)&&(O$(e,o),e.undoManager.add())}},li=e=>{e.on("keyup compositionstart",Le(c9,e))},A$=$n,q3=(e,n,o)=>c$(n,e,o,yg,Cg,A$),R$=(e,n,o)=>i$(n,e,o,u=>yg(u)||sE(u),u=>Cg(u)||gO(u),A$),K3=e=>{const n=e.dom.create(gr(e));return n.innerHTML='<br data-mce-bogus="1">',n},D$=(e,n,o)=>{const r=hr(e.getBody()),c=Le(Ky,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(xe.fromRangeStart(o))){const v=ee.fromDom(K3(e));n===1?Si(ee.fromDom(u),v):uo(ee.fromDom(u),v),e.selection.select(v.dom,!0),e.selection.collapse()}}},i9=(e,n)=>{const o=n?rr.Forwards:rr.Backwards,r=e.selection.getRng();return q3(o,e,r).orThunk(()=>(D$(e,o,r),L.none()))},l9=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return R$(o,e,r).orThunk(()=>(D$(e,o,r),L.none()))},u9=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return EO(o)?!n:n},M$=(e,n)=>i9(e,u9(e.selection,n)).exists(o=>(vu(e,o),!0)),Y3=(e,n)=>l9(e,n).exists(o=>(vu(e,o),!0)),P$=(e,n)=>Rz(e,n,n?Cg:yg),B_=(e,n)=>d3(e,!n).map(o=>{const r=o.toRange(),c=e.selection.getRng();return n?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(vu(e,o),!0)),RC=e=>Zt(["figcaption"],Tn(e)),nm=(e,n,o)=>{const r=Le(kn,n);return zo(ee.fromDom(e.container()),c=>o.isBlock(Tn(c)),r).filter(RC)},jp=(e,n,o)=>n?e$(e.dom,o):Q5(e.dom,o),$_=(e,n)=>{const o=ee.fromDom(e.getBody()),r=xe.fromRangeStart(e.selection.getRng());return nm(r,o,e.schema).exists(()=>{if(jp(o,n,r)){const u=_$(e,o,n?Fs:qd);return e.selection.setRng(u),!0}else return!1})},I_=(e,n)=>e.selection.isCollapsed()?$_(e,n):!1,X3=(e,n,o)=>{const r=e.selection.getRng(),c=xe.fromRangeStart(r);return e.getBody().firstChild===n&&Q5(o,c)?(e.execCommand("InsertNewBlockBefore"),!0):!1},N$=(e,n)=>{const o=e.selection.getRng(),r=xe.fromRangeStart(o);return e.getBody().lastChild===n&&e$(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},d9=(e,n)=>n?L.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>N$(e,o)).getOr(!1):L.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>L.from(e.dom.getParent(o,"details")).map(r=>X3(e,r,o))).getOr(!1),J3=(e,n)=>d9(e,n),Q3={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},f9=e=>Yt(e,n=>({...Q3,...n})),m9=e=>Yt(e,n=>({...Q3,...n})),B$=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,g9=(e,n)=>ic(f9(e),o=>B$(o,n)?[o]:[]),h9=(e,n)=>ic(m9(e),o=>B$(o,n)?[o]:[]),Ut=(e,...n)=>()=>e.apply(null,n),V0=(e,n)=>us(g9(e,n),o=>o.action()),eR=(e,n)=>Nd(h9(e,n),o=>o.action()),p9=(e,n)=>{const o=n?rr.Forwards:rr.Backwards,r=e.selection.getRng();return c$(e,o,r,b0,T2,yr).exists(c=>(vu(e,c),!0))},b9=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return i$(e,o,r,b0,T2,yr).exists(c=>(vu(e,c),!0))},v9=(e,n)=>Rz(e,n,n?T2:b0),$$=Cc.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),F_={...$$,none:e=>$$.none(e)},y9=(e,n)=>I$(e,n,dt),I$=(e,n,o)=>ic(Js(e),r=>Ha(r,n)?o(r)?[r]:[]:I$(r,n,o)),MK=(e,n,o=Ne)=>{if(o(n))return L.none();if(Zt(e,Tn(n)))return L.some(n);const r=c=>Ha(c,"table")||o(c);return Is(n,e.join(","),r)},C9=(e,n)=>MK(["td","th"],e,n),tc=e=>y9(e,"th,td"),tR=(e,n)=>Iu(e,"table",n),Gp=(e,n,o,r,c=dt)=>{const u=r===1;if(!u&&o<=0)return F_.first(e[0]);if(u&&o>=e.length-1)return F_.last(e[e.length-1]);{const m=o+r,v=e[m];return c(v)?F_.middle(n,v):Gp(e,n,m,r,c)}},F$=(e,n)=>tR(e,n).bind(o=>{const r=tc(o);return ga(r,u=>kn(e,u)).map(u=>({index:u,all:r}))}),L$=(e,n,o)=>F$(e,o).fold(()=>F_.none(e),c=>Gp(c.all,e,c.index,1,n)),H$=(e,n,o)=>F$(e,o).fold(()=>F_.none(),c=>Gp(c.all,e,c.index,-1,n)),V$=e=>rx(e).filter(n=>n.trim().length!==0||n.indexOf(ks)>-1).isSome(),nR=e=>x1(e)&&aa(e,"contenteditable")==="false",z$=["img","br"],w9=e=>V$(e)||Zt(z$,Tn(e))||nR(e),U$=e=>Av(e,w9),x9=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),S9=(e,n)=>ic(n,o=>{const r=x9(tu(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),E9=(e,n,o)=>Ko(e,(r,c)=>r.fold(()=>L.some(c),u=>{const m=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),v=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-o));return L.some(v<m?c:u)}),L.none()),L_=(e,n,o,r,c)=>{const u=jr(ee.fromDom(o),"td,th,caption").map(v=>v.dom),m=Pt(S9(e,u),v=>n(v,c));return E9(m,r,c).map(v=>v.cell)},_9=e=>e.bottom,T9=e=>e.top,PK=(e,n)=>e.y<n,k9=(e,n)=>e.y>n,W$=Le(L_,_9,PK),NK=Le(L_,T9,k9),O9=(e,n)=>Ar(n.getClientRects()).bind(o=>W$(e,o.left,o.top)).bind(o=>x_(xz(o),n)),A9=(e,n)=>Hl(n.getClientRects()).bind(o=>NK(e,o.left,o.top)).bind(o=>x_(wz(o),n)),R9=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),oR=e=>e.breakType===Ad.Wrap&&e.positions.length===0,H_=e=>e.breakType===Ad.Br&&e.positions.length===1,sR=(e,n,o)=>{const r=e(n,o);return oR(r)||!Bn(o.getNode())&&H_(r)?!R9(e,n,r):r.breakAt.isNone()},Z$=Le(sR,Ig),D9=Le(sR,SC),M9=(e,n,o)=>{const r=xe.fromRangeStart(n);return Mf(!e,o).exists(c=>c.isEqual(r))},rR=(e,n,o,r)=>{const c=e.selection.getRng(),u=n?1:-1;return h4()&&M9(n,c,o)?(kd(u,e,o,!n,!1).each(m=>{vu(e,m)}),!0):!1},P9=(e,n,o)=>O9(n,o).orThunk(()=>Ar(o.getClientRects()).bind(r=>k3(X5(e,xe.before(n)),r.left))).getOr(xe.before(n)),N9=(e,n,o)=>A9(n,o).orThunk(()=>Ar(o.getClientRects()).bind(r=>k3(J5(e,xe.after(n)),r.left))).getOr(xe.after(n)),j$=(e,n)=>{const o=n.getNode(e);return Ei(o)?L.some(o):L.none()},B9=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?Si:uo,c=_$(n,ee.fromDom(o),r);vu(n,c)})},qi=(e,n,o)=>{const r=j$(!!n,o),c=n===!1;r.fold(()=>vu(e,o.toRange()),u=>Mf(c,e.getBody()).filter(m=>m.isEqual(o)).fold(()=>vu(e,o.toRange()),m=>B9(n,e,u)))},G$=(e,n,o,r)=>{const c=e.selection.getRng(),u=xe.fromRangeStart(c),m=e.getBody();if(!n&&Z$(r,u)){const v=P9(m,o,u);return qi(e,n,v),!0}else if(n&&D9(r,u)){const v=N9(m,o,u);return qi(e,n,v),!0}else return!1},aR=(e,n,o)=>L.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>L.from(e.dom.getParent(r,"table")).map(c=>o(e,n,c,r))).getOr(!1),$9=(e,n)=>aR(e,n,rR),q$=(e,n)=>aR(e,n,G$),BK=e=>{const n=mp.exact(e,0,e,0);return l(n)},I9=(e,n,o)=>o.fold(L.none,L.none,(r,c)=>U$(c).map(u=>BK(u)),r=>e.mode.isReadOnly()?L.none():(e.execCommand("mceTableInsertRowAfter"),K$(e,n,r))),K$=(e,n,o)=>I9(e,n,L$(o,gc)),V_=(e,n,o)=>I9(e,n,H$(o,gc)),Y$=(e,n)=>{const o=["table","li","dl"],r=ee.fromDom(e.getBody()),c=v=>{const w=Tn(v);return kn(v,r)||Zt(o,w)},u=e.selection.getRng(),m=ee.fromDom(n?u.endContainer:u.startContainer);return C9(m,c).map(v=>(tR(v,c).each(M=>{e.model.table.clearSelectedCells(M.dom)}),e.selection.collapse(!n),(n?K$:V_)(e,c,v).each(M=>{e.selection.setRng(M)}),!0)).getOr(!1)},cR=(e,n,o)=>{const r=Jt.os.isMacOS()||Jt.os.isiOS();V0([{keyCode:at.RIGHT,action:Ut(M$,e,!0)},{keyCode:at.LEFT,action:Ut(M$,e,!1)},{keyCode:at.UP,action:Ut(Y3,e,!1)},{keyCode:at.DOWN,action:Ut(Y3,e,!0)},...r?[{keyCode:at.UP,action:Ut(B_,e,!1),metaKey:!0,shiftKey:!0},{keyCode:at.DOWN,action:Ut(B_,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:at.RIGHT,action:Ut($9,e,!0)},{keyCode:at.LEFT,action:Ut($9,e,!1)},{keyCode:at.UP,action:Ut(q$,e,!1)},{keyCode:at.DOWN,action:Ut(q$,e,!0)},{keyCode:at.UP,action:Ut(q$,e,!1)},{keyCode:at.UP,action:Ut(J3,e,!1)},{keyCode:at.DOWN,action:Ut(J3,e,!0)},{keyCode:at.RIGHT,action:Ut(p9,e,!0)},{keyCode:at.LEFT,action:Ut(p9,e,!1)},{keyCode:at.UP,action:Ut(b9,e,!1)},{keyCode:at.DOWN,action:Ut(b9,e,!0)},{keyCode:at.RIGHT,action:Ut(_C,e,n,!0)},{keyCode:at.LEFT,action:Ut(_C,e,n,!1)},{keyCode:at.RIGHT,ctrlKey:!r,altKey:r,action:Ut($z,e,n)},{keyCode:at.LEFT,ctrlKey:!r,altKey:r,action:Ut(Iz,e,n)},{keyCode:at.UP,action:Ut(I_,e,!1)},{keyCode:at.DOWN,action:Ut(I_,e,!0)}],o).each(c=>{o.preventDefault()})},X$=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||cR(e,n,o)})},Pl=(e,n)=>({container:e,offset:n}),DC=to.DOM,z_=e=>n=>e===n?-1:0,F9=e=>n=>e.isBlock(n)||Zt(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",iR=(e,n,o)=>{if(Fe(e)&&n>=0)return L.some(Pl(e,n));{const r=gf(DC);return L.from(r.backwards(e,n,z_(e),o)).map(c=>Pl(c.container,c.container.data.length))}},L9=(e,n,o)=>{if(Fe(e)&&n>=e.length)return L.some(Pl(e,n));{const r=gf(DC);return L.from(r.forwards(e,n,z_(e),o)).map(c=>Pl(c.container,0))}},z0=(e,n,o)=>{if(!Fe(e))return L.none();const r=e.data;if(n>=0&&n<=r.length)return L.some(Pl(e,n));{const c=gf(DC);return L.from(c.backwards(e,n,z_(e),o)).bind(u=>{const m=u.container.data;return z0(u.container,n+m.length,o)})}},J$=(e,n,o)=>{if(!Fe(e))return L.none();const r=e.data;if(n<=r.length)return L.some(Pl(e,n));{const c=gf(DC);return L.from(c.forwards(e,n,z_(e),o)).bind(u=>J$(u.container,n-r.length,o))}},lR=(e,n,o,r,c)=>{const u=gf(e,F9(e));return L.from(u.backwards(n,o,r,c))},H9=e=>e.collapsed&&Fe(e.startContainer),uR=e=>bc(e.toString().replace(/\u00A0/g," ")),Q$=e=>e!==""&&`  \uFEFF\f
\r	\v`.indexOf(e)!==-1,V9=(e,n)=>e.substring(n.length),eI=(e,n,o,r=!1)=>{let c;const u=o.charAt(0);for(c=n-1;c>=0;c--){const m=e.charAt(c);if(!r&&Q$(m))return L.none();if(u===m&&br(e,o,c,n))break}return L.some(c)},dR=(e,n,o,r=!1)=>{if(!H9(n))return L.none();const c={text:"",offset:0},u=(v,w,E)=>(c.text=E+c.text,c.offset+=w,eI(c.text,c.offset,o,r).getOr(w)),m=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return lR(e,n.startContainer,n.startOffset,u,m).bind(v=>{const w=n.cloneRange();if(w.setStart(v.container,v.offset),w.setEnd(n.endContainer,n.endOffset),w.collapsed)return L.none();const E=uR(w);return E.lastIndexOf(o)!==0?L.none():L.some({text:V9(E,o),range:w,trigger:o})})},z9=e=>e.nodeType===sa,U9=e=>e.nodeType===w1,tI=e=>{if(z9(e))return Pl(e,e.data.length);{const n=e.childNodes;return n.length>0?tI(n[n.length-1]):Pl(e,n.length)}},nI=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?nI(o[n],0):o.length>0&&U9(e)&&o.length===n?tI(o[o.length-1]):Pl(e,n)},W9=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return lR(e,n.container,n.offset,(c,u)=>u===0?-1:u,r).filter(c=>{const u=c.container.data.charAt(c.offset-1);return!Q$(u)}).isSome()},fR=e=>n=>{const o=nI(n.startContainer,n.startOffset);return!W9(e,o)},Z9=(e,n,o)=>Nd(o.triggers,r=>dR(e,n,r)),oI=(e,n)=>{const o=n(),r=e.selection.getRng();return Z9(e.dom,r,o).bind(c=>sI(e,n,c))},sI=(e,n,o,r={})=>{var c;const u=n(),v=(c=e.selection.getRng().startContainer.nodeValue)!==null&&c!==void 0?c:"",w=Pt(u.lookupByTrigger(o.trigger),M=>o.text.length>=M.minChars&&M.matches.getOrThunk(()=>fR(e.dom))(o.range,v,o.text));if(w.length===0)return L.none();const E=Promise.all(Yt(w,M=>M.fetch(o.text,M.maxResults,r).then(B=>({matchText:o.text,items:B,columns:M.columns,onAction:M.onAction,highlightOn:M.highlightOn}))));return L.some({lookupData:E,context:o})};var yu;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(yu||(yu={}));const mR=(e,n,o)=>e.stype===yu.Error?n(e.serror):o(e.svalue),j9=e=>{const n=[],o=[];return _e(e,r=>{mR(r,c=>o.push(c),c=>n.push(c))}),{values:n,errors:o}},G9=(e,n)=>e.stype===yu.Error?{stype:yu.Error,serror:n(e.serror)}:e,q9=(e,n)=>e.stype===yu.Value?{stype:yu.Value,svalue:n(e.svalue)}:e,js=(e,n)=>e.stype===yu.Value?n(e.svalue):e,K9=(e,n)=>e.stype===yu.Error?n(e.serror):e,rI=e=>({stype:yu.Value,svalue:e}),aI=e=>({stype:yu.Error,serror:e}),Er={fromResult:e=>e.fold(aI,rI),toResult:e=>mR(e,bs.error,bs.value),svalue:rI,partition:j9,serror:aI,bind:js,bindError:K9,map:q9,mapError:G9,fold:mR},Rd=e=>Kt(e)&&zr(e).length>100?" removed due to size":JSON.stringify(e,null,2),gR=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:Je("... (only showing first ten failures)")}]):e;return Yt(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},MC=(e,n)=>Er.serror([{path:e,getErrorInfo:n}]),hR=(e,n,o)=>MC(e,()=>'Could not find valid *required* value for "'+n+'" in '+Rd(o)),pR=(e,n)=>MC(e,()=>'Choice schema did not contain choice key: "'+n+'"'),bR=(e,n,o)=>MC(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+Rd(n)),iI=(e,n)=>MC(e,Je(n)),U_=(e,n,o,r)=>Co(o,r).fold(()=>bR(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),W_=(e,n)=>({extract:(c,u)=>Co(u,e).fold(()=>pR(c,e),v=>U_(c,u,n,v)),toString:()=>"chooseOn("+e+"). Possible values: "+zr(n)}),PC=(e,n)=>n,NC=(e,n)=>$o(e)&&$o(n)?Lg(e,n):n,Ki=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const c=n[r];for(const u in c)It(c,u)&&(o[u]=e(o[u],c[u]))}return o},Lg=Ki(NC),vR=Ki(PC),yR=()=>({tag:"required",process:{}}),X9=e=>({tag:"defaultedThunk",process:e}),CR=e=>X9(Je(e)),J9=()=>({tag:"option",process:{}}),Q9=(e,n)=>e.length>0?Er.svalue(Lg(n,vR.apply(void 0,e))):Er.svalue(n),U0=e=>R(Er.serror,d1)(e),eU={consolidateObj:(e,n)=>{const o=Er.partition(e);return o.errors.length>0?U0(o.errors):Q9(o.values,n)},consolidateArr:e=>{const n=Er.partition(e);return n.errors.length>0?U0(n.errors):Er.svalue(n.values)}},tU=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),nU=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),lI=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},wR=e=>{const n=(r,c)=>Er.bindError(e(c),u=>iI(r,u)),o=Je("val");return{extract:n,toString:o}},oU=wR(Er.svalue),sU=(e,n,o,r)=>Co(n,o).fold(()=>hR(e,o,n),r),uI=(e,n,o,r)=>{const c=Co(e,n).getOrThunk(()=>o(e));return r(c)},rU=(e,n,o)=>o(Co(e,n)),aU=(e,n,o,r)=>{const c=Co(e,n).map(u=>u===!0?o(e):u);return r(c)},cU=(e,n,o,r,c)=>{const u=v=>c.extract(n.concat([r]),v),m=v=>v.fold(()=>Er.svalue(L.none()),w=>{const E=c.extract(n.concat([r]),w);return Er.map(E,L.some)});switch(e.tag){case"required":return sU(n,o,r,u);case"defaultedThunk":return uI(o,r,e.process,u);case"option":return rU(o,r,m);case"defaultedOptionThunk":return aU(o,r,e.process,m);case"mergeWithThunk":return uI(o,r,Je({}),v=>{const w=Lg(e.process(o),v);return u(w)})}},iU=(e,n,o)=>{const r={},c=[];for(const u of o)lI(u,(m,v,w,E)=>{const M=cU(w,e,n,m,E);Er.fold(M,N=>{c.push(...N)},N=>{r[v]=N})},(m,v)=>{r[m]=v(n)});return c.length>0?Er.serror(c):Er.svalue(r)},Z_=e=>({extract:(r,c)=>iU(r,c,e),toString:()=>`obj{
`+Yt(e,c=>lI(c,(u,m,v,w)=>u+" -> "+w.toString(),(u,m)=>"state("+u+")")).join(`
`)+"}"}),xR=e=>({extract:(r,c)=>{const u=Yt(c,(m,v)=>e.extract(r.concat(["["+v+"]"]),m));return eU.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),dI=e=>wR(n=>e(n).fold(Er.serror,Er.svalue)),lU=(e,n,o)=>{const r=n.extract([e],o);return Er.mapError(r,c=>({input:o,errors:c}))},uU=(e,n,o)=>Er.toResult(lU(e,n,o)),dU=e=>`Errors: 
`+gR(e.errors).join(`
`)+`

Input object: `+Rd(e.input),fI=(e,n)=>W_(e,Vn(n,Z_)),mI=Je(oU),j_=(e,n)=>wR(o=>{const r=typeof o;return e(o)?Er.svalue(o):Er.serror(`Expected type: ${n} but got: ${r}`)}),gI=j_(fa,"number"),G_=j_(Q,"string"),hI=j_(rn,"boolean"),q_=j_(se,"function"),BC=tU,pI=nU,fU=e=>dI(n=>Zt(e,n)?bs.value(n):bs.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),bI=(e,n)=>BC(e,e,yR(),n),SR=e=>bI(e,G_),vI=e=>bI(e,q_),mU=(e,n)=>BC(e,e,yR(),xR(n)),K_=(e,n)=>BC(e,e,J9(),n),Y_=e=>K_(e,G_),gU=e=>K_(e,q_),yI=(e,n)=>BC(e,e,CR(n),mI()),W0=(e,n,o)=>BC(e,e,CR(n),o),CI=(e,n)=>W0(e,n,gI),wI=(e,n)=>W0(e,n,G_),ER=(e,n,o)=>W0(e,n,fU(o)),X_=(e,n)=>W0(e,n,hI),_R=(e,n)=>W0(e,n,q_),hU=(e,n,o)=>W0(e,n,xR(o)),pU=SR("type"),bU=vI("fetch"),TR=vI("onAction"),vU=_R("onSetup",()=>Dt),yU=Y_("text"),CU=Y_("icon"),FK=Y_("tooltip"),wU=Y_("label"),J_=X_("active",!1),xI=X_("enabled",!0),kR=X_("primary",!1),xU=e=>yI("columns",e),Z0=e=>wI("type",e),SI=Z_([pU,SR("trigger"),CI("minChars",1),xU(1),CI("maxResults",10),gU("matches"),bU,TR,hU("highlightOn",[],G_)]),SU=e=>uU("Autocompleter",SI,e),OR=[xI,FK,CU,yU,vU,wI("context","mode:design")],EI=[J_].concat(OR),_I=[_R("predicate",Ne),ER("scope","node",["node","editor"]),ER("position","selection",["node","selection","line"])],EU=OR.concat([Z0("contextformbutton"),kR,TR,pI("original",qo)]),AR=EI.concat([Z0("contextformbutton"),kR,TR,pI("original",qo)]),_U=OR.concat([Z0("contextformbutton")]),TU=EI.concat([Z0("contextformtogglebutton")]),kU=fI("type",{contextformbutton:EU,contextformtogglebutton:AR});Z_([Z0("contextform"),_R("initValue",Je("")),wU,mU("commands",kU),K_("launch",fI("type",{contextformbutton:_U,contextformtogglebutton:TU}))].concat(_I));const TI=e=>{const n=e.ui.registry.getAll().popups,o=Vn(n,m=>SU(m).fold(v=>{throw new Error(dU(v))},qo)),r=g1(ku(o,m=>m.trigger)),c=fm(o);return{dataset:o,triggers:r,lookupByTrigger:m=>Pt(c,v=>v.trigger===m)}},OU=(e,n)=>{const o=sb(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27?(o.cancel(),n.cancelIfNecessary()):(c===38||c===40)&&o.cancel()},!0),e.on("remove",o.cancel)},AU=e=>{const n=Qs(),o=mo(!1),r=n.isSet,c=()=>{r()&&(I4(e),o.set(!1),n.clear())},u=N=>{r()||n.set({trigger:N.trigger,matchLength:N.text.length})},m=sl(()=>TI(e)),v=N=>n.get().map(B=>dR(e.dom,e.selection.getRng(),B.trigger,!0).bind(U=>sI(e,m,U,N))).getOrThunk(()=>oI(e,m)),w=N=>{v(N).fold(c,B=>{u(B.context),B.lookupData.then(U=>{n.get().map(G=>{const W=B.context;G.trigger===W.trigger&&(n.set({...G,matchLength:W.text.length}),o.get()?(o0(e,{range:W.range}),$4(e,{lookupData:U})):(o.set(!0),o0(e,{range:W.range}),n0(e,{lookupData:U})))})})})},E=(N,B)=>{const U=N.compareBoundaryPoints(window.Range.START_TO_START,B),G=N.compareBoundaryPoints(window.Range.END_TO_END,B);return U>=0&&G<=0},M=()=>n.get().bind(({trigger:N})=>{const B=e.selection.getRng();return dR(e.dom,B,N,o.get()).filter(({range:U})=>E(B,U)).map(({range:U})=>U)});e.addCommand("mceAutocompleterReload",(N,B)=>{const U=Kt(B)?B.fetchOptions:{};w(U)}),e.addCommand("mceAutocompleterClose",c),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{M().each(N=>{o0(e,{range:N})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>M().isSome()),OU(e,{cancelIfNecessary:c,load:w})},RU=rl().browser.isSafari(),kI=e=>vl(ee.fromDom(e)),Gs=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},Yi=(e,n)=>L.from(e.getParent(n.container(),"details")),OI=(e,n)=>Yi(e,n).isSome(),HK=(e,n)=>{const o=L.from(e.getParent(n.startContainer,"details")),r=L.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const c=o.bind(u=>L.from(e.select("summary",u)[0]));return L.some({startSummary:c,startDetails:o,endDetails:r})}else return L.none()},DU=(e,n)=>Ir(n).exists(o=>o.isEqual(e)),MU=(e,n)=>Ka(n).exists(o=>Bn(o.getNode())&&Ta(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),PU=(e,n)=>n.startSummary.exists(o=>DU(e,o)),NU=(e,n)=>n.startSummary.exists(o=>MU(e,o)),AI=(e,n)=>n.startDetails.exists(o=>Ta(o,e).forall(r=>n.startSummary.exists(c=>!c.contains(e.container())&&c.contains(r.container())))),j0=(e,n,o)=>o.startDetails.exists(r=>$r(e,n).forall(c=>!r.contains(c.container()))),BU=(e,n)=>{const o=n.getNode();Go(o)||e.selection.setCursorLocation(o,n.offset())},RI=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const c=e.dom.select("summary",r)[0];c&&(o?Ir(c):Ka(c)).each(m=>BU(e,m))}else BU(e,n)},$U=(e,n)=>{const o=w=>w.contains(e.startContainer),r=w=>w.contains(e.endContainer),c=n.startSummary.exists(o),u=n.startSummary.exists(r),m=n.startDetails.forall(w=>n.endDetails.forall(E=>w!==E));return(c||u)&&!(c&&u)||m},Nl=(e,n,o)=>{const{dom:r,selection:c}=e,u=e.getBody();if(o==="character"){const m=xe.fromRangeStart(c.getRng()),v=r.getParent(m.container(),r.isBlock),w=Yi(r,m),E=v&&r.isEmpty(v),M=oe(v==null?void 0:v.previousSibling),N=oe(v==null?void 0:v.nextSibling);return E&&(n?N:M)&&md(!n,u,m).exists(G=>OI(r,G)&&!Ev(w,Yi(r,G)))?!0:md(n,u,m).fold(Ne,B=>{const U=Yi(r,B);if(OI(r,B)&&!Ev(w,U)){if(n||RI(e,B,!1),v&&E){if(n&&M)return!0;if(!n&&N)return!0;RI(e,B,n),e.dom.remove(v)}return!0}else return!1})}else return!1},IU=(e,n,o,r)=>{const u=e.selection.getRng(),m=xe.fromRangeStart(u),v=e.getBody();return r==="selection"?$U(u,n):o?NU(m,n)||j0(v,m,n):PU(m,n)||AI(m,n)},FU=(e,n,o)=>HK(e.dom,e.selection.getRng()).fold(()=>Nl(e,n,o),r=>IU(e,r,n,o)||Nl(e,n,o)),DI=(e,n,o)=>{const r=e.selection,c=r.getNode(),u=r.getRng(),m=xe.fromRangeStart(u);return Vu(c)?(o==="selection"&&Gs(u,c)||KP(n,m,c)?kI(c):e.undoManager.transact(()=>{const v=r.getSel();let{anchorNode:w,anchorOffset:E,focusNode:M,focusOffset:N}=v??{};const B=()=>{De(w)&&De(E)&&De(M)&&De(N)&&(v==null||v.setBaseAndExtent(w,E,M,N))},U=()=>{w=v==null?void 0:v.anchorNode,E=v==null?void 0:v.anchorOffset,M=v==null?void 0:v.focusNode,N=v==null?void 0:v.focusOffset},G=(K,ne)=>{_e(K.childNodes,re=>{If(re)&&ne.appendChild(re)})},W=e.dom.create("span",{"data-mce-bogus":"1"});G(c,W),c.appendChild(W),B(),(o==="word"||o==="line")&&(v==null||v.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&Gs(r.getRng(),W)?kI(c):(e.execCommand(n?"ForwardDelete":"Delete"),U(),G(W,c),B()),e.dom.remove(W)}),!0):!1},qp=(e,n,o)=>FU(e,n,o)||RU&&DI(e,n,o)?L.some(Dt):L.none(),Q_=e=>(n,o,r={})=>{const c=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:Dt,inputType:o},m=Yv(new InputEvent(e));return n.dispatch(e,{...m,...u,...r})},ui=Q_("input"),$C=Q_("beforeinput"),RR=rl(),MI=RR.os,IC=MI.isMacOS()||MI.isiOS(),NI=RR.browser.isFirefox(),BI=(e,n,o)=>{const r=o.keyCode===at.BACKSPACE?"deleteContentBackward":"deleteContentForward",c=e.selection.isCollapsed(),u=c?"character":"selection",m=v=>c?v?"word":"line":"selection";eR([{keyCode:at.BACKSPACE,action:Ut(M_,e)},{keyCode:at.BACKSPACE,action:Ut(CC,e,!1)},{keyCode:at.DELETE,action:Ut(CC,e,!0)},{keyCode:at.BACKSPACE,action:Ut(u3,e,!1)},{keyCode:at.DELETE,action:Ut(u3,e,!0)},{keyCode:at.BACKSPACE,action:Ut(P3,e,n,!1)},{keyCode:at.DELETE,action:Ut(P3,e,n,!0)},{keyCode:at.BACKSPACE,action:Ut(CE,e,!1)},{keyCode:at.DELETE,action:Ut(CE,e,!0)},{keyCode:at.BACKSPACE,action:Ut(qp,e,!1,u)},{keyCode:at.DELETE,action:Ut(qp,e,!0,u)},...IC?[{keyCode:at.BACKSPACE,altKey:!0,action:Ut(qp,e,!1,m(!0))},{keyCode:at.DELETE,altKey:!0,action:Ut(qp,e,!0,m(!0))},{keyCode:at.BACKSPACE,metaKey:!0,action:Ut(qp,e,!1,m(!1))}]:[{keyCode:at.BACKSPACE,ctrlKey:!0,action:Ut(qp,e,!1,m(!0))},{keyCode:at.DELETE,ctrlKey:!0,action:Ut(qp,e,!0,m(!0))}],{keyCode:at.BACKSPACE,action:Ut(F0,e,!1)},{keyCode:at.DELETE,action:Ut(F0,e,!0)},{keyCode:at.BACKSPACE,action:Ut(z3,e,!1)},{keyCode:at.DELETE,action:Ut(z3,e,!0)},{keyCode:at.BACKSPACE,action:Ut(p_,e,!1)},{keyCode:at.DELETE,action:Ut(p_,e,!0)},{keyCode:at.BACKSPACE,action:Ut(g_,e,!1)},{keyCode:at.DELETE,action:Ut(g_,e,!0)},{keyCode:at.BACKSPACE,action:Ut(A_,e,!1)},{keyCode:at.DELETE,action:Ut(A_,e,!0)},{keyCode:at.BACKSPACE,action:Ut(I0,e,!1)},{keyCode:at.DELETE,action:Ut(I0,e,!0)}],o).filter(v=>e.selection.isEditable()).each(v=>{o.preventDefault(),$C(e,r).isDefaultPrevented()||(v(),ui(e,r))})},LU=(e,n,o)=>V0([{keyCode:at.BACKSPACE,action:Ut(b3,e)},{keyCode:at.DELETE,action:Ut(b3,e)},...IC?[{keyCode:at.BACKSPACE,altKey:!0,action:Ut(AC,e)},{keyCode:at.DELETE,altKey:!0,action:Ut(AC,e)},...o?[{keyCode:NI?224:91,action:Ut(AC,e)}]:[]]:[{keyCode:at.BACKSPACE,ctrlKey:!0,action:Ut(AC,e)},{keyCode:at.DELETE,ctrlKey:!0,action:Ut(AC,e)}]],n),HU=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===at.BACKSPACE,r.isDefaultPrevented()||BI(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||LU(e,r,o),o=!1})},VU=e=>{for(;e;){if(ot(e)||Fe(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},G0=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=VU(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(ks),n.firstChild)}const c=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new Ts(n,n);let m=n,v;for(;v=u.current();){if(Fe(v)){c.setStart(v,0),c.setEnd(v,0);break}if(r[v.nodeName.toLowerCase()]){c.setStartBefore(v),c.setEndBefore(v);break}m=v,v=u.next()}v||(c.setStart(m,0),c.setEnd(m,0))}else Bn(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)):(c.setStart(n,0),c.setEnd(n,0));e.selection.setRng(c),Gf(e,c)},FC=(e,n)=>{const o=e.getRoot();let r,c=n;for(;c!==o&&c&&e.getContentEditable(c)!=="false";){if(e.getContentEditable(c)==="true"){r=c;break}c=c.parentNode}return c!==o?r:o},eT=e=>L.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),zU=e=>eT(e).fold(Je(""),n=>n.nodeName.toUpperCase()),UU=e=>eT(e).filter(n=>pf(ee.fromDom(n))).isSome(),DR=e=>{e.innerHTML='<br data-mce-bogus="1">'},WU=(e,n,o)=>{const r=e.dom;L.from(o.style).map(r.parseStyle).each(w=>{const M={...Va(ee.fromDom(n)),...w};r.setStyles(n,M)});const c=L.from(o.class).map(w=>w.split(/\s+/)),u=L.from(n.className).map(w=>Pt(w.split(/\s+/),E=>E!==""));Qt(c,u,(w,E)=>{const M=Pt(E,B=>!Zt(w,B)),N=[...w,...M];r.setAttrib(n,"class",N.join(" "))});const m=["style","class"],v=To(o,(w,E)=>!Zt(m,E));r.setAttribs(n,v)},LC=(e,n)=>{if(gr(e).toLowerCase()===n.tagName.toLowerCase()){const r=ad(e);WU(e,n,r)}},MR=(e,n,o,r,c=!0,u,m)=>{const v=e.dom,w=e.schema,E=gr(e),M=o?o.nodeName.toUpperCase():"";let N=n;const B=w.getTextInlineElements();let U;u||M==="TABLE"||M==="HR"?U=v.create(u||E,m||{}):U=o.cloneNode(!1);let G=U;if(!c)v.setAttrib(U,"style",null),v.setAttrib(U,"class",null);else do if(B[N.nodeName]){if(Ya(N)||ka(N))continue;const W=N.cloneNode(!1);v.setAttrib(W,"id",""),U.hasChildNodes()?(W.appendChild(U.firstChild),U.appendChild(W)):(G=W,U.appendChild(W))}while((N=N.parentNode)&&N!==r);return LC(e,U),DR(G),U},$I=(e,n)=>e.dom.getParent(n,Fv),ZU=(e,n,o)=>{let r=n;for(;r&&r!==e&&oe(r.nextSibling);){const c=r.parentElement;if(!c||!o(c))return Fv(c);r=c}return!1},jU=(e,n,o)=>!n&&o.nodeName.toLowerCase()===gr(e)&&e.dom.isEmpty(o)&&ZU(e.getBody(),o,r=>It(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),VK=(e,n,o)=>{var r,c,u;const m=n(gr(e)),v=$I(e,o);v&&(e.dom.insertAfter(m,v),G0(e,m),((u=(c=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||c===void 0?void 0:c.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},PR=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,GU=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},II=(e,n)=>{const o=e==null?void 0:e.parentNode;return De(o)&&o.nodeName===n},FI=e=>De(e)&&/^(OL|UL|LI)$/.test(e.nodeName),tT=e=>De(e)&&/^(LI|DT|DD)$/.test(e.nodeName),qU=e=>FI(e)&&FI(e.parentNode),HC=e=>{const n=e.parentNode;return tT(n)?n:e},nT=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!ot(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},LI=e=>Ko(ku(Va(ee.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),zK=(e,n,o,r,c)=>{const u=e.dom,m=e.selection.getRng(),v=o.parentNode;if(o===e.getBody()||!v)return;qU(o)&&(c="LI");const w=tT(r)?LI(r):void 0;let E=tT(r)&&w?n(c,{style:LI(r)}):n(c);if(nT(o,r,!0)&&nT(o,r,!1))if(II(o,"LI")){const M=HC(o);u.insertAfter(E,M),GU(o)?u.remove(M):u.remove(o)}else u.replace(E,o);else if(nT(o,r,!0))II(o,"LI")?(u.insertAfter(E,HC(o)),E.appendChild(u.doc.createTextNode(" ")),E.appendChild(o)):v.insertBefore(E,o),u.remove(r);else if(nT(o,r,!1))u.insertAfter(E,HC(o)),u.remove(r);else{o=HC(o);const M=m.cloneRange();M.setStartAfter(r),M.setEndAfter(o);const N=M.extractContents();if(c==="LI"&&PR(N,"LI")){const B=Pt(Yt(E.children,ee.fromDom),Io(il("br")));E=N.firstChild,u.insertAfter(N,o),_e(B,U=>qd(ee.fromDom(E),U)),w&&E.setAttribute("style",w)}else u.insertAfter(N,o),u.insertAfter(E,o);u.remove(r)}G0(e,E)},Qr=e=>{_e($1(ee.fromDom(e),Xs),n=>{const o=n.dom;o.nodeValue=bc(o.data)})},KU=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},YU=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),NR=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,XU=(e,n)=>e.nodeName===n||e.nextSibling&&e.nextSibling.nodeName===n,BR=(e,n)=>De(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",JU=(e,n,o)=>{var r;const c=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;ot(u)&&!n[u.nodeName.toLowerCase()]&&c.push(u)}let m=c.length;for(;m--;)u=c[m],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||YU(e,u))&&e.remove(u)},$R=(e,n,o)=>Fe(n)?e?o===1&&n.data.charAt(o-1)===Rs?0:o:o===n.data.length-1&&n.data.charAt(o)===Rs?n.data.length:o:o,oT=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,$R(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,$R(!1,e.endContainer,e.endOffset)),n},QU=e=>{let n=e;do Fe(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},eW=(e,n,o,r,c)=>{var u,m;const v=e.dom,w=(u=FC(v,r))!==null&&u!==void 0?u:v.getRoot();let E=v.getParent(r,v.isBlock);if(!E||!BR(v,E)){if(E=E||w,!E.hasChildNodes()){const U=v.create(n);return LC(e,U),E.appendChild(U),o.setStart(U,0),o.setEnd(U,0),U}let M=r;for(;M&&M.parentNode!==E;)M=M.parentNode;let N;for(;M&&!v.isBlock(M);)N=M,M=M.previousSibling;const B=(m=N==null?void 0:N.parentElement)===null||m===void 0?void 0:m.nodeName;if(N&&B&&e.schema.isValidChild(B,n.toLowerCase())){const U=N.parentNode,G=v.create(n);for(LC(e,G),U.insertBefore(G,N),M=N;M&&!v.isBlock(M);){const W=M.nextSibling;G.appendChild(M),M=W}o.setStart(r,c),o.setEnd(r,c)}}return r},IR=(e,n)=>{n.normalize();const o=n.lastChild;(!o||ot(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},FR=(e,n)=>{const o=ys(e);return An(n)?!1:Q(o)?Zt(We.explode(o),n.nodeName.toLowerCase()):o},tW={insert:(e,n)=>{let o,r,c,u,m=!1;const v=e.dom,w=e.schema,E=w.getNonEmptyElements(),M=e.selection.getRng(),N=gr(e),B=ee.fromDom(M.startContainer),U=ya(B,M.startOffset),G=U.exists(Me=>x1(Me)&&!gc(Me)),W=M.collapsed&&G,K=(Me,lt)=>MR(e,o,Ve,Ae,vs(e),Me,lt),ne=Me=>{const lt=$R(Me,o,r);if(Fe(o)&&(Me?lt>0:lt<o.data.length))return!1;if((o.parentNode===Ve||o===Ve)&&m&&!Me||Me&&ot(o)&&o===Ve.firstChild)return!0;if(NR(o,"TABLE")||NR(o,"HR"))return XU(o,"BR")?!Me:m&&!Me||!m&&Me;const xt=new Ts(o,Ve);Fe(o)&&(Me&&lt===0?xt.prev():!Me&&lt===o.data.length&&xt.next());let dn;for(;dn=xt.current();){if(ot(dn)){if(!dn.getAttribute("data-mce-bogus")){const fn=dn.nodeName.toLowerCase();if(E[fn]&&fn!=="br")return!1}}else if(Fe(dn)&&!zc(dn.data))return!1;Me?xt.prev():xt.next()}return!0},re=()=>{let Me;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&ct!=="HGROUP"?Me=K(N):Me=K(),FR(e,u)&&BR(v,u)&&v.isEmpty(Ve,void 0,{includeZwsp:!0})?Me=v.split(u,Ve):v.insertAfter(Me,Ve),G0(e,Me),Me};Xe(v,M).each(Me=>{M.setStart(Me.startContainer,Me.startOffset),M.setEnd(Me.endContainer,Me.endOffset)}),o=M.startContainer,r=M.startOffset;const le=!!(n&&n.shiftKey),de=!!(n&&n.ctrlKey);ot(o)&&o.hasChildNodes()&&!W&&(m=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,m&&Fe(o)?r=o.data.length:r=0);const Ae=FC(v,o);if(!Ae||KU(e,o))return;le||(o=eW(e,N,M,o,r));let Ve=v.getParent(o,v.isBlock)||v.getRoot();u=De(Ve==null?void 0:Ve.parentNode)?v.getParent(Ve.parentNode,v.isBlock):null,c=Ve?Ve.nodeName.toUpperCase():"";const ct=u?u.nodeName.toUpperCase():"";if(ct==="LI"&&!de){const Me=u;Ve=Me,u=Me.parentNode,c=ct}if(ot(u)&&jU(e,le,Ve))return VK(e,K,Ve);if(/^(LI|DT|DD)$/.test(c)&&ot(u)&&v.isEmpty(Ve)){zK(e,K,u,Ve,N);return}if(!W&&(Ve===e.getBody()||!BR(v,Ve)))return;const Ee=Ve.parentNode;let be;if(W)be=K(N),U.fold(()=>{Fs(B,ee.fromDom(be))},Me=>{uo(Me,ee.fromDom(be))}),e.selection.setCursorLocation(be,0);else if(td(Ve))be=Wm(Ve),v.isEmpty(Ve)&&DR(Ve),LC(e,be),G0(e,be);else if(ne(!1))be=re();else if(ne(!0)&&Ee){const Me=xe.fromRangeStart(M),lt=gO(Me),xt=ee.fromDom(Ve),fn=aE(xt,Me,e.schema)?$t(xt,Me,e.schema).bind(Gn=>L.from(Gn.getNode())):L.none();be=Ee.insertBefore(K(),Ve);const Fn=NR(Ve,"HR")||lt?be:fn.getOr(Ve);G0(e,Fn)}else{const Me=oT(M).cloneRange();Me.setEndAfter(Ve);const lt=Me.extractContents();Qr(lt),QU(lt),be=lt.firstChild,v.insertAfter(lt,Ve),JU(v,E,be),IR(v,Ve),v.isEmpty(Ve)&&DR(Ve),be.normalize(),v.isEmpty(be)?(v.remove(be),re()):(LC(e,be),G0(e,be))}v.setAttrib(be,"id",""),e.dispatch("NewBlock",{newBlock:be})},fakeEventName:"insertParagraph"},WK=(e,n,o)=>{const r=new Ts(n,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||Fe(c)&&c.length>0)return!0;return!1},HI=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),Gf(e,r)},nW=(e,n)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,m=!1;Xe(r,c).each(U=>{c.setStart(U.startContainer,U.startOffset),c.setEnd(U.endContainer,U.endOffset)});let v=c.startOffset,w=c.startContainer;if(ot(w)&&w.hasChildNodes()){const U=v>w.childNodes.length-1;w=w.childNodes[Math.min(v,w.childNodes.length-1)]||w,U&&Fe(w)?v=w.data.length:v=0}let E=r.getParent(w,r.isBlock);const M=E&&E.parentNode?r.getParent(E.parentNode,r.isBlock):null,N=M?M.nodeName.toUpperCase():"",B=!!(n&&n.ctrlKey);N==="LI"&&!B&&(E=M),Fe(w)&&v>=w.data.length&&(WK(e.schema,w,E||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),m=!0)),u=r.create("br"),$h(r,c,u),HI(e,u,m),e.undoManager.add()},ZK=(e,n)=>{const o=ee.fromTag("br");uo(ee.fromDom(n),o),e.undoManager.add()},oW=(e,n)=>{sW(e.getBody(),n)||Si(ee.fromDom(n),ee.fromTag("br"));const o=ee.fromTag("br");Si(ee.fromDom(n),o),HI(e,o.dom,!1),e.undoManager.add()},Cu=e=>Bn(e.getNode()),sW=(e,n)=>Cu(xe.after(n))?!0:$r(e,xe.after(n)).map(o=>Bn(o.getNode())).getOr(!1),LR=e=>e&&e.nodeName==="A"&&"href"in e,rW=e=>e.fold(Ne,LR,LR,Ne),aW=e=>{const n=Le(vp,e),o=xe.fromRangeStart(e.selection.getRng());return Od(n,e.getBody(),o).filter(rW)},cW=(e,n)=>{n.fold(Dt,Le(ZK,e),Le(oW,e),Dt)},VI={insert:(e,n)=>{const o=aW(e);o.isSome()?o.each(Le(cW,e)):nW(e,n)},fakeEventName:"insertLineBreak"},zI=(e,n)=>eT(e).filter(o=>n.length>0&&Ha(ee.fromDom(o),n)).isSome(),HR=e=>zI(e,_f(e)),UI=e=>zI(e,Yk(e)),Ma=Cc.generate([{br:[]},{block:[]},{none:[]}]),iW=(e,n)=>UI(e),WI=e=>(n,o)=>UU(n)===e,ZI=(e,n)=>(o,r)=>zU(o)===e.toUpperCase()===n,lW=e=>{const n=FC(e.dom,e.selection.getStart());return An(n)},VC=e=>ZI("pre",e),jI=()=>ZI("summary",!0),sT=e=>(n,o)=>Ix(n)===e,GI=(e,n)=>HR(e),zC=(e,n)=>n,uW=e=>{const n=gr(e),o=FC(e.dom,e.selection.getStart());return De(o)&&e.schema.isValidChild(o.nodeName,n)},dW=e=>{const n=e.selection.getRng(),o=ee.fromDom(n.startContainer),c=ya(o,n.startOffset).map(u=>x1(u)&&!gc(u));return n.collapsed&&c.getOr(!0)},Mc=(e,n)=>(o,r)=>Ko(e,(u,m)=>u&&m(o,r),!0)?L.some(n):L.none(),fW=(e,n)=>S3([Mc([iW],Ma.none()),Mc([VC(!0),lW],Ma.none()),Mc([jI()],Ma.br()),Mc([VC(!0),sT(!1),zC],Ma.br()),Mc([VC(!0),sT(!1)],Ma.block()),Mc([VC(!0),sT(!0),zC],Ma.block()),Mc([VC(!0),sT(!0)],Ma.br()),Mc([WI(!0),zC],Ma.br()),Mc([WI(!0)],Ma.block()),Mc([GI],Ma.br()),Mc([zC],Ma.br()),Mc([uW],Ma.block()),Mc([dW],Ma.block())],[e,!!(n&&n.shiftKey)]).getOr(Ma.none()),rT=(e,n,o)=>{n.mode.isReadOnly()||(n.selection.isCollapsed()||e7(n),!(De(o)&&$C(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),De(o)&&ui(n,e.fakeEventName)))},UC=(e,n)=>{if(e.mode.isReadOnly())return;const o=()=>rT(VI,e,n),r=()=>rT(tW,e,n),c=fW(e,n);switch(Oy(e)){case"linebreak":c.fold(o,o,Dt);break;case"block":c.fold(r,r,Dt);break;case"invert":c.fold(r,o,Dt);break;default:c.fold(o,r,Dt);break}},qI=rl(),VR=qI.os.isiOS()&&qI.browser.isSafari(),aT=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),IB(e.undoManager),e.undoManager.transact(()=>{UC(e,n)}))},KI=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(Fe(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},mW=e=>{let n=L.none();const o=c=>{n=L.some(c.selection.getBookmark()),c.undoManager.add()},r=(c,u)=>{c.undoManager.undo(),n.fold(Dt,m=>c.selection.moveToBookmark(m)),aT(c,u),n=L.none()};e.on("keydown",c=>{c.keyCode===at.ENTER&&(VR&&KI(e.selection.getRng())?o(e):aT(e,c))}),e.on("keyup",c=>{c.keyCode===at.ENTER&&n.each(()=>r(e,c))})},qK=(e,n,o)=>{const r=Jt.os.isMacOS()||Jt.os.isiOS();V0([{keyCode:at.END,action:Ut(P$,e,!0)},{keyCode:at.HOME,action:Ut(P$,e,!1)},...r?[]:[{keyCode:at.HOME,action:Ut(B_,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:at.END,action:Ut(B_,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:at.END,action:Ut(v9,e,!0)},{keyCode:at.HOME,action:Ut(v9,e,!1)},{keyCode:at.END,action:Ut(TC,e,!0,n)},{keyCode:at.HOME,action:Ut(TC,e,!1,n)}],o).each(c=>{o.preventDefault()})},Hg=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||qK(e,n,o)})},gW=e=>{e.on("input",n=>{n.isComposing||FP(e)})},hW=rl(),pW=(e,n,o)=>{V0([{keyCode:at.PAGE_UP,action:Ut(TC,e,!1,n)},{keyCode:at.PAGE_DOWN,action:Ut(TC,e,!0,n)}],o)},WC=e=>e.stopImmediatePropagation(),zR=e=>e.keyCode===at.PAGE_UP||e.keyCode===at.PAGE_DOWN,UR=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",WC,!0):!o&&e.get()&&n.off("NodeChange",WC),e.set(o)},bW=(e,n)=>{if(hW.os.isMacOS())return;const o=mo(!1);e.on("keydown",r=>{zR(r)&&UR(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||pW(e,n,r),zR(r)&&o.get()&&(UR(o,e,!1),e.nodeChanged())})},YI=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||ho(n.getTargetRanges(),o=>!cO(e.dom,o)))&&n.preventDefault()})},XI=(e,n)=>{const o=n.container(),r=n.offset();return Fe(o)?(o.insertData(r,e),L.some(xe(o,r+e.length))):Jh(n).map(c=>{const u=ee.fromText(e);return n.isAtEnd()?Si(c,u):uo(c,u),xe(u.dom,e.length)})},JI=Le(XI,ks),QI=Le(XI," "),WR=(e,n,o)=>PP(e,n,o)?JI(n):QI(n),ZR=e=>n=>n.fold(o=>Ta(e.dom,xe.before(o)),o=>Ir(o),o=>Ka(o),o=>$r(e.dom,xe.after(o))),vW=(e,n,o)=>r=>PP(e,r,o)?JI(n):QI(n),cT=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},eF=(e,n)=>e.isEditable(e.getParent(n,"summary")),iT=e=>{const n=xe.fromRangeStart(e.selection.getRng()),o=ee.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Le(vp,e),c=xe.fromRangeStart(e.selection.getRng());return Od(r,e.getBody(),c).bind(ZR(o)).map(u=>()=>vW(o,n,e.schema)(u).each(cT(e)))}else return L.none()},tF=e=>{const n=()=>{const o=ee.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=xe.fromRangeStart(e.selection.getRng());WR(o,r,e.schema).each(cT(e))};return yi(Jt.browser.isFirefox()&&e.selection.isEditable()&&eF(e.dom,e.selection.getRng().startContainer),n)},nF=(e,n)=>{eR([{keyCode:at.SPACEBAR,action:Ut(iT,e)},{keyCode:at.SPACEBAR,action:Ut(tF,e)}],n).each(o=>{n.preventDefault(),$C(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),ui(e,"insertText",{data:" "}))})},yW=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||nF(e,n)})},CW=e=>l4(e)?[{keyCode:at.TAB,action:Ut(Y$,e,!0)},{keyCode:at.TAB,shiftKey:!0,action:Ut(Y$,e,!1)}]:[],lT=(e,n)=>{V0([...CW(e)],n).each(o=>{n.preventDefault()})},oF=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||lT(e,n)})},wW=e=>{if(e.addShortcut("Meta+P","","mcePrint"),AU(e),Ed(e))return mo(null);{const n=Bz(e);return YI(e),li(e),X$(e,n),HU(e,n),mW(e),yW(e),gW(e),oF(e),Hg(e,n),bW(e,n),n}};class xW{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",c=>{const u=n.selection.getRng(),m={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!y(m,o))&&n.dispatch("SelectionChange"),o=m}),n.on("contextmenu",()=>{E2(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const c=n.selection.getStart(!0);c&&Zb(n)&&!r.isSameElementPath(c)&&n.dom.isChildOf(c,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",c=>{!c.isDefaultPrevented()&&Zb(n)&&(n.selection.getNode().nodeName==="IMG"?ni.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor,r=o.selection;let c;if(o.initialized&&r&&!t4(o)){const u=o.getBody();c=r.getStart(!0)||u,(c.ownerDocument!==o.getDoc()||!o.dom.isChildOf(c,u))&&(c=u);const m=[];o.dom.getParent(c,v=>v===u?!0:(m.push(v),!1)),o.dispatch("NodeChange",{...n,element:c,parents:m})}}isSameElementPath(n){let o;const r=this.editor,c=Fo(r.dom.getParents(n,dt,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const jR=Hm("image"),SW=e=>{const n=e;return L.from(n[jR])},EW=(e,n)=>{const o=e;o[jR]=n},GR=Hm("event"),_W=e=>{const n=e;return L.from(n[GR])},uT=e=>n=>{const o=n;o[GR]=e},sF=(e,n)=>uT(n)(e),rF=uT(0),aF=uT(2),TW=uT(1),kW=(e=>n=>{const o=n;return L.from(o[GR]).exists(r=>r===e)})(0),OW=()=>Object.freeze({length:0,item:e=>null}),qR=Hm("mode"),q0=e=>{const n=e;return L.from(n[qR])},dT=e=>n=>{const o=n;o[qR]=e},cF=(e,n)=>dT(n)(e),KR=dT(0),YR=dT(2),AW=dT(1),iF=e=>n=>{const o=n;return L.from(o[qR]).exists(r=>r===e)},Kp=iF(0),lF=iF(1),RW=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(Kp(e))if(Q(o)){if(!Go(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{Kp(e)&&n.remove(o)},clear:()=>{Kp(e)&&n.clear()}}),YK=["none","copy","link","move"],fT=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],XR=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(c){Zt(YK,c)&&(n=c)},get effectAllowed(){return o},set effectAllowed(c){kW(r)&&Zt(fT,c)&&(o=c)},get items(){return RW(r,e.items)},get files(){return lF(r)?OW():e.files},get types(){return e.types},setDragImage:(c,u,m)=>{Kp(r)&&(EW(r,{image:c,x:u,y:m}),e.setDragImage(c,u,m))},getData:c=>lF(r)?"":e.getData(c),setData:(c,u)=>{Kp(r)&&e.setData(c,u)},clearData:c=>{Kp(r)&&e.clearData(c)}};return KR(r),r},DW=e=>{const n=XR(),o=q0(e);return YR(e),rF(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,SW(e).each(r=>n.setDragImage(r.image,r.x,r.y)),_e(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),_e(e.files,r=>n.items.add(r)),_W(e).each(r=>{sF(n,r)}),o.each(r=>{cF(e,r),cF(n,r)}),n},MW=e=>{const n=e.getData("text/html");return n===""?L.none():L.some(n)},uF=(e,n)=>e.setData("text/html",n),dF="x-tinymce/html",mT=Je(dF),JR="<!-- "+dF+" -->",PW=e=>JR+e,NW=e=>e.replace(JR,""),fF=e=>e.indexOf(JR)!==-1,BW=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),$W=(e,n)=>{let o="<"+e;const r=ku(n,(c,u)=>u+'="'+ju.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},IW=(e,n,o)=>{const r=e.split(/\n\n/),c=$W(n,o),u="</"+n+">",m=Yt(r,w=>w.split(/\n/).join("<br />")),v=w=>c+w+u;return m.length===1?m[0]:Yt(m,v).join("")},no="%MCEPASTEBIN%",FW=(e,n)=>{const{dom:o,selection:r}=e,c=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},no);Jt.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",m=>{m.stopPropagation()}),u.focus(),r.select(u,!0)},mF=(e,n)=>{const o=e.dom;if(QR(e)){let r;const c=n.get();for(;r=QR(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}n.set(null)},QR=e=>e.dom.get("mcepastebin"),eD=e=>De(e)&&e.id==="mcepastebin",gF=e=>{const n=e.dom,o=(m,v)=>{m.appendChild(v),n.remove(v,!0)},[r,...c]=Pt(e.getBody().childNodes,eD);_e(c,m=>{o(r,m)});const u=n.select("div[id=mcepastebin]",r);for(let m=u.length-1;m>=0;m--){const v=n.create("div");r.insertBefore(v,u[m]),o(v,u[m])}return r?r.innerHTML:""},hF=e=>e===no,LW=e=>{const n=mo(null);return{create:()=>FW(e,n),remove:()=>mF(e,n),getEl:()=>QR(e),getHtml:()=>gF(e),getLastRng:n.get}},tD=(e,n)=>(We.each(n,o=>{En(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),nD=e=>{const n=zn(),o=Mp({},n);let r="";const c=n.getVoidElements(),u=We.makeMap("script noscript style textarea video audio iframe object"," "),m=n.getBlockElements(),v=w=>{const E=w.name,M=w;if(E==="br"){r+=`
`;return}if(E!=="wbr"){if(c[E]&&(r+=" "),u[E]){r+=" ";return}if(w.type===3&&(r+=w.value),!(w.name in n.getVoidElements())){let N=w.firstChild;if(N)do v(N);while(N=N.next)}m[E]&&M.next&&(r+=`
`,E==="p"&&(r+=`
`))}};return e=tD(e,[/<!\[[^\]]+\]>/g]),v(o.parse(e)),r},pF=e=>(e=tD(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":ks],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),HW=e=>{let n=0;return()=>e+n++},VW=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return We.hasOwn(o,n)?"image/"+o[n]:"image/"+n},bF=(e,n)=>{const o=Mp({sanitize:nS(e),sandbox_iframes:qh(e),sandbox_iframes_exclusions:zy(e),convert_unsafe_embeds:d4(e)},e.schema);o.addNodeFilter("meta",c=>{We.each(c,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return bg({validate:!0},e.schema).serialize(r)},vF=(e,n)=>({content:e,cancelled:n}),zW=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),c=zS(e,r,o);return vF(c.node.innerHTML,c.isDefaultPrevented())},K0=(e,n,o)=>{const r=F4(e,n,o),c=bF(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?zW(e,c,o):vF(c,r.isDefaultPrevented())},UW=(e,n,o)=>K0(e,n,o),Vg=(e,n)=>(e.insertContent(n,{merge:Qx(e),paste:!0}),!0),Yp=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),WW=(e,n)=>Yp(n)&&ho(sS(e),o=>Ul(n.toLowerCase(),`.${o.toLowerCase()}`)),ZW=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),Y0=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),jW=(e,n,o)=>!e.selection.isCollapsed()&&Yp(n)?Y0(e,n,o):!1,oD=(e,n,o)=>WW(e,n)?ZW(e,n,o):!1,GW=(e,n)=>{We.each([jW,oD,Vg],o=>!o(e,n,Vg))},yF=(e,n,o)=>{o||!Hy(e)?Vg(e,n):GW(e,n)},CF=HW("mceclip"),sD=e=>{const n=XR();return uF(n,e),YR(n),n},rD=(e,n,o,r,c)=>{const u=UW(e,n,o);if(!u.cancelled){const m=u.content,v=()=>yF(e,m,r);c?$C(e,"insertFromPaste",{dataTransfer:sD(m)}).isDefaultPrevented()||(v(),ui(e,"insertFromPaste")):v()}},gT=(e,n,o,r)=>{const c=o||fF(n);rD(e,NW(n),c,!1,r)},aD=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),c=Uc(r,id(e)),u=IW(c,gr(e),ad(e));rD(e,u,!1,!0,o)},cD=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},zg=(e,n)=>n in e&&e[n].length>0,iD=e=>zg(e,"text/html")||zg(e,"text/plain"),lD=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return De(o)?e.dom.encode(o[1]):void 0},wF=(e,n,o,r)=>{const c=CF(),u=Cs(e)&&De(o.name),m=u?lD(e,o.name):c,v=u?o.name:void 0,w=n.create(c,o,r,m,v);return n.add(w),w},qW=(e,n)=>{Tp(n.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),m=n.file,v=e.editorUpload.blobCache,w=v.getByData(u,r),E=w??wF(e,v,m,u);gT(e,`<img src="${E.blobUri()}">`,!1,!0)})},KW=e=>e.type==="paste",YW=e=>Promise.all(Yt(e,n=>tB(n).then(o=>({file:n,uri:o})))),xF=e=>{const n=sS(e);return o=>hs(o.type,"image/")&&ho(n,r=>VW(r)===o.type)},uD=(e,n)=>{const o=n.items?ic(ha(n.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=n.files?ha(n.files):[];return Pt(o.length>0?o:r,xF(e))},SF=(e,n,o)=>{const r=KW(n)?n.clipboardData:n.dataTransfer;if(Gh(e)&&r){const c=uD(e,r);if(c.length>0)return n.preventDefault(),YW(c).then(u=>{o&&e.selection.setRng(o),_e(u,m=>{qW(e,m)})}),!0}return!1},EF=e=>{var n,o;return Jt.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},_F=e=>at.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,dD=(e,n,o,r,c)=>{let u=pF(o);const m=zg(n,mT())||fF(o),v=!m&&BW(u),w=Yp(u);(hF(u)||!u.length||v&&!w)&&(r=!0),(r||w)&&(zg(n,"text/plain")&&v?u=n["text/plain"]:u=nD(u)),!hF(u)&&(r?aD(e,u,c):gT(e,u,m,c))},TF=(e,n,o)=>{let r;const c=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{_F(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||EF(u))return;const m=o.get()==="text"||r;r=!1;const v=cD(u.clipboardData);!iD(v)&&SF(e,u,c())||(zg(v,"text/html")?(u.preventDefault(),dD(e,v,v["text/html"],m,!0)):zg(v,"text/plain")&&zg(v,"text/uri-list")?(u.preventDefault(),dD(e,v,v["text/plain"],m,!0)):(n.create(),ni.setEditorTimeout(e,()=>{const w=n.getHtml();n.remove(),dD(e,v,w,m,!1)},0)))})},XW=e=>{const n=c=>hs(c,"webkit-fake-url"),o=c=>hs(c,"data:"),r=c=>{var u;return((u=c.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(c,u,m)=>{if(!Gh(e)&&r(m))for(const v of c){const w=v.attr("src");Q(w)&&!v.attr("data-mce-object")&&w!==Jt.transparentSrc&&(n(w)||!tS(e)&&o(w))&&v.remove()}})},JW=(e,n,o)=>{TF(e,n,o),XW(e)},QW=(e,n)=>{n.get()==="text"?(n.set("html"),s0(e,!1)):(n.set("text"),s0(e,!0)),e.focus()},eZ=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{QW(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&gT(e,r.html,r.internal,!1),r.text&&aD(e,r.text,!1)})},tZ=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(mT(),n),!0}catch{return!1}else return!1},ZC=(e,n,o,r)=>{tZ(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},kF=e=>(n,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),m=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(m),r.add(e.getBody(),u);const v=c.getRng();m.focus();const w=r.createRng();w.selectNodeContents(m),c.setRng(w),ni.setEditorTimeout(e,()=>{c.setRng(v),r.remove(u),o()},0)},fD=e=>({html:PW(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),nZ=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),OF=e=>!e.selection.isCollapsed()||nZ(e),AF=e=>n=>{!n.isDefaultPrevented()&&OF(e)&&e.selection.isEditable()&&ZC(n,fD(e),kF(e),()=>{if(Jt.browser.isChromium()||Jt.browser.isFirefox()){const o=e.selection.getRng();ni.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},RF=e=>n=>{!n.isDefaultPrevented()&&OF(e)&&ZC(n,fD(e),kF(e),Dt)},oZ=e=>{e.on("cut",AF(e)),e.on("copy",RF(e))},DF=(e,n)=>{var o,r;return Pe.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},sZ=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},MF=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},rZ=e=>ho(e.files,n=>/^image\//.test(n.type)),PF=(e,n,o,r)=>{const c=e.getParent(o,m=>tf(n,m));if(!oe(e.getParent(o,"summary")))return!0;if(c&&It(r,"text/html")){const m=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!oe(m.querySelector(c.nodeName.toLowerCase()))}else return!1},aZ=e=>{e.on("input",n=>{const o=r=>oe(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=Pt(e.dom.select("details"),o);_e(r,c=>{Bn(c.firstChild)&&c.firstChild.remove();const u=e.dom.create("summary");u.appendChild(Pi().dom),c.prepend(u)})}})},cZ=(e,n)=>{Fy(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),Gh(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&rZ(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=DF(e,o);if(An(r))return;const c=cD(o.dataTransfer),u=zg(c,mT());if((!iD(c)||sZ(c))&&SF(e,o,r))return;const m=c[mT()],v=m||c["text/html"]||c["text/plain"],w=PF(e.dom,e.schema,r.startContainer,c),E=n.get();E&&!w||v&&(o.preventDefault(),ni.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(m||E&&w)&&e.execCommand("Delete"),MF(e,r);const M=pF(v);c["text/html"]?gT(e,M,u,!0):aD(e,M,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{Gh(e)&&!n.get()&&(o.preventDefault(),MF(e,DF(e,o))),o.type==="dragend"&&n.set(!1)}),aZ(e)},iZ=e=>{const n=c=>u=>{c(e,u)},o=Ly(e);se(o)&&e.on("PastePreProcess",n(o));const r=Yx(e);se(r)&&e.on("PastePostProcess",n(r))},lZ=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},uZ=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,NF=e=>We.trim(e).replace(uZ,Eh).toLowerCase(),dZ=(e,n,o)=>{const r=Jx(e);if(o||r==="all"||!a4(e))return n;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,m=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(v,w,E,M)=>{const N=u.parseStyle(u.decode(E)),B={};for(let G=0;G<c.length;G++){const W=N[c[G]];let K=W,ne=u.getStyle(m,c[G],!0);/color/.test(c[G])&&(K=NF(K),ne=NF(ne)),ne!==K&&(B[c[G]]=W)}const U=u.serializeStyle(B,"span");return U?w+' style="'+U+'"'+M:w+M})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,m,v,w)=>m+' style="'+v+'"'+w),n},fZ=e=>{(Jt.browser.isChromium()||Jt.browser.isSafari())&&lZ(e,dZ)},BF=e=>{const n=mo(!1),o=mo(eS(e)?"text":"html"),r=LW(e);fZ(e),eZ(e,o),iZ(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>o.get()==="text"),e.on("PreInit",()=>{oZ(e),cZ(e,n),JW(e,r,o)})},$F=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},mZ=e=>{e.parser.addNodeFilter("details",n=>{const o=u4(e);_e(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=rS(e);_e(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},gZ=e=>{$F(e),mZ(e)},hZ=Bn,IF=Fe,pZ=e=>$n(e.dom),bZ=e=>Oe(e.dom),FF=e=>n=>kn(ee.fromDom(e),n),hT=(e,n,o)=>zo(ee.fromDom(e),r=>bZ(r)||o.isBlock(Tn(r)),FF(n)).getOr(ee.fromDom(n)).dom,mD=(e,n)=>zo(ee.fromDom(e),pZ,FF(n)),LF=(e,n,o)=>{const r=new Ts(e,n),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let m=o?e:c();m&&!hZ(m);m=c())Qc(m)&&(u=m);return u},HF=(e,n,o)=>{const c=xe.fromRangeStart(e).getNode(),u=hT(c,n,o),m=LF(c,u,!1),v=LF(c,u,!0),w=document.createRange();return mD(m,u).fold(()=>{IF(m)?w.setStart(m,0):w.setStartBefore(m)},E=>w.setStartBefore(E.dom)),mD(v,u).fold(()=>{IF(v)?w.setEnd(v,v.data.length):w.setEndAfter(v)},E=>w.setEndAfter(E.dom)),w},VF=e=>{const n=HF(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(wE(n))},gD=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),VF(e))})};var X0;(function(e){e.Before="before",e.After="after"})(X0||(X0={}));const zF=(e,n)=>Math.abs(e.left-n),vZ=(e,n)=>Math.abs(e.right-n),UF=(e,n)=>e>=n.top&&e<=n.bottom,yZ=(e,n)=>e.top<n.bottom&&e.bottom>n.top,WF=(e,n)=>{const o=Jc(e,n)/Math.min(e.height,n.height);return yZ(e,n)&&o>.5},CZ=(e,n)=>{const o=Pt(e,r=>UF(n,r));return fx(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=Or(e,m=>WF(m,r));return[c,u]})},wZ=(e,n)=>({node:e.node,position:zF(e,n)<vZ(e,n)?X0.Before:X0.After}),xZ=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),Xp=(e,n,o,r)=>{const c=N=>Qc(N.node)?L.some(N):ot(N.node)?Xp(ha(N.node.childNodes),n,o,!1):L.none(),u=(N,B,U)=>c(B).filter(G=>Math.abs(U(N,n,o)-U(G,n,o))<2&&Fe(G.node)),m=(N,B)=>{const U=Lo(N,(G,W)=>B(G,n,o)-B(W,n,o));return Nd(U,c).map(G=>r&&!Fe(G.node)&&U.length>1?u(G,U[1],B).getOr(G):G)},[v,w]=CZ(O3(e),o),{pass:E,fail:M}=Or(w,N=>N.top<o);return m(v,xZ).orThunk(()=>m(M,Cf)).orThunk(()=>m(E,Cf))},SZ=(e,n,o,r)=>{const c=(u,m)=>{const v=E=>ot(E)&&E.classList.contains("mce-drag-container"),w=Pt(u.dom.childNodes,Io(v));return m.fold(()=>Xp(w,o,r,!0),E=>{const M=Pt(w,N=>N!==E.dom);return Xp(M,o,r,!0)}).orThunk(()=>(kn(u,e)?L.none():oh(u)).bind(M=>c(M,L.some(u))))};return c(n,L.none())},EZ=(e,n,o)=>{const r=ee.fromDom(e),c=Bu(r),m=ee.fromPoint(c,n,o).filter(v=>mc(r,v)).getOr(r);return SZ(r,m,n,o)},hD=(e,n,o)=>EZ(e,n,o).filter(r=>ng(r.node)).map(r=>wZ(r,n)),ZF=e=>{var n,o;const r=e.getBoundingClientRect(),c=e.ownerDocument,u=c.documentElement,m=c.defaultView;return{top:r.top+((n=m==null?void 0:m.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=m==null?void 0:m.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},_Z=e=>e.inline?ZF(e.getBody()):{left:0,top:0},TZ=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},kZ=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},c={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:c},OZ=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=ZF(e.getContentAreaContainer()),r=kZ(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},pT=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),jF=(e,n)=>pT(_Z(e),TZ(e),OZ(e,n)),pD=e=>({target:e,srcElement:e}),AZ=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...pD(o)}),RZ=(e,n,o)=>{const r=ma("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:Dt,stopImmediatePropagation:Dt,stopPropagation:Dt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...pD(n)}},DZ=(e,n)=>{const o=DW(e);return n==="dragstart"?(rF(o),KR(o)):n==="drop"?(aF(o),YR(o)):(TW(o),AW(o)),o},XK=(e,n,o,r)=>{const c=DZ(o,e);return Go(r)?RZ(e,n,c):AZ(e,r,n,c)},bT=32,GF=100,J0=8,Jp=16,qF=$n,MZ=gx(qF,Oe),KF=(e,n,o)=>qF(o)&&o!==n&&e.isEditable(o.parentElement),PZ=(e,n,o)=>An(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),bD=(e,n,o,r)=>{const c=e.dom,u=n.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const m=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(m,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),m.appendChild(u),m},YF=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},vT=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},XF=vT("left",-bT),vD=vT("left",bT),JF=vT("top",-bT),NZ=vT("top",bT),BZ=(e,n,o,r,c,u,m,v,w,E,M,N)=>{let B=0,U=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>c&&(B=n.pageX+o-c),n.pageY+r>u&&(U=n.pageY+r-u),e.style.width=o-B+"px",e.style.height=r-U+"px";const G=w.clientHeight,W=w.clientWidth,K=m+w.getBoundingClientRect().top,ne=v+w.getBoundingClientRect().left;M.on(re=>{re.intervalId.clear(),re.dragging&&N&&(m+J0>=G?re.intervalId.set(NZ(E)):m-J0<=0?re.intervalId.set(JF(E)):v+J0>=W?re.intervalId.set(vD(E)):v-J0<=0?re.intervalId.set(XF(E)):K+Jp>=window.innerHeight?re.intervalId.set(NZ(window)):K-Jp<=0?re.intervalId.set(JF(window)):ne+Jp>=window.innerWidth?re.intervalId.set(vD(window)):ne-Jp<=0&&re.intervalId.set(XF(window)))})},QF=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},$Z=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);QF(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&vl(ee.fromDom(o))},e6=e=>e.button===0,IZ=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),t6=(e,n)=>o=>{if(e6(o)){const r=us(n.dom.getParents(o.target),MZ).getOr(null);if(De(r)&&KF(n.dom,n.getBody(),r)){const c=n.dom.getPos(r),u=n.getBody(),m=n.getDoc().documentElement;e.set({element:r,dataTransfer:XR(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:m.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:m.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:bD(n,r,r.offsetWidth,r.offsetHeight),intervalId:ss(GF)})}}},FZ=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),hD(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const c=e._selectionOverrides.showCaret(1,r.node,r.position===X0.Before,!1);c?e.selection.setRng(c):e.selection.placeCaretAt(n,o)})},jC=(e,n,o,r,c)=>{n==="dragstart"&&uF(r,e.dom.getOuterHTML(o));const u=XK(n,o,r,c);return e.dispatch(n,u)},LZ=(e,n)=>{const o=$m((c,u)=>FZ(n,c,u),0);n.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const m=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&m>10){const v=jC(n,"dragstart",u.element,u.dataTransfer,c);if(De(v.dataTransfer)&&(u.dataTransfer=v.dataTransfer),v.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const v=c.currentTarget===n.getDoc().documentElement,w=IZ(u,jF(n,c));YF(u.ghost,n.getBody()),BZ(u.ghost,w,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,n.getContentAreaContainer(),n.getWin(),r,v),o.throttle(c.clientX,c.clientY)}})},HZ=e=>{const n=e.getSel();if(De(n)){const r=n.getRangeAt(0).startContainer;return Fe(r)?r.parentNode:r}else return null},VZ=(e,n)=>o=>{e.on(r=>{var c;if(r.intervalId.clear(),r.dragging){if(PZ(n,HZ(n.selection),r.element)){const u=(c=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&c!==void 0?c:n.getBody();jC(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{$Z(n.dom,r.element),MW(r.dataTransfer).each(v=>n.insertContent(v)),n._selectionOverrides.hideFakeCaret()})}jC(n,"dragend",n.getBody(),r.dataTransfer,o)}}),n6(e)},yD=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>jC(n,"dragend",r.element,r.dataTransfer),c=>jC(n,"dragend",r.element,r.dataTransfer,c))}),n6(e)},JK=(e,n)=>o=>yD(e,n,L.some(o)),n6=e=>{e.on(n=>{n.intervalId.clear(),QF(n.ghost)}),e.clear()},o6=e=>{const n=Qs(),o=to.DOM,r=document,c=t6(n,e),u=LZ(n,e),m=VZ(n,e),v=JK(n,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",m),o.bind(r,"mousemove",u),o.bind(r,"mouseup",v),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",v)}),e.on("keydown",w=>{w.keyCode===at.ESC&&yD(n,e,L.none())})},zZ=e=>{const n=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&(Zt(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&l_(e,"Dropped file type is not supported"))}},o=c=>{XS(e,c.target)&&n(c)},r=()=>{const c=to.DOM,u=e.dom,m=document,v=e.inline?e.getBody():e.getDoc(),w=["drop","dragover"];_e(w,E=>{c.bind(m,E,o),u.bind(v,E,n)}),e.on("remove",()=>{_e(w,E=>{c.unbind(m,E,o),u.unbind(v,E,n)})})};e.on("init",()=>{ni.setEditorTimeout(e,r,0)})},CD=e=>{o6(e),Kr(e)&&zZ(e)},UZ=e=>{const n=$m(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=v_(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},WZ=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(yr(o)){const r=Tl(e.getBody(),o),c=$n(r)?r:o;e.selection.getNode()!==c&&$0(e,c).each(u=>e.selection.setRng(u))}})})},GC=$n,wD=(e,n)=>Tl(e.getBody(),n),yT=e=>{const n=e.selection,o=e.dom,r=e.getBody(),c=mS(e,r,o.isBlock,()=>h0(e)),u="sel-"+o.uniqueId(),m="data-mce-selected";let v;const w=ct=>De(ct)&&o.hasClass(ct,"mce-offscreen-selection"),E=ct=>ct!==r&&(GC(ct)||yr(ct))&&o.isChildOf(ct,r)&&o.isEditable(ct.parentNode),M=ct=>{ct&&n.setRng(ct)},N=(ct,Ee,be,Me=!0)=>e.dispatch("ShowCaret",{target:Ee,direction:ct,before:be}).isDefaultPrevented()?null:(Me&&n.scrollIntoView(Ee,ct===-1),c.show(be,Ee)),B=ct=>{ct.hasAttribute("data-mce-caret")&&(Wm(ct),n.scrollIntoView(ct))},U=()=>{e.on("click",Ee=>{o.isEditable(Ee.target)||(Ee.preventDefault(),e.focus())}),e.on("blur NewBlock",de),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",Ee=>{const be=Ee.target,Me=wD(e,be);GC(Me)?(Ee.preventDefault(),$0(e,Me).each(le)):E(be)&&$0(e,be).each(le)},!0),e.on("mousedown",Ee=>{const be=Ee.target;if(be!==r&&be.nodeName!=="HTML"&&!o.isChildOf(be,r)||!EV(e,Ee.clientX,Ee.clientY))return;de(),Ve();const Me=wD(e,be);GC(Me)?(Ee.preventDefault(),$0(e,Me).each(le)):hD(r,Ee.clientX,Ee.clientY).each(lt=>{Ee.preventDefault();const xt=N(1,lt.node,lt.position===X0.Before,!1);M(xt),Wc(Me)?Me.focus():e.getBody().focus()})}),e.on("keypress",Ee=>{at.modifierPressed(Ee)||GC(n.getNode())&&Ee.preventDefault()}),e.on("GetSelectionRange",Ee=>{let be=Ee.range;if(v){if(!v.parentNode){v=null;return}be=be.cloneRange(),be.selectNode(v),Ee.range=be}}),e.on("SetSelectionRange",Ee=>{Ee.range=K(Ee.range);const be=le(Ee.range,Ee.forward);be&&(Ee.range=be)});const ct=Ee=>ot(Ee)&&Ee.id==="mcepastebin";e.on("AfterSetSelectionRange",Ee=>{const be=Ee.range,Me=be.startContainer.parentElement;!W(be)&&!ct(Me)&&Ve(),w(Me)||de()}),CD(e),UZ(e),WZ(e)},G=ct=>vc(ct)||xn(ct)||Cr(ct),W=ct=>G(ct.startContainer)||G(ct.endContainer),K=ct=>{const Ee=e.schema.getVoidElements(),be=o.createRng(),Me=ct.startContainer,lt=ct.startOffset,xt=ct.endContainer,dn=ct.endOffset;return It(Ee,Me.nodeName.toLowerCase())?lt===0?be.setStartBefore(Me):be.setStartAfter(Me):be.setStart(Me,lt),It(Ee,xt.nodeName.toLowerCase())?dn===0?be.setEndBefore(xt):be.setEndAfter(xt):be.setEnd(xt,dn),be},ne=(ct,Ee)=>{const be=ee.fromDom(e.getBody()),Me=e.getDoc(),lt=Et(be,"#"+u).getOrThunk(()=>{const fn=ee.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Me);return ur(fn,"id",u),Fs(be,fn),fn}),xt=o.createRng();Sm(lt),Fu(lt,[ee.fromText(ks,Me),ee.fromDom(Ee),ee.fromText(ks,Me)]),xt.setStart(lt.dom.firstChild,1),xt.setEnd(lt.dom.lastChild,0),on(lt,{top:o.getPos(ct,e.getBody()).y+"px"}),hp(lt);const dn=n.getSel();return dn&&(dn.removeAllRanges(),dn.addRange(xt)),xt},re=ct=>{const Ee=ct.cloneNode(!0),be=e.dispatch("ObjectSelected",{target:ct,targetClone:Ee});if(be.isDefaultPrevented())return null;const Me=ne(ct,be.targetClone),lt=ee.fromDom(ct);return _e(jr(ee.fromDom(e.getBody()),`*[${m}]`),xt=>{kn(lt,xt)||$s(xt,m)}),o.getAttrib(ct,m)||ct.setAttribute(m,"1"),v=ct,Ve(),Me},le=(ct,Ee)=>{if(!ct)return null;if(ct.collapsed){if(!W(ct)){const xt=Ee?1:-1,dn=Df(xt,r,ct),fn=dn.getNode(!Ee);if(De(fn)){if(ng(fn))return N(xt,fn,Ee?!dn.isAtEnd():!1,!1);if(Xc(fn)&&$n(fn.nextSibling)){const Gn=o.createRng();return Gn.setStart(fn,0),Gn.setEnd(fn,0),Gn}}const Fn=dn.getNode(Ee);if(De(Fn)){if(ng(Fn))return N(xt,Fn,Ee?!1:!dn.isAtEnd(),!1);if(Xc(Fn)&&$n(Fn.previousSibling)){const Gn=o.createRng();return Gn.setStart(Fn,1),Gn.setEnd(Fn,1),Gn}}}return null}let be=ct.startContainer,Me=ct.startOffset;const lt=ct.endOffset;if(Fe(be)&&Me===0&&GC(be.parentNode)&&(be=be.parentNode,Me=o.nodeIndex(be),be=be.parentNode),!ot(be))return null;if(lt===Me+1&&be===ct.endContainer){const xt=be.childNodes[Me];if(E(xt))return re(xt)}return null},de=()=>{v&&v.removeAttribute(m),Et(ee.fromDom(e.getBody()),"#"+u).each(fo),v=null},Ae=()=>{c.destroy(),v=null},Ve=()=>{c.hide()};return Ed(e)||U(),{showCaret:N,showBlockCaretContainer:B,hideFakeCaret:Ve,destroy:Ae}},s6=(e,n)=>{let o=n;for(let r=e.previousSibling;Fe(r);r=r.previousSibling)o+=r.data.length;return o},xD=(e,n,o,r,c)=>{if(Fe(o)&&(r<0||r>o.data.length))return[];const u=c&&Fe(o)?[s6(o,r)]:[r];let m=o;for(;m!==n&&m.parentNode;)u.push(e.nodeIndex(m,c)),m=m.parentNode;return m===n?u.reverse():[]},SD=(e,n,o,r,c,u,m=!1)=>{const v=xD(e,n,o,r,m),w=xD(e,n,c,u,m);return{start:v,end:w}},r6=(e,n)=>{const o=n.slice(),r=o.pop();return fa(r)?Ko(o,(u,m)=>u.bind(v=>L.from(v.childNodes[m])),L.some(e)).bind(u=>Fe(u)&&(r<0||r>u.data.length)?L.none():L.some({node:u,offset:r})):L.none()},ED=(e,n)=>r6(e,n.start).bind(({node:o,offset:r})=>r6(e,n.end).map(({node:c,offset:u})=>{const m=document.createRange();return m.setStart(o,r),m.setEnd(c,u),m})),ZZ=(e,n,o,r=!1)=>SD(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),Q0=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,Fe(n.firstChild)&&zc(n.firstChild.data)),Q0(e,r,o)}},CT=(e,n,o,r=!0)=>{const c=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(Fe(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),Fe(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),Q0(e,c,o),c!==u&&Q0(e,u,o))},ev=(e,n)=>L.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),_D=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:Mx(r).concat(e.blockPatterns),inlinePatterns:sd(r).concat(e.inlinePatterns)}},TD=(e,n,o,r)=>{const c=e.createRng();return c.setStart(n,0),c.setEnd(o,r),c.toString()},a6=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),wT=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},c6=(e,n,o)=>{const r=ED(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,m=r.endOffset===0?u:u.splitText(r.endOffset),v=r.startOffset===0?c:c.splitText(r.startOffset),w=v.parentNode,E=m.parentNode;return{prefix:n,end:E.insertBefore(a6(e,n+"-end"),m),start:w.insertBefore(a6(e,n+"-start"),v)}},i6=(e,n,o)=>{Q0(e,e.get(n.prefix+"-end"),o),Q0(e,e.get(n.prefix+"-start"),o)},xT=e=>e.start.length===0,l6=e=>(n,o)=>{const c=n.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),m=c.lastIndexOf(e);return m!==-1?m+e.length:u!==-1?u+1:-1},ST=(e,n,o,r)=>{const c=n.start;return lR(e,r.container,r.offset,l6(c),o).bind(m=>{var v,w;const E=(w=(v=o.textContent)===null||v===void 0?void 0:v.indexOf(c))!==null&&w!==void 0?w:-1;if(E!==-1&&m.offset>=E+c.length){const N=e.createRng();return N.setStart(m.container,m.offset-c.length),N.setEnd(m.container,m.offset),L.some(N)}else{const N=m.offset-c.length;return z0(m.container,N,o).map(B=>{const U=e.createRng();return U.setStart(B.container,B.offset),U.setEnd(m.container,m.offset),U}).filter(B=>B.toString()===c).orThunk(()=>ST(e,n,o,Pl(m.container,0)))}})},kD=(e,n,o,r,c,u=!1)=>{if(n.start.length===0&&!u){const m=e.createRng();return m.setStart(o,r),m.setEnd(o,r),L.some(m)}return iR(o,r,c).bind(m=>ST(e,n,c,m).bind(w=>{var E;if(u){if(w.endContainer===m.container&&w.endOffset===m.offset)return L.none();if(m.offset===0&&((E=w.endContainer.textContent)===null||E===void 0?void 0:E.length)===w.endOffset)return L.none()}return L.some(w)}))},jZ=(e,n,o,r)=>{const c=e.dom,u=c.getRoot(),m=o.pattern,v=o.position.container,w=o.position.offset;return z0(v,w-o.pattern.end.length,n).bind(E=>{const M=SD(c,u,E.container,E.offset,v,w,r);if(xT(m))return L.some({matches:[{pattern:m,startRng:M,endRng:M}],position:E});{const N=tv(e,o.remainingPatterns,E.container,E.offset,n,r),B=N.getOr({matches:[],position:E}),U=B.position;return kD(c,m,U.container,U.offset,n,N.isNone()).map(W=>{const K=ZZ(c,u,W,r);return{matches:B.matches.concat([{pattern:m,startRng:K,endRng:M}]),position:Pl(W.startContainer,W.startOffset)}})}})},tv=(e,n,o,r,c,u)=>{const m=e.dom;return iR(o,r,m.getRoot()).bind(v=>{const w=TD(m,c,o,r);for(let E=0;E<n.length;E++){const M=n[E];if(!Ul(w,M.end))continue;const N=n.slice();N.splice(E,1);const B=jZ(e,c,{pattern:M,remainingPatterns:N,position:v},u);if(B.isNone()&&r>0)return tv(e,n,o,r-1,c,u);if(B.isSome())return B}return L.none()})},u6=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?_e(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},GZ=(e,n,o,r)=>{const c=wT(e.dom,o);CT(e.dom,c,r),u6(e,n,c)},d6=(e,n,o,r,c)=>{const u=e.dom,m=wT(u,r),v=wT(u,o);CT(u,v,c),CT(u,m,c);const w={prefix:o.prefix,start:o.end,end:r.start},E=wT(u,w);u6(e,n,E)},qZ=(e,n)=>{const o=Hm("mce_textpattern"),r=Pd(n,(c,u)=>{const m=c6(e,o+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:m}])},[]);return Pd(r,(c,u)=>{const m=r.length-c.length-1,v=xT(u.pattern)?u.endMarker:c6(e,o+`_start${m}`,u.startRng);return c.concat([{...u,startMarker:v}])},[])},KZ=e=>Lo(e,(n,o)=>o.end.length-n.end.length),YZ=(e,n)=>{const o=ir(e,r=>ho(n,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},f6=(e,n,o,r,c,u)=>{const m=tv(e,c.inlinePatterns,o,r,n,u).fold(()=>[],w=>w.matches),v=tv(e,KZ(c.inlinePatterns),o,r,n,u).fold(()=>[],w=>w.matches);return YZ(m,v)},m6=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=qZ(o,n);_e(c,u=>{const m=o.getParent(u.startMarker.start,o.isBlock),v=w=>w===m;xT(u.pattern)?GZ(e,u.pattern,u.endMarker,v):d6(e,u.pattern,u.startMarker,u.endMarker,v),i6(o,u.endMarker,v),i6(o,u.startMarker,v)}),e.selection.moveToBookmark(r)},g6=(e,n,o)=>L9(n,0,n).map(r=>{const c=r.container;return J$(c,o.start.length,n).each(u=>{const m=e.createRng();m.setStart(c,0),m.setEnd(u.container,u.offset),CT(e,m,v=>v===n)}),c}),h6=e=>(n,o)=>{const r=n.dom,c=o.pattern,u=ED(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),m=(v,w)=>{const E=w.get(v);return ln(E)&&Ar(E).exists(M=>It(M,"block"))};return ev(n,u).each(v=>{c.type==="block-format"?m(c.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,v,c),n.formatter.apply(c.format)}):c.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,v,c),n.execCommand(c.cmd,!1,c.value)})}),!0},XZ=e=>Lo(e,(n,o)=>o.start.length-n.start.length),OD=e=>(n,o)=>{const r=XZ(n),c=o.replace(ks," ");return us(r,u=>e(u,o,c))},p6=(e,n)=>(o,r,c,u,m)=>{var v;m===void 0&&(m=(v=r.textContent)!==null&&v!==void 0?v:"");const w=o.dom,E=gr(o);return w.is(r,E)?e(c.blockPatterns,m).map(M=>n&&We.trim(m).length===M.start.length?[]:[{pattern:M,range:SD(w,w.getRoot(),r,0,r,0,u)}]).getOr([]):[]},AD=e=>/^\s[^\s]/.test(e),JZ=h6((e,n,o)=>{g6(e,n,o).each(r=>{const c=ee.fromDom(r),u=zm(c);AD(u)&&Um(c,u.slice(1))})}),QZ=OD((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),ej=p6(QZ,!0),tj=(e,n)=>{const o=e.selection.getRng();return ev(e,o).map(r=>{var c;const u=Math.max(0,o.startOffset),m=_D(n,r,(c=r.textContent)!==null&&c!==void 0?c:""),v=f6(e,r,o.startContainer,u,m,!0),w=ej(e,r,m,!0);return{inlineMatches:v,blockMatches:w}}).filter(({inlineMatches:r,blockMatches:c})=>c.length>0||r.length>0)},nj=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();_e(n,r=>JZ(e,r)),e.selection.moveToBookmark(o)},ET=h6(g6),oj=OD((e,n,o)=>n===e.start||o===e.start),sj=p6(oj,!1),rj=(e,n)=>{const o=e.selection.getRng();return ev(e,o).map(r=>{const c=Math.max(0,o.startOffset),u=TD(e.dom,r,o.startContainer,c),m=_D(n,r,u);return sj(e,r,m,!1,u)}).filter(r=>r.length>0)},aj=(e,n)=>{_e(n,o=>ET(e,o))},cj=(e,n)=>tj(e,n).fold(Ne,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{lb(e),m6(e,o),nj(e,r);const c=e.selection.getRng(),u=iR(c.startContainer,c.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(m=>{const v=m.container;v.data.charAt(m.offset-1)===lh&&(v.deleteData(m.offset-1,1),Q0(e.dom,v.parentNode,w=>w===e.dom.getRoot()))})}),!0)),ij=(e,n)=>{const o=e.selection.getRng();ev(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=TD(e.dom,r,o.startContainer,c),m=_D(n,r,u),v=f6(e,r,o.startContainer,c,m,!1);v.length>0&&e.undoManager.transact(()=>{m6(e,v)})})},lj=(e,n)=>rj(e,n).fold(Ne,o=>(e.undoManager.transact(()=>{aj(e,o)}),!0)),b6=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},uj=(e,n)=>b6(e,n,(o,r)=>o===r.keyCode&&!at.modifierPressed(r)),v6=(e,n)=>b6(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),dj=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>fr(c4(e).filter(m=>m.type==="inline-command"||m.type==="block-command"?e.queryCommandSupported(m.cmd):!0),i4(e)),c=()=>oS(e);e.on("keydown",m=>{if(m.keyCode===13&&!at.modifierPressed(m)&&e.selection.isCollapsed()&&e.selection.isEditable()){const v=wl(r(),"enter");(v.inlinePatterns.length>0||v.blockPatterns.length>0||c())&&cj(e,v)&&m.preventDefault()}},!0),e.on("keydown",m=>{if(m.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const v=wl(r(),"space");(v.blockPatterns.length>0||c())&&lj(e,v)&&m.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const m=wl(r(),"space");(m.inlinePatterns.length>0||c())&&ij(e,m)}};e.on("keyup",m=>{uj(o,m)&&u()}),e.on("keypress",m=>{v6(n,m)&&ni.setEditorTimeout(e,u)})},y6=e=>{dj(e)},fj=e=>{const n=We.each,o=at.BACKSPACE,r=at.DELETE,c=e.dom,u=e.selection,m=e.parser,v=Jt.browser,w=v.isFirefox(),E=v.isChromium()||v.isSafari(),M=Jt.deviceType.isiPhone()||Jt.deviceType.isiPad(),N=Jt.os.isMacOS()||Jt.os.isiOS(),B=(st,Rt)=>{try{e.getDoc().execCommand(st,!1,String(Rt))}catch{}},U=st=>st.isDefaultPrevented(),G=()=>{const st=Mt=>{const Qe=c.create("body"),mn=Mt.cloneContents();return Qe.appendChild(mn),u.serializer.serialize(Qe,{format:"html"})},Rt=Mt=>{const Qe=st(Mt),mn=c.createRng();mn.selectNode(e.getBody());const pn=st(mn);return Qe===pn};e.on("keydown",Mt=>{const Qe=Mt.keyCode;if(!U(Mt)&&(Qe===r||Qe===o)&&e.selection.isEditable()){const mn=e.selection.isCollapsed(),pn=e.getBody();if(mn&&!Hs(e.schema,pn)||!mn&&!Rt(e.selection.getRng()))return;Mt.preventDefault(),e.setContent(""),pn.firstChild&&c.isBlock(pn.firstChild)?e.selection.setCursorLocation(pn.firstChild,0):e.selection.setCursorLocation(pn,0),e.nodeChanged()}})},W=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},K=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",st=>{let Rt;if(st.target===e.getDoc().documentElement)if(Rt=u.getRng(),e.getBody().focus(),st.type==="mousedown"){if(vc(Rt.startContainer))return;u.placeCaretAt(st.clientX,st.clientY)}else u.setRng(Rt)})},ne=()=>{e.on("keydown",st=>{if(!U(st)&&st.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const Rt=u.getNode(),Mt=Rt.previousSibling;if(Rt.nodeName==="HR"){c.remove(Rt),st.preventDefault();return}Mt&&Mt.nodeName&&Mt.nodeName.toLowerCase()==="hr"&&(c.remove(Mt),st.preventDefault())}}})},re=()=>{Range.prototype.getClientRects||e.on("mousedown",st=>{if(!U(st)&&st.target.nodeName==="HTML"){const Rt=e.getBody();Rt.blur(),ni.setEditorTimeout(e,()=>{Rt.focus()})}})},le=()=>{const st=$y(e);e.on("click",Rt=>{const Mt=Rt.target;/^(IMG|HR)$/.test(Mt.nodeName)&&c.isEditable(Mt)&&(Rt.preventDefault(),e.selection.select(Mt),e.nodeChanged()),Mt.nodeName==="A"&&c.hasClass(Mt,st)&&Mt.childNodes.length===0&&c.isEditable(Mt.parentNode)&&(Rt.preventDefault(),u.select(Mt))})},de=()=>{const st=()=>{const Mt=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const Qe=u.getStart();Qe!==e.getBody()&&(c.setAttrib(Qe,"style",null),n(Mt,mn=>{Qe.setAttributeNode(mn.cloneNode(!0))}))}},Rt=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",Mt=>{let Qe;return!U(Mt)&&(Mt.keyCode===8||Mt.keyCode===46)&&Rt()?(Qe=st(),e.getDoc().execCommand("delete",!1),Qe(),Mt.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",Mt=>{if(!U(Mt)&&Rt()){const Qe=st();ni.setEditorTimeout(e,()=>{Qe()})}})},Ae=()=>{e.on("keydown",st=>{if(!U(st)&&st.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const Rt=u.getNode().previousSibling;if(Rt&&Rt.nodeName&&Rt.nodeName.toLowerCase()==="table")return st.preventDefault(),!1}return!0})},Ve=()=>{e.on("keydown",st=>{if(U(st)||st.keyCode!==at.BACKSPACE)return;let Rt=u.getRng();const Mt=Rt.startContainer,Qe=Rt.startOffset,mn=c.getRoot();let pn=Mt;if(!(!Rt.collapsed||Qe!==0)){for(;pn.parentNode&&pn.parentNode.firstChild===pn&&pn.parentNode!==mn;)pn=pn.parentNode;pn.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,pn),Rt=c.createRng(),Rt.setStart(Mt,0),Rt.setEnd(Mt,0),u.setRng(Rt))}})},ct=()=>{const st=()=>{B("StyleWithCSS",!1),B("enableInlineTableEditing",!1),Xm(e)||B("enableObjectResizing",!1)};Zx(e)||e.on("BeforeExecCommand mousedown",st)},Ee=()=>{const st=()=>{n(c.select("a:not([data-mce-block])"),Rt=>{var Mt;let Qe=Rt.parentNode;const mn=c.getRoot();if((Qe==null?void 0:Qe.lastChild)===Rt){for(;Qe&&!c.isBlock(Qe);){if(((Mt=Qe.parentNode)===null||Mt===void 0?void 0:Mt.lastChild)!==Qe||Qe===mn)return;Qe=Qe.parentNode}c.add(Qe,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Rt=>{(Rt.type==="setcontent"||Rt.command==="mceInsertLink")&&st()})},be=()=>{e.on("init",()=>{B("DefaultParagraphSeparator",gr(e))})},Me=st=>{const Rt=st.getBody(),Mt=st.selection.getRng();return Mt.startContainer===Mt.endContainer&&Mt.startContainer===Rt&&Mt.startOffset===0&&Mt.endOffset===Rt.childNodes.length},lt=()=>{e.on("keyup focusin mouseup",st=>{!at.modifierPressed(st)&&!Me(e)&&u.normalize()},!0)},xt=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},dn=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},fn=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",st=>{let Rt;st.target.nodeName==="HTML"&&(Rt=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Rt),e.selection.normalize(),e.nodeChanged())}))},Fn=()=>{N&&e.on("keydown",st=>{at.metaKeyPressed(st)&&!st.shiftKey&&(st.keyCode===37||st.keyCode===39)&&(st.preventDefault(),e.selection.getSel().modify("move",st.keyCode===37?"backward":"forward","lineboundary"))})},Gn=()=>{e.on("click",st=>{let Rt=st.target;do if(Rt.tagName==="A"){st.preventDefault();return}while(Rt=Rt.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},ns=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",st=>{st.preventDefault()})})},_r=()=>{m.addNodeFilter("br",st=>{let Rt=st.length;for(;Rt--;)st[Rt].attr("class")==="Apple-interchange-newline"&&st[Rt].remove()})},cs=Dt,Ke=()=>{if(!w||e.removed)return!1;const st=e.selection.getSel();return!st||!st.rangeCount||st.rangeCount===0},wt=()=>{E&&(K(),le(),ns(),W(),M&&(dn(),fn(),Gn())),w&&(re(),ct(),xt(),Fn())},Rn=()=>{Ve(),G(),Jt.windowsPhone||lt(),E&&(K(),le(),be(),ns(),Ae(),_r(),M?(dn(),fn(),Gn()):W()),w&&(ne(),re(),de(),ct(),Ee(),xt(),Fn(),Ae())};return Ed(e)?wt():Rn(),{refreshContentEditable:cs,isHidden:Ke}},mj=e=>e.toLowerCase()==="gpl",C6=e=>e.length>=64&&e.length<=255,qC=e=>mj(e)||C6(e)?"VALID":"INVALID",gj=e=>{const n=Qm(e);!Q(aS(e))&&(Go(n)||qC(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},_T=to.DOM,hj=(e,n)=>{const o=ee.fromDom(e.getBody()),r=sh(xi(o)),c=ee.fromTag("style");ur(c,"type","text/css"),Fs(c,ee.fromText(n)),Fs(r,c),e.on("remove",()=>{fo(c)})},pj=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,RD=e=>To(e,n=>Go(n)===!1),w6=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return RD({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_mathml_annotation_encodings:n("allow_mathml_annotation_encodings"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:pj(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:zy(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},DD=e=>{const n=e.options.get;return RD({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},bj=e=>{const n=e.options.get;return{...w6(e),...DD(e),...RD({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},x6=e=>{const n=Mp(w6(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let m=o.length;for(;m--;){const v=o[m];let w=v.attr(r);if(w&&!v.attr(u)){if(w.indexOf("data:")===0||w.indexOf("blob:")===0)continue;r==="style"?(w=c.serializeStyle(c.parseStyle(w),v.name),w.length||(w=null),v.attr(u,w),v.attr(r,w)):r==="tabindex"?(v.attr(u,w),v.attr(r,null)):v.attr(u,e.convertURL(w,r,v.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),Rb(e)&&n.addNodeFilter("#cdata",o=>{var r;let c=o.length;for(;c--;){const u=o[c];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new Aa("br",1))}}),n},vj=e=>{const n=kb(e);n&&ni.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},yj=e=>{const n=e.dom.getRoot();!e.inline&&(!Zb(e)||e.selection.getStart(!0)===n)&&Ir(n).each(o=>{const r=o.getNode(),c=Ei(r)?Ir(r).getOr(o):o;e.selection.setRng(c.toRange())})},Cj=e=>{e.bindPendingEventDelegates(),e.initialized=!0,e0(e),e.focus(!0),yj(e),e.nodeChanged({initial:!0});const n=s4(e);se(n)&&n.call(e,e),vj(e)},MD=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,wj=(e,n,o)=>{const{pass:r,fail:c}=Or(n,v=>tinymce.Resource.has(e3(v))),m=[...r.map(v=>{const w=tinymce.Resource.get(e3(v));return Q(w)?Promise.resolve(MD(e).loadRawCss(v,w)):Promise.resolve()}),MD(e).loadAll(c)];return e.inline?m:m.concat([e.ui.styleSheetLoader.loadAll(o)])},S6=e=>{const n=MD(e),o=Xk(e),r=e.contentCSS,c=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let w="";We.each(e.contentStyles,E=>{w+=E+`\r
`}),e.dom.addStyle(w)}const m=Promise.all(wj(e,r,o)).then(u).catch(u),v=Ea(e);return v&&hj(e,v),m},xj=e=>{const n=e.getDoc(),o=e.getBody();HS(e),Kx(e)||(n.body.spellcheck=!1,_T.setAttrib(o,"spellcheck","false")),e.quirks=fj(e),p2(e);const r=Jk(e);r!==void 0&&(o.dir=r);const c=Iy(e);c&&e.on("BeforeSetContent",u=>{We.each(c,m=>{u.content=u.content.replace(m,v=>"<!--mce:protected "+escape(v)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},Sj=e=>{Ed(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},PD=e=>{e.removed!==!0&&(Sj(e),Cj(e))},E6=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},TT=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(_T.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=Zx(e),e._editableRoot=n4(e),e.hasEditableRoot()&&(e.inline&&_T.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=IV(e),e.schema=zn(DD(e)),e.dom=to(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:Lx(e),referrerPolicy:Hh(e),onSetAttrib:m=>{e.dispatch("SetAttrib",m)}}),e.parser=x6(e),e.serializer=GA(bj(e),e),e.selection=n5(e.dom,e.getWin(),e.serializer,e),e.annotator=$i(e),e.formatter=x5(e),e.undoManager=a3(e),e._nodeChangeDispatcher=new xW(e),e._selectionOverrides=yT(e),t9(e),gZ(e),a9(e),Ed(e)||(gD(e),y6(e));const c=wW(e);Qz(e,c),n9(e),WV(e),BF(e);const u=UB(e);xj(e),gj(e),u.fold(()=>{const m=E6(e);S6(e).then(()=>{PD(e),m()})},m=>{e.setProgressState(!0),S6(e).then(()=>{m().then(v=>{e.setProgressState(!1),PD(e),QB(e)},v=>{e.notificationManager.open({type:"error",text:String(v)}),PD(e),QB(e)})})})},_6=dt,T6=(e,n,o)=>Pw(e,n,_6,o),ND=to.DOM,Ej=(e,n,o,r)=>{const c=ee.fromTag("iframe");return r.each(u=>ur(c,"tabindex",u)),Ur(c,o),Ur(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),Nu(c,"tox-edit-area__iframe"),c},_j=e=>{let n=mr(e)+"<html><head>";Bx(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=rd(e),r=$x(e),c=e.translate(jh(e));return ky(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+ky(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${c}"><br></body></html>`,n},k6=(e,n)=>{const o=Jt.browser.isFirefox()?jh(e):"Rich Text Area",r=e.translate(o),c=dc(ee.fromDom(e.getElement()),"tabindex").bind(Fd),u=Ej(e.id,r,Kk(e),c).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=u,e.iframeHTML=_j(e),ND.add(n.iframeContainer,u)},O6=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,TT(e)};if(fs(e)||Jt.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=T6(ee.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},Tj=(e,n)=>{k6(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=ND.isHidden(n.editorContainer)),e.getElement().style.display="none",ND.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,O6(e)},A6=to.DOM,BD=(e,n,o)=>{const r=R0.get(o),c=R0.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=We.trim(o),r&&We.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,se(u.init)&&(u.init(e,c),n.push(o))}catch(u){QA(e,o,u)}}},kT=e=>e.replace(/^\-/,""),OT=e=>{const n=[];_e(Zh(e),o=>{BD(e,n,kT(o))})},om=e=>{const n=We.trim(ds(e)),o=e.ui.registry.getAll().icons,r={...O0.get("default").icons,...O0.get(n).icons};it(r,(c,u)=>{It(o,u)||e.ui.registry.addIcon(u,c)})},AT=e=>{const n=cd(e);if(Q(n)){const o=hu.get(n);e.theme=o(e,hu.urls[n])||{},se(e.theme.init)&&e.theme.init(e,hu.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},nv=e=>{const n=Eb(e),o=A0.get(n);e.model=o(e,A0.urls[n])},R6=e=>{const n=e.theme.renderUI;return n?n():P6(e)},kj=e=>{const n=e.getElement(),r=cd(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},D6=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),M6=e=>{const n=A6.create("div");return A6.insertAfter(n,e),D6(n,n)},P6=e=>{const n=e.getElement();return e.inline?D6(null):M6(n)},$D=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,Q(cd(e))?R6(e):se(cd(e))?kj(e):P6(e)},RT=(e,n)=>{const o={show:L.from(n.show).getOr(Dt),hide:L.from(n.hide).getOr(Dt),isEnabled:L.from(n.isEnabled).getOr(dt),setEnabled:r=>{r&&e.mode.get()==="readonly"||L.from(n.setEnabled).each(u=>u(r))}};e.ui={...e.ui,...o}},Ug=async e=>{e.dispatch("ScriptsLoaded"),om(e),AT(e),nv(e),OT(e);const n=await $D(e);RT(e,L.from(n.api).getOr({})),e.editorContainer=n.editorContainer,NV(e),e.inline?TT(e):Tj(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},Xi=to.DOM,ID=e=>e.charAt(0)==="-",Oj=(e,n)=>{const o=Sb(n),r=Vh(n);if(!Di.hasCode(o)&&o!=="en"){const c=oo(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{RV(n,c,o)})}},Aj=(e,n)=>{const o=cd(e);if(Q(o)&&!ID(o)&&!It(hu.urls,o)){const r=Vx(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;hu.load(o,c).catch(()=>{kK(e,c,o)})}},Rj=(e,n)=>{const o=Eb(e);if(o!=="plugin"&&!It(A0.urls,o)){const r=Py(e),c=Q(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;A0.load(o,c).catch(()=>{pu(e,c,o)})}},Dj=e=>L.from(xb(e)).filter(oo).map(n=>({url:n,name:L.none()})),N6=(e,n,o)=>L.from(n).filter(r=>oo(r)&&!O0.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:L.some(r)})),Mj=(e,n,o)=>{const r=N6(n,"default",o),c=Dj(n).orThunk(()=>N6(n,ds(n),""));_e(vw([r,c]),u=>{e.add(u.url).catch(()=>{AV(n,u.url,u.name.getOrUndefined())})})},B6=(e,n)=>{const o=(r,c)=>{R0.load(r,c).catch(()=>{OV(e,c,r)})};it(Gx(e),(r,c)=>{o(c,r),e.options.set("plugins",Zh(e).concat(c))}),_e(Zh(e),r=>{r=We.trim(r),r&&!R0.urls[r]&&!ID(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},Pj=e=>{const n=cd(e);return!Q(n)||De(hu.get(n))},Nj=e=>{const n=Eb(e);return De(A0.get(n))},Bj=(e,n)=>{const o=pl.ScriptLoader,r=()=>{!e.removed&&Pj(e)&&Nj(e)&&Ug(e)};Aj(e,n),Rj(e,n),Oj(o,e),Mj(o,e,n),B6(e,n),o.loadQueue().then(r,r)},eY=(e,n)=>W1.forElement(e,{contentCssCors:jx(n),referrerPolicy:Hh(n)}),$j=e=>{const n=e.id;Di.setCode(Sb(e));const o=()=>{Xi.unbind(window,"ready",o),e.render()};if(!df.Event.domLoaded){Xi.bind(window,"ready",o);return}if(!e.getElement())return;const r=ee.fromDom(e.getElement()),c=E1(r);e.on("remove",()=>{Tu(r.dom.attributes,m=>$s(r,m.name)),Ur(r,c)}),e.ui.styleSheetLoader=eY(r,e),Of(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||Xi.getParent(n,"form");u&&(e.formElement=u,Wh(e)&&!Oo(e.getElement())&&(Xi.insertAfter(Xi.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=m=>{e.dispatch(m.type,m)},Xi.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),Qk(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=JA(e),e.notificationManager=m5(e),Db(e)&&e.on("GetContent",m=>{m.save&&(m.content=Xi.encode(m.content))}),Ny(e)&&e.on("submit",()=>{e.initialized&&e.save()}),e4(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),Bj(e,e.suffix)},FD=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged(),Jn(e,n))},Ij=e=>e._editableRoot,Fj=(e,n)=>({sections:Je(e),options:Je(n)}),LD=rl().deviceType,$6=LD.isPhone(),I6=LD.isTablet(),KC=e=>{if(An(e))return[];{const n=ln(e)?e:e.split(/[ ,]/),o=Yt(n,Id);return Pt(o,oo)}},HD=(e,n)=>{const o=Bd(n,(r,c)=>Zt(e,c));return Fj(o.t,o.f)},Lj=(e,n,o={})=>{const r=e.sections(),c=Co(r,n).getOr({});return We.extend({},o,c)},VD=(e,n)=>It(e.sections(),n),Hj=(e,n)=>VD(e,n)?e.sections()[n]:{},Vj=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Co(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),F6=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?We.extend({},e.external_plugins,r):r},zD=(e,n)=>[...KC(e),...KC(n)],L6=(e,n,o,r)=>e&&VD(n,"mobile")?r:o,UD=(e,n,o,r)=>{const c=KC(o.forced_plugins),u=KC(r.plugins),m=Hj(n,"mobile"),v=m.plugins?KC(m.plugins):u,w=L6(e,n,u,v),E=zD(c,w);return We.extend(r,{forced_plugins:c,plugins:E})},zj=(e,n)=>e&&VD(n,"mobile"),tY=(e,n,o,r,c)=>{var u;const m=e?{mobile:Vj((u=c.mobile)!==null&&u!==void 0?u:{},n)}:{},v=HD(["mobile"],Lg(m,c)),w=We.extend(o,r,v.options(),zj(e,v)?Lj(v,"mobile"):{},{external_plugins:F6(r,v.options())});return UD(e,v,r,w)},nY=(e,n)=>{const o=vR(n);return tY($6||I6,$6,o,e,o)},Uj=(e,n)=>ZH(e,n),H6=e=>{const n=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{_e("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},Wj=e=>{const n=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return ho(c,u=>De(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},Zj=e=>{H6(e),Wj(e)},jj=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Jt.os.isMacOS()||Jt.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:c,type:"error"})}}})},oY=(e,n,o,r)=>{const c=ee.fromDom(e.getRoot());return O2(c,xe.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),A2(c,xe.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},sY=e=>{if(typeof e!="string"){const n=We.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},V6=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?oY(r,o.getRng(),n,e.schema):n},YC=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=sY(n);KE(e,{...r,content:V6(e,o),format:"html",set:!1,selection:!0}).each(c=>{const u=JB(e,c.content,r);YE(e,u,c),e.addVisual()})}},Gj=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{YC(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{YC(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{YC(e,r)},mceInsertContent:(n,o,r)=>{YC(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(Xx(e))}})},qj={"font-size":"size","font-family":"face"},Kj=il("font"),rY=(e,n,o)=>{const r=u=>R1(u,e).orThunk(()=>Kj(u)?Co(qj,e).bind(m=>dc(u,m)):L.none()),c=u=>kn(ee.fromDom(n),u);return V2(ee.fromDom(o),u=>r(u),c)},aY=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),cY=(e,n)=>L.from(to.DOM.getStyle(n,e,!0)),z6=e=>(n,o)=>L.from(o).map(ee.fromDom).filter(wo).bind(r=>rY(e,n,r.dom).or(cY(e,r.dom))).getOr(""),iY=z6("font-size"),Yj=R(aY,z6("font-family")),Qp=e=>Ir(e.getBody()).bind(n=>{const o=n.container();return L.from(Fe(o)?o.parentNode:o)}),WD=e=>L.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?L.none():L.from(e.selection.getStart(!0))}),DT=(e,n)=>WD(e).orThunk(Le(Qp,e)).map(ee.fromDom).filter(wo).bind(n),MT=(e,n)=>DT(e,is(L.some,n)),ZD=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=Jm(e),c=ld(e);return c.length>0?c[o-1]||n:r[o-1]||n}else return n}else return n},U6=e=>{const n=e.split(/\s*,\s*/);return Yt(n,o=>o.indexOf(" ")!==-1&&!(hs(o,'"')||hs(o,"'"))?`'${o}'`:o).join(",")},Xj=(e,n)=>{const o=ZD(e,n);e.formatter.toggle("fontname",{value:U6(o)}),e.nodeChanged()},Jj=e=>MT(e,n=>Yj(e.getBody(),n.dom)).getOr(""),Qj=(e,n)=>{e.formatter.toggle("fontsize",{value:ZD(e,n)}),e.nodeChanged()},eG=e=>MT(e,n=>iY(e.getBody(),n.dom)).getOr(""),tG=e=>MT(e,n=>{const o=ee.fromDom(e.getBody()),r=V2(n,u=>R1(u,"line-height"),Le(kn,o)),c=()=>{const u=parseFloat(os(n,"line-height")),m=parseFloat(os(n,"font-size"));return String(u/m)};return r.getOrThunk(c)}).getOr(""),nG=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},Wg=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,c)=>{n(o,{value:c})},BackColor:(o,r,c)=>{n("hilitecolor",{value:c})},FontName:(o,r,c)=>{Xj(e,c)},FontSize:(o,r,c)=>{Qj(e,c)},LineHeight:(o,r,c)=>{nG(e,c)},Lang:(o,r,c)=>{var u;n(o,{value:c.code,customValue:(u=c.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,c)=>{n(Q(c)?c:"p")},mceToggleFormat:(o,r,c)=>{n(c)}})},oG=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>Jj(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>eG(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>tG(e))},W6=e=>{Wg(e),oG(e)},sG=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},PT=e=>{e.editorCommands.addCommands({Indent:()=>{Gi(e)},Outdent:()=>{Fg(e)}}),e.editorCommands.addCommands({Outdent:()=>D_(e)},"state")},rG=e=>{const n=(o,r,c)=>{if(e.mode.isReadOnly())return;const u=Q(c)?{href:c}:c,m=e.dom.getParent(e.selection.getNode(),"a");Kt(u)&&Q(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!m||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,m))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},aG=(e,n,o,r)=>{const c=e.dom,u=v=>c.isBlock(v)&&v.parentElement===o,m=u(n)?n:c.getParent(r,u,o);return L.from(m).map(ee.fromDom)},Z6=(e,n)=>{if(e.mode.isReadOnly())return;const o=e.dom,r=e.selection.getRng(),c=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,m=FC(o,u);if(!m||!m.isContentEditable)return;const v=n?uo:Si,w=gr(e);aG(e,c,m,u).each(E=>{const M=MR(e,u,E.dom,m,!1,w);v(E,ee.fromDom(M)),e.selection.setCursorLocation(M,0),e.dispatch("NewBlock",{newBlock:M}),ui(e,"insertParagraph")})},j6=e=>Z6(e,!0),cG=e=>Z6(e,!1),iG=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{j6(e)},InsertNewBlockAfter:()=>{cG(e)}})},lG=e=>{e.editorCommands.addCommands({insertParagraph:()=>{rT(tW,e)},mceInsertNewLine:(n,o,r)=>{UC(e,r)},InsertLineBreak:(n,o,r)=>{rT(VI,e)}})},uG=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>ot(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Oe);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},jD=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{sP(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},dG=e=>{Zj(e),jj(e),sG(e),uG(e),Gj(e),rG(e),PT(e),iG(e),lG(e),W6(e),jD(e)},fG=["toggleview"],Ns=e=>Zt(fG,e.toLowerCase());class G6{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,c){const u=this.editor,m=n.toLowerCase(),v=c==null?void 0:c.skip_focus;if(u.removed||(m!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(m)&&!v?u.focus():YS(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const E=this.commands.exec[m];return se(E)?(E(m,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!Ns(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return se(r)?r(o):!1}queryCommandValue(n){if(!Ns(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return se(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;it(n,(c,u)=>{_e(u.toLowerCase().split(","),m=>{r[o][m]=c})})}addCommand(n,o,r){const c=n.toLowerCase();this.commands.exec[c]=(u,m,v)=>o.call(r??this.editor,m,v)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const mG=(e,n,o)=>{k1(e,n)&&!o?pm(e,n):o&&Nu(e,n)},XC=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},GD=(e,n)=>{e.dom.contentEditable="true"},qD=e=>{L.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},gG=e=>{e.selection.setRng(e.selection.getRng())},hG=(e,n)=>{XC(e,"StyleWithCSS",n),XC(e,"enableInlineTableEditing",n),XC(e,"enableObjectResizing",n)},pG=e=>{e.readonly=!0,e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),qD(e)},bG=(e,n)=>{e.readonly=!1,e.hasEditableRoot()&&GD(n),hG(e,!1),oP(e)&&e.focus(),gG(e),e.nodeChanged()},vG=(e,n)=>{const o=ee.fromDom(e.getBody());mG(o,"mce-content-readonly",n),n?(pG(e),e.hasEditableRoot()&&GD(o)):bG(e,o)},ov=e=>e.readonly,yG=e=>e.type==="click",CG=["copy"],sv=e=>Zt(CG,e.type),wu=(e,n)=>Iu(n,"a",r=>kn(r,ee.fromDom(e.getBody()))).bind(r=>dc(r,"href")),wG=(e,n)=>{if(yG(n)&&!at.metaKeyPressed(n)){const o=ee.fromDom(n.target);wu(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${gm(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else sv(n)&&e.dispatch(n.type,n)},xG=e=>{e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",n=>{ov(e)&&n.preventDefault()}),e.on("BeforeExecCommand",n=>{(n.command==="Undo"||n.command==="Redo")&&ov(e)&&n.preventDefault()}),e.on("input",n=>{if(!n.isComposing&&ov(e)){const o=e.undoManager.add();De(o)&&e.undoManager.undo()}}),e.on("compositionend",()=>{if(ov(e)){const n=e.undoManager.add();De(n)&&e.undoManager.undo()}})},SG=We.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class KD{static isNative(n){return!!SG[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Ne}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),c=uf(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let m=0,v=u.length;m<v;m++){const w=u[m];if(!w.removed){if(w.once&&this.off(r,w.func),c.isImmediatePropagationStopped())return c;if(w.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(n,o,r,c){if(o===!1&&(o=Ne),o){const u={func:o,removed:!1};c&&We.extend(u,c);const m=n.toLowerCase().split(" ");let v=m.length;for(;v--;){const w=m[v];let E=this.bindings[w];E||(E=[],this.toggleEvent(w,!0)),r?E=[u,...E]:E=[...E,u],this.bindings[w]=E}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let m=this.bindings[u];if(!u)return it(this.bindings,(v,w)=>{this.toggleEvent(w,!1),delete this.bindings[w]}),this;if(m){if(!o)m.length=0;else{const v=Or(m,w=>w.func===o);m=v.fail,this.bindings[u]=m,_e(v.pass,w=>{w.removed=!0})}m.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else it(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const JC=e=>(e._eventDispatcher||(e._eventDispatcher=new KD({scope:e,toggleEvent:(n,o)=>{KD.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),YD={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return uf(e.toLowerCase(),n??{},r);const c=JC(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,n,o){return JC(this).on(e,n,o)},off(e,n){return JC(this).off(e,n)},once(e,n){return JC(this).once(e,n)},hasEventListeners(e){return JC(this).has(e)}},NT=to.DOM;let e1;const BT=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=Br(e);return o?(e.eventRoot||(e.eventRoot=NT.select(o)[0]),e.eventRoot):e.getBody()},lY=e=>!e.hidden,q6=(e,n,o)=>{lY(e)?e.dispatch(n,o):ov(e)&&wG(e,o)},K6=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=BT(e,n);if(Br(e)){if(e1||(e1={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||e1&&(it(e1,(c,u)=>{e.dom.unbind(BT(e,u))}),e1=null)})),e1[n])return;const r=c=>{const u=c.target,m=e.editorManager.get();let v=m.length;for(;v--;){const w=m[v].getBody();(w===u||NT.isChildOf(u,w))&&q6(m[v],n,c)}};e1[n]=r,NT.bind(o,n,r)}else{const r=c=>{q6(e,n,c)};NT.bind(o,n,r),e.delegates[n]=r}},Y6={...YD,bindPendingEventDelegates(){const e=this;We.each(e._pendingNativeEvents,n=>{K6(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?K6(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(BT(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(it(e.delegates,(r,c)=>{e.dom.unbind(BT(e,c),c,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},EG=e=>Q(e)?{value:e.split(/[ ,]/),valid:!0}:jn(e,Q)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},_G=e=>{const n=(()=>{switch(e){case"array":return ln;case"boolean":return rn;case"function":return se;case"number":return fa;case"object":return Kt;case"string":return Q;case"string[]":return EG;case"object[]":return o=>jn(o,Kt);case"regexp":return o=>En(o,RegExp);default:return dt}})();return o=>XD(o,n,`The value must be a ${e}.`)},TG=e=>Q(e.processor),X6=(e,n)=>{const o=$a(n.message)?"":`. ${n.message}`;return e+o},J6=e=>e.valid,XD=(e,n,o="")=>{const r=n(e);return rn(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},kG=(e,n,o)=>{if(!Go(n)){const r=XD(n,o);if(J6(r))return r.value;console.error(X6(`Invalid default value passed for the "${e}" option`,r))}},OG=(e,n,o=n)=>{const r={},c={},u=(U,G,W)=>{const K=XD(G,W);return J6(K)?(c[U]=K.value,!0):(console.warn(X6(`Invalid value passed for the ${U} option`,K)),!1)},m=(U,G)=>{const W=TG(G)?_G(G.processor):G.processor,K=kG(U,G.default,W);r[U]={...G,default:K,processor:W},Co(c,U).orThunk(()=>Co(n,U)).each(re=>u(U,re,W))},v=U=>It(r,U);return{register:m,isRegistered:v,get:U=>Co(c,U).orThunk(()=>Co(r,U).map(G=>G.default)).getOrUndefined(),set:(U,G)=>{if(v(U)){const W=r[U];return W.immutable?(console.error(`"${U}" is an immutable option and cannot be updated`),!1):u(U,G,W.processor)}else return console.warn(`"${U}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:U=>{const G=v(U);return G&&delete c[U],G},isSet:U=>It(c,U),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(U,G)=>rn(G)||fa(G)||Q(G)||oe(G)||ln(G)||$o(G)?G:Object.prototype.toString.call(G))))}catch(U){console.error(U)}}}},AG=["design","readonly"],Q6=(e,n,o,r)=>{const c=o[n.get()],u=o[r];try{u.activate()}catch(m){console.error(`problem while activating editor mode ${r}:`,m);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&vG(e,u.editorReadOnly),n.set(r),P4(e,r)},RG=(e,n,o,r)=>{if(r!==o.get()){if(!It(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?Q6(e,o,n,r):e.on("init",()=>Q6(e,o,n,r))}},DG=(e,n,o)=>{if(Zt(AG,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},MG=e=>{const n=mo("design"),o=mo({design:{activate:Dt,deactivate:Dt,editorReadOnly:!1},readonly:{activate:Dt,deactivate:Dt,editorReadOnly:!0}});return xG(e),{isReadOnly:()=>ov(e),set:r=>RG(e,o.get(),n,r),get:()=>n.get(),register:(r,c)=>{o.set(DG(o.get(),r,c))}}},JD=We.each,QD=We.explode,PG={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},eL=We.makeMap("alt,ctrl,shift,meta,access"),NG=e=>e in eL,BG=e=>{const n={},o=Jt.os.isMacOS()||Jt.os.isiOS();JD(QD(e.toLowerCase(),"+"),u=>{NG(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=PG[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let c;for(c in eL)n[c]?r.push(c):n[c]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class tL{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(JD(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,c){const u=this,m=u.normalizeCommandFunc(r);return JD(QD(We.trim(n)),v=>{const w=u.createShortcut(v,o,m,c);u.shortcuts[w.id]=w}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:We.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,c){const u=We.map(QD(n,">"),BG);return u[u.length-1]=We.extend(u[u.length-1],{func:r,scope:c||this.editor}),We.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const nL=()=>{const e={},n={},o={},r={},c={},u={},m={},v={},w={},E=(B,U)=>(G,W)=>{B[G.toLowerCase()]={...W,type:U}},M=(B,U)=>r[B.toLowerCase()]=U,N=(B,U)=>m[B.toLowerCase()]=U;return{addButton:E(e,"button"),addGroupToolbarButton:E(e,"grouptoolbarbutton"),addToggleButton:E(e,"togglebutton"),addMenuButton:E(e,"menubutton"),addSplitButton:E(e,"splitbutton"),addMenuItem:E(n,"menuitem"),addNestedMenuItem:E(n,"nestedmenuitem"),addToggleMenuItem:E(n,"togglemenuitem"),addAutocompleter:E(o,"autocompleter"),addContextMenu:E(c,"contextmenu"),addContextToolbar:E(u,"contexttoolbar"),addContextForm:E(u,"contextform"),addSidebar:E(v,"sidebar"),addView:E(w,"views"),addIcon:M,addContext:N,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:v,views:w,contexts:m})}},$G=()=>{const e=nL();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},t1=to.DOM,oL=We.extend,IG=We.each;class $T{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,oL(this,Y6);const c=this;this.id=n,this.hidden=!1;const u=nY(r.defaultOptions,o);this.options=OG(c,u,o),Nx(c);const m=this.options.get;m("deprecation_warnings")&&gV(o,u);const v=m("suffix");v&&(r.suffix=v),this.suffix=r.suffix;const w=m("base_url");w&&r._setBaseUrl(w),this.baseUri=r.baseURI;const E=Hh(c);E&&(pl.ScriptLoader._setReferrerPolicy(E),to.DOM.styleSheetLoader._setReferrerPolicy(E));const M=jx(c);De(M)&&to.DOM.styleSheetLoader._setContentCssCors(M),Nr.languageLoad=m("language_load"),Nr.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Dl(Bx(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Of(c),this.hasVisual=By(c),this.shortcuts=new tL(this),this.editorCommands=new G6(this),dG(this);const N=m("cache_suffix");N&&(Jt.cacheSuffix=N.replace(/^[\?\&]+/,"")),this.ui={registry:$G(),styleSheetLoader:void 0,show:Dt,hide:Dt,setEnabled:Dt,isEnabled:dt},this.mode=MG(c),r.dispatch("SetupEditor",{editor:this});const B=o4(c);se(B)&&B.call(c,c)}render(){$j(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return h0(this)}translate(n){return Di.translate(n)}getParam(n,o,r){const c=this.options;return c.isRegistered(n)||(De(r)?c.register(n,{processor:r,default:o}):c.register(n,{processor:dt,default:o})),!c.isSet(n)&&!Go(o)?o:c.get(n)}hasPlugin(n,o){return Zt(Zh(this),n)?o?R0.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,c){this.shortcuts.add(n,o,r,c)}execCommand(n,o,r,c){return this.editorCommands.execCommand(n,o,r,c)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(t1.show(n.getContainer()),t1.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(t1.hide(n.getContainer()),t1.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const c={...n,load:!0},u=Oo(r)?r.value:r.innerHTML,m=o.setContent(u,c);return c.no_events||o.dispatch("LoadContent",{...c,element:r}),m}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...n,save:!0,element:r};let u=o.getContent(c);const m={...c,content:u};if(m.no_events||o.dispatch("SaveContent",m),m.format==="raw"&&o.dispatch("RawSaveContent",m),u=m.content,Oo(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const v=t1.getParent(o.id,"form");v&&IG(v.elements,w=>w.name===o.id?(w.value=u,!1):!0)}return m.element=c.element=r=null,m.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return KA(this,n,o)}getContent(n){return r_(this,n)}insertContent(n,o){o&&(n=oL({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?KA(this,this.startContent,{format:"raw"}):KA(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||t1.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=t1.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const c=this,u=c.options.get,m=r4(c);if(se(m))return m.call(c,n,r,!0,o);if(!u("convert_urls")||r==="link"||Kt(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const v=new Dl(n);return v.protocol!=="http"&&v.protocol!=="https"&&v.protocol!==""?n:u("relative_urls")?c.documentBaseURI.toRelative(n):(n=c.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){Uj(this,n)}setEditableRoot(n){FD(this,n)}hasEditableRoot(){return Ij(this)}remove(){bV(this)}destroy(n){vV(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const rv=to.DOM,IT=We.each;let sL=!1,QC,nc=[];const FT=e=>{const n=e.type;IT(Zg.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},rL=e=>{if(e!==sL){const n=to.DOM;e?(n.bind(window,"resize",FT),n.bind(window,"scroll",FT)):(n.unbind(window,"resize",FT),n.unbind(window,"scroll",FT)),sL=e}},aL=e=>{const n=nc;return nc=Pt(nc,o=>e!==o),Zg.activeEditor===e&&(Zg.activeEditor=nc.length>0?nc[0]:null),Zg.focusedEditor===e&&(Zg.focusedEditor=null),n.length!==nc.length},FG=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(aL(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},LG=document.compatMode!=="CSS1Compat",Zg={...YD,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"5.1",releaseDate:"TBD",i18n:Di,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=Dl.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)n=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let m=0;m<u.length;m++){const v=u[m].src||"";if(v==="")continue;const w=v.substring(v.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(v)){w.indexOf(".min")!==-1&&(o=".min"),n=v.substring(0,v.lastIndexOf("/"));break}}if(!n&&document.currentScript){const m=document.currentScript.src;m.indexOf(".min")!==-1&&(o=".min"),n=m.substring(0,m.lastIndexOf("/"))}}e.baseURL=new Dl(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new Dl(e.baseURL),e.suffix=o,r8(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&it(r,(c,u)=>{Nr.PluginManager.urls[u]=c})},init(e){const n=this;let o;const r=We.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(M,N)=>M.inline&&N.tagName.toLowerCase()in r,u=M=>{let N=M.id;return N||(N=Co(M,"name").filter(B=>!rv.get(B)).getOrThunk(rv.uniqueId),M.setAttribute("id",N)),N},m=M=>{const N=e[M];if(N)return N.apply(n,[])},v=M=>Jt.browser.isIE()||Jt.browser.isEdge()?(u_("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):LG?(u_("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Q(M.selector)?rv.select(M.selector):De(M.target)?[M.target]:[];let w=M=>{o=M};const E=()=>{let M=0;const N=[];let B;const U=(G,W,K)=>{const ne=new $T(G,W,n);N.push(ne),ne.on("init",()=>{++M===B.length&&w(N)}),ne.targetElm=ne.targetElm||K,ne.render()};rv.unbind(window,"ready",E),m("onpageload"),B=Xg(v(e)),We.each(B,G=>{FG(n.get(G.id))}),B=We.grep(B,G=>!n.get(G.id)),B.length===0?w([]):IT(B,G=>{c(e,G)?u_("Could not initialize inline editor on invalid inline target element",G):U(u(G),e,G)})};return rv.bind(window,"ready",E),new Promise(M=>{o?M(o):w=N=>{M(N)}})},get(e){return arguments.length===0?nc.slice(0):Q(e)?us(nc,n=>n.id===e).getOr(null):fa(e)&&nc[e]?nc[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&nc.push(e),rL(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),QC||(QC=r=>{const c=n.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",QC))),e},createEditor(e,n){return this.add(new $T(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=nc.length-1;r>=0;r--)n.remove(nc[r]);return}if(Q(e)){IT(rv.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,oe(n.get(o.id))?null:(aL(o)&&n.dispatch("RemoveEditor",{editor:o}),nc.length===0&&window.removeEventListener("beforeunload",QC),o.remove(),rL(nc.length>0),o)},execCommand(e,n,o){var r;const c=this,u=Kt(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!c.get(u)){const m=o.options;new $T(u,m,c).render()}return!0}case"mceRemoveEditor":{const m=c.get(u);return m&&m.remove(),!0}case"mceToggleEditor":{const m=c.get(u);return m?(m.isHidden()?m.show():m.hide(),!0):(c.execCommand("mceAddEditor",!1,o),!0)}}return c.activeEditor?c.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{IT(nc,e=>{e.save()})},addI18n:(e,n)=>{Di.add(e,n)},translate:e=>Di.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Dl(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Dl(this.baseURL)}};Zg.setup();const cL=(()=>{const e=Qs(),n=u=>({items:u,types:zr(u),getType:m=>Co(u,m).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:c}})(),HG=Math.min,n1=Math.max,LT=Math.round,eM=(e,n,o)=>{let r=n.x,c=n.y;const u=e.w,m=e.h,v=n.w,w=n.h,E=(o||"").split("");return E[0]==="b"&&(c+=w),E[1]==="r"&&(r+=v),E[0]==="c"&&(c+=LT(w/2)),E[1]==="c"&&(r+=LT(v/2)),E[3]==="b"&&(c-=m),E[4]==="r"&&(r-=u),E[3]==="c"&&(c-=LT(m/2)),E[4]==="c"&&(r-=LT(u/2)),av(r,c,u,m)},VG=(e,n,o,r)=>{for(let c=0;c<r.length;c++){const u=eM(e,n,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},zG=(e,n,o)=>av(e.x-n,e.y-o,e.w+n*2,e.h+o*2),UG=(e,n)=>{const o=n1(e.x,n.x),r=n1(e.y,n.y),c=HG(e.x+e.w,n.x+n.w),u=HG(e.y+e.h,n.y+n.h);return c-o<0||u-r<0?null:av(o,r,c-o,u-r)},WG=(e,n,o)=>{let r=e.x,c=e.y,u=e.x+e.w,m=e.y+e.h;const v=n.x+n.w,w=n.y+n.h,E=n1(0,n.x-r),M=n1(0,n.y-c),N=n1(0,u-v),B=n1(0,m-w);return r+=E,c+=M,o&&(u+=E,m+=M,r-=N,c-=B),u-=N,m-=B,av(r,c,u-r,m-c)},av=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),tM={inflate:zG,relativePosition:eM,findBestRelativePosition:VG,intersect:UG,clamp:WG,create:av,fromClientRect:e=>av(e.left,e.top,e.width,e.height)},nM=(e,n,o=1e3)=>{let r=!1,c=null;const u=E=>(...M)=>{r||(r=!0,c!==null&&(clearTimeout(c),c=null),E.apply(null,M))},m=u(e),v=u(n);return{start:(...E)=>{!r&&c===null&&(c=setTimeout(()=>v.apply(null,E),o))},resolve:m,reject:v}},iL=(()=>{const e={},n={},o={};return{load:(w,E)=>{const M=`Script at URL "${E}" failed to load`,N=`Script at URL "${E}" did not call \`tinymce.Resource.add('${w}', data)\` within 1 second`;if(e[w]!==void 0)return e[w];{const B=new Promise((U,G)=>{const W=nM(U,G);n[w]=W.resolve,pl.ScriptLoader.loadScript(E).then(()=>W.start(N),()=>W.reject(M))});return e[w]=B,B}},add:(w,E)=>{n[w]!==void 0&&(n[w](E),delete n[w]),e[w]=Promise.resolve(E),o[w]=E},has:w=>w in o,get:w=>o[w],unload:w=>{delete e[w],delete o[w]}}})(),ZG=()=>(()=>{let e={},n=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{n.push(r),e[r]=String(c)},key:r=>n[r],removeItem:r=>{n=n.filter(c=>c===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let ew;try{const e="__storage_test__";ew=window.localStorage,ew.setItem(e,e),ew.removeItem(e)}catch{ew=ZG()}var jG=ew;const GG={geom:{Rect:tM},util:{Delay:ni,Tools:We,VK:at,URI:Dl,EventDispatcher:KD,Observable:YD,I18n:Di,LocalStorage:jG,ImageUploader:n3},dom:{EventUtils:df,TreeWalker:Ts,TextSeeker:gf,DOMUtils:to,ScriptLoader:pl,RangeUtils:Pe,Serializer:GA,StyleSheetLoader:Uu,ControlSelection:y2,BookmarkManager:Uf,Selection:n5,Event:df.Event},html:{Styles:Ku,Entities:ju,Node:Aa,Schema:zn,DomParser:Mp,Writer:dO,Serializer:bg},Env:Jt,AddOnManager:Nr,Annotator:$i,Formatter:x5,UndoManager:a3,EditorCommands:G6,WindowManager:JA,NotificationManager:m5,EditorObservable:Y6,Shortcuts:tL,Editor:$T,FocusManager:tO,EditorManager:Zg,DOM:to.DOM,ScriptLoader:pl.ScriptLoader,PluginManager:R0,ThemeManager:hu,ModelManager:A0,IconManager:O0,Resource:iL,FakeClipboard:cL,trim:We.trim,isArray:We.isArray,is:We.is,toArray:We.toArray,makeMap:We.makeMap,each:We.each,map:We.map,grep:We.grep,inArray:We.inArray,extend:We.extend,walk:We.walk,resolve:We.resolve,explode:We.explode,_addCacheSuffix:We._addCacheSuffix},lL=We.extend(Zg,GG),qG=e=>{try{b.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(lL),qG(lL)})()})(Dee);tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){const b=Object.getPrototypeOf,x=(t,s,a)=>{var i;return a(t,s.prototype)?!0:((i=t.constructor)===null||i===void 0?void 0:i.name)===s.name},k=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&x(t,String,(a,i)=>i.isPrototypeOf(a))?"string":s},D=t=>s=>k(s)===t,$=t=>s=>typeof s===t,H=t=>s=>t===s,Z=(t,s)=>ge(t)&&x(t,s,(a,i)=>b(a)===i),J=D("string"),ge=D("object"),Re=t=>Z(t,Object),Be=D("array"),pt=H(null),Xt=$("boolean"),bn=H(void 0),Ht=t=>t==null,Vt=t=>!Ht(t),Se=$("function"),sn=$("number"),En=(t,s)=>{if(Be(t)){for(let a=0,i=t.length;a<i;++a)if(!s(t[a]))return!1;return!0}return!1},Q=()=>{},Kt=t=>()=>t(),$o=(t,s)=>(...a)=>t(s.apply(null,a)),ln=(t,s)=>a=>t(s(a)),oe=t=>()=>t,rn=t=>t,Go=(t,s)=>t===s;function An(t,...s){return(...a)=>{const i=s.concat(a);return t.apply(null,i)}}const De=t=>s=>!t(s),se=t=>()=>{throw new Error(t)},fa=t=>t(),jn=oe(!1),Dt=oe(!0);class R{constructor(s,a){this.tag=s,this.value=a}static some(s){return new R(!0,s)}static none(){return R.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?R.some(s(this.value)):R.none()}bind(s){return this.tag?s(this.value):R.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:R.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return Vt(s)?R.some(s):R.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}R.singletonNone=new R(!1);const is=Array.prototype.slice,Je=Array.prototype.indexOf,qo=Array.prototype.push,Gt=(t,s)=>Je.call(t,s),Le=(t,s)=>{const a=Gt(t,s);return a===-1?R.none():R.some(a)},Io=(t,s)=>Gt(t,s)>-1,ma=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return!0}return!1},ls=(t,s)=>{const a=[];for(let i=0;i<t;i++)a.push(s(i));return a},ta=(t,s)=>{const a=[];for(let i=0;i<t.length;i+=s){const d=is.call(t,i,i+s);a.push(d)}return a},Ne=(t,s)=>{const a=t.length,i=new Array(a);for(let d=0;d<a;d++){const g=t[d];i[d]=s(g,d)}return i},dt=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];s(d,a)}},L=(t,s)=>{for(let a=t.length-1;a>=0;a--){const i=t[a];s(i,a)}},um=(t,s)=>{const a=[],i=[];for(let d=0,g=t.length;d<g;d++){const h=t[d];(s(h,d)?a:i).push(h)}return{pass:a,fail:i}},yo=(t,s)=>{const a=[];for(let i=0,d=t.length;i<d;i++){const g=t[i];s(g,i)&&a.push(g)}return a},_s=(t,s,a)=>(L(t,(i,d)=>{a=s(a,i,d)}),a),So=(t,s,a)=>(dt(t,(i,d)=>{a=s(a,i,d)}),a),tk=(t,s,a)=>{for(let i=0,d=t.length;i<d;i++){const g=t[i];if(s(g,i))return R.some(g);if(a(g,i))break}return R.none()},Zt=(t,s)=>tk(t,s,jn),ho=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return R.some(a)}return R.none()},Yt=t=>{const s=[];for(let a=0,i=t.length;a<i;++a){if(!Be(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);qo.apply(s,t[a])}return s},_e=(t,s)=>Yt(Ne(t,s)),Tu=(t,s)=>{for(let a=0,i=t.length;a<i;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},Or=t=>{const s=is.call(t,0);return s.reverse(),s},Pt=(t,s)=>yo(t,a=>!Io(s,a)),Pd=(t,s)=>{const a={};for(let i=0,d=t.length;i<d;i++){const g=t[i];a[String(g)]=s(g,i)}return a},Ko=t=>[t],Yg=(t,s)=>{const a=is.call(t,0);return a.sort(s),a},us=(t,s)=>s>=0&&s<t.length?R.some(t[s]):R.none(),ga=t=>us(t,0),d1=t=>us(t,t.length-1),ic=Se(Array.from)?Array.from:t=>is.call(t),ir=(t,s)=>{for(let a=0;a<t.length;a++){const i=s(t[a],a);if(i.isSome())return i}return R.none()},Fo=Object.keys,f1=Object.hasOwnProperty,Bs=(t,s)=>{const a=Fo(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],h=t[g];s(h,g)}},Lo=(t,s)=>dm(t,(a,i)=>({k:i,v:s(a,i)})),dm=(t,s)=>{const a={};return Bs(t,(i,d)=>{const g=s(i,d);a[g.k]=g.v}),a},Ar=t=>(s,a)=>{t[a]=s},Hl=(t,s,a,i)=>{Bs(t,(d,g)=>{(s(d,g)?a:i)(d,g)})},ha=(t,s)=>{const a={},i={};return Hl(t,s,Ar(a),Ar(i)),{t:a,f:i}},Nd=(t,s)=>{const a={};return Hl(t,s,Ar(a),Q),a},Xg=(t,s)=>{const a=[];return Bs(t,(i,d)=>{a.push(s(i,d))}),a},zr=(t,s)=>{const a=Fo(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],h=t[g];if(s(h,g,t))return R.some(h)}return R.none()},mv=t=>Xg(t,rn),it=(t,s)=>Vn(t,s)?R.from(t[s]):R.none(),Vn=(t,s)=>f1.call(t,s),lc=(t,s)=>Vn(t,s)&&t[s]!==void 0&&t[s]!==null,Na=(t,s,a=Go)=>t.exists(i=>a(i,s)),m1=(t,s,a=Go)=>ku(t,s,a).getOr(t.isNone()&&s.isNone()),Bd=t=>{const s=[],a=i=>{s.push(i)};for(let i=0;i<t.length;i++)t[i].each(a);return s},To=t=>{const s=[];for(let a=0;a<t.length;a++){const i=t[a];if(i.isSome())s.push(i.getOrDie());else return R.none()}return R.some(s)},ku=(t,s,a)=>t.isSome()&&s.isSome()?R.some(a(t.getOrDie(),s.getOrDie())):R.none(),fm=(t,s,a,i)=>t.isSome()&&s.isSome()&&a.isSome()?R.some(i(t.getOrDie(),s.getOrDie(),a.getOrDie())):R.none(),Co=(t,s)=>t!=null?R.some(s(t)):R.none(),It=(t,s)=>t?R.some(s):R.none(),pa=(t,s)=>t+s,$d=(t,s)=>t.substring(s),g1=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,gv=(t,s)=>gs(t,s)?$d(t,s.length):t,na=(t,s)=>ol(t,s)?t:pa(t,s),Rr=(t,s,a=0,i)=>{const d=t.indexOf(s,a);return d!==-1?bn(i)?!0:d+s.length<=i:!1},gs=(t,s)=>g1(t,s,0),ol=(t,s)=>g1(t,s,t.length-s.length),Vl=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),Ba=t=>t.length>0,Mo=t=>!Ba(t),Bc=t=>t.style!==void 0&&Se(t.style.getPropertyValue),sl=(t,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||i.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return zl(i.childNodes[0])},nk=(t,s)=>{const i=(s||document).createElement(t);return zl(i)},ok=(t,s)=>{const i=(s||document).createTextNode(t);return zl(i)},zl=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},ue={fromHtml:sl,fromTag:nk,fromText:ok,fromDom:zl,fromPoint:(t,s,a)=>R.from(t.dom.elementFromPoint(s,a)).map(zl)},ba=typeof window<"u"?window:Function("return this;")(),mm=(t,s)=>{let a=s??ba;for(let i=0;i<t.length&&a!==void 0&&a!==null;++i)a=a[t[i]];return a},mw=(t,s)=>{const a=t.split(".");return mm(a,s)},hv=(t,s)=>mw(t,s),Eo=(t,s)=>{const a=hv(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},pv=Object.getPrototypeOf,sk=t=>Eo("HTMLElement",t),Jg=t=>{const s=mw("ownerDocument.defaultView",t);return ge(t)&&(sk(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(pv(t).constructor.name))},gm=9,br=11,hs=1,Ul=3,$c=t=>t.dom.nodeName.toLowerCase(),Id=t=>t.dom.nodeType,Qg=t=>s=>Id(s)===t,hm=t=>oo(t)&&Jg(t.dom),oo=Qg(hs),$a=Qg(Ul),rk=Qg(gm),Fd=Qg(br),Ou=t=>s=>oo(s)&&$c(s)===t,oa=(t,s)=>{const a=t.dom;if(a.nodeType!==hs)return!1;{const i=a;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Yo=t=>t.nodeType!==hs&&t.nodeType!==gm&&t.nodeType!==br||t.childElementCount===0,ak=(t,s)=>{const a=s===void 0?document:s.dom;return Yo(a)?[]:Ne(a.querySelectorAll(t),ue.fromDom)},bv=(t,s)=>{const a=s===void 0?document:s.dom;return Yo(a)?R.none():R.from(a.querySelector(t)).map(ue.fromDom)},qn=(t,s)=>t.dom===s.dom,Ia=(t,s)=>{const a=t.dom,i=s.dom;return a===i?!1:a.contains(i)},Fa=t=>ue.fromDom(t.dom.ownerDocument),vr=t=>rk(t)?t:Fa(t),p1=t=>ue.fromDom(vr(t).dom.documentElement),Ld=t=>ue.fromDom(vr(t).dom.defaultView),Ic=t=>R.from(t.dom.parentNode).map(ue.fromDom),Hd=t=>Ic(t),pi=t=>R.from(t.dom.parentElement).map(ue.fromDom),gw=(t,s)=>{const a=Se(s)?s:jn;let i=t.dom;const d=[];for(;i.parentNode!==null&&i.parentNode!==void 0;){const g=i.parentNode,h=ue.fromDom(g);if(d.push(h),a(h)===!0)break;i=g}return d},vv=t=>R.from(t.dom.offsetParent).map(ue.fromDom),hw=t=>R.from(t.dom.nextSibling).map(ue.fromDom),Fc=t=>Ne(t.dom.childNodes,ue.fromDom),Au=(t,s)=>{const a=t.dom.childNodes;return R.from(a[s]).map(ue.fromDom)},b1=t=>Au(t,0),v1=(t,s)=>({element:t,offset:s}),yv=(t,s)=>{const a=Fc(t);return a.length>0&&s<a.length?v1(a[s],0):v1(t,s)},Cv=t=>Fd(t)&&Vt(t.dom.host),lr=t=>ue.fromDom(t.dom.getRootNode()),Vd=t=>Cv(t)?t:ue.fromDom(vr(t).dom.body),La=t=>Wl(t).isSome(),Wl=t=>{const s=lr(t);return Cv(s)?R.some(s):R.none()},pw=t=>ue.fromDom(t.dom.host),ck=t=>{if(Vt(t.target)){const s=ue.fromDom(t.target);if(oo(s)&&rl(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return ga(a)}}return R.from(t.target)},rl=t=>Vt(t.dom.shadowRoot),uc=t=>{const s=$a(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return Wl(ue.fromDom(s)).fold(()=>a.body.contains(s),ln(uc,pw))},bi=()=>al(ue.fromDom(document)),al=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return ue.fromDom(s)},vi=(t,s,a)=>{if(J(a)||Xt(a)||sn(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},Nt=(t,s,a)=>{vi(t.dom,s,a)},bw=(t,s)=>{const a=t.dom;Bs(s,(i,d)=>{vi(a,d,i)})},Jt=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},Ho=(t,s)=>R.from(Jt(t,s)),wv=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},Po=(t,s)=>{t.dom.removeAttribute(s)},ik=t=>So(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),xv=(t,s,a)=>{if(!J(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);Bc(t)&&t.style.setProperty(s,a)},Sv=(t,s)=>{Bc(t)&&t.style.removeProperty(s)},Wt=(t,s,a)=>{const i=t.dom;xv(i,s,a)},Zl=(t,s)=>{const a=t.dom;Bs(s,(i,d)=>{xv(a,d,i)})},Lc=(t,s)=>{const a=t.dom;Bs(s,(i,d)=>{i.fold(()=>{Sv(a,d)},g=>{xv(a,d,g)})})},Dr=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!uc(t)?We(a,s):d},We=(t,s)=>Bc(t)?t.style.getPropertyValue(s):"",Xo=(t,s)=>{const a=t.dom,i=We(a,s);return R.from(i).filter(d=>d.length>0)},Ev=t=>{const s={},a=t.dom;if(Bc(a))for(let i=0;i<a.style.length;i++){const d=a.style.item(i);s[d]=a.style[d]}return s},vw=(t,s,a)=>{const i=ue.fromTag(t);return Wt(i,s,a),Xo(i,s).isSome()},Qt=(t,s)=>{const a=t.dom;Sv(a,s),Na(Ho(t,"style").map(Vl),"")&&Po(t,"style")},zd=t=>t.dom.offsetWidth,yi=(t,s)=>{const a=(C,S)=>{if(!sn(S)&&!S.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+S);const T=C.dom;Bc(T)&&(T.style[t]=S+"px")},i=C=>{const S=s(C);if(S<=0||S===null){const T=Dr(C,t);return parseFloat(T)||0}return S},d=i,g=(C,S)=>So(S,(T,O)=>{const P=Dr(C,O),F=P===void 0?0:parseInt(P,10);return isNaN(F)?T:T+F},0);return{set:a,get:i,getOuter:d,aggregate:g,max:(C,S,T)=>{const O=g(C,T);return S>O?S-O:0}}},Ys=yi("height",t=>{const s=t.dom;return uc(t)?s.getBoundingClientRect().height:s.offsetHeight}),ps=t=>Ys.get(t),cl=t=>Ys.getOuter(t),lk=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=Ys.max(t,s,a);Wt(t,"max-height",i+"px")},y1=(t,s)=>({left:t,top:s,translate:(i,d)=>y1(t+i,s+d)}),No=y1,yw=t=>{const s=t.getBoundingClientRect();return No(s.left,s.top)},C1=(t,s)=>t!==void 0?t:s!==void 0?s:0,Vo=t=>{const s=t.dom.ownerDocument,a=s.body,i=s.defaultView,d=s.documentElement;if(a===t.dom)return No(a.offsetLeft,a.offsetTop);const g=C1(i==null?void 0:i.pageYOffset,d.scrollTop),h=C1(i==null?void 0:i.pageXOffset,d.scrollLeft),C=C1(d.clientTop,a.clientTop),S=C1(d.clientLeft,a.clientLeft);return Ru(t).translate(h-S,g-C)},Ru=t=>{const s=t.dom,i=s.ownerDocument.body;return i===s?No(i.offsetLeft,i.offsetTop):uc(t)?yw(s):No(0,0)},Du=yi("width",t=>t.dom.offsetWidth),w1=(t,s)=>Du.set(t,s),sa=t=>Du.get(t),Tn=t=>Du.getOuter(t),Cw=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=Du.max(t,s,a);Wt(t,"max-width",i+"px")},ra=t=>{let s=!1,a;return(...i)=>(s||(s=!0,a=t.apply(null,i)),a)},ww=(t,s,a,i)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,g=t.isiOS()&&!d,h=t.isiOS()||t.isAndroid(),C=h||i("(pointer:coarse)"),S=d||!g&&h&&i("(min-device-width:768px)"),T=g||h&&!S,O=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,P=!T&&!S&&!O;return{isiPad:oe(d),isiPhone:oe(g),isTablet:oe(S),isPhone:oe(T),isTouch:oe(C),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:oe(O),isDesktop:oe(P)}},x1=(t,s)=>{for(let a=0;a<t.length;a++){const i=t[a];if(i.test(s))return i}},wo=(t,s)=>{const a=x1(t,s);if(!a)return{major:0,minor:0};const i=d=>Number(s.replace(a,"$"+d));return S1(i(1),i(2))},Xs=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?Mu():wo(t,a)},Mu=()=>S1(0,0),S1=(t,s)=>({major:t,minor:s}),il={nu:S1,detect:Xs,unknown:Mu},Ci=(t,s)=>ir(s.brands,a=>{const i=a.brand.toLowerCase();return Zt(t,d=>{var g;return i===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:il.nu(parseInt(a.version,10),0)}))}),ur=(t,s)=>{const a=String(s).toLowerCase();return Zt(t,i=>i.search(a))},Ur=(t,s)=>ur(t,s).map(a=>{const i=il.detect(a.versionRegexes,s);return{current:a.name,version:i}}),aa=(t,s)=>ur(t,s).map(a=>{const i=il.detect(a.versionRegexes,s);return{current:a.name,version:i}}),dc=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,fc=t=>s=>Rr(s,t),$s=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Rr(t,"edge/")&&Rr(t,"chrome")&&Rr(t,"safari")&&Rr(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,dc],search:t=>Rr(t,"chrome")&&!Rr(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Rr(t,"msie")||Rr(t,"trident")},{name:"Opera",versionRegexes:[dc,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:fc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:fc("firefox")},{name:"Safari",versionRegexes:[dc,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Rr(t,"safari")||Rr(t,"mobile/"))&&Rr(t,"applewebkit")}],eh=[{name:"Windows",search:fc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Rr(t,"iphone")||Rr(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:fc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:fc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:fc("linux"),versionRegexes:[]},{name:"Solaris",search:fc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:fc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:fc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],E1={browsers:oe($s),oses:oe(eh)},Ud="Edge",_1="Chromium",xw="IE",Wd="Opera",Pu="Firefox",th="Safari",va=()=>_v({current:void 0,version:il.unknown()}),_v=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isEdge:i(Ud),isChromium:i(_1),isIE:i(xw),isOpera:i(Wd),isFirefox:i(Pu),isSafari:i(th)}},Nu={unknown:va,nu:_v,edge:oe(Ud),chromium:oe(_1),ie:oe(xw),opera:oe(Wd),firefox:oe(Pu),safari:oe(th)},T1="Windows",pm="iOS",Tv="Android",k1="Linux",bm="macOS",Sw="Solaris",Ew="FreeBSD",vm="ChromeOS",kM=()=>ee({current:void 0,version:il.unknown()}),ee=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isWindows:i(T1),isiOS:i(pm),isAndroid:i(Tv),isMacOS:i(bm),isLinux:i(k1),isSolaris:i(Sw),isFreeBSD:i(Ew),isChromeOS:i(vm)}},nh={unknown:kM,nu:ee,windows:oe(T1),ios:oe(pm),android:oe(Tv),linux:oe(k1),macos:oe(bm),solaris:oe(Sw),freebsd:oe(Ew),chromeos:oe(vm)},_w={detect:(t,s,a)=>{const i=E1.browsers(),d=E1.oses(),g=s.bind(S=>Ci(i,S)).orThunk(()=>Ur(i,t)).fold(Nu.unknown,Nu.nu),h=aa(d,t).fold(nh.unknown,nh.nu),C=ww(h,g,t,a);return{browser:g,os:h,deviceType:C}}},Tw=t=>window.matchMedia(t).matches;let uk=ra(()=>_w.detect(window.navigator.userAgent,R.from(window.navigator.userAgentData),Tw));const kn=()=>uk(),mc=(t,s,a,i,d,g,h)=>({target:t,x:s,y:a,stop:i,prevent:d,kill:g,raw:h}),wi=t=>{const s=ue.fromDom(ck(t).getOr(t.target)),a=()=>t.stopPropagation(),i=()=>t.preventDefault(),d=$o(i,a);return mc(s,t.clientX,t.clientY,a,i,d,t)},Bu=(t,s)=>a=>{t(a)&&s(wi(a))},kw=(t,s,a,i,d)=>{const g=Bu(a,i);return t.dom.addEventListener(s,g,d),{unbind:An(oh,t,s,g,d)}},ym=(t,s,a,i)=>kw(t,s,a,i,!1),Hc=(t,s,a,i)=>kw(t,s,a,i,!0),oh=(t,s,a,i)=>{t.dom.removeEventListener(s,a,i)},Zd=(t,s)=>{Ic(t).each(i=>{i.dom.insertBefore(s.dom,t.dom)})},Ow=(t,s)=>{hw(t).fold(()=>{Ic(t).each(d=>{Wr(d,s)})},i=>{Zd(i,s)})},jl=(t,s)=>{b1(t).fold(()=>{Wr(t,s)},i=>{t.dom.insertBefore(s.dom,i.dom)})},Wr=(t,s)=>{t.dom.appendChild(s.dom)},Aw=(t,s,a)=>{Au(t,a).fold(()=>{Wr(t,s)},i=>{Zd(i,s)})},O1=(t,s)=>{dt(s,a=>{Wr(t,a)})},Js=t=>{t.dom.textContent="",dt(Fc(t),s=>{ya(s)})},ya=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Zr=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return No(a,i)},Cm=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},A1=t=>{const s=t===void 0?window:t;return kn().browser.isFirefox()?R.none():R.from(s.visualViewport)},kv=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),wm=t=>{const s=t===void 0?window:t,a=s.document,i=Zr(ue.fromDom(a));return A1(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,h=d.clientHeight;return kv(i.left,i.top,g,h)},d=>kv(Math.max(d.pageLeft,i.left),Math.max(d.pageTop,i.top),d.width,d.height))},xi=()=>ue.fromDom(document),sh=(t,s)=>t.view(s).fold(oe([]),i=>{const d=t.owner(i),g=sh(t,d);return[i].concat(g)}),dk=(t,s)=>{const a=s.owner(t),i=sh(s,a);return R.some(i)};var gk=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?R.none():R.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(ue.fromDom)},owner:t=>Fa(t)});const Ov=t=>{const s=xi(),a=Zr(s);return dk(t,gk).fold(An(Vo,t),d=>{const g=Ru(t),h=_s(d,(C,S)=>{const T=Ru(S);return{left:C.left+T.left,top:C.top+T.top}},{left:0,top:0});return No(h.left+g.left+a.left,h.top+g.top+a.top)})},xm=(t,s,a)=>({point:t,width:s,height:a}),Rw=(t,s,a,i)=>({x:t,y:s,width:a,height:i}),ko=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),zo=t=>{const s=Vo(t),a=Tn(t),i=cl(t);return ko(s.left,s.top,a,i)},jd=t=>{const s=Ov(t),a=Tn(t),i=cl(t);return ko(s.left,s.top,a,i)},$u=(t,s)=>{const a=Math.max(t.x,s.x),i=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),h=d-a,C=g-i;return ko(a,i,h,C)},Av=(t,s)=>So(s,(a,i)=>$u(a,i),t),Is=()=>wm(window),Et=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Iu=t=>{const s=Et(R.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(R.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:C=>{a(),s.set(R.some(C))}}},hk=()=>Iu(t=>t.destroy()),gc=()=>Iu(t=>t.unbind()),In=()=>{const t=Iu(Q);return{...t,on:a=>t.get().each(a)}};var Gd=tinymce.util.Tools.resolve("tinymce.ThemeManager");const rh=t=>{const s=g=>g(t),a=oe(t),i=()=>d,d={tag:!0,inner:t,fold:(g,h)=>h(t),isValue:Dt,isError:jn,map:g=>on.value(g(t)),mapError:i,bind:s,exists:s,forall:s,getOr:a,or:i,getOrThunk:a,orThunk:i,getOrDie:a,each:g=>{g(t)},toOptional:()=>R.some(t)};return d},Dw=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(i,d)=>i(t),isValue:jn,isError:Dt,map:s,mapError:i=>on.error(i(t)),bind:s,exists:jn,forall:Dt,getOr:rn,or:rn,getOrThunk:fa,orThunk:fa,getOrDie:se(String(t)),each:Q,toOptional:R.none};return a},on={value:rh,error:Dw,fromOption:(t,s)=>t.fold(()=>Dw(s),rh)};var os;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(os||(os={}));const ah=(t,s,a)=>t.stype===os.Error?s(t.serror):a(t.svalue),R1=t=>{const s=[],a=[];return dt(t,i=>{ah(i,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},Va=(t,s)=>t.stype===os.Error?{stype:os.Error,serror:s(t.serror)}:t,Ca=(t,s)=>t.stype===os.Value?{stype:os.Value,svalue:s(t.svalue)}:t,Vc=(t,s)=>t.stype===os.Value?s(t.svalue):t,uo=(t,s)=>t.stype===os.Error?s(t.serror):t,Si=t=>({stype:os.Value,svalue:t}),qd=t=>({stype:os.Error,serror:t}),Jo={fromResult:t=>t.fold(qd,Si),toResult:t=>ah(t,on.error,on.value),svalue:Si,partition:R1,serror:qd,bind:Vc,bindError:uo,map:Ca,mapError:Va,fold:ah},Fu=(t,s,a,i)=>({tag:"field",key:t,newKey:s,presence:a,prop:i}),Sm=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),fo=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},Lu=(t,s)=>s,Mw=(t,s)=>Re(t)&&Re(s)?Uo(t,s):s,Dv=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let i=0;i<s.length;i++){const d=s[i];for(const g in d)Vn(d,g)&&(a[g]=t(a[g],d[g]))}return a},Uo=Dv(Mw),D1=Dv(Lu),ll=()=>({tag:"required",process:{}}),Mv=t=>({tag:"defaultedThunk",process:t}),wn=t=>Mv(oe(t)),ch=()=>({tag:"option",process:{}}),M1=t=>({tag:"mergeWithThunk",process:t}),Pw=t=>M1(oe(t)),pk=(t,s)=>t.length>0?Jo.svalue(Uo(s,D1.apply(void 0,t))):Jo.svalue(s),P1=t=>$o(Jo.serror,Yt)(t),Gl={consolidateObj:(t,s)=>{const a=Jo.partition(t);return a.errors.length>0?P1(a.errors):pk(a.values,s)},consolidateArr:t=>{const s=Jo.partition(t);return s.errors.length>0?P1(s.errors):Jo.svalue(s.values)}},N1=t=>ge(t)&&Fo(t).length>100?" removed due to size":JSON.stringify(t,null,2),Pv=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:oe("... (only showing first ten failures)")}]):t;return Ne(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},Hu=(t,s)=>Jo.serror([{path:t,getErrorInfo:s}]),ul=(t,s,a)=>Hu(t,()=>'Could not find valid *required* value for "'+s+'" in '+N1(a)),Nw=(t,s)=>Hu(t,()=>'Choice schema did not contain choice key: "'+s+'"'),B1=(t,s,a)=>Hu(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+N1(s)),Em=(t,s)=>Hu(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),Bw=(t,s)=>Hu(t,oe(s)),Yd=t=>{const s=(i,d)=>Jo.bindError(t(d),g=>Bw(i,g)),a=oe("val");return{extract:s,toString:a}},$1=Yd(Jo.svalue),jr=(t,s,a,i)=>it(s,a).fold(()=>ul(t,a,s),i),I1=(t,s,a,i)=>{const d=it(t,s).getOrThunk(()=>a(t));return i(d)},$w=(t,s,a)=>a(it(t,s)),Nv=(t,s,a,i)=>{const d=it(t,s).map(g=>g===!0?a(t):g);return i(d)},Ts=(t,s,a,i,d)=>{const g=C=>d.extract(s.concat([i]),C),h=C=>C.fold(()=>Jo.svalue(R.none()),S=>{const T=d.extract(s.concat([i]),S);return Jo.map(T,R.some)});switch(t.tag){case"required":return jr(s,a,i,g);case"defaultedThunk":return I1(a,i,t.process,g);case"option":return $w(a,i,h);case"defaultedOptionThunk":return Nv(a,i,t.process,h);case"mergeWithThunk":return I1(a,i,oe({}),C=>{const S=Uo(t.process(a),C);return g(S)})}},lh=(t,s,a)=>{const i={},d=[];for(const g of a)fo(g,(h,C,S,T)=>{const O=Ts(S,t,s,h,T);Jo.fold(O,P=>{d.push(...P)},P=>{i[C]=P})},(h,C)=>{i[h]=C(s)});return d.length>0?Jo.serror(d):Jo.svalue(i)},ks=t=>({extract:(i,d)=>t().extract(i,d),toString:()=>t().toString()}),uh=t=>Fo(Nd(t,Vt)),za=t=>{const s=At(t),a=_s(t,(d,g)=>fo(g,h=>Uo(d,{[h]:!0}),oe(d)),{});return{extract:(d,g)=>{const h=Xt(g)?[]:uh(g),C=yo(h,S=>!lc(a,S));return C.length===0?s.extract(d,g):Em(d,C)},toString:s.toString}},At=t=>({extract:(i,d)=>lh(i,d,t),toString:()=>`obj{
`+Ne(t,d=>fo(d,(g,h,C,S)=>g+" -> "+S.toString(),(g,h)=>"state("+g+")")).join(`
`)+"}"}),zc=t=>({extract:(i,d)=>{const g=Ne(d,(h,C)=>t.extract(i.concat(["["+C+"]"]),h));return Gl.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),Iw=(t,s)=>{const a=s!==void 0?s:rn;return{extract:(g,h)=>{const C=[];for(const S of t){const T=S.extract(g,h);if(T.stype===os.Value)return{stype:os.Value,svalue:a(T.svalue)};C.push(T)}return Gl.consolidateArr(C)},toString:()=>"oneOf("+Ne(t,g=>g.toString()).join(", ")+")"}},Bv=(t,s)=>{const a=(g,h)=>zc(Yd(t)).extract(g,h);return{extract:(g,h)=>{const C=Fo(h),S=a(g,C);return Jo.bind(S,T=>{const O=Ne(T,P=>Fu(P,P,ll(),s));return At(O).extract(g,h)})},toString:()=>"setOf("+s.toString()+")"}},dh=(t,s)=>{const a=ra(s);return{extract:(g,h)=>a().extract(g,h),toString:()=>a().toString()}},$v=$o(zc,At),Uc=oe($1),dl=(t,s)=>Yd(a=>{const i=typeof a;return t(a)?Jo.svalue(a):Jo.serror(`Expected type: ${s} but got: ${i}`)}),Xd=dl(sn,"number"),ot=dl(J,"string"),Wc=dl(Xt,"boolean"),Iv=dl(Se,"function"),_m=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>_m(t[s]));default:return!1}},Zc=Yd(t=>_m(t)?Jo.svalue(t):Jo.serror("Expected value to be acceptable for sending via postMessage")),fh=(t,s,a,i)=>it(a,i).fold(()=>B1(t,a,i),g=>g.extract(t.concat(["branch: "+i]),s)),Jd=(t,s)=>({extract:(d,g)=>it(g,t).fold(()=>Nw(d,t),C=>fh(d,g,s,C)),toString:()=>"chooseOn("+t+"). Possible values: "+Fo(s)}),ql=()=>zc($1),mh=t=>Yd(s=>t(s).fold(Jo.serror,Jo.svalue)),Ei=(t,s)=>Bv(a=>Jo.fromResult(t(a)),s),Fw=(t,s,a)=>{const i=s.extract([t],a);return Jo.mapError(i,d=>({input:a,errors:d}))},Oo=(t,s,a)=>Jo.toResult(Fw(t,s,a)),Fe=t=>t.fold(s=>{throw new Error(Qd(s))},rn),ca=(t,s,a)=>Fe(Oo(t,s,a)),Qd=t=>`Errors: 
`+Pv(t.errors).join(`
`)+`

Input object: `+N1(t.input),Qo=(t,s)=>Jd(t,Lo(s,At)),Tm=(t,s)=>dh(t,s),Ls=Fu,Bn=Sm,gh=t=>mh(s=>Io(t,s)?on.value(s):on.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),Oe=t=>Ls(t,t,ll(),Uc()),$n=(t,s)=>Ls(t,t,ll(),s),F1=t=>$n(t,Xd),Os=t=>$n(t,ot),yr=(t,s)=>Ls(t,t,ll(),gh(s)),jc=t=>$n(t,Iv),Fv=(t,s)=>Ls(t,t,ch(),Yd(a=>Jo.serror("The field: "+t+" is forbidden. "+s))),Vu=(t,s)=>Ls(t,t,ll(),At(s)),Lv=(t,s)=>Ls(t,t,ll(),$v(s)),Ua=(t,s)=>Ls(t,t,ll(),zc(s)),Pn=t=>Ls(t,t,ch(),Uc()),fl=(t,s)=>Ls(t,t,ch(),s),hh=t=>fl(t,Xd),As=t=>fl(t,ot),L1=(t,s)=>fl(t,gh(s)),ml=t=>fl(t,Iv),ph=(t,s)=>fl(t,zc(s)),Hs=(t,s)=>fl(t,At(s)),Mr=(t,s)=>fl(t,za(s)),fe=(t,s)=>Ls(t,t,wn(s),Uc()),mo=(t,s,a)=>Ls(t,t,wn(s),a),Hv=(t,s)=>mo(t,s,Xd),ss=(t,s)=>mo(t,s,ot),Qs=(t,s,a)=>mo(t,s,gh(a)),er=(t,s)=>mo(t,s,Wc),po=(t,s)=>mo(t,s,Iv),H1=(t,s)=>mo(t,s,Zc),zu=(t,s,a)=>mo(t,s,zc(a)),Lw=(t,s,a)=>mo(t,s,At(a)),wa={generate:t=>{if(!Be(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return dt(t,(i,d)=>{const g=Fo(i);if(g.length!==1)throw new Error("one and only one name per case");const h=g[0],C=i[h];if(a[h]!==void 0)throw new Error("duplicate key detected:"+h);if(h==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Be(C))throw new Error("case arguments must be an array");s.push(h),a[h]=(...S)=>{const T=S.length;if(T!==C.length)throw new Error("Wrong number of arguments to case "+h+". Expected "+C.length+" ("+C+"), got "+T);return{fold:(...P)=>{if(P.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+P.length);return P[d].apply(null,S)},match:P=>{const F=Fo(P);if(s.length!==F.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+F.join(","));if(!Tu(s,j=>Io(F,j)))throw new Error("Not all branches were specified when using match. Specified: "+F.join(", ")+`
Required: `+s.join(", "));return P[h].apply(null,S)},log:P=>{console.log(P,{constructors:s,constructor:h,params:S})}}}}),a}};wa.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const vk=t=>{const s=[],a=[];return dt(t,i=>{i.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},Vv=(t,s)=>{const a={};return Bs(t,(i,d)=>{Io(s,d)||(a[d]=i)}),a},Hw=(t,s)=>({[t]:s}),Vw=t=>{const s={};return dt(t,a=>{s[a.key]=a.value}),s},zw=(t,s)=>Vv(t,s),ef=(t,s)=>Hw(t,s),km=t=>Vw(t),OM=(t,s)=>t.length===0?on.value(s):on.value(Uo(s,D1.apply(void 0,t))),vh=t=>on.error(Yt(t)),zv=(t,s)=>{const a=vk(t);return a.errors.length>0?vh(a.errors):OM(a.values,s)},Uv=t=>Se(t)?t:jn,V1=(t,s,a)=>{let i=t.dom;const d=Uv(a);for(;i.parentNode;){i=i.parentNode;const g=ue.fromDom(i),h=s(g);if(h.isSome())return h;if(d(g))break}return R.none()},hc=(t,s,a)=>{const i=s(t),d=Uv(a);return i.orThunk(()=>d(t)?R.none():V1(t,s,d))},z1=(t,s)=>qn(t.element,s.event.target),tf={can:Dt,abort:jn,run:Q},Om=t=>{if(!lc(t,"can")&&!lc(t,"abort")&&!lc(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...tf,...t}},U1=(t,s)=>(...a)=>So(t,(i,d)=>i&&s(d).apply(void 0,a),!0),Uw=(t,s)=>(...a)=>So(t,(i,d)=>i||s(d).apply(void 0,a),!1),Wv=t=>Se(t)?{can:Dt,abort:jn,run:t}:t,yk=t=>{const s=U1(t,d=>d.can),a=Uw(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{dt(t,g=>{g.run.apply(void 0,d)})}}},tr=oe,_i=tr("touchstart"),Uu=tr("touchmove"),nf=tr("touchend"),W1=tr("touchcancel"),Wa=tr("mousedown"),yh=tr("mousemove"),Z1=tr("mouseout"),j1=tr("mouseup"),Gc=tr("mouseover"),qc=tr("focusin"),Ww=tr("focusout"),pc=tr("keydown"),of=tr("keyup"),Ti=tr("input"),gl=tr("change"),sf=tr("click"),Ck=tr("transitioncancel"),Ch=tr("transitionend"),Wu=tr("transitionstart"),wk=tr("selectstart"),es=t=>oe("alloy."+t),G1={tap:es("tap")},ki=es("focus"),rf=es("blur.post"),wh=es("paste.post"),Oi=es("receive"),nr=es("execute"),Zu=es("focus.item"),q1=G1.tap,ju=es("longpress"),Vs=es("sandbox.close"),K1=es("typeahead.cancel"),Y1=es("system.init"),xk=es("system.touchmove"),Zw=es("system.touchend"),Gu=es("system.scroll"),af=es("system.resize"),ia=es("system.attached"),Za=es("system.detached"),ja=es("system.dismissRequested"),xh=es("system.repositionRequested"),Sh=es("focusmanager.shifted"),Am=es("slotcontainer.visibility"),Zv=es("system.external.element.scroll"),jw=es("change.tab"),Gw=es("dismiss.tab"),jv=es("highlight"),Rm=es("dehighlight"),un=(t,s)=>{J1(t,t.element,s,{})},yt=(t,s,a)=>{J1(t,t.element,s,a)},qu=t=>{un(t,nr())},X1=(t,s,a)=>{J1(t,s,a,{})},J1=(t,s,a,i)=>{const d={target:s,...i};t.getSystem().triggerEvent(a,s,d)},Gv=(t,s,a,i)=>{const d={...i,target:s};t.getSystem().triggerEvent(a,s,d)},Q1=(t,s,a,i)=>{t.getSystem().triggerEvent(a,s,i.event)},zn=t=>km(t),qv=(t,s)=>({key:t,value:Om({abort:s})}),qw=(t,s)=>({key:t,value:Om({can:s})}),Kv=t=>({key:t,value:Om({run:(s,a)=>{a.event.prevent()}})}),ke=(t,s)=>({key:t,value:Om({run:s})}),Dm=(t,s,a)=>({key:t,value:Om({run:(i,d)=>{s.apply(void 0,[i,d].concat(a))}})}),Kw=t=>s=>ke(t,s),cf=t=>s=>({key:t,value:Om({run:(a,i)=>{z1(a,i)&&s(a,i)}})}),Yw=(t,s)=>ke(t,(a,i)=>{a.getSystem().getByUid(s).each(d=>{Q1(d,d.element,t,i)})}),Kl=(t,s,a)=>{const i=s.partUids[a];return Yw(t,i)},eb=(t,s)=>ke(t,(a,i)=>{const d=i.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>hc(d.target,C=>a.getSystem().getByDom(C).toOptional(),jn).getOr(a));s(a,g,i)}),lf=t=>ke(t,(s,a)=>{a.cut()}),Eh=t=>ke(t,(s,a)=>{a.stop()}),Ku=(t,s)=>cf(t)(s),go=cf(ia()),hl=cf(Za()),Xw=cf(Y1()),Yl=Kw(nr()),Yv=(t,s,a)=>{const i=a.toString(),d=i.indexOf(")")+1,g=i.indexOf("("),h=i.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:uf(h.slice(0,1).concat(h.slice(3)))}),t},uf=t=>Ne(t,s=>ol(s,"/*")?s.substring(0,s.length-2):s),Xv=(t,s)=>{const a=t.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:uf(g)}),t},Jv=(t,s)=>{const a=s.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:uf(g.slice(1))}),t},Gr=t=>({classes:bn(t.classes)?[]:t.classes,attributes:bn(t.attributes)?{}:t.attributes,styles:bn(t.styles)?{}:t.styles}),Mm=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),Sk=(t,s,a)=>Yl(i=>{a(i,t,s)}),Yu=(t,s,a)=>Xw((i,d)=>{a(i,t,s)}),Ek=(t,s,a,i,d,g)=>{const h=za(t),C=Hs(s,[Mr("config",t)]);return _h(h,C,s,a,i,d,g)},df=(t,s,a,i,d,g)=>{const h=t,C=Hs(s,[fl("config",t)]);return _h(h,C,s,a,i,d,g)},tb=(t,s,a)=>Yv((d,...g)=>{const h=[d].concat(g);return d.config({name:oe(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},C=>{const S=Array.prototype.slice.call(h,1);return s.apply(void 0,[d,C.config,C.state].concat(S))})},a,s),_k=t=>({key:t,value:void 0}),_h=(t,s,a,i,d,g,h)=>{const C=P=>lc(P,a)?P[a]():R.none(),S=Lo(d,(P,F)=>tb(a,P,F)),O={...Lo(g,(P,F)=>Xv(P,F)),...S,revoke:An(_k,a),config:P=>{const F=ca(a+"-config",t,P);return{key:a,value:{config:F,me:O,configAsRaw:ra(()=>ca(a+"-config",t,P)),initialConfig:P,state:h}}},schema:oe(s),exhibit:(P,F)=>ku(C(P),it(i,"exhibit"),(V,j)=>j(F,V.config,V.state)).getOrThunk(()=>Gr({})),name:oe(a),handlers:P=>C(P).map(F=>it(i,"events").getOr(()=>({}))(F.config,F.state)).getOr({})};return O},Ai={init:()=>Pr({readState:oe("No State required")})},Pr=t=>t,He=t=>km(t),Pm=za([Oe("fields"),Oe("name"),fe("active",{}),fe("apis",{}),fe("state",Ai),fe("extra",{})]),zs=t=>{const s=ca("Creating behaviour: "+t.name,Pm,t);return Ek(s.fields,s.name,s.active,s.apis,s.extra,s.state)},Qv=za([Oe("branchKey"),Oe("branches"),Oe("name"),fe("active",{}),fe("apis",{}),fe("state",Ai),fe("extra",{})]),ey=t=>{const s=ca("Creating behaviour: "+t.name,Qv,t);return df(Qo(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},ty=oe(void 0),to=(t,s)=>{const a=Jt(t,s);return a===void 0||a===""?[]:a.split(" ")},Tk=(t,s,a)=>{const d=to(t,s).concat([a]);return Nt(t,s,d.join(" ")),!0},ff=(t,s,a)=>{const i=yo(to(t,s),d=>d!==a);return i.length>0?Nt(t,s,i.join(" ")):Po(t,s),!1},Xl=t=>t.dom.classList!==void 0,Nm=t=>to(t,"class"),ny=(t,s)=>Tk(t,"class",s),pl=(t,s)=>ff(t,"class",s),Jw=(t,s)=>Io(Nm(t),s)?pl(t,s):ny(t,s),rs=(t,s)=>{Xl(t)?t.dom.classList.add(s):ny(t,s)},nb=t=>{(Xl(t)?t.dom.classList:Nm(t)).length===0&&Po(t,"class")},Un=(t,s)=>{Xl(t)?t.dom.classList.remove(s):pl(t,s),nb(t)},oy=(t,s)=>{const a=Xl(t)?t.dom.classList.toggle(s):Jw(t,s);return nb(t),a},qr=(t,s)=>Xl(t)&&t.dom.classList.contains(s),Bm=(t,s)=>{dt(s,a=>{rs(t,a)})},Ri=(t,s)=>{dt(s,a=>{Un(t,a)})},AM=(t,s)=>{dt(s,a=>{oy(t,a)})},ob=(t,s)=>Tu(s,a=>qr(t,a)),kk=t=>{const s=t.dom.classList,a=new Array(s.length);for(let i=0;i<s.length;i++){const d=s.item(i);d!==null&&(a[i]=d)}return a},Qw=t=>Xl(t)?kk(t):Nm(t),Kc=(t,s,a,i,d)=>{const g=h=>h+"px";return{position:t,left:s.map(g),top:a.map(g),right:i.map(g),bottom:d.map(g)}},Di=t=>({...t,position:R.some(t.position)}),Nr=(t,s)=>{Lc(t,Di(s))},$m=t=>(Na(Xo(t,"position"),"fixed")?R.none():vv(t)).orThunk(()=>{const i=ue.fromTag("span");return Ic(t).bind(d=>{Wr(d,i);const g=vv(i);return ya(i),g})}),sb=t=>$m(t).map(Vo).getOrThunk(()=>No(0,0)),rb=(t,s)=>{const a=t.element;rs(a,s.transitionClass),Un(a,s.fadeOutClass),rs(a,s.fadeInClass),s.onShow(t)},Im=(t,s)=>{const a=t.element;rs(a,s.transitionClass),Un(a,s.fadeInClass),rs(a,s.fadeOutClass),s.onHide(t)},Xu=(t,s)=>t.y<s.bottom&&t.bottom>s.y,bl=(t,s)=>t.y>=s.y,Fm=(t,s)=>t.bottom<=s.bottom,Ju=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),Jl=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),mf=t=>t.box.x-t.win.x,Th=(t,s,a)=>{const i=s.win,d=s.box,g=mf(s);return ir(t,h=>{switch(h){case"bottom":return Fm(d,a.bounds)?R.none():R.some(Jl(i,g,a));case"top":return bl(d,a.bounds)?R.none():R.some(Ju(i,g,a));default:return R.none()}}).getOr({location:"no-dock"})},ab=(t,s,a)=>Tu(t,i=>{switch(i){case"bottom":return Fm(s,a.bounds);case"top":return bl(s,a.bounds)}}),ex=(t,s)=>{const a=s.optScrollEnv.fold(oe(t.bounds.y),i=>i.scrollElmTop+(t.bounds.y-i.currentScrollTop));return No(t.bounds.x,a)},sy=(t,s)=>{const a=s.optScrollEnv.fold(oe(t.y),i=>t.y+i.currentScrollTop-i.scrollElmTop);return No(t.x,a)},Lm=(t,s,a)=>a.getInitialPos().map(i=>{const d=ex(i,s);return{box:ko(d.left,d.top,sa(t),ps(t)),location:i.location}}),tx=(t,s,a,i,d)=>{const g=sy(s,a),h=ko(g.left,g.top,s.width,s.height);i.setInitialPos({style:Ev(t),position:Dr(t,"position")||"static",bounds:h,location:d.location})},Ok=(t,s,a,i,d)=>{i.getInitialPos().fold(()=>tx(t,s,a,i,d),()=>Q)},cb=(t,s,a)=>a.getInitialPos().bind(i=>{var d;switch(a.clearInitialPos(),i.position){case"static":return R.some({morph:"static"});case"absolute":const g=$m(t).getOr(bi()),h=zo(g),C=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return R.some({morph:"absolute",positionCss:Kc("absolute",it(i.style,"left").map(S=>s.x-h.x),it(i.style,"top").map(S=>s.y-h.y+C),it(i.style,"right").map(S=>h.right-s.right),it(i.style,"bottom").map(S=>h.bottom-s.bottom))});default:return R.none()}}),ry=(t,s,a)=>Lm(t,s,a).filter(({box:i})=>ab(a.getModes(),i,s)).bind(({box:i})=>cb(t,i,a)),kh=t=>{switch(t.location){case"top":return R.some({morph:"fixed",positionCss:Kc("fixed",R.some(t.leftX),R.some(t.topY),R.none(),R.none())});case"bottom":return R.some({morph:"fixed",positionCss:Kc("fixed",R.some(t.leftX),R.none(),R.none(),R.some(t.bottomY))});default:return R.none()}},ay=(t,s,a)=>{const i=zo(t),d=Is(),g=Th(a.getModes(),{win:d,box:i},s);return g.location==="top"||g.location==="bottom"?(tx(t,i,s,a,g),kh(g)):R.none()},Hm=(t,s,a)=>ry(t,s,a).orThunk(()=>s.optScrollEnv.bind(i=>Lm(t,s,a)).bind(({box:i,location:d})=>{const g=Is(),h=mf({win:g,box:i}),C=d==="top"?Ju(g,h,s):Jl(g,h,s);return kh(C)})),RM=(t,s,a)=>{const i=t.element;return Na(Xo(i,"position"),"fixed")?Hm(i,s,a):ay(i,s,a)},DM=(t,s,a)=>{const i=t.element;return Lm(i,s,a).bind(({box:d})=>cb(i,d,a))},Vm=(t,s,a,i)=>{const d=zo(t),g=Is(),h=mf({win:g,box:d}),C=i(g,h,s);return C.location==="bottom"||C.location==="top"?(Ok(t,d,s,a,C),kh(C)):R.none()},Yc=(t,s,a)=>{a.setDocked(!1),dt(["left","right","top","bottom","position"],i=>Qt(t.element,i)),s.onUndocked(t)},Oh=(t,s,a,i)=>{const d=i.position==="fixed";a.setDocked(d),Nr(t.element,i),(d?s.onDocked:s.onUndocked)(t)},nx=(t,s,a,i,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(h=>{const C=Xu(h,i.bounds);C!==a.isVisible()&&(a.setVisible(C),d&&!C?(Bm(t.element,[g.fadeOutClass]),g.onHide(t)):(C?rb:Im)(t,g))})})},ox=(t,s,a,i,d)=>{nx(t,s,a,i,!0),Oh(t,s,a,d.positionCss)},sx=(t,s,a,i,d)=>{switch(d.morph){case"static":return Yc(t,s,a);case"absolute":return Oh(t,s,a,d.positionCss);case"fixed":return ox(t,s,a,i,d)}},gf=(t,s,a)=>{const i=s.lazyViewport(t);nx(t,s,a,i),RM(t,i,a).each(d=>{sx(t,s,a,i,d)})},MM=(t,s,a)=>{const i=t.element;a.setDocked(!1);const d=s.lazyViewport(t);DM(t,d,a).each(g=>{switch(g.morph){case"static":{Yc(t,s,a);break}case"absolute":{Oh(t,s,a,g.positionCss);break}}}),a.setVisible(!0),s.contextual.each(g=>{Ri(i,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),hf(t,s,a)},hf=(t,s,a)=>{t.getSystem().isConnected()&&gf(t,s,a)},zm=(t,s,a)=>{a.isDocked()&&MM(t,s,a)},rx=t=>(s,a,i)=>{const d=a.lazyViewport(s);Vm(s.element,d,i,t).each(h=>{ox(s,a,i,d,h)})},Um=rx(Ju),Ak=rx(Jl);var dr=Object.freeze({__proto__:null,refresh:hf,reset:zm,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,i)=>a.setModes(i),forceDockToTop:Um,forceDockToBottom:Ak}),Qu=Object.freeze({__proto__:null,events:(t,s)=>zn([Ku(Ch(),(a,i)=>{t.contextual.each(d=>{qr(a.element,d.transitionClass)&&(Ri(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),i.stop()})}),ke(Gu(),(a,i)=>{hf(a,t,s)}),ke(Zv(),(a,i)=>{hf(a,t,s)}),ke(af(),(a,i)=>{zm(a,t,s)})])});const Rk=(t,s)=>{const i=(s||document).createElement("div");return i.innerHTML=t,Fc(ue.fromDom(i))},Ql=t=>t.dom.innerHTML,xa=(t,s)=>{const i=Fa(t).dom,d=ue.fromDom(i.createDocumentFragment()),g=Rk(s,i);O1(d,g),Js(t),Wr(t,d)},Mi=t=>{const s=ue.fromTag("div"),a=ue.fromDom(t.dom.cloneNode(!0));return Wr(s,a),Ql(s)},pf=(t,s)=>ue.fromDom(t.dom.cloneNode(s)),ix=t=>pf(t,!1),Ah=t=>pf(t,!0),ib=t=>{if(Cv(t))return"#shadow-root";{const s=ix(t);return Mi(s)}},ed=t=>ib(t),iy="unknown";var Pi;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Pi||(Pi={}));const vl=Et({}),Dk=(t,s)=>{const a=[],i=new Date().getTime();return{logEventCut:(d,g,h)=>{a.push({outcome:"cut",target:g,purpose:h})},logEventStopped:(d,g,h)=>{a.push({outcome:"stopped",target:g,purpose:h})},logNoParent:(d,g,h)=>{a.push({outcome:"no-parent",target:g,purpose:h})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,h)=>{a.push({outcome:"response",purpose:h,target:g})},write:()=>{const d=new Date().getTime();Io(["mousemove","mouseover","mouseout",Y1()],t)||console.log(t,{event:t,time:d-i,target:s.dom,sequence:Ne(a,g=>Io(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+ed(g.target)+")":g.outcome)})}}},Rs=(t,s,a)=>{switch(it(vl.get(),t).orThunk(()=>{const d=Fo(vl.get());return ir(d,g=>t.indexOf(g)>-1?R.some(vl.get()[g]):R.none())}).getOr(Pi.NORMAL)){case Pi.NORMAL:return a(bf());case Pi.LOGGING:{const d=Dk(t,s),g=a(d);return d.write(),g}case Pi.STOP:return!0}},Rh=["alloy/data/Fields","alloy/debugging/Debugging"],bc=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return Zt(s,a=>a.indexOf("alloy")>0&&!ma(Rh,i=>a.indexOf(i)>-1)).getOr(iy)}else return iy},lb={logEventCut:Q,logEventStopped:Q,logNoParent:Q,logEventNoHandlers:Q,logEventResponse:Q,write:Q},ly=(t,s,a)=>Rs(t,s,a),bf=oe(lb),td=oe([Oe("menu"),Oe("selectedMenu")]),Xc=oe([Oe("item"),Oe("selectedItem")]);oe(At(Xc().concat(td())));const vc=oe(At(Xc())),lx=Vu("initSize",[Oe("numColumns"),Oe("numRows")]),Mk=()=>$n("markers",vc()),yl=()=>Vu("markers",[Oe("backgroundMenu")].concat(td()).concat(Xc())),eu=t=>Vu("markers",Ne(t,Oe)),ub=(t,s,a)=>(bc(),Ls(s,s,a,mh(i=>on.value((...d)=>i.apply(void 0,d))))),xn=t=>ub("onHandler",t,wn(Q)),Cr=t=>ub("onKeyboardHandler",t,wn(R.none)),vf=t=>ub("onHandler",t,ll()),Wm=t=>ub("onKeyboardHandler",t,ll()),so=(t,s)=>Bn(t,oe(s)),yf=t=>Bn(t,rn),tu=oe(lx);var ux=[Hs("contextual",[Os("fadeInClass"),Os("fadeOutClass"),Os("transitionClass"),jc("lazyContext"),xn("onShow"),xn("onShown"),xn("onHide"),xn("onHidden")]),po("lazyViewport",()=>({bounds:Is(),optScrollEnv:R.none()})),zu("modes",["top","bottom"],ot),xn("onDocked"),xn("onUndocked")],dx=Object.freeze({__proto__:null,init:t=>{const s=Et(!1),a=Et(!0),i=In(),d=Et(t.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return Pr({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const ro=zs({fields:ux,name:"docking",active:Qu,apis:dr,state:dx}),Dh=(t,s,a)=>qn(s,t.element)&&!qn(s,a),Nk=zn([qw(ki(),(t,s)=>{const a=s.event,i=a.originator,d=a.target;return Dh(t,i,d)?(console.warn(ki()+` did not get interpreted by the desired target. 
Originator: `+ed(i)+`
Target: `+ed(d)+`
Check the `+ki()+" event handlers"),!1):!0})]);var fx=Object.freeze({__proto__:null,events:Nk});const Cf=(t,s,a,i)=>{const d=t+s;return d>i?a:d<a?i:d},Jc=(t,s,a)=>Math.min(Math.max(t,s),a),Mh=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let nu=0;const mt=t=>{const a=new Date().getTime(),i=Math.floor(Mh()*1e9);return nu++,t+"_"+i+nu+String(a)},mx=oe("alloy-id-"),db=oe("data-alloy-id"),gx=mx(),hx=db(),uy=(t,s)=>{const a=mt(gx+t);return dy(s,a),a},dy=(t,s)=>{Object.defineProperty(t.dom,hx,{value:s,writable:!0})},Zm=t=>{const s=oo(t)?t.dom[hx]:null;return R.from(s)},Ph=t=>mt(t),wf=rn,fb=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+ed(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},i=d=>()=>{console.warn(s(d))};return{debugInfo:oe("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:jn}},jm=fb(),mb=mt("alloy-premade"),Qc=t=>(Object.defineProperty(t.element.dom,mb,{value:t.uid,writable:!0}),ef(mb,t)),Bk=t=>Vn(t.dom,mb),gb=t=>it(t,mb),hb=t=>Jv((s,...a)=>t(s.getApis(),s,...a),t),$k=(t,s)=>{const a=Ne(s,d=>Hs(d.name(),[Oe("config"),fe("state",Ai)])),i=Oo("component.behaviours",At(a),t.behaviours).fold(d=>{throw new Error(Qd(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},rn);return{list:s,data:Lo(i,d=>{const g=d.map(h=>({config:h.config,state:h.state.init(h.config)}));return oe(g)})}},Ik=t=>t.list,px=t=>t.data,Nh=(t,s)=>{const a={};return Bs(t,(i,d)=>{Bs(i,(g,h)=>{const C=it(a,h).getOr([]);a[h]=C.concat([s(d,g)])})}),a},bx=(t,s,a,i)=>{const d={...s};dt(a,O=>{d[O.name()]=O.exhibit(t,i)});const g=Nh(d,(O,P)=>({name:O,modification:P})),h=O=>_s(O,(P,F)=>({...F.modification,...P}),{}),C=_s(g.classes,(O,P)=>P.modification.concat(O),[]),S=h(g.attributes),T=h(g.styles);return Gr({classes:C,attributes:S,styles:T})},fy=(t,s,a,i)=>{try{const d=Yg(a,(g,h)=>{const C=g[s],S=h[s],T=i.indexOf(C),O=i.indexOf(S);if(T===-1)throw new Error("The ordering for "+t+" does not have an entry for "+C+`.
Order specified: `+JSON.stringify(i,null,2));if(O===-1)throw new Error("The ordering for "+t+" does not have an entry for "+S+`.
Order specified: `+JSON.stringify(i,null,2));return T<O?-1:O<T?1:0});return on.value(d)}catch(d){return on.error([d])}},Fk=(t,s)=>({handler:t,purpose:s}),Bh=(t,s)=>({cHandler:t,purpose:s}),Gm=(t,s)=>Bh(An.apply(void 0,[t.handler].concat(s)),t.purpose),nd=t=>t.cHandler,pb=(t,s)=>({name:t,handler:s}),my=(t,s)=>{const a={};return dt(t,i=>{a[i.name()]=i.handlers(s)}),a},bb=(t,s,a)=>{const i={...a,...my(s,t)};return Nh(i,pb)},gy=(t,s,a,i)=>{const d=bb(t,a,i);return Sa(d,s)},hy=t=>{const s=Wv(t);return(a,i,...d)=>{const g=[a,i].concat(d);s.abort.apply(void 0,g)?i.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},py=(t,s)=>on.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Ne(s,a=>a.name),null,2)]),vx=(t,s,a)=>{const i=s[a];return i?fy("Event: "+a,"name",t,i).map(d=>{const g=Ne(d,h=>h.handler);return yk(g)}):py(a,t)},Sa=(t,s)=>{const a=Xg(t,(i,d)=>(i.length===1?on.value(i[0].handler):vx(i,s,d)).map(h=>{const C=hy(h),S=i.length>1?yo(s[d],T=>ma(i,O=>O.name===T)).join(" > "):i[0].name;return ef(d,Fk(C,S))}));return zv(a,{})},xf="alloy.base.behaviour",yx=At([Ls("dom","dom",ll(),At([Oe("tag"),fe("styles",{}),fe("classes",[]),fe("attributes",{}),Pn("value"),Pn("innerHtml")])),Oe("components"),Oe("uid"),fe("events",{}),fe("apis",{}),Ls("eventOrder","eventOrder",Pw({[nr()]:["disabling",xf,"toggling","typeaheadevents"],[ki()]:[xf,"focusing","keying"],[Y1()]:[xf,"disabling","toggling","representing","tooltipping"],[Ti()]:[xf,"representing","streaming","invalidating"],[Za()]:[xf,"representing","item-events","toolbar-button-events","tooltipping"],[Wa()]:["focusing",xf,"item-type-events"],[_i()]:["focusing",xf,"item-type-events"],[Gc()]:["item-type-events","tooltipping"],[Oi()]:["receiving","reflecting","tooltipping"]}),Uc()),Pn("domModification")]),od=t=>Oo("custom.definition",yx,t),Sf=t=>({...t.dom,uid:t.uid,domChildren:Ne(t.components,s=>s.element)}),by=t=>t.domModification.fold(()=>Gr({}),Gr),xe=t=>t.events,ei=t=>t.dom.value,Ef=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},Lk=(t,s,a)=>Au(t,s).map(d=>{if(a.exists(h=>!qn(h,d))){const h=a.map($c).getOr("span"),C=ue.fromTag(h);return Zd(d,C),C}else return d}),$h=(t,s,a)=>{a.fold(()=>Wr(t,s),i=>{qn(i,s)||(Zd(i,s),ya(i))})},yc=(t,s,a)=>{const i=Ne(s,a),d=Fc(t);return dt(d.slice(i.length),ya),i},qm=(t,s,a,i)=>{const d=Au(t,s),g=i(a,d),h=Lk(t,s,d);return $h(t,g.element,h),g},Cx=(t,s,a)=>yc(t,s,(i,d)=>qm(t,d,i,a)),wx=(t,s)=>yc(t,s,(a,i)=>{const d=Au(t,i);return $h(t,a,d),a}),wr=(t,s)=>{const a=Fo(t),i=Fo(s),d=Pt(i,a),g=ha(t,(h,C)=>!Vn(s,C)||h!==s[C]).t;return{toRemove:d,toSet:g}},vb=(t,s)=>{const{class:a,style:i,...d}=ik(s),{toSet:g,toRemove:h}=wr(t.attributes,d),C=()=>{dt(h,ce=>Po(s,ce)),bw(s,g)},S=Ev(s),{toSet:T,toRemove:O}=wr(t.styles,S),P=()=>{dt(O,ce=>Qt(s,ce)),Zl(s,T)},F=Qw(s),V=Pt(F,t.classes),j=Pt(t.classes,F),Y=()=>{Bm(s,j),Ri(s,V)},ie=ce=>{xa(s,ce)},X=()=>{const ce=t.domChildren;wx(s,ce)},ae=()=>{const ce=s,ye=t.value.getOrUndefined();ye!==ei(ce)&&Ef(ce,ye??"")};return C(),Y(),P(),t.innerHtml.fold(X,ie),ae(),s},xx=t=>{const s=ue.fromTag(t.tag);bw(s,t.attributes),Bm(s,t.classes),Zl(s,t.styles),t.innerHtml.each(i=>xa(s,i));const a=t.domChildren;return O1(s,a),t.value.each(i=>{Ef(s,i)}),s},Hk=(t,s)=>{try{const a=vb(t,s);return R.some(a)}catch{return R.none()}},Sx=t=>t.innerHtml.isSome()&&t.domChildren.length>0,Vk=(t,s)=>{const a=d=>$c(d)===t.tag&&!Sx(t)&&!Bk(d),i=s.filter(a).bind(d=>Hk(t,d)).getOrThunk(()=>xx(t));return dy(i,t.uid),i},Ex=t=>{const s=it(t,"behaviours").getOr({});return _e(Fo(s),a=>{const i=s[a];return Vt(i)?[i.me]:[]})},zk=(t,s)=>$k(t,s),Uk=t=>{const s=Ex(t);return zk(t,s)},_x=(t,s,a)=>{const i=Sf(t),d=by(t),g={"alloy.base.modification":d},h=s.length>0?bx(a,g,s,i):d;return Mm(i,h)},Km=(t,s,a)=>{const i={"alloy.base.behaviour":xe(t)};return gy(a,t.eventOrder,s,i).getOrDie()},Wk=(t,s)=>{const a=()=>ce,i=Et(jm),d=Fe(od(t)),g=Uk(t),h=Ik(g),C=px(g),S=_x(d,h,C),T=Vk(S,s),O=Km(d,h,C),P=Et(d.components),F=ye=>{i.set(ye)},V=()=>{i.set(fb(a))},j=()=>{const ye=Fc(T),we=_e(ye,Ge=>i.get().getByDom(Ge).fold(()=>[],Ko));P.set(we)},Y=ye=>{const we=C;return(Se(we[ye.name()])?we[ye.name()]:()=>{throw new Error("Could not find "+ye.name()+" in "+JSON.stringify(t,null,2))})()},ie=ye=>Se(C[ye.name()]),X=()=>d.apis,ae=ye=>C[ye]().map(we=>we.state.readState()).getOr("not enabled"),ce={uid:t.uid,getSystem:i.get,config:Y,hasConfigured:ie,spec:t,readState:ae,getApis:X,connect:F,disconnect:V,element:T,syncComponents:j,components:P.get,events:O};return ce},Tx=(t,s)=>{const a=it(t,"components").getOr([]);return s.fold(()=>Ne(a,Ds),i=>Ne(a,(d,g)=>yy(d,Au(i,g))))},Zk=(t,s)=>{const{events:a,...i}=wf(t),d=Tx(i,s),g={...i,events:{...fx,...a},components:d};return on.value(Wk(g,s))},_o=t=>{const s=ue.fromText(t);return vy({element:s})},vy=t=>{const s=ca("external.component",za([Oe("element"),Pn("uid")]),t),a=Et(fb()),i=C=>{a.set(C)},d=()=>{a.set(fb(()=>h))},g=s.uid.getOrThunk(()=>Ph("external"));dy(s.element,g);const h={uid:g,getSystem:a.get,config:R.none,hasConfigured:jn,connect:i,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:oe("No state"),syncComponents:Q,components:oe([]),events:{}};return Qc(h)},kx=Ph,Ox=t=>Vn(t,"uid"),yy=(t,s)=>gb(t).getOrThunk(()=>{const a=Ox(t)?t:{uid:kx(""),...t};return Zk(a,s).getOrDie()}),Ds=t=>yy(t,R.none()),Ga=Qc;var Ax=(t,s,a,i,d)=>t(a,i)?R.some(a):Se(d)&&d(a)?R.none():s(a,i,d);const Cy=(t,s,a)=>{let i=t.dom;const d=Se(a)?a:jn;for(;i.parentNode;){i=i.parentNode;const g=ue.fromDom(i);if(s(g))return R.some(g);if(d(g))break}return R.none()},wy=(t,s,a)=>Ax((d,g)=>g(d),Cy,t,s,a),jk=(t,s)=>{const a=t.dom;return a.parentNode?yb(ue.fromDom(a.parentNode),i=>!qn(t,i)&&s(i)):R.none()},yb=(t,s)=>{const a=d=>s(ue.fromDom(d));return Zt(t.dom.childNodes,a).map(ue.fromDom)},Rx=(t,s)=>{const a=i=>{for(let d=0;d<i.childNodes.length;d++){const g=ue.fromDom(i.childNodes[d]);if(s(g))return R.some(g);const h=a(i.childNodes[d]);if(h.isSome())return h}return R.none()};return a(t.dom)},Ih=(t,s,a)=>wy(t,s,a).isSome(),Dx=t=>bv(t),bs=(t,s,a)=>Cy(t,i=>oa(i,s),a),Gk=(t,s)=>jk(t,a=>oa(a,s)),Cc=(t,s)=>yb(t,a=>oa(a,s)),bo=(t,s)=>bv(s,t),Cl=(t,s,a)=>Ax((d,g)=>oa(d,g),bs,t,s,a),Ym="aria-controls",xy=t=>wy(t,a=>{if(!oo(a))return!1;const i=Jt(a,"id");return i!==void 0&&i.indexOf(Ym)>-1}).bind(a=>{const i=Jt(a,"id"),d=lr(a);return bo(d,`[${Ym}="${i}"]`)}),Fh=()=>{const t=mt(Ym);return{id:t,link:i=>{Nt(i,Ym,t)},unlink:i=>{Po(i,Ym)}}},Mx=(t,s)=>xy(s).exists(a=>sd(t,a)),sd=(t,s)=>Ih(s,a=>qn(a,t.element),jn)||Mx(t,s),fr=(t,s,a,i,d,g,h,C=!1)=>({x:t,y:s,bubble:a,direction:i,placement:d,restriction:g,label:`${h}-${d}`,alwaysFit:C}),wl=wa.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Px=(t,s,a,i,d,g,h,C,S)=>t.fold(s,a,i,d,g,h,C,S),qk=(t,s,a,i)=>t.fold(s,s,i,i,s,i,a,a),Sy=(t,s,a,i)=>t.fold(s,i,s,i,a,a,s,i),Cb=wl.southeast,Ey=wl.southwest,_y=wl.northeast,wb=wl.northwest,gt=wl.south,Lh=wl.north,Ty=wl.east,Nx=wl.west,Kk=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},mr=(t,s)=>Pd(["left","right","top","bottom"],a=>it(s,a).map(i=>Kk(t,i))),Bx=(t,s,a)=>{const i=(S,T)=>s[S].map(O=>{const P=S==="top"||S==="bottom",F=P?a.top:a.left,j=(S==="left"||S==="top"?Math.max:Math.min)(O,T)+F;return P?Jc(j,t.y,t.bottom):Jc(j,t.x,t.right)}).getOr(T),d=i("left",t.x),g=i("top",t.y),h=i("right",t.right),C=i("bottom",t.bottom);return ko(d,g,h-d,C-g)},rd="layout",$x=t=>t.x,ky=(t,s)=>t.x+t.width/2-s.width/2,Ix=(t,s)=>t.x+t.width-s.width,gr=(t,s)=>t.y-s.height,ad=t=>t.y+t.height,Oy=(t,s)=>t.y+t.height/2-s.height/2,_f=t=>t.x+t.width,Yk=(t,s)=>t.x-s.width,vs=(t,s,a)=>fr($x(t),ad(t),a.southeast(),Cb(),"southeast",mr(t,{left:1,top:3}),rd),ys=(t,s,a)=>fr(Ix(t,s),ad(t),a.southwest(),Ey(),"southwest",mr(t,{right:0,top:3}),rd),or=(t,s,a)=>fr($x(t),gr(t,s),a.northeast(),_y(),"northeast",mr(t,{left:1,bottom:2}),rd),Cs=(t,s,a)=>fr(Ix(t,s),gr(t,s),a.northwest(),wb(),"northwest",mr(t,{right:0,bottom:2}),rd),Ln=(t,s,a)=>fr(ky(t,s),gr(t,s),a.north(),Lh(),"north",mr(t,{bottom:2}),rd),ds=(t,s,a)=>fr(ky(t,s),ad(t),a.south(),gt(),"south",mr(t,{top:3}),rd),xb=(t,s,a)=>fr(_f(t),Oy(t,s),a.east(),Ty(),"east",mr(t,{left:0}),rd),Ay=(t,s,a)=>fr(Yk(t,s),Oy(t,s),a.west(),Nx(),"west",mr(t,{right:1}),rd),Ry=()=>[vs,ys,or,Cs,ds,Ln,xb,Ay],Dy=()=>[ys,vs,Cs,or,ds,Ln,xb,Ay],Fx=()=>[or,Cs,vs,ys,Ln,ds],Lx=()=>[Cs,or,ys,vs,Ln,ds],Hh=()=>[vs,ys,or,Cs,ds,Ln],Sb=()=>[ys,vs,Cs,or,ds,Ln],Vh=(t,s)=>s.universal?t:yo(t,a=>Io(s.channels,a));var NM=Object.freeze({__proto__:null,events:t=>zn([ke(Oi(),(s,a)=>{const i=t.channels,d=Fo(i),g=a,h=Vh(d,g);dt(h,C=>{const S=i[C],T=S.schema,O=ca("channel["+C+`] data
Receiver: `+ed(s.element),T,g.data);S.onReceive(s,O)})})])}),Tf=[$n("channels",Ei(on.value,za([vf("onReceive"),fe("schema",Uc())])))];const Ea=zs({fields:Tf,name:"receiving",active:NM});var Jk=Object.freeze({__proto__:null,exhibit:(t,s)=>Gr({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const wc=(t,s=!1)=>t.dom.focus({preventScroll:s}),Xm=t=>t.dom.blur(),kf=t=>{const s=lr(t).dom;return t.dom===s.activeElement},xl=(t=xi())=>R.from(t.dom.activeElement).map(ue.fromDom),Br=t=>xl(lr(t)).filter(s=>t.dom.contains(s.dom)),My=(t,s)=>{const a=lr(s),i=xl(a).bind(g=>{const h=C=>qn(g,C);return h(s)?R.some(s):Rx(s,h)}),d=t(s);return i.each(g=>{xl(a).filter(h=>qn(h,g)).fold(()=>{wc(g)},Q)}),d},cd=wa.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Vx=(t,s,a,i,d,g)=>{const h=s.rect,C=h.x-a,S=h.y-i,T=h.width,O=h.height,P=d-(C+T),F=g-(S+O),V=R.some(C),j=R.some(S),Y=R.some(P),ie=R.some(F),X=R.none();return Px(s.direction,()=>Kc(t,V,j,X,X),()=>Kc(t,X,j,Y,X),()=>Kc(t,V,X,X,ie),()=>Kc(t,X,X,Y,ie),()=>Kc(t,V,j,X,X),()=>Kc(t,V,X,X,ie),()=>Kc(t,V,j,X,X),()=>Kc(t,X,j,Y,X))},Eb=(t,s)=>t.fold(()=>{const a=s.rect;return Kc("absolute",R.some(a.x),R.some(a.y),R.none(),R.none())},(a,i,d,g)=>Vx("absolute",s,a,i,d,g),(a,i,d,g)=>Vx("fixed",s,a,i,d,g)),Py=(t,s)=>{const a=An(Ov,s),i=t.fold(a,a,()=>{const h=Zr();return Ov(s).translate(-h.left,-h.top)}),d=Tn(s),g=cl(s);return ko(i.left,i.top,d,g)},zh=(t,s)=>s.fold(()=>t.fold(Is,Is,ko),a=>t.fold(oe(a),oe(a),()=>{const i=_b(t,a.x,a.y);return ko(i.left,i.top,a.width,a.height)})),_b=(t,s,a)=>{const i=No(s,a),d=()=>{const g=Zr();return i.translate(-g.left,-g.top)};return t.fold(oe(i),oe(i),d)},zx=(t,s,a,i)=>t.fold(s,a,i);cd.none;const Ux=cd.relative,Wx=cd.fixed,Uh=(t,s)=>({anchorBox:t,origin:s}),Of=(t,s)=>Uh(t,s),Wh="data-alloy-placement",Qk=(t,s)=>{Nt(t,Wh,s)},Ny=t=>Ho(t,Wh),e4=t=>Po(t,Wh),Tb=wa.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),t4=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:h,y:C,right:S,bottom:T,width:O,height:P}=t,F=h>=a&&h<=d,V=C>=i&&C<=g,j=F&&V,Y=S<=d&&S>=a,ie=T<=g&&T>=i,X=Y&&ie,ae=Math.min(O,h>=a?d-h:S-a),ce=Math.min(P,C>=i?g-C:T-i);return{originInBounds:j,sizeInBounds:X,visibleW:ae,visibleH:ce}},Zx=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:h,y:C,width:S,height:T}=t,O=Math.max(a,d-S),P=Math.max(i,g-T),F=Jc(h,a,O),V=Jc(C,i,P),j=Math.min(F+S,d)-F,Y=Math.min(V+T,g)-V;return ko(F,V,j,Y)},n4=(t,s,a)=>{const i=oe(s.bottom-a.y),d=oe(a.bottom-s.y),g=qk(t,d,d,i),h=oe(s.right-a.x),C=oe(a.right-s.x);return{maxWidth:Sy(t,C,C,h),maxHeight:g}},jx=(t,s,a,i)=>{const d=t.bubble,g=d.offset,h=Bx(i,t.restriction,g),C=t.x+g.left,S=t.y+g.top,T=ko(C,S,s,a),{originInBounds:O,sizeInBounds:P,visibleW:F,visibleH:V}=t4(T,h),j=O&&P,Y=j?T:Zx(T,h),ie=Y.width>0&&Y.height>0,{maxWidth:X,maxHeight:ae}=n4(t.direction,Y,i),ce={rect:Y,maxHeight:ae,maxWidth:X,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:S};return j||t.alwaysFit?Tb.fit(ce):Tb.nofit(ce,F,V,ie)},Zh=(t,s,a,i,d,g)=>{const h=i.width,C=i.height,S=(O,P,F,V,j)=>{const Y=O(a,i,d,t,g),ie=jx(Y,h,C,g);return ie.fold(oe(ie),(X,ae,ce,ye)=>(j===ye?ce>V||ae>F:!j&&ye)?ie:Tb.nofit(P,F,V,j))};return So(s,(O,P)=>{const F=An(S,P);return O.fold(oe(O),F)},Tb.nofit({rect:a,maxHeight:i.height,maxWidth:i.width,direction:Cb(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(rn,rn)},Gx=Dt,Kr=(t,s,a)=>ym(t,s,Gx,a),By=(t,s,a)=>Hc(t,s,Gx,a),qx=wi,$y=["top","bottom","right","left"],jh="data-alloy-transition-timer",o4=(t,s)=>ob(t,s.classes),s4=(t,s,a)=>a.exists(i=>{const d=t.mode;return d==="all"?!0:i[d]!==s[d]}),r4=(t,s)=>{const a=i=>parseFloat(i).toFixed(3);return zr(s,(i,d)=>{const g=t[d].map(a),h=i.map(a);return!m1(g,h)}).isSome()},kb=t=>{const s=g=>{const C=Dr(t,g).split(/\s*,\s*/);return yo(C,Ba)},a=g=>{if(J(g)&&/^[\d.]+/.test(g)){const h=parseFloat(g);return ol(g,"ms")?h:h*1e3}else return 0},i=s("transition-delay"),d=s("transition-duration");return So(d,(g,h,C)=>{const S=a(i[C])+a(h);return Math.max(g,S)},0)},Kx=(t,s)=>{const a=gc(),i=gc();let d;const g=T=>{var O;const P=(O=T.raw.pseudoElement)!==null&&O!==void 0?O:"";return qn(T.target,t)&&Mo(P)&&Io($y,T.raw.propertyName)},h=T=>{if(Ht(T)||g(T)){a.clear(),i.clear();const O=T==null?void 0:T.raw.type;(Ht(O)||O===Ch())&&(clearTimeout(d),Po(t,jh),Ri(t,s.classes))}},C=Kr(t,Wu(),T=>{g(T)&&(C.unbind(),a.set(Kr(t,Ch(),h)),i.set(Kr(t,Ck(),h)))}),S=kb(t);requestAnimationFrame(()=>{d=setTimeout(h,S+17),Nt(t,jh,d)})},Iy=(t,s)=>{Bm(t,s.classes),Ho(t,jh).each(a=>{clearTimeout(parseInt(a,10)),Po(t,jh)}),Kx(t,s)},Fy=(t,s,a,i,d,g)=>{const h=s4(i,d,g);if(h||o4(t,i)){Wt(t,"position",a.position);const C=Py(s,t),S=Eb(s,{...d,rect:C}),T=Pd($y,O=>S[O]);r4(a,T)&&(Lc(t,T),h&&Iy(t,i),zd(t))}else Ri(t,i.classes)},Gh=t=>({width:Tn(t),height:cl(t)}),Ly=(t,s,a,i)=>{Qt(s,"max-height"),Qt(s,"max-width");const d=Gh(s);return Zh(s,i.preference,t,d,a,i.bounds)},Yx=(t,s)=>{const a=s.classes;Ri(t,a.off),Bm(t,a.on)},Xx=(t,s,a)=>{const i=a.maxHeightFunction;i(t,s.maxHeight)},Jx=(t,s,a)=>{const i=a.maxWidthFunction;i(t,s.maxWidth)},a4=(t,s,a)=>{const i=Eb(a.origin,s);a.transition.each(d=>{Fy(t,a.origin,i,d,s,a.lastPlacement)}),Nr(t,i)},Qx=(t,s)=>{Qk(t,s.placement)},Hy=(t,s)=>{lk(t,Math.floor(s))},eS=oe((t,s)=>{Hy(t,s),Zl(t,{"overflow-x":"hidden","overflow-y":"auto"})}),id=oe((t,s)=>{Hy(t,s)}),tS=(t,s,a)=>t[s]===void 0?a:t[s],c4=(t,s,a,i,d,g,h,C)=>{const S=tS(h,"maxHeightFunction",eS()),T=tS(h,"maxWidthFunction",Q),O=t.anchorBox,P=t.origin,F={bounds:zh(P,g),origin:P,preference:i,maxHeightFunction:S,maxWidthFunction:T,lastPlacement:d,transition:C};return i4(O,s,a,F)},i4=(t,s,a,i)=>{const d=Ly(t,s,a,i);return a4(s,d,i),Qx(s,d),Yx(s,d),Xx(s,d,i),Jx(s,d,i),{layout:d.layout,placement:d.placement}},Ob=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],ti=(t,s,a,i=1)=>{const d=t*i,g=s*i,h=S=>it(a,S).getOr([]),C=(S,T,O)=>{const P=Pt(Ob,O);return{offset:No(S,T),classesOn:_e(O,h),classesOff:_e(P,h)}};return{southeast:()=>C(-t,s,["top","alignLeft"]),southwest:()=>C(t,s,["top","alignRight"]),south:()=>C(-t/2,s,["top","alignCentre"]),northeast:()=>C(-t,-s,["bottom","alignLeft"]),northwest:()=>C(t,-s,["bottom","alignRight"]),north:()=>C(-t/2,-s,["bottom","alignCentre"]),east:()=>C(t,-s/2,["valignCentre","left"]),west:()=>C(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>C(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>C(-d,g,["top","alignRight","inset"]),insetNorth:()=>C(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>C(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>C(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>C(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>C(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>C(d,-g/2,["valignCentre","left","inset"])}},Ab=()=>ti(0,0,{}),Rb=rn,Vy=(t,s)=>a=>nS(a)==="rtl"?s:t,nS=t=>Dr(t,"direction")==="rtl"?"rtl":"ltr";var fs;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(fs||(fs={}));const oS="data-alloy-vertical-dir",Jm=t=>Ih(t,s=>oo(s)&&Jt(s,"data-alloy-vertical-dir")===fs.BottomToTop),ld=()=>Hs("layouts",[Oe("onLtr"),Oe("onRtl"),Pn("onBottomLtr"),Pn("onBottomRtl")]),Db=(t,s,a,i,d,g,h)=>{const C=h.map(Jm).getOr(!1),S=s.layouts.map(V=>V.onLtr(t)),T=s.layouts.map(V=>V.onRtl(t)),O=C?s.layouts.bind(V=>V.onBottomLtr.map(j=>j(t))).or(S).getOr(d):S.getOr(a),P=C?s.layouts.bind(V=>V.onBottomRtl.map(j=>j(t))).or(T).getOr(g):T.getOr(i);return Vy(O,P)(t)},sS=(t,s,a)=>{const i=s.hotspot,d=Py(a,i.element),g=Db(t.element,s,Hh(),Sb(),Fx(),Lx(),R.some(s.hotspot.element));return R.some(Rb({anchorBox:d,bubble:s.bubble.getOr(Ab()),overrides:s.overrides,layouts:g}))};var l4=[Oe("hotspot"),Pn("bubble"),fe("overrides",{}),ld(),so("placement",sS)];const u4=(t,s,a)=>{const i=_b(a,s.x,s.y),d=ko(i.left,i.top,s.width,s.height),g=Db(t.element,s,Ry(),Dy(),Ry(),Dy(),R.none());return R.some(Rb({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var rS=[Oe("x"),Oe("y"),fe("height",0),fe("width",0),fe("bubble",Ab()),fe("overrides",{}),ld(),so("placement",u4)];const qh=wa.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),zy=t=>t.fold(rn,(s,a,i)=>s.translate(-a,-i)),d4=t=>t.fold(rn,rn),Qm=t=>So(t,(s,a)=>s.translate(a.left,a.top),No(0,0)),aS=t=>{const s=Ne(t,zy);return Qm(s)},cS=t=>{const s=Ne(t,d4);return Qm(s)},iS=qh.screen,Uy=qh.absolute,Mb=(t,s,a)=>{const i=Ld(a.root).dom,d=g=>{const h=Fa(g),C=Fa(t.element);return qn(h,C)};return R.from(i.frameElement).map(ue.fromDom).filter(d).map(Vo)},lS=(t,s,a)=>{const i=Fa(t.element),d=Zr(i),g=Mb(t,s,a).getOr(d);return Uy(g,d.left,d.top)},ud=(t,s,a,i)=>{const d=iS(No(t,s));return R.some(xm(d,a,i))},f4=(t,s,a,i,d)=>t.map(g=>{const h=[s,g.point],C=zx(i,()=>cS(h),()=>cS(h),()=>aS(h)),S=Rw(C.left,C.top,g.width,g.height),T=a.showAbove?Fx():Hh(),O=a.showAbove?Lx():Sb(),P=Db(d,a,T,O,T,O,R.none());return Rb({anchorBox:S,bubble:a.bubble.getOr(Ab()),overrides:a.overrides,layouts:P})}),uS=(t,s,a)=>{const i=lS(t,a,s);return s.node.filter(uc).bind(d=>{const g=d.dom.getBoundingClientRect(),h=ud(g.left,g.top,g.width,g.height),C=s.node.getOr(t.element);return f4(h,i,s,a,C)})};var dS=[Oe("node"),Oe("root"),Pn("bubble"),ld(),fe("overrides",{}),fe("showAbove",!1),so("placement",uS)];const Pb="\uFEFF",m4=" ",Nb={create:(t,s,a,i)=>({start:t,soffset:s,finish:a,foffset:i})},Kh=wa.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),fS=(t,s,a,i)=>t.fold(s,a,i),eg=t=>t.fold(rn,rn,rn),tg=Kh.before,g4=Kh.on,mS=Kh.after,h4={before:tg,on:g4,after:mS,cata:fS,getStart:eg},Rf=wa.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ng=t=>Rf.exact(t.start,t.soffset,t.finish,t.foffset),Wy=t=>t.match({domRange:s=>ue.fromDom(s.startContainer),relative:(s,a)=>h4.getStart(s),exact:(s,a,i,d)=>s}),Zy=Rf.domRange,p4=Rf.relative,jy=Rf.exact,gS=t=>{const s=Wy(t);return Ld(s)},hS=Nb.create,og={domRange:Zy,relative:p4,exact:jy,exactFromRange:ng,getWin:gS,range:hS},pS=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,i)=>{t.setStart(a.dom,i)},a=>{t.setStartAfter(a.dom)})},Bb=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,i)=>{t.setEnd(a.dom,i)},a=>{t.setEndAfter(a.dom)})},dd=(t,s,a)=>{const i=t.document.createRange();return pS(i,s),Bb(i,a),i},ou=(t,s,a,i,d)=>{const g=t.document.createRange();return g.setStart(s.dom,a),g.setEnd(i.dom,d),g},Yh=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),Xh=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?R.some(a).map(Yh):R.none()},b4=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?R.some(s).map(Yh):R.none()},_a=wa.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Ni=(t,s,a)=>s(ue.fromDom(a.startContainer),a.startOffset,ue.fromDom(a.endContainer),a.endOffset),Gy=(t,s)=>s.match({domRange:a=>({ltr:oe(a),rtl:R.none}),relative:(a,i)=>({ltr:ra(()=>dd(t,a,i)),rtl:ra(()=>R.some(dd(t,i,a)))}),exact:(a,i,d,g)=>({ltr:ra(()=>ou(t,a,i,d,g)),rtl:ra(()=>R.some(ou(t,d,g,a,i)))})}),v4=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>_a.rtl(ue.fromDom(d.endContainer),d.endOffset,ue.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>Ni(t,_a.ltr,a)):Ni(t,_a.ltr,a)},BM=(t,s)=>{const a=Gy(t,s);return v4(t,a)},fd=(t,s)=>BM(t,s).match({ltr:(i,d,g,h)=>{const C=t.document.createRange();return C.setStart(i.dom,d),C.setEnd(g.dom,h),C},rtl:(i,d,g,h)=>{const C=t.document.createRange();return C.setStart(g.dom,h),C.setEnd(i.dom,d),C}});_a.ltr,_a.rtl;const sg=(t,s,a)=>yo(gw(t,a),s),sr=(t,s)=>ak(s,t),qy=(t,s,a,i)=>{const g=Fa(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(a.dom,i),g},$b=(t,s,a,i)=>{const d=qy(t,s,a,i),g=qn(t,a)&&s===i;return d.collapsed&&!g},Df=t=>R.from(t.getSelection()),Jh=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return R.some(Nb.create(ue.fromDom(s.startContainer),s.startOffset,ue.fromDom(a.endContainer),a.endOffset))}else return R.none()},y4=t=>{if(t.anchorNode===null||t.focusNode===null)return Jh(t);{const s=ue.fromDom(t.anchorNode),a=ue.fromDom(t.focusNode);return $b(s,t.anchorOffset,a,t.focusOffset)?R.some(Nb.create(s,t.anchorOffset,a,t.focusOffset)):Jh(t)}},Ky=t=>Df(t).filter(s=>s.rangeCount>0).bind(y4),Qh=(t,s)=>{const a=fd(t,s);return Xh(a)},rr=(t,s)=>{const a=fd(t,s);return b4(a)},xc=((t,s)=>{const a=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return i(g).getOr("")},i=g=>t(g)?R.from(g.dom.nodeValue):R.none();return{get:a,getOption:i,set:(g,h)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=h}}})($a,"text"),Xy=t=>xc.get(t),rg=(t,s)=>({element:t,offset:s}),ag=(t,s)=>{const a=Fc(t);if(a.length===0)return rg(t,s);if(s<a.length)return rg(a[s],0);{const i=a[a.length-1],d=$a(i)?Xy(i).length:Fc(i).length;return rg(i,d)}},Jy=(t,s)=>$a(t)?rg(t,s):ag(t,s),su=t=>t.foffset!==void 0,Qy=(t,s)=>s.getSelection.getOrThunk(()=>()=>Ky(t))().map(i=>{if(su(i)){const d=Jy(i.start,i.soffset),g=Jy(i.finish,i.foffset);return og.range(d.element,d.offset,g.element,g.offset)}else return i}),e2=(t,s,a)=>{const i=Ld(s.root).dom,d=lS(t,a,s),g=Qy(i,s).bind(S=>{if(su(S))return rr(i,og.exactFromRange(S)).orThunk(()=>{const O=ue.fromText(Pb);Zd(S.start,O);const P=Qh(i,og.exact(O,0,O,1));return ya(O),P}).bind(O=>ud(O.left,O.top,O.width,O.height));{const T=Lo(S,P=>P.dom.getBoundingClientRect()),O={left:Math.min(T.firstCell.left,T.lastCell.left),right:Math.max(T.firstCell.right,T.lastCell.right),top:Math.min(T.firstCell.top,T.lastCell.top),bottom:Math.max(T.firstCell.bottom,T.lastCell.bottom)};return ud(O.left,O.top,O.right-O.left,O.bottom-O.top)}}),C=Qy(i,s).bind(S=>su(S)?oo(S.start)?R.some(S.start):pi(S.start):R.some(S.firstCell)).getOr(t.element);return f4(g,d,s,a,C)};var t2=[Pn("getSelection"),Oe("root"),Pn("bubble"),ld(),fe("overrides",{}),fe("showAbove",!1),so("placement",e2)];const Sl="link-layout",Ib=t=>t.x+t.width,hr=(t,s)=>t.x-s.width,bS=(t,s)=>t.y-s.height+t.height,n2=t=>t.y,o2=(t,s,a)=>fr(Ib(t),n2(t),a.southeast(),Cb(),"southeast",mr(t,{left:0,top:2}),Sl),vS=(t,s,a)=>fr(hr(t,s),n2(t),a.southwest(),Ey(),"southwest",mr(t,{right:1,top:2}),Sl),s2=(t,s,a)=>fr(Ib(t),bS(t,s),a.northeast(),_y(),"northeast",mr(t,{left:0,bottom:3}),Sl),yS=(t,s,a)=>fr(hr(t,s),bS(t,s),a.northwest(),wb(),"northwest",mr(t,{right:1,bottom:3}),Sl),CS=()=>[o2,vS,s2,yS],qa=()=>[vS,o2,yS,s2],md=(t,s,a)=>{const i=Py(a,s.item.element),d=Db(t.element,s,CS(),qa(),CS(),qa(),R.none());return R.some(Rb({anchorBox:i,bubble:Ab(),overrides:s.overrides,layouts:d}))};var wS=[Oe("item"),ld(),fe("overrides",{}),so("placement",md)],Mf=Qo("type",{selection:t2,node:dS,hotspot:l4,submenu:wS,makeshift:rS});const $r=[Ua("classes",ot),Qs("mode","all",["all","layout","placement"])],Ta=[fe("useFixed",jn),Pn("getBounds")],Ir=[$n("anchor",Mf),Hs("transition",$r)],Ka=()=>{const t=document.documentElement;return Wx(0,0,t.clientWidth,t.clientHeight)},Fb=t=>{const s=Vo(t.element),a=t.element.dom.getBoundingClientRect();return Ux(s.left,s.top,a.width,a.height)},Ya=(t,s,a,i,d,g)=>{const h=Of(s.anchorBox,t);return c4(h,i.element,s.bubble,s.layouts,d,a,s.overrides,g)},Pf=(t,s,a,i,d)=>{const g=R.none();xS(t,s,a,i,d,g)},xS=(t,s,a,i,d,g)=>{const h=ca("placement.info",At(Ir),d),C=h.anchor,S=i.element,T=a.get(i.uid);My(()=>{Wt(S,"position","fixed");const O=Xo(S,"visibility");Wt(S,"visibility","hidden");const P=s.useFixed()?Ka():Fb(t);C.placement(t,C,P).each(F=>{const V=g.orThunk(()=>s.getBounds.map(fa)),j=Ya(P,F,V,i,T,h.transition);a.set(i.uid,j)}),O.fold(()=>{Qt(S,"visibility")},F=>{Wt(S,"visibility",F)}),Xo(S,"left").isNone()&&Xo(S,"top").isNone()&&Xo(S,"right").isNone()&&Xo(S,"bottom").isNone()&&Na(Xo(S,"position"),"fixed")&&Qt(S,"position")},S)};var r2=Object.freeze({__proto__:null,position:Pf,positionWithinBounds:xS,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,i)=>{const d=i.element;dt(["position","left","right","top","bottom"],g=>Qt(d,g)),e4(d),a.clear(i.uid)}}),Lb=Object.freeze({__proto__:null,init:()=>{let t={};return Pr({readState:()=>t,clear:d=>{Vt(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>it(t,d)})}});const ar=zs({fields:Ta,name:"positioning",active:Jk,apis:r2,state:Lb}),ep=t=>t.getSystem().isConnected(),tp=t=>{un(t,Za());const s=t.components();dt(s,tp)},gd=t=>{const s=t.components();dt(s,gd),un(t,ia())},a2=(t,s)=>{t.getSystem().addToWorld(s),uc(t.element)&&gd(s)},Hb=t=>{tp(t),t.getSystem().removeFromWorld(t)},c2=(t,s)=>{Wr(t.element,s.element)},Vb=t=>{dt(t.components(),s=>ya(s.element)),Js(t.element),t.syncComponents()},i2=(t,s,a)=>{const i=t.components();Vb(t);const d=a(s),g=Pt(i,d);dt(g,h=>{tp(h),t.getSystem().removeFromWorld(h)}),dt(d,h=>{ep(h)?c2(t,h):(t.getSystem().addToWorld(h),c2(t,h),uc(t.element)&&gd(h))}),t.syncComponents()},cg=(t,s,a)=>{const i=t.components(),d=_e(s,C=>gb(C).toArray());dt(i,C=>{Io(d,C)||Hb(C)});const g=a(s),h=Pt(i,g);dt(h,C=>{ep(C)&&Hb(C)}),dt(g,C=>{ep(C)||a2(t,C)}),t.syncComponents()},ru=(t,s)=>{np(t,s,Wr)},np=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),uc(t.element)&&gd(s),t.syncComponents()},Nf=t=>{tp(t),ya(t.element),t.getSystem().removeFromWorld(t)},au=t=>{const s=Ic(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());Nf(t),s.each(a=>{a.syncComponents()})},SS=t=>{const s=t.components();dt(s,Nf),Js(t.element),t.syncComponents()},ka=(t,s)=>{hd(t,s,Wr)},l2=(t,s)=>{hd(t,s,Ow)},hd=(t,s,a)=>{a(t,s.element);const i=Fc(s.element);dt(i,d=>{s.getByDom(d).each(gd)})},Bf=t=>{const s=Fc(t.element);dt(s,a=>{t.getByDom(a).each(tp)}),ya(t.element)},zb=(t,s,a,i)=>{a.get().each(h=>{SS(t)});const d=s.getAttachPoint(t);ru(d,t);const g=t.getSystem().build(i);return ru(t,g),a.set(g),g},Ub=(t,s,a,i)=>{const d=zb(t,s,a,i);return s.onOpen(t,d),d},x4=(t,s,a,i)=>a.get().map(()=>zb(t,s,a,i)),S4=(t,s,a,i,d)=>{TS(t,s),Ub(t,s,a,i),d(),Wb(t,s)},ES=(t,s,a)=>{a.get().each(i=>{SS(t),au(t),s.onClose(t,i),a.clear()})},_S=(t,s,a)=>a.isOpen(),$f=(t,s,a,i)=>_S(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,i)),ig=(t,s,a)=>a.get(),op=(t,s,a,i)=>{Xo(t.element,s).fold(()=>{Po(t.element,a)},d=>{Nt(t.element,a,d)}),Wt(t.element,s,i)},E4=(t,s,a)=>{Ho(t.element,a).fold(()=>Qt(t.element,s),i=>Wt(t.element,s,i))},TS=(t,s,a)=>{const i=s.getAttachPoint(t);Wt(t.element,"position",ar.getMode(i)),op(t,"visibility",s.cloakVisibilityAttr,"hidden")},sp=t=>ma(["top","left","right","bottom"],s=>Xo(t,s).isSome()),Wb=(t,s,a)=>{sp(t.element)||Qt(t.element,"position"),E4(t,"visibility",s.cloakVisibilityAttr)};var u2=Object.freeze({__proto__:null,cloak:TS,decloak:Wb,open:Ub,openWhileCloaked:S4,close:ES,isOpen:_S,isPartOf:$f,getState:ig,setContent:x4}),Zb=Object.freeze({__proto__:null,events:(t,s)=>zn([ke(Vs(),(a,i)=>{ES(a,t,s)})])}),lg=[xn("onOpen"),xn("onClose"),Oe("isPartOf"),Oe("getAttachPoint"),fe("cloakVisibilityAttr","data-precloak-visibility")],If=Object.freeze({__proto__:null,init:()=>{const t=In(),s=oe("not-implemented");return Pr({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const _n=zs({fields:lg,name:"sandboxing",active:Zb,apis:u2,state:If}),cu=oe("dismiss.popups"),pd=oe("reposition.popups"),jb=oe("mouse.released"),d2=za([fe("isExtraPart",jn),Hs("fireEventInstead",[fe("event",ja())])]),rp=t=>{const s=ca("Dismissal",d2,t);return{[cu()]:{schema:za([Oe("target")]),onReceive:(a,i)=>{_n.isOpen(a)&&(_n.isPartOf(a,i.target)||s.isExtraPart(a,i.target)||s.fireEventInstead.fold(()=>_n.close(a),g=>un(a,g.event)))}}}},Ff=za([Hs("fireEventInstead",[fe("event",xh())]),jc("doReposition")]),ap=t=>{const s=ca("Reposition",Ff,t);return{[pd()]:{onReceive:a=>{_n.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),i=>un(a,i.event))}}}},Gb=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},AS=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var bd=Object.freeze({__proto__:null,onLoad:Gb,onUnload:AS,setValue:(t,s,a,i)=>{s.store.manager.setValue(t,s,a,i)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),m2=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[go((i,d)=>{Gb(i,t,s)}),hl((i,d)=>{AS(i,t,s)})]:[Yu(t,s,Gb)];return zn(a)}});const Hf=()=>{const t=Et(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,i=()=>{t.set(null)};return Pr({set:t.set,get:t.get,isNotSet:a,clear:i,readState:s})},g2=()=>Pr({readState:Q}),RS=()=>{const t=Et({}),s=Et({});return Pr({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:h=>it(t.get(),h).orThunk(()=>it(s.get(),h)),update:h=>{const C=t.get(),S=s.get(),T={},O={};dt(h,P=>{T[P.value]=P,it(P,"meta").each(F=>{it(F,"text").each(V=>{O[V]=P})})}),t.set({...C,...T}),s.set({...S,...O})},clear:()=>{t.set({}),s.set({})}})};var El=Object.freeze({__proto__:null,memory:Hf,dataset:RS,manual:g2,init:t=>t.store.manager.state(t)});const MS=(t,s,a,i)=>{const d=s.store;a.update([i]),d.setValue(t,i),s.onSetValue(t,i)},Kb=(t,s,a)=>{const i=s.store,d=i.getDataKey(t);return a.lookup(d).getOrThunk(()=>i.getFallbackEntry(d))},Sc=(t,s,a)=>{s.store.initialValue.each(d=>{MS(t,s,a,d)})},Us=(t,s,a)=>{a.clear()};var T4=[Pn("initialValue"),Oe("getFallbackEntry"),Oe("getDataKey"),Oe("setValue"),so("manager",{setValue:MS,getValue:Kb,onLoad:Sc,onUnload:Us,state:RS})];const Bi=(t,s,a)=>s.store.getValue(t),k4=(t,s,a,i)=>{s.store.setValue(t,i),s.onSetValue(t,i)},PS=(t,s,a)=>{s.store.initialValue.each(i=>{s.store.setValue(t,i)})};var cp=[Oe("getValue"),fe("setValue",Q),Pn("initialValue"),so("manager",{setValue:k4,getValue:Bi,onLoad:PS,onUnload:Q,state:Ai.init})];const ug=(t,s,a,i)=>{a.set(i),s.onSetValue(t,i)},NS=(t,s,a)=>a.get(),BS=(t,s,a)=>{s.store.initialValue.each(i=>{a.isNotSet()&&a.set(i)})},IM=(t,s,a)=>{a.clear()};var FM=[Pn("initialValue"),so("manager",{setValue:ug,getValue:NS,onLoad:BS,onUnload:IM,state:Hf})],$S=[mo("store",{mode:"memory"},Qo("mode",{memory:FM,manual:cp,dataset:T4})),xn("onSetValue"),fe("resetOnDom",!1)];const rt=zs({fields:$S,name:"representing",active:m2,apis:bd,extra:{setValueFrom:(t,s)=>{const a=rt.getValue(s);rt.setValue(t,a)}},state:El}),Ws=(t,s)=>Lw(t,{},Ne(s,a=>Fv(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([Bn("dump",rn)])),Yb=t=>t.dump,Zs=(t,s)=>({...He(s),...t.dump}),Ec={field:Ws,augment:Zs,get:Yb},h2="placeholder",ip=wa.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),dg=t=>Vn(t,"uiType"),IS=(t,s,a,i)=>t.exists(d=>d!==a.owner)?ip.single(!0,oe(a)):it(i,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+Fo(i)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),vd=(t,s,a,i)=>dg(a)&&a.uiType===h2?IS(t,s,a,i):ip.single(!1,oe(a)),fg=(t,s,a,i)=>vd(t,s,a,i).fold((g,h)=>{const C=dg(a)?h(s,a.config,a.validated):h(s),S=it(C,"components").getOr([]),T=_e(S,O=>fg(t,s,O,i));return[{...C,components:T}]},(g,h)=>{if(dg(a)){const C=h(s,a.config,a.validated);return a.validated.preprocess.getOr(rn)(C)}else return h(s)}),O4=(t,s,a,i)=>_e(a,d=>fg(t,s,d,i)),A4=(t,s)=>{let a=!1;const i=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},g=()=>s.fold((h,C)=>h,(h,C)=>h);return{name:oe(t),required:g,used:i,replace:d}},R4=(t,s,a,i)=>{const d=Lo(i,(h,C)=>A4(C,h)),g=O4(t,s,a,d);return Bs(d,h=>{if(h.used()===!1&&h.required())throw new Error("Placeholder: "+h.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},FS=ip.single,Vf=ip.multiple,mg=oe(h2),zf=wa.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Xb=fe("factory",{sketch:rn}),Xa=fe("schema",[]),$i=Oe("name"),Uf=Ls("pname","pname",Mv(t=>"<alloy."+mt(t.name)+">"),Uc()),gg=Bn("schema",()=>[Pn("preprocess")]),Jb=fe("defaults",oe({})),Qb=fe("overrides",oe({})),D4=At([Xb,Xa,$i,Uf,Jb,Qb]),M4=At([Xb,Xa,$i,Jb,Qb]),P4=At([Xb,Xa,$i,Uf,Jb,Qb]),N4=At([Xb,gg,$i,Oe("unit"),Uf,Jb,Qb]),LS=t=>t.fold(R.some,R.none,R.some,R.some),HS=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},p2=t=>t.fold(rn,rn,rn,rn),e0=(t,s)=>a=>{const i=ca("Converting part type",s,a);return t(i)},xr=e0(zf.required,D4),_c=e0(zf.external,M4),Ja=e0(zf.optional,P4),lp=e0(zf.group,N4),b2=oe("entirety");var VS=Object.freeze({__proto__:null,required:xr,external:_c,optional:Ja,group:lp,asNamedPart:LS,name:HS,asCommon:p2,original:b2});const t0=(t,s,a,i)=>Uo(s.defaults(t,a,i),a,{uid:t.partUids[s.name]},s.overrides(t,a,i)),B4=(t,s,a)=>{const i={},d={};return dt(a,g=>{g.fold(h=>{i[h.pname]=FS(!0,(C,S,T)=>h.factory.sketch(t0(C,h,S,T)))},h=>{const C=s.parts[h.name];d[h.name]=oe(h.factory.sketch(t0(s,h,C[b2()]),C))},h=>{i[h.pname]=FS(!1,(C,S,T)=>h.factory.sketch(t0(C,h,S,T)))},h=>{i[h.pname]=Vf(!0,(C,S,T)=>{const O=C[h.name];return Ne(O,P=>h.factory.sketch(Uo(h.defaults(C,P,T),P,h.overrides(C,P))))})})}),{internals:oe(i),externals:oe(d)}},n0=(t,s)=>{const a={};return dt(s,i=>{LS(i).each(d=>{const g=$4(t,d.pname);a[d.name]=h=>{const C=ca("Part: "+d.name+" in "+t,At(d.schema),h);return{...g,config:h,validated:C}}})}),a},$4=(t,s)=>({uiType:mg(),owner:t,name:s}),o0=(t,s,a)=>({uiType:mg(),owner:t,name:s,config:a,validated:{}}),I4=t=>_e(t,s=>s.fold(R.none,R.some,R.none,R.none).map(a=>Vu(a.name,a.schema.concat([yf(b2())]))).toArray()),F4=t=>Ne(t,HS),zS=(t,s,a)=>B4(t,s,a),s0=(t,s,a)=>R4(R.some(t),s,s.components,a),Jn=(t,s,a)=>{const i=s.partUids[a];return t.getSystem().getByUid(i).toOptional()},at=(t,s,a)=>Jn(t,s,a).getOrDie("Could not find part: "+a),Ii=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return dt(a,h=>{i[h]=oe(g.getByUid(d[h]))}),i},US=(t,s)=>{const a=t.getSystem();return Lo(s.partUids,(i,d)=>oe(a.getByUid(i)))},v2=t=>Fo(t.partUids),hg=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return dt(a,h=>{i[h]=oe(g.getByUid(d[h]).getOrDie())}),i},r0=(t,s)=>{const a=F4(s);return km(Ne(a,i=>({key:i,value:t+"-"+i})))},up=t=>Ls("partUids","partUids",M1(s=>r0(s.uid,t)),Uc());var y2=Object.freeze({__proto__:null,generate:n0,generateOne:o0,schemas:I4,names:F4,substitutes:zS,components:s0,defaultUids:r0,defaultUidsSchema:up,getAllParts:US,getAllPartNames:v2,getPart:Jn,getPartOrDie:at,getParts:Ii,getPartsOrDie:hg});const WS=(t,s)=>(t.length>0?[Vu("parts",t)]:[]).concat([Oe("uid"),fe("dom",{}),fe("components",[]),yf("originalSpec"),fe("debug.sketcher",{})]).concat(s),C2=(t,s,a,i,d)=>{const g=WS(i,d);return ca(t+" [SpecSchema]",za(g.concat(s)),a)},ZS=(t,s,a,i)=>{const d=a0(i),g=C2(t,s,d,[],[]);return a(g,d)},dp=(t,s,a,i,d)=>{const g=a0(d),h=I4(a),C=up(a),S=C2(t,s,g,h,[C]),T=zS(t,S,a),O=s0(t,S,T.internals());return i(S,O,g,T.externals())},Wf=t=>Vn(t,"uid"),a0=t=>Wf(t)?t:{...t,uid:Ph("uid")},L4=t=>t.uid!==void 0,H4=za([Oe("name"),Oe("factory"),Oe("configFields"),fe("apis",{}),fe("extraApis",{})]),V4=za([Oe("name"),Oe("factory"),Oe("configFields"),Oe("partFields"),fe("apis",{}),fe("extraApis",{})]),Oa=t=>{const s=ca("Sketcher for "+t.name,H4,t),a=g=>ZS(s.name,s.configFields,s.factory,g),i=Lo(s.apis,hb),d=Lo(s.extraApis,(g,h)=>Xv(g,h));return{name:s.name,configFields:s.configFields,sketch:a,...i,...d}},pr=t=>{const s=ca("Sketcher for "+t.name,V4,t),a=h=>dp(s.name,s.configFields,s.partFields,s.factory,h),i=n0(s.name,s.partFields),d=Lo(s.apis,hb),g=Lo(s.extraApis,(h,C)=>Xv(h,C));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:i,...d,...g}},pg=t=>Ou("input")(t)&&Jt(t,"type")!=="radio"||Ou("textarea")(t);var z4=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const U4=[Oe("find")],yn=zs({fields:U4,name:"composing",apis:z4}),W4=["input","button","textarea","select"],Z4=(t,s,a)=>{(s.disabled()?x2:c0)(t,s)},w2=(t,s)=>s.useNative===!0&&Io(W4,$c(t.element)),HM=t=>wv(t.element,"disabled"),VM=t=>{Nt(t.element,"disabled","disabled")},yd=t=>{Po(t.element,"disabled")},fp=t=>Jt(t.element,"aria-disabled")==="true",j4=t=>{Nt(t.element,"aria-disabled","true")},G4=t=>{Nt(t.element,"aria-disabled","false")},x2=(t,s,a)=>{s.disableClass.each(d=>{rs(t.element,d)}),(w2(t,s)?VM:j4)(t),s.onDisabled(t)},c0=(t,s,a)=>{s.disableClass.each(d=>{Un(t.element,d)}),(w2(t,s)?yd:G4)(t),s.onEnabled(t)},i0=(t,s)=>w2(t,s)?HM(t):fp(t);var q4=Object.freeze({__proto__:null,enable:c0,disable:x2,isDisabled:i0,onLoad:Z4,set:(t,s,a,i)=>{(i?x2:c0)(t,s)}}),K4=Object.freeze({__proto__:null,exhibit:(t,s)=>Gr({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>zn([qv(nr(),(a,i)=>i0(a,t)),Yu(t,s,Z4)])}),jS=[po("disabled",jn),fe("useNative",!0),Pn("disableClass"),xn("onDisabled"),xn("onEnabled")];const Bt=zs({fields:jS,name:"disabling",active:K4,apis:q4}),l0=(t,s,a,i)=>{const d=sr(t.element,"."+s.highlightClass);dt(d,g=>{ma(i,C=>qn(C.element,g))||(Un(g,s.highlightClass),t.getSystem().getByDom(g).each(C=>{s.onDehighlight(t,C),un(C,Rm())}))})},l=(t,s,a)=>l0(t,s,a,[]),f=(t,s,a,i)=>{z(t,s,a,i)&&(Un(i.element,s.highlightClass),s.onDehighlight(t,i),un(i,Rm()))},p=(t,s,a,i)=>{l0(t,s,a,[i]),z(t,s,a,i)||(rs(i.element,s.highlightClass),s.onHighlight(t,i),un(i,jv()))},y=(t,s,a)=>{me(t,s).each(i=>{p(t,s,a,i)})},_=(t,s,a)=>{Ie(t,s).each(i=>{p(t,s,a,i)})},A=(t,s,a,i)=>{te(t,s,a,i).fold(d=>{throw d},d=>{p(t,s,a,d)})},I=(t,s,a,i)=>{const d=bt(t,s);Zt(d,i).each(h=>{p(t,s,a,h)})},z=(t,s,a,i)=>qr(i.element,s.highlightClass),q=(t,s,a)=>bo(t.element,"."+s.highlightClass).bind(i=>t.getSystem().getByDom(i).toOptional()),te=(t,s,a,i)=>{const d=sr(t.element,"."+s.itemClass);return R.from(d[i]).fold(()=>on.error(new Error("No element found with index "+i)),t.getSystem().getByDom)},me=(t,s,a)=>bo(t.element,"."+s.itemClass).bind(i=>t.getSystem().getByDom(i).toOptional()),Ie=(t,s,a)=>{const i=sr(t.element,"."+s.itemClass);return(i.length>0?R.some(i[i.length-1]):R.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},tt=(t,s,a,i)=>{const d=sr(t.element,"."+s.itemClass);return ho(d,h=>qr(h,s.highlightClass)).bind(h=>{const C=Cf(h,i,0,d.length-1);return t.getSystem().getByDom(d[C]).toOptional()})},Xe=(t,s,a)=>tt(t,s,a,-1),Ze=(t,s,a)=>tt(t,s,a,1),bt=(t,s,a)=>{const i=sr(t.element,"."+s.itemClass);return Bd(Ne(i,d=>t.getSystem().getByDom(d).toOptional()))};var Pe=Object.freeze({__proto__:null,dehighlightAll:l,dehighlight:f,highlight:p,highlightFirst:y,highlightLast:_,highlightAt:A,highlightBy:I,isHighlighted:z,getHighlighted:q,getFirst:me,getLast:Ie,getPrevious:Xe,getNext:Ze,getCandidates:bt}),je=[Oe("highlightClass"),Oe("itemClass"),xn("onHighlight"),xn("onDehighlight")];const qe=zs({fields:je,name:"highlighting",apis:Pe}),Ft=[8],Cn=[9],Wn=[13],ao=[27],xo=[32],Qa=[37],Fi=[38],Zf=[39],_l=[40],Qn=(t,s,a)=>{const i=Or(t.slice(0,s)),d=Or(t.slice(s+1));return Zt(i.concat(d),a)},Yr=(t,s,a)=>{const i=Or(t.slice(0,s));return Zt(i,a)},Xr=(t,s,a)=>{const i=t.slice(0,s),d=t.slice(s+1);return Zt(d.concat(i),a)},Tc=(t,s,a)=>{const i=t.slice(s+1);return Zt(i,a)},en=t=>s=>{const a=s.raw;return Io(t,a.which)},la=t=>s=>Tu(t,a=>a(s)),ws=t=>t.raw.shiftKey===!0,u0=t=>t.raw.ctrlKey===!0,iu=De(ws),an=(t,s)=>({matches:t,classification:s}),Sr=(t,s)=>Zt(t,i=>i.matches(s)).map(i=>i.classification),d0=(t,s,a)=>{s.exists(d=>a.exists(g=>qn(g,d)))||yt(t,Sh(),{prevFocus:s,newFocus:a})},f0=()=>{const t=a=>Br(a.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().triggerFocus(i,a.element);const g=t(a);d0(a,d,g)}}},GS=()=>{const t=a=>qe.getHighlighted(a).map(i=>i.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().getByDom(i).fold(Q,h=>{qe.highlight(a,h)});const g=t(a);d0(a,d,g)}}};var Cd;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(Cd||(Cd={}));const jf=(t,s,a,i,d)=>{const g=()=>t.concat([fe("focusManager",f0()),mo("focusInside","onFocus",mh(T=>Io(["onFocus","onEnterOrSpace","onApi"],T)?on.value(T):on.error("Invalid value for focusInside"))),so("handler",S),so("state",s),so("sendFocusIn",d)]),h=(T,O,P,F,V)=>{const j=P(T,O,F,V);return Sr(j,O.event).bind(Y=>Y(T,O,F,V))},S={schema:g,processKey:h,toEvents:(T,O)=>{const P=T.focusInside!==Cd.OnFocusMode?R.none():d(T).map(j=>ke(ki(),(Y,ie)=>{j(Y,T,O),ie.stop()})),F=(j,Y)=>{const ie=en(xo.concat(Wn))(Y.event);T.focusInside===Cd.OnEnterOrSpaceMode&&ie&&z1(j,Y)&&d(T).each(X=>{X(j,T,O),Y.stop()})},V=[ke(pc(),(j,Y)=>{h(j,Y,a,T,O).fold(()=>{F(j,Y)},ie=>{Y.stop()})}),ke(of(),(j,Y)=>{h(j,Y,i,T,O).each(ie=>{Y.stop()})})];return zn(P.toArray().concat(V))}};return S},m0=t=>{const s=[Pn("onEscape"),Pn("onEnter"),fe("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),fe("firstTabstop",0),fe("useTabstopAt",Dt),Pn("visibilitySelector")].concat([t]),a=(X,ae)=>{const ce=X.visibilitySelector.bind(ye=>Cl(ae,ye)).getOr(ae);return ps(ce)>0},i=(X,ae)=>{const ce=sr(X.element,ae.selector),ye=yo(ce,we=>a(ae,we));return R.from(ye[ae.firstTabstop])},d=(X,ae)=>ae.focusManager.get(X).bind(ce=>Cl(ce,ae.selector)),g=(X,ae)=>a(X,ae)&&X.useTabstopAt(ae),h=(X,ae,ce)=>{i(X,ae).each(ye=>{ae.focusManager.set(X,ye)})},C=(X,ae,ce,ye,we)=>we(ae,ce,Ge=>g(ye,Ge)).fold(()=>ye.cyclic?R.some(!0):R.none(),Ge=>(ye.focusManager.set(X,Ge),R.some(!0))),S=(X,ae,ce,ye)=>{const we=sr(X.element,ce.selector);return d(X,ce).bind(Ge=>ho(we,An(qn,Ge)).bind(Te=>C(X,we,Te,ce,ye)))},T=(X,ae,ce)=>{const ye=ce.cyclic?Qn:Yr;return S(X,ae,ce,ye)},O=(X,ae,ce)=>{const ye=ce.cyclic?Xr:Tc;return S(X,ae,ce,ye)},P=X=>Hd(X).bind(b1).exists(ae=>qn(ae,X)),F=(X,ae,ce)=>d(X,ce).filter(ye=>!ce.useTabstopAt(ye)).bind(ye=>(P(ye)?T:O)(X,ae,ce)),V=(X,ae,ce)=>ce.onEnter.bind(ye=>ye(X,ae)),j=(X,ae,ce)=>ce.onEscape.bind(ye=>ye(X,ae)),Y=oe([an(la([ws,en(Cn)]),T),an(en(Cn),O),an(la([iu,en(Wn)]),V)]),ie=oe([an(en(ao),j),an(en(Cn),F)]);return jf(s,Ai.init,Y,ie,()=>R.some(h))};var Y4=m0(Bn("cyclic",jn)),gp=m0(Bn("cyclic",Dt));const YL=(t,s,a)=>(X1(t,a,nr()),R.some(!0)),Gf=(t,s,a)=>pg(a)&&en(xo)(s.event)?R.none():YL(t,s,a),hp=(t,s)=>R.some(!0),UM=[fe("execute",Gf),fe("useSpace",!1),fe("useEnter",!0),fe("useControlEnter",!1),fe("useDown",!1)],qS=(t,s,a)=>a.execute(t,s,t.element),XL=(t,s,a,i)=>{const d=a.useSpace&&!pg(t.element)?xo:[],g=a.useEnter?Wn:[],h=a.useDown?_l:[],C=d.concat(g).concat(h);return[an(en(C),qS)].concat(a.useControlEnter?[an(la([u0,en(Wn)]),qS)]:[])},WM=(t,s,a,i)=>a.useSpace&&!pg(t.element)?[an(en(xo),hp)]:[];var JL=jf(UM,Ai.init,XL,WM,()=>R.none());const X4=()=>{const t=In();return Pr({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var e8=Object.freeze({__proto__:null,flatgrid:X4,init:t=>t.state(t)});const ZM=t=>(s,a,i,d)=>{const g=t(s.element);return jM(g,s,a,i,d)},J4=(t,s)=>{const a=Vy(t,s);return ZM(a)},Q4=(t,s)=>{const a=Vy(s,t);return ZM(a)},eO=t=>(s,a,i,d)=>jM(t,s,a,i,d),jM=(t,s,a,i,d)=>i.focusManager.get(s).bind(h=>t(s.element,h,i,d)).map(h=>(i.focusManager.set(s,h),!0)),E2=eO,KS=eO,YS=eO,aK=t=>t.offsetWidth<=0&&t.offsetHeight<=0,tO=t=>!aK(t.dom),t8=(t,s)=>ho(t,s).map(a=>({index:a,candidates:t})),GM=(t,s,a)=>{const i=h=>qn(h,s),d=sr(t,a),g=yo(d,tO);return t8(g,i)},ni=(t,s)=>ho(t,a=>qn(s,a)),qM=(t,s,a,i)=>{const d=Math.floor(s/a),g=s%a;return i(d,g).bind(h=>{const C=h.row*a+h.column;return C>=0&&C<t.length?R.some(t[C]):R.none()})},KM=(t,s,a,i,d)=>qM(t,s,i,(g,h)=>{const S=g===a-1?t.length-g*i:i,T=Cf(h,d,0,S-1);return R.some({row:g,column:T})}),YM=(t,s,a,i,d)=>qM(t,s,i,(g,h)=>{const C=Cf(g,d,0,a-1),T=C===a-1?t.length-C*i:i,O=Jc(h,0,T-1);return R.some({row:C,column:O})}),n8=(t,s,a,i)=>KM(t,s,a,i,1),o8=(t,s,a,i)=>KM(t,s,a,i,-1),g0=(t,s,a,i)=>YM(t,s,a,i,-1),nO=(t,s,a,i)=>YM(t,s,a,i,1),s8=[Oe("selector"),fe("execute",Gf),Cr("onEscape"),fe("captureTab",!1),tu()],oO=(t,s,a)=>{bo(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},XS=(t,s)=>s.focusManager.get(t).bind(a=>Cl(a,s.selector)),sO=(t,s,a,i)=>XS(t,a).bind(d=>a.execute(t,s,d)),JS=t=>(s,a,i,d)=>GM(s,a,i.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(i.initSize.numRows),d.getNumColumns().getOr(i.initSize.numColumns))),XM=(t,s,a)=>a.captureTab?R.some(!0):R.none(),r8=(t,s,a)=>a.onEscape(t,s),JM=JS(o8),QM=JS(n8),a8=JS(g0),c8=JS(nO),eP=oe([an(en(Qa),J4(JM,QM)),an(en(Zf),Q4(JM,QM)),an(en(Fi),E2(a8)),an(en(_l),KS(c8)),an(la([ws,en(Cn)]),XM),an(la([iu,en(Cn)]),XM),an(en(xo.concat(Wn)),sO)]),QS=oe([an(en(ao),r8),an(en(xo),hp)]);var i8=jf(s8,X4,eP,QS,()=>R.some(oO));const tP=(t,s,a,i,d)=>{const g=C=>$c(C)==="button"&&Jt(C,"disabled")==="disabled",h=(C,S,T)=>d(C,S,i,0,T.length-1,T[S],O=>g(T[O])?h(C,O,T):R.from(T[O]));return GM(t,a,s).bind(C=>{const S=C.index,T=C.candidates;return h(S,S,T)})},nP=(t,s,a,i)=>tP(t,s,a,i,(d,g,h,C,S,T,O)=>{const P=Jc(g+h,C,S);return P===d?R.from(T):O(P)}),eE=(t,s,a,i)=>tP(t,s,a,i,(d,g,h,C,S,T,O)=>{const P=Cf(g,h,C,S);return P===d?R.none():O(P)}),h0=[Oe("selector"),fe("getInitial",R.none),fe("execute",Gf),Cr("onEscape"),fe("executeOnMove",!1),fe("allowVertical",!0),fe("allowHorizontal",!0),fe("cycles",!0)],oP=(t,s)=>s.focusManager.get(t).bind(a=>Cl(a,s.selector)),rO=(t,s,a)=>oP(t,a).bind(i=>a.execute(t,s,i)),aO=(t,s,a)=>{s.getInitial(t).orThunk(()=>bo(t.element,s.selector)).each(i=>{s.focusManager.set(t,i)})},sP=(t,s,a)=>(a.cycles?eE:nP)(t,a.selector,s,-1),cO=(t,s,a)=>(a.cycles?eE:nP)(t,a.selector,s,1),iO=t=>(s,a,i,d)=>t(s,a,i,d).bind(()=>i.executeOnMove?rO(s,a,i):R.some(!0)),rP=(t,s,a)=>a.onEscape(t,s),aP=(t,s,a,i)=>{const d=[...a.allowHorizontal?Qa:[]].concat(a.allowVertical?Fi:[]),g=[...a.allowHorizontal?Zf:[]].concat(a.allowVertical?_l:[]);return[an(en(d),iO(J4(sP,cO))),an(en(g),iO(Q4(sP,cO))),an(en(Wn),rO),an(en(xo),rO)]},cP=oe([an(en(xo),hp),an(en(ao),rP)]);var l8=jf(h0,Ai.init,aP,cP,()=>R.some(aO));const tE=(t,s,a)=>R.from(t[s]).bind(i=>R.from(i[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),iP=(t,s,a,i)=>{const g=t[s].length,h=Cf(a,i,0,g-1);return tE(t,s,h)},nE=(t,s,a,i)=>{const d=Cf(a,i,0,t.length-1),g=t[d].length,h=Jc(s,0,g-1);return tE(t,d,h)},lP=(t,s,a,i)=>{const g=t[s].length,h=Jc(a+i,0,g-1);return tE(t,s,h)},_2=(t,s,a,i)=>{const d=Jc(a+i,0,t.length-1),g=t[d].length,h=Jc(s,0,g-1);return tE(t,d,h)},u8=(t,s,a)=>iP(t,s,a,1),uP=(t,s,a)=>iP(t,s,a,-1),Aa=(t,s,a)=>nE(t,a,s,-1),d8=(t,s,a)=>nE(t,a,s,1),dP=(t,s,a)=>lP(t,s,a,-1),fP=(t,s,a)=>lP(t,s,a,1),f8=(t,s,a)=>_2(t,a,s,-1),mP=(t,s,a)=>_2(t,a,s,1),gP=[Vu("selectors",[Oe("row"),Oe("cell")]),fe("cycles",!0),fe("previousSelector",R.none),fe("execute",Gf)],m8=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return bo(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},g8=(t,s,a)=>Br(t.element).bind(i=>a.execute(t,s,i)),h8=(t,s)=>Ne(t,a=>sr(a,s.selectors.cell)),oE=(t,s)=>(a,i,d)=>{const g=d.cycles?t:s;return Cl(i,d.selectors.row).bind(h=>{const C=sr(h,d.selectors.cell);return ni(C,i).bind(S=>{const T=sr(a,d.selectors.row);return ni(T,h).bind(O=>{const P=h8(T,d);return g(P,O,S).map(F=>F.cell)})})})},lO=oE(uP,dP),hP=oE(u8,fP),p8=oE(Aa,f8),pP=oE(d8,mP),bP=oe([an(en(Qa),J4(lO,hP)),an(en(Zf),Q4(lO,hP)),an(en(Fi),E2(p8)),an(en(_l),KS(pP)),an(en(xo.concat(Wn)),g8)]),vP=oe([an(en(xo),hp)]);var b8=jf(gP,Ai.init,bP,vP,()=>R.some(m8));const v8=[Oe("selector"),fe("execute",Gf),fe("moveOnTab",!1)],yP=(t,s,a)=>a.focusManager.get(t).bind(i=>a.execute(t,s,i)),y8=(t,s,a)=>{bo(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},uO=(t,s,a)=>eE(t,a.selector,s,-1),dO=(t,s,a)=>eE(t,a.selector,s,1),bg=(t,s,a,i)=>a.moveOnTab?YS(uO)(t,s,a,i):R.none(),CP=(t,s,a,i)=>a.moveOnTab?YS(dO)(t,s,a,i):R.none(),wP=oe([an(en(Fi),YS(uO)),an(en(_l),YS(dO)),an(la([ws,en(Cn)]),bg),an(la([iu,en(Cn)]),CP),an(en(Wn),yP),an(en(xo),yP)]),xP=oe([an(en(xo),hp)]);var C8=jf(v8,Ai.init,wP,xP,()=>R.some(y8));const p0=[Cr("onSpace"),Cr("onEnter"),Cr("onShiftEnter"),Cr("onLeft"),Cr("onRight"),Cr("onTab"),Cr("onShiftTab"),Cr("onUp"),Cr("onDown"),Cr("onEscape"),fe("stopSpaceKeyup",!1),Pn("focusIn")],w8=(t,s,a)=>[an(en(xo),a.onSpace),an(la([iu,en(Wn)]),a.onEnter),an(la([ws,en(Wn)]),a.onShiftEnter),an(la([ws,en(Cn)]),a.onShiftTab),an(la([iu,en(Cn)]),a.onTab),an(en(Fi),a.onUp),an(en(_l),a.onDown),an(en(Qa),a.onLeft),an(en(Zf),a.onRight),an(en(xo),a.onSpace)],x8=(t,s,a)=>[...a.stopSpaceKeyup?[an(en(xo),hp)]:[],an(en(ao),a.onEscape)];var SP=jf(p0,Ai.init,w8,x8,t=>t.focusIn);const S8=Y4.schema(),E8=gp.schema(),_8=l8.schema(),EP=i8.schema(),fO=b8.schema(),mO=JL.schema(),T8=C8.schema(),vg=SP.schema();var _P=Object.freeze({__proto__:null,acyclic:S8,cyclic:E8,flow:_8,flatgrid:EP,matrix:fO,execution:mO,menu:T8,special:vg});const TP=t=>lc(t,"setGridSize"),_t=ey({branchKey:"mode",branches:_P,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},i=>{i(t,s,a)})},setGridSize:(t,s,a,i,d)=>{TP(a)?a.setGridSize(i,d):console.error("Layout does not support setGridSize")}},state:e8}),kP=(t,s)=>{My(()=>{i2(t,s,()=>Ne(s,t.getSystem().build))},t.element)},b0=(t,s)=>{My(()=>{cg(t,s,()=>Cx(t.element,s,t.getSystem().buildOrPatch))},t.element)},T2=(t,s,a,i)=>{Hb(s);const d=qm(t.element,a,i,t.getSystem().buildOrPatch);a2(t,d),t.syncComponents()},sE=(t,s,a)=>{const i=t.getSystem().build(a);np(t,i,s)},gO=(t,s,a,i)=>{au(s),sE(t,(d,g)=>Aw(d,g,a),i)},yg=(t,s,a,i)=>(s.reuseDom?b0:kP)(t,i),Cg=(t,s,a,i)=>{sE(t,Wr,i)},k8=(t,s,a,i)=>{sE(t,jl,i)},O8=(t,s,a,i)=>{const d=k2(t);Zt(d,h=>qn(i.element,h.element)).each(au)},k2=(t,s)=>t.components(),wd=(t,s,a,i,d)=>{const g=k2(t);return R.from(g[i]).map(h=>(d.fold(()=>au(h),C=>{(s.reuseDom?T2:gO)(t,h,i,C)}),h))};var A8=Object.freeze({__proto__:null,append:Cg,prepend:k8,remove:O8,replaceAt:wd,replaceBy:(t,s,a,i,d)=>{const g=k2(t);return ho(g,i).bind(h=>wd(t,s,a,h,d))},set:yg,contents:k2});const zt=zs({fields:[er("reuseDom",!0)],name:"replacing",apis:A8}),AP=(t,s)=>{const a=zn(s);return zs({fields:[Oe("enabled")],name:t,active:{events:oe(a)}})},qt=(t,s)=>{const a=AP(t,s);return{key:t,value:{config:{},me:a,configAsRaw:oe({}),initialConfig:{},state:Ai}}},rE=(t,s)=>{s.ignore||(wc(t.element),s.onFocus(t))};var D8=Object.freeze({__proto__:null,focus:rE,blur:(t,s)=>{s.ignore||Xm(t.element)},isFocused:t=>kf(t.element)}),pO=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return Gr(a)},events:t=>zn([ke(ki(),(s,a)=>{rE(s,t),a.stop()})].concat(t.stopMousedown?[ke(Wa(),(s,a)=>{a.event.prevent()})]:[]))}),aE=[xn("onFocus"),fe("stopMousedown",!1),fe("ignore",!1)];const $t=zs({fields:aE,name:"focusing",active:pO,apis:D8}),M8=t=>({init:()=>{const a=Et(t);return{get:()=>a.get(),set:C=>a.set(C),clear:()=>a.set(t),readState:()=>a.get()}}}),RP=(t,s,a)=>{const i=s.aria;i.update(t,i,a.get())},DP=(t,s,a)=>{s.toggleClass.each(i=>{a.get()?rs(t.element,i):Un(t.element,i)})},v0=(t,s,a,i)=>{const d=a.get();a.set(i),DP(t,s,a),RP(t,s,a),d!==i&&s.onToggled(t,i)},bO=(t,s,a)=>{v0(t,s,a,!a.get())},P8=(t,s,a)=>{v0(t,s,a,!0)},vO=(t,s,a)=>{v0(t,s,a,!1)},N8=(t,s,a)=>a.get(),MP=(t,s,a)=>{v0(t,s,a,s.selected)};var B8=Object.freeze({__proto__:null,onLoad:MP,toggle:bO,isOn:N8,on:P8,off:vO,set:v0}),I8=Object.freeze({__proto__:null,exhibit:()=>Gr({}),events:(t,s)=>{const a=Sk(t,s,bO),i=Yu(t,s,MP);return zn(Yt([t.toggleOnExecute?[a]:[],[i]]))}});const F8=(t,s,a)=>{Nt(t.element,"aria-pressed",a),s.syncWithExpanded&&NP(t,s,a)},PP=(t,s,a)=>{Nt(t.element,"aria-selected",a)},O2=(t,s,a)=>{Nt(t.element,"aria-checked",a)},NP=(t,s,a)=>{Nt(t.element,"aria-expanded",a)};var A2=[fe("selected",!1),Pn("toggleClass"),fe("toggleOnExecute",!0),xn("onToggled"),mo("aria",{mode:"none"},Qo("mode",{pressed:[fe("syncWithExpanded",!1),so("update",F8)],checked:[so("update",O2)],expanded:[so("update",NP)],selected:[so("update",PP)],none:[so("update",Q)]}))];const nn=zs({fields:A2,name:"toggling",active:I8,apis:B8,state:M8(!1)}),yO=()=>{const t=(s,a)=>{a.stop(),qu(s)};return[ke(sf(),t),ke(q1(),t),lf(_i()),lf(Wa())]},R2=t=>{const s=a=>Yl((i,d)=>{a(i),d.stop()});return zn(Yt([t.map(s).toArray(),yO()]))},BP="alloy.item-hover",$P="alloy.item-focus",CO="alloy.item-toggled",IP=t=>{(Br(t.element).isNone()||$t.isFocused(t))&&($t.isFocused(t)||$t.focus(t),yt(t,BP,{item:t}))},wO=t=>{yt(t,$P,{item:t})},L8=(t,s)=>{yt(t,CO,{item:t,state:s})},FP=oe(BP),LP=oe($P),cE=oe(CO),xO=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),rn),SO=(t,s)=>({aria:{mode:s?"selected":"checked"},...Nd(t,(a,i)=>i!=="exclusive"),onToggled:(a,i)=>{Se(t.onToggled)&&t.onToggled(a,i),L8(a,i)}}),H8=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:xO(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Ec.augment(t.itemBehaviours,[t.toggling.fold(nn.revoke,s=>nn.config(SO(s,t.role.exists(a=>a==="option")))),$t.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{wO(s)}}),_t.config({mode:"execution"}),rt.config({store:{mode:"memory",initialValue:t.data}}),qt("item-type-events",[...yO(),ke(Gc(),IP),ke(Zu(),$t.focus)])]),components:t.components,eventOrder:t.eventOrder}),V8=[Oe("data"),Oe("components"),Oe("dom"),fe("hasSubmenu",!1),Pn("toggling"),Pn("role"),Ec.field("itemBehaviours",[nn,$t,_t,rt]),fe("ignoreFocus",!1),fe("domModification",{}),so("builder",H8),fe("eventOrder",{})],z8=t=>({dom:t.dom,components:t.components,events:zn([Eh(Zu())])}),U8=[Oe("dom"),Oe("components"),so("builder",z8)],iE=oe("item-widget"),lE=oe([xr({name:"widget",overrides:t=>({behaviours:He([rt.config({store:{mode:"manual",getValue:s=>t.data,setValue:Q}})])})})]),W8=t=>{const s=zS(iE(),t,lE()),a=s0(iE(),t,s.internals()),i=g=>Jn(g,t,"widget").map(h=>(_t.focusIn(h),h)),d=(g,h)=>pg(h.event.target)?R.none():(t.autofocus&&h.setSource(g.element),R.none());return{dom:t.dom,components:a,domModification:t.domModification,events:zn([Yl((g,h)=>{i(g).each(C=>{h.stop()})}),ke(Gc(),IP),ke(Zu(),(g,h)=>{t.autofocus?i(g):$t.focus(g)})]),behaviours:Ec.augment(t.widgetBehaviours,[rt.config({store:{mode:"memory",initialValue:t.data}}),$t.config({ignore:t.ignoreFocus,onFocus:g=>{wO(g)}}),_t.config({mode:"special",focusIn:t.autofocus?g=>{i(g)}:ty(),onLeft:d,onRight:d,onEscape:(g,h)=>!$t.isFocused(g)&&!t.autofocus?($t.focus(g),R.some(!0)):(t.autofocus&&h.setSource(g.element),R.none())})])}},Z8=[Oe("uid"),Oe("data"),Oe("components"),Oe("dom"),fe("autofocus",!1),fe("ignoreFocus",!1),Ec.field("widgetBehaviours",[rt,$t,_t]),fe("domModification",{}),up(lE()),so("builder",W8)],j8=Qo("type",{widget:Z8,item:V8,separator:U8}),G8=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),q8=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),K8=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),HP=oe([lp({factory:{sketch:t=>{const s=ca("menu.spec item",j8,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>Vn(s,"uid")?s:{...s,uid:Ph("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),Y8=oe([As("role"),Oe("value"),Oe("items"),Oe("dom"),Oe("components"),fe("eventOrder",{}),Ws("menuBehaviours",[qe,rt,yn,_t]),mo("movement",{mode:"menu",moveOnTab:!0},Qo("mode",{grid:[tu(),so("config",G8)],matrix:[so("config",q8),Oe("rowSelector"),fe("previousSelector",R.none)],menu:[fe("moveOnTab",!0),so("config",K8)]})),Mk(),fe("fakeFocus",!1),fe("focusManager",f0()),xn("onHighlight"),xn("onDehighlight"),fe("showMenuRole",!0)]),VP=oe("alloy.menu-focus"),X8=(t,s)=>{const a=sr(t.element,'[role="menuitemradio"][aria-checked="true"]');dt(a,i=>{qn(i,s.element)||t.getSystem().getByDom(i).each(d=>{nn.off(d)})})},J8=(t,s,a,i)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Zs(t.menuBehaviours,[qe.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),rt.config({store:{mode:"memory",initialValue:t.value}}),yn.config({find:R.some}),_t.config(t.movement.config(t,t.movement))]),events:zn([ke(LP(),(d,g)=>{const h=g.event;d.getSystem().getByDom(h.target).each(C=>{qe.highlight(d,C),g.stop(),yt(d,VP(),{menu:d,item:C})})}),ke(FP(),(d,g)=>{const h=g.event.item;qe.highlight(d,h)}),ke(cE(),(d,g)=>{const{item:h,state:C}=g.event;C&&Jt(h.element,"role")==="menuitemradio"&&X8(d,h)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),pp=pr({name:"Menu",configFields:Y8(),partFields:HP(),factory:J8}),bp=t=>dm(t,(s,a)=>({k:s,v:a})),zP=(t,s,a,i)=>it(a,i).bind(d=>it(t,d).bind(g=>{const h=zP(t,s,a,g);return R.some([g].concat(h))})).getOr([]),Q8=(t,s)=>{const a={};Bs(t,(h,C)=>{dt(h,S=>{a[S]=C})});const i=s,d=bp(s),g=Lo(d,(h,C)=>[C].concat(zP(a,i,d,C)));return Lo(a,h=>it(g,h).getOr([h]))},vp=()=>{const t=Et({}),s=Et({}),a=Et({}),i=In(),d=Et({}),g=()=>{t.set({}),s.set({}),a.set({}),i.clear()},h=()=>i.get().isNone(),C=(we,Ge)=>{s.set({...s.get(),[we]:{type:"prepared",menu:Ge}})},S=(we,Ge,ut,Te)=>{i.set(we),t.set(ut),s.set(Ge),d.set(Te);const ft=Q8(Te,ut);a.set(ft)},T=we=>zr(t.get(),(Ge,ut)=>Ge===we),O=(we,Ge,ut)=>Y(we).bind(Te=>T(we).bind(ft=>Ge(ft).map(nt=>({triggeredMenu:Te,triggeringItem:nt,triggeringPath:ut})))),P=(we,Ge)=>{const ut=yo(X(we).toArray(),Te=>Y(Te).isSome());return it(a.get(),we).bind(Te=>{const ft=Or(ut.concat(Te)),nt=_e(ft,(ht,gn)=>O(ht,Ge,ft.slice(0,gn+1)).fold(()=>Na(i.get(),ht)?[]:[R.none()],lo=>[R.some(lo)]));return To(nt)})},F=we=>it(t.get(),we).map(Ge=>{const ut=it(a.get(),we).getOr([]);return[Ge].concat(ut)}),V=we=>it(a.get(),we).bind(Ge=>Ge.length>1?R.some(Ge.slice(1)):R.none()),j=we=>it(a.get(),we),Y=we=>ie(we).bind(EO),ie=we=>it(s.get(),we),X=we=>it(t.get(),we);return{setMenuBuilt:C,setContents:S,expand:F,refresh:j,collapse:V,lookupMenu:ie,lookupItem:X,otherMenus:we=>{const Ge=d.get();return Pt(Fo(Ge),we)},getPrimary:()=>i.get().bind(Y),getMenus:()=>s.get(),clear:g,isClear:h,getTriggeringPath:P}},EO=t=>t.type==="prepared"?R.some(t.menu):R.none(),UP={init:vp,extractPreparedMenu:EO},qf=mt("tiered-menu-item-highlight"),WP=mt("tiered-menu-item-dehighlight");var Ra;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(Ra||(Ra={}));const Li=(t,s)=>{const a=In(),i=($e,et,Lt)=>Lo(Lt,(tn,St)=>{const jt=()=>pp.sketch({...tn,value:St,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Yn,Zn)=>{yt(Yn,qf,{menuComp:Yn,itemComp:Zn})},onDehighlight:(Yn,Zn)=>{yt(Yn,WP,{menuComp:Yn,itemComp:Zn})},focusManager:t.fakeFocus?GS():f0()});return St===et?{type:"prepared",menu:$e.getSystem().build(jt())}:{type:"notbuilt",nbMenu:jt}}),d=UP.init(),g=$e=>{const et=i($e,t.data.primary,t.data.menus),Lt=S();return d.setContents(t.data.primary,et,t.data.expansions,Lt),d.getPrimary()},h=$e=>rt.getValue($e).value,C=($e,et,Lt)=>ir(et,tn=>{if(!tn.getSystem().isConnected())return R.none();const St=qe.getCandidates(tn);return Zt(St,jt=>h(jt)===Lt)}),S=$e=>Lo(t.data.menus,(et,Lt)=>_e(et.items,tn=>tn.type==="separator"?[]:[tn.data.value])),T=qe.highlight,O=($e,et)=>{T($e,et),qe.getHighlighted(et).orThunk(()=>qe.getFirst(et)).each(Lt=>{t.fakeFocus?qe.highlight(et,Lt):X1($e,Lt.element,Zu())})},P=($e,et)=>Bd(Ne(et,Lt=>$e.lookupMenu(Lt).bind(tn=>tn.type==="prepared"?R.some(tn.menu):R.none()))),F=($e,et,Lt)=>{const tn=P(et,et.otherMenus(Lt));dt(tn,St=>{Ri(St.element,[t.markers.backgroundMenu]),t.stayInDom||zt.remove($e,St)})},V=$e=>a.get().getOrThunk(()=>{const et={},Lt=sr($e.element,`.${t.markers.item}`),tn=yo(Lt,St=>Jt(St,"aria-haspopup")==="true");return dt(tn,St=>{$e.getSystem().getByDom(St).each(jt=>{const Yn=h(jt);et[Yn]=jt})}),a.set(et),et}),j=($e,et)=>{const Lt=V($e);Bs(Lt,(tn,St)=>{const jt=Io(et,St);Nt(tn.element,"aria-expanded",jt)})},Y=($e,et,Lt)=>R.from(Lt[0]).bind(tn=>et.lookupMenu(tn).bind(St=>{if(St.type==="notbuilt")return R.none();{const jt=St.menu,Yn=P(et,Lt.slice(1));return dt(Yn,Zn=>{rs(Zn.element,t.markers.backgroundMenu)}),uc(jt.element)||zt.append($e,Ga(jt)),Ri(jt.element,[t.markers.backgroundMenu]),O($e,jt),F($e,et,Lt),R.some(jt)}}));let ie;(function($e){$e[$e.HighlightSubmenu=0]="HighlightSubmenu",$e[$e.HighlightParent=1]="HighlightParent"})(ie||(ie={}));const X=($e,et,Lt)=>{if(Lt.type==="notbuilt"){const tn=$e.getSystem().build(Lt.nbMenu());return d.setMenuBuilt(et,tn),tn}else return Lt.menu},ae=($e,et,Lt=ie.HighlightSubmenu)=>{if(et.hasConfigured(Bt)&&Bt.isDisabled(et))return R.some(et);{const tn=h(et);return d.expand(tn).bind(St=>(j($e,St),R.from(St[0]).bind(jt=>d.lookupMenu(jt).bind(Yn=>{const Zn=X($e,jt,Yn);return uc(Zn.element)||zt.append($e,Ga(Zn)),t.onOpenSubmenu($e,et,Zn,Or(St)),Lt===ie.HighlightSubmenu?(qe.highlightFirst(Zn),Y($e,d,St)):(qe.dehighlightAll(Zn),R.some(et))}))))}},ce=($e,et)=>{const Lt=h(et);return d.collapse(Lt).bind(tn=>(j($e,tn),Y($e,d,tn).map(St=>(t.onCollapseMenu($e,et,St),St))))},ye=($e,et)=>{const Lt=h(et);return d.refresh(Lt).bind(tn=>(j($e,tn),Y($e,d,tn)))},we=($e,et)=>pg(et.element)?R.none():ae($e,et,ie.HighlightSubmenu),Ge=($e,et)=>pg(et.element)?R.none():ce($e,et),ut=($e,et)=>ce($e,et).orThunk(()=>t.onEscape($e,et).map(()=>$e)),Te=$e=>(et,Lt)=>Cl(Lt.getSource(),`.${t.markers.item}`).bind(tn=>et.getSystem().getByDom(tn).toOptional().bind(St=>$e(et,St).map(Dt))),ft=zn([ke(VP(),($e,et)=>{const Lt=et.event.item;d.lookupItem(h(Lt)).each(()=>{const tn=et.event.menu;qe.highlight($e,tn);const St=h(et.event.item);d.refresh(St).each(jt=>F($e,d,jt))})}),Yl(($e,et)=>{const Lt=et.event.target;$e.getSystem().getByDom(Lt).each(tn=>{h(tn).indexOf("collapse-item")===0&&ce($e,tn),ae($e,tn,ie.HighlightSubmenu).fold(()=>{t.onExecute($e,tn)},Q)})}),go(($e,et)=>{g($e).each(Lt=>{zt.append($e,Ga(Lt)),t.onOpenMenu($e,Lt),t.highlightOnOpen===Ra.HighlightMenuAndItem?O($e,Lt):t.highlightOnOpen===Ra.HighlightJustMenu&&T($e,Lt)})}),ke(qf,($e,et)=>{t.onHighlightItem($e,et.event.menuComp,et.event.itemComp)}),ke(WP,($e,et)=>{t.onDehighlightItem($e,et.event.menuComp,et.event.itemComp)}),...t.navigateOnHover?[ke(FP(),($e,et)=>{const Lt=et.event.item;ye($e,Lt),ae($e,Lt,ie.HighlightParent),t.onHover($e,Lt)})]:[]]),nt=$e=>qe.getHighlighted($e).bind(qe.getHighlighted),ht=$e=>{nt($e).each(et=>{ce($e,et)})},gn=$e=>{d.getPrimary().each(et=>{O($e,et)})},lo=$e=>R.from($e.components()[0]).filter(et=>Jt(et.element,"role")==="menu"),vt={collapseMenu:ht,highlightPrimary:gn,repositionMenus:$e=>{d.getPrimary().bind(Lt=>nt($e).bind(tn=>{const St=h(tn),jt=mv(d.getMenus()),Yn=Bd(Ne(jt,UP.extractPreparedMenu));return d.getTriggeringPath(St,Zn=>C($e,Yn,Zn))}).map(tn=>({primary:Lt,triggeringPath:tn}))).fold(()=>{lo($e).each(Lt=>{t.onRepositionMenu($e,Lt,[])})},({primary:Lt,triggeringPath:tn})=>{t.onRepositionMenu($e,Lt,tn)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Zs(t.tmenuBehaviours,[_t.config({mode:"special",onRight:Te(we),onLeft:Te(Ge),onEscape:Te(ut),focusIn:($e,et)=>{d.getPrimary().each(Lt=>{X1($e,Lt.element,Zu())})}}),qe.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),yn.config({find:$e=>qe.getHighlighted($e)}),zt.config({})]),eventOrder:t.eventOrder,apis:vt,events:ft}},ZP=oe("collapse-item"),jP=(t,s,a)=>({primary:t,menus:s,expansions:a}),GP=(t,s)=>({primary:t,menus:ef(t,s),expansions:{}}),e7=t=>({value:mt(ZP()),meta:{text:t}}),xd=Oa({name:"TieredMenu",configFields:[Wm("onExecute"),Wm("onEscape"),vf("onOpenMenu"),vf("onOpenSubmenu"),xn("onRepositionMenu"),xn("onCollapseMenu"),fe("highlightOnOpen",Ra.HighlightMenuAndItem),Vu("data",[Oe("primary"),Oe("menus"),Oe("expansions")]),fe("fakeFocus",!1),xn("onHighlightItem"),xn("onDehighlightItem"),xn("onHover"),yl(),Oe("dom"),fe("navigateOnHover",!0),fe("stayInDom",!1),Ws("tmenuBehaviours",[_t,qe,yn,zt]),fe("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:Li,extraApis:{tieredData:jP,singleData:GP,collapseItem:e7}}),qP=(t,s,a,i,d)=>{const g=()=>t.lazySink(s),h=i.type==="horizontal"?{layouts:{onLtr:()=>Hh(),onRtl:()=>Sb()}}:{},C=T=>T.length===2,S=T=>C(T)?h:{};return xd.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(_n.close(s),t.onEscape.map(T=>T(s)),R.some(!0)),onExecute:()=>R.some(!0),onOpenMenu:(T,O)=>{ar.positionWithinBounds(g().getOrDie(),O,a,d())},onOpenSubmenu:(T,O,P,F)=>{const V=g().getOrDie();ar.position(V,P,{anchor:{type:"submenu",item:O,...S(F)}})},onRepositionMenu:(T,O,P)=>{const F=g().getOrDie();ar.positionWithinBounds(F,O,a,d()),dt(P,V=>{const j=S(V.triggeringPath);ar.position(F,V.triggeredMenu,{anchor:{type:"submenu",item:V.triggeringItem,...j}})})}})},t7=(t,s)=>{const a=(F,V)=>t.getRelated(F).exists(Y=>sd(Y,V)),i=(F,V)=>{_n.setContent(F,V)},d=(F,V,j)=>{const Y=R.none;g(F,V,j,Y)},g=(F,V,j,Y)=>{const ie=t.lazySink(F).getOrDie();_n.openWhileCloaked(F,V,()=>ar.positionWithinBounds(ie,F,j,Y())),rt.setValue(F,R.some({mode:"position",config:j,getBounds:Y}))},h=(F,V,j)=>{C(F,V,j,R.none)},C=(F,V,j,Y)=>{const ie=qP(t,F,V,j,Y);_n.open(F,ie),rt.setValue(F,R.some({mode:"menu",menu:ie}))},S=F=>{_n.isOpen(F)&&(rt.setValue(F,R.none()),_n.close(F))},T=F=>_n.getState(F),O=F=>{_n.isOpen(F)&&rt.getValue(F).each(V=>{switch(V.mode){case"menu":_n.getState(F).each(xd.repositionMenus);break;case"position":const j=t.lazySink(F).getOrDie();ar.positionWithinBounds(j,F,V.config,V.getBounds());break}})},P={setContent:i,showAt:d,showWithinBounds:g,showMenuAt:h,showMenuWithinBounds:C,hide:S,getContent:T,reposition:O,isOpen:_n.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Zs(t.inlineBehaviours,[_n.config({isPartOf:(F,V,j)=>sd(V,j)||a(F,j),getAttachPoint:F=>t.lazySink(F).getOrDie(),onOpen:F=>{t.onShow(F)},onClose:F=>{t.onHide(F)}}),rt.config({store:{mode:"memory",initialValue:R.none()}}),Ea.config({channels:{...rp({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(F=>({fireEventInstead:{event:F.event}})).getOr({})}),...ap({...t.fireRepositionEventInstead.map(F=>({fireEventInstead:{event:F.event}})).getOr({}),doReposition:O})}})]),eventOrder:t.eventOrder,apis:P}},Ao=Oa({name:"InlineView",configFields:[Oe("lazySink"),xn("onShow"),xn("onHide"),ml("onEscape"),Ws("inlineBehaviours",[_n,rt,Ea]),Hs("fireDismissalEventInstead",[fe("event",ja())]),Hs("fireRepositionEventInstead",[fe("event",xh())]),fe("getRelated",R.none),fe("isExtraPart",jn),fe("eventOrder",R.none)],factory:t7,apis:{showAt:(t,s,a,i)=>{t.showAt(s,a,i)},showWithinBounds:(t,s,a,i,d)=>{t.showWithinBounds(s,a,i,d)},showMenuAt:(t,s,a,i)=>{t.showMenuAt(s,a,i)},showMenuWithinBounds:(t,s,a,i,d)=>{t.showMenuWithinBounds(s,a,i,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var yp=tinymce.util.Tools.resolve("tinymce.util.Delay"),wg=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),KP=tinymce.util.Tools.resolve("tinymce.EditorManager"),Cp=tinymce.util.Tools.resolve("tinymce.Env"),oi;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(oi||(oi={}));var D2;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(D2||(D2={}));const Kn=t=>s=>s.options.get(t),y0=t=>s=>R.from(t(s)),YP=t=>{const s=Cp.deviceType.isPhone(),a=Cp.deviceType.isTablet()||s,i=t.options.register,d=h=>J(h)||h===!1,g=h=>J(h)||sn(h);i("skin",{processor:h=>J(h)||h===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),i("width",{processor:g,default:wg.DOM.getStyle(t.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("font_size_input_default_unit",{processor:"string",default:"pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:h=>J(h)||Xt(h),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:h=>Xt(h)||J(h)||Be(h)?{value:h,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),ls(9,h=>{i("toolbar"+(h+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:D2.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:t.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("ui_mode",{processor:"string",default:"combined"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:d,default:"#top"}),i("anchor_bottom",{processor:d,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:h=>h==="both"||Xt(h),default:!Cp.deviceType.isTouch()}),i("sidebar_show",{processor:"string"}),i("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),i("default_font_stack",{processor:"string[]",default:[]})},XP=Kn("readonly"),_O=Kn("height"),M2=Kn("width"),TO=y0(Kn("min_width")),wp=y0(Kn("min_height")),xp=y0(Kn("max_width")),uE=y0(Kn("max_height")),kO=y0(Kn("style_formats")),JP=Kn("style_formats_merge"),QP=Kn("style_formats_autohide"),eN=Kn("content_langs"),tN=Kn("removed_menuitems"),xg=Kn("toolbar_mode"),OO=Kn("toolbar_groups"),dE=Kn("toolbar_location"),AO=Kn("fixed_toolbar_container"),n7=Kn("fixed_toolbar_container_target"),RO=Kn("toolbar_persist"),nN=Kn("toolbar_sticky_offset"),oN=Kn("menubar"),fE=Kn("toolbar"),DO=Kn("file_picker_callback"),sN=Kn("file_picker_validator_handler"),rN=Kn("font_size_input_default_unit"),mE=Kn("file_picker_types"),MO=Kn("typeahead_urls"),PO=Kn("anchor_top"),aN=Kn("anchor_bottom"),gE=Kn("draggable_modal"),cN=Kn("statusbar"),iN=Kn("elementpath"),NO=Kn("branding"),lN=Kn("resize"),uN=Kn("paste_as_text"),BO=Kn("sidebar_show"),hE=Kn("promotion"),dN=Kn("help_accessibility"),P2=Kn("default_font_stack"),$O=t=>t.options.get("skin")===!1,pE=t=>t.options.get("menubar")!==!1,IO=t=>{const s=t.options.get("skin_url");if($O(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return KP.baseURL+"/skins/ui/"+a}},bE=t=>R.from(t.options.get("skin_url")),fN=t=>t.options.get("line_height_formats").split(" "),vE=t=>{const s=fE(t),a=J(s),i=Be(s)&&s.length>0;return!N2(t)&&(i||a||s===!0)},yE=t=>{const s=ls(9,i=>t.options.get("toolbar"+(i+1))),a=yo(s,J);return It(a.length>0,a)},N2=t=>yE(t).fold(()=>{const s=fE(t);return En(s,J)&&s.length>0},Dt),FO=t=>dE(t)===D2.bottom,CE=t=>{var s;if(!t.inline)return R.none();const a=(s=AO(t))!==null&&s!==void 0?s:"";if(a.length>0)return bo(bi(),a);const i=n7(t);return Vt(i)?R.some(ue.fromDom(i)):R.none()},Tl=t=>t.inline&&CE(t).isSome(),LO=t=>CE(t).getOrThunk(()=>Vd(lr(ue.fromDom(t.getElement())))),HO=t=>t.inline&&!pE(t)&&!vE(t)&&!N2(t),Sg=t=>(t.options.get("toolbar_sticky")||t.inline)&&!Tl(t)&&!HO(t),Kf=t=>!Tl(t)&&t.options.get("ui_mode")==="split",mN=t=>{const s=t.options.get("menu");return Lo(s,a=>({...a,items:a.items}))};var o7=Object.freeze({__proto__:null,get ToolbarMode(){return oi},get ToolbarLocation(){return D2},register:YP,getSkinUrl:IO,getSkinUrlOption:bE,isReadOnly:XP,isSkinDisabled:$O,getHeightOption:_O,getWidthOption:M2,getMinWidthOption:TO,getMinHeightOption:wp,getMaxWidthOption:xp,getMaxHeightOption:uE,getUserStyleFormats:kO,shouldMergeStyleFormats:JP,shouldAutoHideStyleFormats:QP,getLineHeightFormats:fN,getContentLanguages:eN,getRemovedMenuItems:tN,isMenubarEnabled:pE,isMultipleToolbars:N2,isToolbarEnabled:vE,isToolbarPersist:RO,getMultipleToolbarsOption:yE,getUiContainer:LO,useFixedContainer:Tl,isSplitUiMode:Kf,getToolbarMode:xg,isDraggableModal:gE,isDistractionFree:HO,isStickyToolbar:Sg,getStickyToolbarOffset:nN,getToolbarLocation:dE,isToolbarLocationBottom:FO,getToolbarGroups:OO,getMenus:mN,getMenubar:oN,getToolbar:fE,getFilePickerCallback:DO,getFilePickerTypes:mE,useTypeaheadUrls:MO,getAnchorTop:PO,getAnchorBottom:aN,getFilePickerValidatorHandler:sN,getFontSizeInputDefaultUnit:rN,useStatusBar:cN,useElementPath:iN,promotionEnabled:hE,useBranding:NO,getResize:lN,getPasteAsText:uN,getSidebarShow:BO,useHelpAccessibility:dN,getDefaultFontStack:P2});const gN=["visible","hidden","clip"],hN=t=>Vl(t).length>0&&!Io(gN,t),VO=t=>{if(hm(t)){const s=Dr(t,"overflow-x"),a=Dr(t,"overflow-y");return hN(s)||hN(a)}else return!1},zO=t=>t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen(),UO=(t,s)=>{const a=sg(s,VO),i=a.length===0?Wl(s).map(pw).map(d=>sg(d,VO)).getOr([]):a;return ga(i).map(d=>({element:d,others:i.slice(1),isFullscreen:()=>zO(t)}))},Eg=(t,s)=>Kf(t)?UO(t,s):R.none(),_g=t=>{const s=[...Ne(t.others,zo),Is()];return t.isFullscreen()?Is():Av(zo(t.element),s)},Ms=Oa({name:"Button",factory:t=>{const s=R2(t.action),a=t.dom.tag,i=g=>it(t.dom,"attributes").bind(h=>it(h,g)),d=()=>{if(a==="button"){const g=i("type").getOr("button"),h=i("role").map(C=>({role:C})).getOr({});return{type:g,...h}}else return{role:t.role.getOr(i("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:Ec.augment(t.buttonBehaviours,[$t.config({}),_t.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[fe("uid",void 0),Oe("dom"),fe("components",[]),Ec.field("buttonBehaviours",[$t,_t]),Pn("action"),Pn("role"),fe("eventOrder",{})]}),s7=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return So(s,(a,i)=>i.name==="class"?a:{...a,[i.name]:i.value},{})},r7=t=>Array.prototype.slice.call(t.dom.classList,0),lu=t=>{const s=ue.fromHtml(t),a=Fc(s),i=s7(s),d=r7(s),g=a.length===0?{}:{innerHtml:Ql(s)};return{tag:$c(s),classes:d,attributes:i,...g}},Nn=t=>{const s=L4(t)&&lc(t,"uid")?t.uid:Ph("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var WO=Object.freeze({__proto__:null,exhibit:(t,s)=>Gr({attributes:km([{key:s.tabAttr,value:"true"}])})}),a7=[fe("tabAttr","data-alloy-tabstop")];const vo=zs({fields:a7,name:"tabstopping",active:WO}),wE=mt("tooltip.exclusive"),B2=mt("tooltip.show"),$2=mt("tooltip.hide"),I2=mt("tooltip.immediateHide"),F2=mt("tooltip.immediateShow"),pN=(t,s,a)=>{t.getSystem().broadcastOn([wE],{})};var c7=Object.freeze({__proto__:null,hideAllExclusive:pN,immediateOpenClose:(t,s,a,i)=>un(t,i?F2:I2),isEnabled:(t,s,a)=>a.isEnabled(),setComponents:(t,s,a,i)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&zt.set(d,i)})},setEnabled:(t,s,a,i)=>a.setEnabled(i)}),i7=Object.freeze({__proto__:null,events:(t,s)=>{const a=h=>{s.getTooltip().each(C=>{C.getSystem().isConnected()&&(au(C),t.onHide(h,C),s.clearTooltip())}),s.clearTimer()},i=h=>{if(!s.isShowing()&&s.isEnabled()){pN(h);const C=t.lazySink(h).getOrDie(),S=h.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:zn(t.mode==="normal"?[ke(Gc(),T=>{un(h,B2)}),ke(Z1(),T=>{un(h,$2)})]:[]),behaviours:He([zt.config({})])});s.setTooltip(S),ru(C,S),t.onShow(h,S),ar.position(C,S,{anchor:t.anchor(h)})}},d=h=>{s.getTooltip().each(C=>{const S=t.lazySink(h).getOrDie();ar.position(S,C,{anchor:t.anchor(h)})})},g=()=>{switch(t.mode){case"normal":return[ke(qc(),h=>{un(h,F2)}),ke(rf(),h=>{un(h,I2)}),ke(Gc(),h=>{un(h,B2)}),ke(Z1(),h=>{un(h,$2)})];case"follow-highlight":return[ke(jv(),(h,C)=>{un(h,B2)}),ke(Rm(),h=>{un(h,$2)})];case"children-normal":return[ke(qc(),(h,C)=>{Br(h.element).each(S=>{oa(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{un(h,F2)},T=>{s.isShowing()&&(t.onShow(h,T),d(h))})})}),ke(rf(),h=>{Br(h.element).fold(()=>{un(h,I2)},Q)}),ke(Gc(),h=>{bo(h.element,"[data-mce-tooltip]:hover").each(C=>{s.getTooltip().fold(()=>{un(h,B2)},S=>{s.isShowing()&&(t.onShow(h,S),d(h))})})}),ke(Z1(),h=>{bo(h.element,"[data-mce-tooltip]:hover").fold(()=>{un(h,$2)},Q)})];default:return[ke(qc(),(h,C)=>{Br(h.element).each(S=>{oa(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{un(h,F2)},T=>{s.isShowing()&&(t.onShow(h,T),d(h))})})}),ke(rf(),h=>{Br(h.element).fold(()=>{un(h,I2)},Q)})]}};return zn(Yt([[Xw(h=>{t.onSetup(h)}),ke(B2,h=>{s.resetTimer(()=>{i(h)},t.delayForShow())}),ke($2,h=>{s.resetTimer(()=>{a(h)},t.delayForHide())}),ke(F2,h=>{s.resetTimer(()=>{i(h)},0)}),ke(I2,h=>{s.resetTimer(()=>{a(h)},0)}),ke(Oi(),(h,C)=>{const S=C;S.universal||Io(S.channels,wE)&&a(h)}),hl(h=>{a(h)})],g()]))}}),ZO=[Oe("lazySink"),Oe("tooltipDom"),fe("exclusive",!0),fe("tooltipComponents",[]),po("delayForShow",oe(300)),po("delayForHide",oe(300)),po("onSetup",Q),Qs("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),fe("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:oe([ds,Ln,vs,or,ys,Cs]),onRtl:oe([ds,Ln,vs,or,ys,Cs])},bubble:ti(0,-2,{})})),xn("onHide"),xn("onShow")],l7=Object.freeze({__proto__:null,init:()=>{const t=Et(!0),s=In(),a=In(),i=()=>{s.on(clearTimeout)},d=(h,C)=>{i(),s.set(setTimeout(h,C))},g=oe("not-implemented");return Pr({getTooltip:a.get,isShowing:a.isSet,setTooltip:a.set,clearTooltip:a.clear,clearTimer:i,resetTimer:d,readState:g,isEnabled:()=>t.get(),setEnabled:h=>t.set(h)})}});const Wo=zs({fields:ZO,name:"tooltipping",active:i7,state:l7,apis:c7});/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:jO,setPrototypeOf:bN,isFrozen:u7,getPrototypeOf:d7,getOwnPropertyDescriptor:f7}=Object;let{freeze:kc,seal:kl,create:xE}=Object,{apply:GO,construct:qO}=typeof Reflect<"u"&&Reflect;kc||(kc=function(s){return s}),kl||(kl=function(s){return s}),GO||(GO=function(s,a,i){return s.apply(a,i)}),qO||(qO=function(s,a){return new s(...a)});const SE=Hi(Array.prototype.forEach),vN=Hi(Array.prototype.pop),L2=Hi(Array.prototype.push),EE=Hi(String.prototype.toLowerCase),KO=Hi(String.prototype.toString),yN=Hi(String.prototype.match),H2=Hi(String.prototype.replace),m7=Hi(String.prototype.indexOf),g7=Hi(String.prototype.trim),uu=Hi(Object.prototype.hasOwnProperty),Oc=Hi(RegExp.prototype.test),Tg=YO(TypeError);function Hi(t){return function(s){for(var a=arguments.length,i=new Array(a>1?a-1:0),d=1;d<a;d++)i[d-1]=arguments[d];return GO(t,s,i)}}function YO(t){return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return qO(t,a)}}function co(t,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:EE;bN&&bN(t,null);let i=s.length;for(;i--;){let d=s[i];if(typeof d=="string"){const g=a(d);g!==d&&(u7(s)||(s[i]=g),d=g)}t[d]=!0}return t}function h7(t){for(let s=0;s<t.length;s++)uu(t,s)||(t[s]=null);return t}function Sp(t){const s=xE(null);for(const[a,i]of jO(t))uu(t,a)&&(Array.isArray(i)?s[a]=h7(i):i&&typeof i=="object"&&i.constructor===Object?s[a]=Sp(i):s[a]=i);return s}function C0(t,s){for(;t!==null;){const i=f7(t,s);if(i){if(i.get)return Hi(i.get);if(typeof i.value=="function")return Hi(i.value)}t=d7(t)}function a(){return null}return a}const CN=kc(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),V2=kc(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),z2=kc(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),wN=kc(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),U2=kc(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),_E=kc(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),XO=kc(["#text"]),du=kc(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),W2=kc(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),xN=kc(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),TE=kc(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),p7=kl(/\{\{[\w\W]*|[\w\W]*\}\}/gm),b7=kl(/<%[\w\W]*|[\w\W]*%>/gm),Z2=kl(/\${[\w\W]*}/gm),v7=kl(/^data-[\-\w.\u00B7-\uFFFF]/),SN=kl(/^aria-[\-\w]+$/),kE=kl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),y7=kl(/^(?:\w+script|data):/i),JO=kl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),OE=kl(/^html$/i),C7=kl(/^[a-z][.\w]*(-[.\w]+)+$/i);var QO=Object.freeze({__proto__:null,MUSTACHE_EXPR:p7,ERB_EXPR:b7,TMPLIT_EXPR:Z2,DATA_ATTR:v7,ARIA_ATTR:SN,IS_ALLOWED_URI:kE,IS_SCRIPT_OR_DATA:y7,ATTR_WHITESPACE:JO,DOCTYPE_NAME:OE,CUSTOM_ELEMENT:C7});const w0={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},w7=function(){return typeof window>"u"?null:window},EN=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let i=null;const d="data-tt-policy-suffix";a&&a.hasAttribute(d)&&(i=a.getAttribute(d));const g="dompurify"+(i?"#"+i:"");try{return s.createPolicy(g,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}};function eA(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:w7();const s=Sn=>eA(Sn);if(s.version="3.1.7",s.removed=[],!t||!t.document||t.document.nodeType!==w0.document)return s.isSupported=!1,s;let{document:a}=t;const i=a,d=i.currentScript,{DocumentFragment:g,HTMLTemplateElement:h,Node:C,Element:S,NodeFilter:T,NamedNodeMap:O=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:P,DOMParser:F,trustedTypes:V}=t,j=S.prototype,Y=C0(j,"cloneNode"),ie=C0(j,"remove"),X=C0(j,"nextSibling"),ae=C0(j,"childNodes"),ce=C0(j,"parentNode");if(typeof h=="function"){const Sn=a.createElement("template");Sn.content&&Sn.content.ownerDocument&&(a=Sn.content.ownerDocument)}let ye,we="";const{implementation:Ge,createNodeIterator:ut,createDocumentFragment:Te,getElementsByTagName:ft}=a,{importNode:nt}=i;let ht={};s.isSupported=typeof jO=="function"&&typeof ce=="function"&&Ge&&Ge.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:gn,ERB_EXPR:lo,TMPLIT_EXPR:Mn,DATA_ATTR:vt,ARIA_ATTR:$e,IS_SCRIPT_OR_DATA:et,ATTR_WHITESPACE:Lt,CUSTOM_ELEMENT:tn}=QO;let{IS_ALLOWED_URI:St}=QO,jt=null;const Yn=co({},[...CN,...V2,...z2,...U2,...XO]);let Zn=null;const rc=co({},[...du,...W2,...xN,...TE]);let Do=Object.seal(xE(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),fi=null,Vr=null,mi=!0,gi=!0,$l=!1,tw=!0,Dd=!1,aM=!0,c1=!1,cM=!1,KG=!1,zT=!1,vL=!1,yL=!1,gY=!0,hY=!1;const GJ="user-content-";let YG=!0,iM=!1,UT={},WT=null;const pY=co({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let bY=null;const vY=co({},["audio","video","img","source","image","track"]);let XG=null;const yY=co({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),CL="http://www.w3.org/1998/Math/MathML",wL="http://www.w3.org/2000/svg",i1="http://www.w3.org/1999/xhtml";let ZT=i1,JG=!1,QG=null;const qJ=co({},[CL,wL,i1],KO);let lM=null;const KJ=["application/xhtml+xml","text/html"],YJ="text/html";let ac=null,jT=null;const XJ=a.createElement("form"),CY=function(Ce){return Ce instanceof RegExp||Ce instanceof Function},eq=function(){let Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(jT&&jT===Ce)){if((!Ce||typeof Ce!="object")&&(Ce={}),Ce=Sp(Ce),lM=KJ.indexOf(Ce.PARSER_MEDIA_TYPE)===-1?YJ:Ce.PARSER_MEDIA_TYPE,ac=lM==="application/xhtml+xml"?KO:EE,jt=uu(Ce,"ALLOWED_TAGS")?co({},Ce.ALLOWED_TAGS,ac):Yn,Zn=uu(Ce,"ALLOWED_ATTR")?co({},Ce.ALLOWED_ATTR,ac):rc,QG=uu(Ce,"ALLOWED_NAMESPACES")?co({},Ce.ALLOWED_NAMESPACES,KO):qJ,XG=uu(Ce,"ADD_URI_SAFE_ATTR")?co(Sp(yY),Ce.ADD_URI_SAFE_ATTR,ac):yY,bY=uu(Ce,"ADD_DATA_URI_TAGS")?co(Sp(vY),Ce.ADD_DATA_URI_TAGS,ac):vY,WT=uu(Ce,"FORBID_CONTENTS")?co({},Ce.FORBID_CONTENTS,ac):pY,fi=uu(Ce,"FORBID_TAGS")?co({},Ce.FORBID_TAGS,ac):{},Vr=uu(Ce,"FORBID_ATTR")?co({},Ce.FORBID_ATTR,ac):{},UT=uu(Ce,"USE_PROFILES")?Ce.USE_PROFILES:!1,mi=Ce.ALLOW_ARIA_ATTR!==!1,gi=Ce.ALLOW_DATA_ATTR!==!1,$l=Ce.ALLOW_UNKNOWN_PROTOCOLS||!1,tw=Ce.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Dd=Ce.SAFE_FOR_TEMPLATES||!1,aM=Ce.SAFE_FOR_XML!==!1,c1=Ce.WHOLE_DOCUMENT||!1,zT=Ce.RETURN_DOM||!1,vL=Ce.RETURN_DOM_FRAGMENT||!1,yL=Ce.RETURN_TRUSTED_TYPE||!1,KG=Ce.FORCE_BODY||!1,gY=Ce.SANITIZE_DOM!==!1,hY=Ce.SANITIZE_NAMED_PROPS||!1,YG=Ce.KEEP_CONTENT!==!1,iM=Ce.IN_PLACE||!1,St=Ce.ALLOWED_URI_REGEXP||kE,ZT=Ce.NAMESPACE||i1,Do=Ce.CUSTOM_ELEMENT_HANDLING||{},Ce.CUSTOM_ELEMENT_HANDLING&&CY(Ce.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Do.tagNameCheck=Ce.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ce.CUSTOM_ELEMENT_HANDLING&&CY(Ce.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Do.attributeNameCheck=Ce.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ce.CUSTOM_ELEMENT_HANDLING&&typeof Ce.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Do.allowCustomizedBuiltInElements=Ce.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Dd&&(gi=!1),vL&&(zT=!0),UT&&(jt=co({},XO),Zn=[],UT.html===!0&&(co(jt,CN),co(Zn,du)),UT.svg===!0&&(co(jt,V2),co(Zn,W2),co(Zn,TE)),UT.svgFilters===!0&&(co(jt,z2),co(Zn,W2),co(Zn,TE)),UT.mathMl===!0&&(co(jt,U2),co(Zn,xN),co(Zn,TE))),Ce.ADD_TAGS&&(jt===Yn&&(jt=Sp(jt)),co(jt,Ce.ADD_TAGS,ac)),Ce.ADD_ATTR&&(Zn===rc&&(Zn=Sp(Zn)),co(Zn,Ce.ADD_ATTR,ac)),Ce.ADD_URI_SAFE_ATTR&&co(XG,Ce.ADD_URI_SAFE_ATTR,ac),Ce.FORBID_CONTENTS&&(WT===pY&&(WT=Sp(WT)),co(WT,Ce.FORBID_CONTENTS,ac)),YG&&(jt["#text"]=!0),c1&&co(jt,["html","head","body"]),jt.table&&(co(jt,["tbody"]),delete fi.tbody),Ce.TRUSTED_TYPES_POLICY){if(typeof Ce.TRUSTED_TYPES_POLICY.createHTML!="function")throw Tg('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ce.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Tg('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ye=Ce.TRUSTED_TYPES_POLICY,we=ye.createHTML("")}else ye===void 0&&(ye=EN(V,d)),ye!==null&&typeof we=="string"&&(we=ye.createHTML(""));kc&&kc(Ce),jT=Ce}},wY=co({},["mi","mo","mn","ms","mtext"]),xY=co({},["annotation-xml"]),JJ=co({},["title","style","font","a","script"]),SY=co({},[...V2,...z2,...wN]),EY=co({},[...U2,..._E]),QJ=function(Ce){let kt=ce(Ce);(!kt||!kt.tagName)&&(kt={namespaceURI:ZT,tagName:"template"});const hn=EE(Ce.tagName),Ks=EE(kt.tagName);return QG[Ce.namespaceURI]?Ce.namespaceURI===wL?kt.namespaceURI===i1?hn==="svg":kt.namespaceURI===CL?hn==="svg"&&(Ks==="annotation-xml"||wY[Ks]):!!SY[hn]:Ce.namespaceURI===CL?kt.namespaceURI===i1?hn==="math":kt.namespaceURI===wL?hn==="math"&&xY[Ks]:!!EY[hn]:Ce.namespaceURI===i1?kt.namespaceURI===wL&&!xY[Ks]||kt.namespaceURI===CL&&!wY[Ks]?!1:!EY[hn]&&(JJ[hn]||!SY[hn]):!!(lM==="application/xhtml+xml"&&QG[Ce.namespaceURI]):!1},Gg=function(Ce){L2(s.removed,{element:Ce});try{ce(Ce).removeChild(Ce)}catch{ie(Ce)}},uM=function(Ce,kt){try{L2(s.removed,{attribute:kt.getAttributeNode(Ce),from:kt})}catch{L2(s.removed,{attribute:null,from:kt})}if(kt.removeAttribute(Ce),Ce==="is"&&!Zn[Ce])if(zT||vL)try{Gg(kt)}catch{}else try{kt.setAttribute(Ce,"")}catch{}},_Y=function(Ce){let kt=null,hn=null;if(KG)Ce="<remove></remove>"+Ce;else{const cc=yN(Ce,/^[\r\n\t ]+/);hn=cc&&cc[0]}lM==="application/xhtml+xml"&&ZT===i1&&(Ce='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ce+"</body></html>");const Ks=ye?ye.createHTML(Ce):Ce;if(ZT===i1)try{kt=new F().parseFromString(Ks,lM)}catch{}if(!kt||!kt.documentElement){kt=Ge.createDocument(ZT,"template",null);try{kt.documentElement.innerHTML=JG?we:Ks}catch{}}const hi=kt.body||kt.documentElement;return Ce&&hn&&hi.insertBefore(a.createTextNode(hn),hi.childNodes[0]||null),ZT===i1?ft.call(kt,c1?"html":"body")[0]:c1?kt.documentElement:hi},TY=function(Ce){return ut.call(Ce.ownerDocument||Ce,Ce,T.SHOW_ELEMENT|T.SHOW_COMMENT|T.SHOW_TEXT|T.SHOW_PROCESSING_INSTRUCTION|T.SHOW_CDATA_SECTION,null)},kY=function(Ce){return Ce instanceof P&&(typeof Ce.nodeName!="string"||typeof Ce.textContent!="string"||typeof Ce.removeChild!="function"||!(Ce.attributes instanceof O)||typeof Ce.removeAttribute!="function"||typeof Ce.setAttribute!="function"||typeof Ce.namespaceURI!="string"||typeof Ce.insertBefore!="function"||typeof Ce.hasChildNodes!="function")},OY=function(Ce){return typeof C=="function"&&Ce instanceof C},l1=function(Ce,kt,hn){ht[Ce]&&SE(ht[Ce],Ks=>{Ks.call(s,kt,hn,jT)})},AY=function(Ce){let kt=null;if(l1("beforeSanitizeElements",Ce,null),kY(Ce))return Gg(Ce),!0;const hn=ac(Ce.nodeName);if(l1("uponSanitizeElement",Ce,{tagName:hn,allowedTags:jt}),Ce.hasChildNodes()&&!OY(Ce.firstElementChild)&&Oc(/<[/\w]/g,Ce.innerHTML)&&Oc(/<[/\w]/g,Ce.textContent)||Ce.nodeType===w0.progressingInstruction||aM&&Ce.nodeType===w0.comment&&Oc(/<[/\w]/g,Ce.data))return Gg(Ce),!0;if(!jt[hn]||fi[hn]){if(!fi[hn]&&DY(hn)&&(Do.tagNameCheck instanceof RegExp&&Oc(Do.tagNameCheck,hn)||Do.tagNameCheck instanceof Function&&Do.tagNameCheck(hn)))return!1;if(YG&&!WT[hn]){const Ks=ce(Ce)||Ce.parentNode,hi=ae(Ce)||Ce.childNodes;if(hi&&Ks){const cc=hi.length;for(let Il=cc-1;Il>=0;--Il){const qg=Y(hi[Il],!0);qg.__removalCount=(Ce.__removalCount||0)+1,Ks.insertBefore(qg,X(Ce))}}}return Gg(Ce),!0}return Ce instanceof S&&!QJ(Ce)||(hn==="noscript"||hn==="noembed"||hn==="noframes")&&Oc(/<\/no(script|embed|frames)/i,Ce.innerHTML)?(Gg(Ce),!0):(Dd&&Ce.nodeType===w0.text&&(kt=Ce.textContent,SE([gn,lo,Mn],Ks=>{kt=H2(kt,Ks," ")}),Ce.textContent!==kt&&(L2(s.removed,{element:Ce.cloneNode()}),Ce.textContent=kt)),l1("afterSanitizeElements",Ce,null),!1)},RY=function(Ce,kt,hn){if(gY&&(kt==="id"||kt==="name")&&(hn in a||hn in XJ))return!1;if(!(gi&&!Vr[kt]&&Oc(vt,kt))){if(!(mi&&Oc($e,kt))){if(!Zn[kt]||Vr[kt]){if(!(DY(Ce)&&(Do.tagNameCheck instanceof RegExp&&Oc(Do.tagNameCheck,Ce)||Do.tagNameCheck instanceof Function&&Do.tagNameCheck(Ce))&&(Do.attributeNameCheck instanceof RegExp&&Oc(Do.attributeNameCheck,kt)||Do.attributeNameCheck instanceof Function&&Do.attributeNameCheck(kt))||kt==="is"&&Do.allowCustomizedBuiltInElements&&(Do.tagNameCheck instanceof RegExp&&Oc(Do.tagNameCheck,hn)||Do.tagNameCheck instanceof Function&&Do.tagNameCheck(hn))))return!1}else if(!XG[kt]){if(!Oc(St,H2(hn,Lt,""))){if(!((kt==="src"||kt==="xlink:href"||kt==="href")&&Ce!=="script"&&m7(hn,"data:")===0&&bY[Ce])){if(!($l&&!Oc(et,H2(hn,Lt,"")))){if(hn)return!1}}}}}}return!0},DY=function(Ce){return Ce!=="annotation-xml"&&yN(Ce,tn)},MY=function(Ce){l1("beforeSanitizeAttributes",Ce,null);const{attributes:kt}=Ce;if(!kt)return;const hn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Zn};let Ks=kt.length;for(;Ks--;){const hi=kt[Ks],{name:cc,namespaceURI:Il,value:qg}=hi,dM=ac(cc);let Nc=cc==="value"?qg:g7(qg);const tQ=Nc;if(hn.attrName=dM,hn.attrValue=Nc,hn.keepAttr=!0,hn.forceKeepAttr=void 0,l1("uponSanitizeAttribute",Ce,hn),Nc=hn.attrValue,hn.forceKeepAttr)continue;if(!hn.keepAttr){uM(cc,Ce);continue}if(!tw&&Oc(/\/>/i,Nc)){uM(cc,Ce);continue}Dd&&SE([gn,lo,Mn],NY=>{Nc=H2(Nc,NY," ")});const PY=ac(Ce.nodeName);if(!RY(PY,dM,Nc)){uM(cc,Ce);continue}if(hY&&(dM==="id"||dM==="name")&&(uM(cc,Ce),Nc=GJ+Nc),aM&&Oc(/((--!?|])>)|<\/(style|title)/i,Nc)){uM(cc,Ce);continue}if(ye&&typeof V=="object"&&typeof V.getAttributeType=="function"&&!Il)switch(V.getAttributeType(PY,dM)){case"TrustedHTML":{Nc=ye.createHTML(Nc);break}case"TrustedScriptURL":{Nc=ye.createScriptURL(Nc);break}}if(Nc!==tQ)try{Il?Ce.setAttributeNS(Il,cc,Nc):Ce.setAttribute(cc,Nc),kY(Ce)?Gg(Ce):vN(s.removed)}catch{}}l1("afterSanitizeAttributes",Ce,null)},eQ=function Sn(Ce){let kt=null;const hn=TY(Ce);for(l1("beforeSanitizeShadowDOM",Ce,null);kt=hn.nextNode();)l1("uponSanitizeShadowNode",kt,null),!AY(kt)&&(kt.content instanceof g&&Sn(kt.content),MY(kt));l1("afterSanitizeShadowDOM",Ce,null)};return s.sanitize=function(Sn){let Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},kt=null,hn=null,Ks=null,hi=null;if(JG=!Sn,JG&&(Sn="<!-->"),typeof Sn!="string"&&!OY(Sn))if(typeof Sn.toString=="function"){if(Sn=Sn.toString(),typeof Sn!="string")throw Tg("dirty is not a string, aborting")}else throw Tg("toString is not a function");if(!s.isSupported)return Sn;if(cM||eq(Ce),s.removed=[],typeof Sn=="string"&&(iM=!1),iM){if(Sn.nodeName){const qg=ac(Sn.nodeName);if(!jt[qg]||fi[qg])throw Tg("root node is forbidden and cannot be sanitized in-place")}}else if(Sn instanceof C)kt=_Y("<!---->"),hn=kt.ownerDocument.importNode(Sn,!0),hn.nodeType===w0.element&&hn.nodeName==="BODY"||hn.nodeName==="HTML"?kt=hn:kt.appendChild(hn);else{if(!zT&&!Dd&&!c1&&Sn.indexOf("<")===-1)return ye&&yL?ye.createHTML(Sn):Sn;if(kt=_Y(Sn),!kt)return zT?null:yL?we:""}kt&&KG&&Gg(kt.firstChild);const cc=TY(iM?Sn:kt);for(;Ks=cc.nextNode();)AY(Ks)||(Ks.content instanceof g&&eQ(Ks.content),MY(Ks));if(iM)return Sn;if(zT){if(vL)for(hi=Te.call(kt.ownerDocument);kt.firstChild;)hi.appendChild(kt.firstChild);else hi=kt;return(Zn.shadowroot||Zn.shadowrootmode)&&(hi=nt.call(i,hi,!0)),hi}let Il=c1?kt.outerHTML:kt.innerHTML;return c1&&jt["!doctype"]&&kt.ownerDocument&&kt.ownerDocument.doctype&&kt.ownerDocument.doctype.name&&Oc(OE,kt.ownerDocument.doctype.name)&&(Il="<!DOCTYPE "+kt.ownerDocument.doctype.name+`>
`+Il),Dd&&SE([gn,lo,Mn],qg=>{Il=H2(Il,qg," ")}),ye&&yL?ye.createHTML(Il):Il},s.setConfig=function(){let Sn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};eq(Sn),cM=!0},s.clearConfig=function(){jT=null,cM=!1},s.isValidAttribute=function(Sn,Ce,kt){jT||eq({});const hn=ac(Sn),Ks=ac(Ce);return RY(hn,Ks,kt)},s.addHook=function(Sn,Ce){typeof Ce=="function"&&(ht[Sn]=ht[Sn]||[],L2(ht[Sn],Ce))},s.removeHook=function(Sn){if(ht[Sn])return vN(ht[Sn])},s.removeHooks=function(Sn){ht[Sn]&&(ht[Sn]=[])},s.removeAllHooks=function(){ht={}},s}var x7=eA();const _N=t=>x7().sanitize(t);var Vi=tinymce.util.Tools.resolve("tinymce.util.I18n");const S7={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},TN="temporary-placeholder",AE=t=>()=>it(t,TN).getOr("!not found!"),RE=(t,s)=>{const a=t.toLowerCase();if(Vi.isRtl()){const i=na(a,"-rtl");return Vn(s,i)?i:a}else return a},kN=(t,s)=>it(s,RE(t,s)),tA=(t,s)=>{const a=s();return kN(t,a).getOrThunk(AE(a))},j2=(t,s,a)=>{const i=s();return kN(t,i).or(a).getOrThunk(AE(i))},ON=t=>Vi.isRtl()?Vn(S7,t):!1,AN=()=>qt("add-focusable",[go(t=>{Cc(t.element,"svg").each(s=>Nt(s,"focusable","false"))})]),RN=(t,s,a,i)=>{var d,g;const h=ON(s)?["tox-icon--flip"]:[],C=it(a,RE(s,a)).or(i).getOrThunk(AE(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(h),innerHtml:C},behaviours:He([...(g=t.behaviours)!==null&&g!==void 0?g:[],AN()])}},si=(t,s,a,i=R.none())=>RN(s,t,a(),i),E7=(t,s,a)=>{const i=a(),d=Zt(t,g=>Vn(i,RE(g,i)));return RN(s,d.getOr(TN),i,R.none())},_7={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},DE=Oa({name:"Notification",factory:t=>{const s=mt("notification-text"),a=Nn({dom:lu(`<p id=${s}>${_N(t.backstageProvider.translate(t.text))}</p>`),behaviours:He([zt.config({})])}),i=j=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${j}%`}}}),d=j=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${j}%`}}),g=Nn({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(0)]},d(0)],behaviours:He([zt.config({})])}),S={updateProgress:(j,Y)=>{j.getSystem().isConnected()&&g.getOpt(j).each(ie=>{zt.set(ie,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(Y)]},d(Y)])})},updateText:(j,Y)=>{if(j.getSystem().isConnected()){const ie=a.get(j);zt.set(ie,[_o(Y)])}}},T=Yt([t.icon.toArray(),t.level.toArray(),t.level.bind(j=>R.from(_7[j])).toArray()]),O=Nn(Ms.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[si("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:He([vo.config({}),Wo.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:j=>{t.onAction(j)}})),P=E7(T,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),F={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:He([zt.config({})])},V=[P,F];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:t.level.map(j=>["tox-notification","tox-notification--in",`tox-notification--${j}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:He([vo.config({}),$t.config({}),_t.config({mode:"special",onEscape:j=>(t.onAction(j),R.some(!0))})]),components:V.concat(t.progress?[g.asSpec()]:[]).concat([O.asSpec()]),apis:S}},configFields:[Pn("level"),Oe("progress"),Pn("icon"),Oe("onAction"),Oe("text"),Oe("iconProvider"),Oe("backstageProvider")],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var DN=(t,s,a,i)=>{const d=s.backstage.shared,g=()=>ue.fromDom(t.queryCommandValue("ToggleView")===""?t.getContentAreaContainer():t.getContainer()),h=()=>{const P=zo(g());return R.some(P)},C=P=>{h().each(F=>{dt(P,V=>{Qt(V.element,"width"),sa(V.element)>F.width&&Wt(V.element,"width",F.width+"px")})})};return{open:(P,F,V)=>{const j=()=>{const ae=Ge=>{zt.remove(Ge,Y),ie()},ce=(Ge,ut)=>{Fc(Ge.element).length===0?ye(Ge,ut):we(Ge,ut)},ye=(Ge,ut)=>{Ao.hide(Ge),i.clear(),ut&&t.focus()},we=(Ge,ut)=>{ut&&_t.focusIn(Ge)};i.on(Ge=>{F();const ut=V();ae(Ge),ce(Ge,ut)})},Y=Ds(DE.sketch({text:P.text,level:Io(["success","error","warning","warn","info"],P.type)?P.type:void 0,progress:P.progressBar===!0,icon:P.icon,onAction:j,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(i.isSet()){const ae=Ga(Y);i.on(ce=>{zt.append(ce,ae),Ao.reposition(ce),ro.refresh(ce),C(ce.components())})}else{const ae=Ds(Ao.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:He([_t.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),zt.config({}),...Sg(t)&&!d.header.isPositionedAtTop()?[]:[ro.config({contextual:{lazyContext:()=>R.some(zo(g())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:Ge=>Eg(t,Ge.element).map(Te=>({bounds:_g(Te),optScrollEnv:R.some({currentScrollTop:Te.element.dom.scrollTop,scrollElmTop:Vo(Te.element).top})})).getOrThunk(()=>({bounds:Is(),optScrollEnv:R.none()}))})]])})),ce=Ga(Y),ye={maxHeightFunction:id()},we={...d.anchors.banner(),overrides:ye};i.set(ae),a.add(ae),Ao.showWithinBounds(ae,ce,{anchor:we},h)}sn(P.timeout)&&P.timeout>0&&yp.setEditorTimeout(t,()=>{j()},P.timeout);const ie=()=>{i.on(ae=>{Ao.reposition(ae),ro.refresh(ae),C(ae.components())})};return{close:j,reposition:ie,text:ae=>{DE.updateText(Y,ae)},settings:P,getEl:()=>Y.element.dom,progressBar:{value:ae=>{DE.updateProgress(Y,ae)}}}},close:P=>{P.close()},getArgs:P=>P.settings}};const O7={setup:(t,s)=>{const a=(d,g)=>{yt(d,pc(),{raw:g})},i=()=>t.getMenu().bind(qe.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(i().each(qu),d.preventDefault()):g===40?(i().fold(()=>{t.getMenu().each(qe.highlightFirst)},h=>{a(h,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&i().each(h=>{a(h,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var nA;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(nA||(nA={}));var Ol=nA;const G2="tox-menu-nav__js",x0="tox-collection__item",ME="tox-swatch",MN={normal:G2,color:ME},oA="tox-collection__item--enabled",A7="tox-collection__group-heading",PE="tox-collection__item-icon",sA="tox-collection__item-label",PN="tox-collection__item-accessory",rA="tox-collection__item-caret",Ep="tox-collection__item-checkmark",_p="tox-collection__item--active",NE="tox-collection__item-container",BE="tox-collection__item-container--column",NN="tox-collection__item-container--row",BN="tox-collection__item-container--align-right",$N="tox-collection__item-container--align-left",IN="tox-collection__item-container--valign-top",aA="tox-collection__item-container--valign-middle",FN="tox-collection__item-container--valign-bottom",LN=t=>it(MN,t).getOr(G2),HN=t=>t==="color"?"tox-swatches":"tox-menu",$E=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:HN(t),tieredMenu:"tox-tiered-menu"}),kg=t=>{const s=$E(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:LN(t)}},VN=(t,s,a)=>{const i=$E(a);return{tag:"div",classes:Yt([[i.menu,`tox-menu-${s}-column`],t?[i.hasIcons]:[]])}},R7=[pp.parts.items({})],q2=(t,s,a)=>{const i=$E(a);return{dom:{tag:"div",classes:Yt([[i.tieredMenu]])},markers:kg(a)}},zN=oe([Pn("data"),fe("inputAttributes",{}),fe("inputStyles",{}),fe("tag","input"),fe("inputClasses",[]),xn("onSetValue"),fe("styles",{}),fe("eventOrder",{}),Ws("inputBehaviours",[rt,$t]),fe("selectOnFocus",!0)]),UN=t=>He([$t.config({onFocus:t.selectOnFocus?s=>{const a=s.element,i=ei(a);a.dom.setSelectionRange(0,i.length)}:Q})]),D7=t=>({...UN(t),...Zs(t.inputBehaviours,[rt.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>ei(s.element),setValue:(s,a)=>{ei(s.element)!==a&&Ef(s.element,a)}},onSetValue:t.onSetValue})])}),WN=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),ZN=(t,s)=>({uid:t.uid,dom:WN(t),components:[],behaviours:D7(t),eventOrder:t.eventOrder}),fu=Oa({name:"Input",configFields:zN(),factory:ZN}),cA=mt("refetch-trigger-event"),jN=mt("redirect-menu-item-interaction"),GN="tox-menu__searcher",IE=t=>bo(t.element,`.${GN}`).bind(s=>t.getSystem().getByDom(s).toOptional()),qN=IE,M7=(t,s)=>{rt.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},K2=t=>{const s=rt.getValue(t),a=t.element.dom.selectionStart,i=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:i}},P7=(t,s)=>{Ho(s.element,"id").each(a=>Nt(t.element,"aria-activedescendant",a))},KN=t=>{const s=(d,g)=>(g.cut(),R.none()),a=(d,g)=>{const h={interactionEvent:g.event,eventType:g.event.raw.type};return yt(d,jN,h),R.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[x0]},components:[fu.sketch({inputClasses:[GN,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:He([qt(i,[ke(Ti(),d=>{un(d,cA)}),ke(pc(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),_t.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[i,_t.name()]}})]}},FE="tox-collection--results__js",iA=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:mt("aria-item-search-result-id"),"aria-selected":"false"}}}:t},LE=(t,s)=>a=>{const i=ta(a,s);return Ne(i,d=>({dom:t,components:d}))},N7=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[pp.parts.items({preprocess:t!=="auto"?LE({tag:"div",classes:["tox-swatches__row"]},t):rn})]}]}),YN=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[pp.parts.items({preprocess:LE({tag:"div",classes:["tox-collection__group"]},t)})]}),lA=(t,s)=>{const a=[];let i=[];return dt(t,(d,g)=>{s(d,g)?(i.length>0&&a.push(i),i=[],(Vn(d.dom,"innerHtml")||d.components&&d.components.length>0)&&i.push(d)):i.push(d)}),i.length>0&&a.push(i),Ne(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},HE=(t,s,a)=>pp.parts.items({preprocess:i=>{const d=Ne(i,a);return t!=="auto"&&t>1?LE({tag:"div",classes:["tox-collection__group"]},t)(d):lA(d,(g,h)=>s[h].type==="separator")}}),uA=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[HE(t,s,rn)]}),B7=(t,s,a=!0)=>{const i=mt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",FE].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[HE(t,s,iA)]}},$7=(t,s,a)=>{const i=mt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[KN({i18n:Vi.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],FE],attributes:{id:i}},components:[HE(t,s,iA)]}]}},I7=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[pp.parts.items({preprocess:a=>lA(a,(i,d)=>t[d].type==="separator")})]}),VE=t=>ma(t,s=>"icon"in s&&s.icon!==void 0),Sd=t=>(console.error(Qd(t)),console.log(t),R.none()),XN=(t,s,a,i,d)=>{const g=I7(a);return{value:t,dom:g.dom,components:g.components,items:a}},dA=(t,s,a,i,d)=>{const g=()=>d.menuType!=="searchable"?uA(i,a):d.searchMode.searchMode==="search-with-field"?$7(i,a,d.searchMode):B7(i,a);if(d.menuType==="color"){const h=N7(i);return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"&&i==="auto"){const h=uA(i,a);return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const h=g();return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="listpreview"&&i!=="auto"){const h=YN(i);return{value:t,dom:h.dom,components:h.components,items:a}}else return{value:t,dom:VN(s,i,d.menuType),components:R7,items:a}},ms=Os("type"),fA=Os("name"),mA=Os("label"),Yf=Os("text"),JN=Os("title"),QN=Os("icon"),Tp=Os("value"),eB=jc("fetch"),F7=jc("getSubmenuItems"),S0=jc("onAction"),tB=jc("onItemAction"),kp=po("onSetup",()=>Q),L7=As("name"),Xf=As("text"),nB=As("role"),ri=As("icon"),Y2=As("tooltip"),gA=As("label"),hA=As("shortcut"),oB=ml("select"),E0=er("active",!1),H7=er("borderless",!1),Al=er("enabled",!0),zE=er("primary",!1),sB=t=>fe("columns",t),pA=fe("meta",{}),bA=po("onAction",Q),Og=t=>ss("type",t),UE=t=>Ls("name","name",Mv(()=>mt(`${t}-name`)),ot),V7=t=>Ls("value","value",Mv(()=>mt(`${t}-value`)),Uc()),rB=At([ms,Xf]),z7=t=>Oo("separatormenuitem",rB,t),Ac=At([Og("autocompleteitem"),E0,Al,pA,Tp,Xf,ri]),Rl=t=>Oo("Autocompleter.Separator",rB,t),aB=t=>Oo("Autocompleter.Item",Ac,t),Op=[Al,Y2,ri,Xf,kp,ss("context","mode:design")],vA=At([ms,S0,hA].concat(Op)),X2=t=>Oo("toolbarbutton",vA,t),WE=[E0].concat(Op),J2=At(WE.concat([ms,S0,hA])),Q2=t=>Oo("ToggleButton",J2,t),ZE=[po("predicate",jn),Qs("scope","node",["node","editor"]),Qs("position","selection",["node","selection","line"])],cB=Op.concat([Og("contextformbutton"),zE,S0,Bn("original",rn)]),eC=WE.concat([Og("contextformbutton"),zE,S0,Bn("original",rn)]),U7=Op.concat([Og("contextformbutton")]),W7=WE.concat([Og("contextformtogglebutton")]),mu=Qo("type",{contextformbutton:cB,contextformtogglebutton:eC}),Rc=At([Og("contextform"),po("initValue",oe("")),gA,Ua("commands",mu),fl("launch",Qo("type",{contextformbutton:U7,contextformtogglebutton:W7}))].concat(ZE)),tC=t=>Oo("ContextForm",Rc,t),zi=At([Og("contexttoolbar"),Os("items")].concat(ZE)),Z7=t=>Oo("ContextToolbar",zi,t),io=[ms,Os("src"),As("alt"),zu("classes",[],ot)],j7=At(io),Ap=[ms,Yf,L7,zu("classes",["tox-collection__item-label"],ot)],nC=At(Ap),yA=ks(()=>Jd("type",{cardimage:j7,cardtext:nC,cardcontainer:CA})),CA=At([ms,ss("direction","horizontal"),ss("align","left"),ss("valign","middle"),Ua("items",yA)]),Ag=[Al,Xf,nB,hA,V7("menuitem"),pA,ss("context","mode:design")],G7=At([ms,gA,Ua("items",yA),kp,bA].concat(Ag)),wA=t=>Oo("cardmenuitem",G7,t),q7=At([ms,E0,ri].concat(Ag)),iB=t=>Oo("choicemenuitem",q7,t),xA=[ms,Os("fancytype"),bA],SA=[fe("initData",{})].concat(xA),lB=[ml("select"),Lw("initData",{},[er("allowCustomColors",!0),ss("storageKey","default"),ph("colors",Uc())])].concat(xA),jE=Qo("fancytype",{inserttable:SA,colorswatch:lB}),K7=t=>Oo("fancymenuitem",jE,t),Y7=At([ms,kp,bA,ri].concat(Ag)),X7=t=>Oo("menuitem",Y7,t),J7=At([ms,F7,kp,ri].concat(Ag)),Q7=t=>Oo("nestedmenuitem",J7,t),uB=At([ms,ri,E0,kp,S0].concat(Ag)),eH=t=>Oo("togglemenuitem",uB,t),EA=(t,s,a)=>{const i=sr(t.element,"."+a);if(i.length>0){const d=ho(i,g=>{const h=g.dom.getBoundingClientRect().top,C=i[0].dom.getBoundingClientRect().top;return Math.abs(h-C)>s}).getOr(i.length);return R.some({numColumns:d,numRows:Math.ceil(i.length/d)})}else return R.none()},_A=(t,s)=>He([qt(t,s)]),_0={namedEvents:_A,unnamedEvents:t=>_A(mt("unnamed-events"),t)},oC=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),ai={item:t=>Bt.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>Bt.config({disabled:t}),splitButton:t=>Bt.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>Bt.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},GE=(t,s)=>{const a=t.getApi(s);return i=>{i(a)}},Rg=(t,s)=>go(a=>{GE(t,a)(d=>{const g=t.onSetup(d);Se(g)&&s.set(g)})}),Dg=(t,s)=>hl(a=>GE(t,a)(s.get())),fB="silver.uistate",sC=(t,s)=>{const i=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s==="setDisabled"&&dt(d,g=>{g.broadcastOn([cu()],{target:i})}),dt(d,g=>{g.broadcastOn([fB],s)})},mB=(t,s)=>{t.on("init SwitchMode",a=>{sC(s,a.type)}),t.on("NodeChange",a=>{t.ui.isEnabled()?sC(s,a.type):sC(s,"setDisabled")}),XP(t)&&t.mode.set("readonly")},as=t=>Ea.config({channels:{[fB]:{onReceive:(s,a)=>{if(a==="setDisabled"||a==="setEnabled"){Bt.set(s,a==="setDisabled");return}const{contextType:i,shouldDisable:d}=t();i==="mode"&&!Io(["switchmode","init"],a)||Bt.set(s,d)}}}}),Dl=(t,s)=>Yl((a,i)=>{GE(t,a)(t.onAction),!t.triggersSubmenu&&s===Ol.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&un(a,Vs()),i.stop())}),nH={[nr()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Mg=Bd,Rp=(t,s,a,i)=>{const d=Et(Q);return{type:"item",dom:s.dom,components:Mg(s.optComponents),data:t.data,eventOrder:nH,hasSubmenu:t.triggersSubmenu,itemBehaviours:He([qt("item-events",[Dl(t,a),Rg(t,d),Dg(t,d)]),ai.item(()=>!t.enabled||i.checkUiComponentContext(t.context).shouldDisable),as(()=>i.checkUiComponentContext(t.context)),zt.config({})].concat(t.itemBehaviours))}},Dp=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),TA=t=>{const s=Cp.os.isMacOS()||Cp.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),h=Ne(g,C=>{const S=C.toLowerCase().trim();return Vn(d,S)?d[S]:C});return s?h.join(""):h.join("+")},qE=(t,s,a=[PE])=>si(t,{tag:"div",classes:a},s),kA=t=>({dom:{tag:"div",classes:[sA]},components:[_o(Vi.translate(t))]}),OA=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),oH=(t,s)=>({dom:{tag:"div",classes:[sA]},components:[{dom:{tag:t.tag,styles:t.styles},components:[_o(Vi.translate(s))]}]}),sH=t=>({dom:{tag:"div",classes:[PN]},components:[_o(TA(t))]}),gB=t=>qE("checkmark",t,[Ep]),rH=t=>qE("chevron-right",t,[rA]),aH=t=>qE("chevron-down",t,[rA]),cH=(t,s)=>{const a=t.direction==="vertical"?BE:NN,i=t.align==="left"?$N:BN;return{dom:{tag:"div",classes:[NE,a,i,(()=>{switch(t.valign){case"top":return IN;case"middle":return aA;case"bottom":return FN}})()]},components:s}},iH=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),hB=(t,s,a)=>{const i="custom",d="remove",g=t.value,h=t.iconContent.map(T=>j2(T,s.icons,a)),C=t.ariaLabel.map(T=>({"aria-label":s.translate(T),"data-mce-name":T})).getOr({});return{dom:(()=>{const T=ME,O=h.getOr(""),P={tag:"div",attributes:C,classes:[T]};return g===i?{...P,tag:"button",classes:[...P.classes,"tox-swatches__picker-btn"],innerHtml:O}:g===d?{...P,classes:[...P.classes,"tox-swatch--remove"],innerHtml:O}:Vt(g)?{...P,attributes:{...P.attributes,"data-mce-color":g},styles:{"background-color":g},innerHtml:O}:P})(),optComponents:[]}},AA=t=>{const s=t.map(a=>({attributes:{id:mt("menu-item"),"aria-label":Vi.translate(a)}})).getOr({});return{tag:"div",classes:[G2,x0],...s}},pB=(t,s,a,i)=>{const d={tag:"div",classes:[PE]},g=F=>si(F,d,s.icons,i),h=()=>R.some({dom:d}),C=a?t.iconContent.map(g).orThunk(h):R.none(),S=t.checkMark,T=R.from(t.meta).fold(()=>kA,F=>Vn(F,"style")?An(oH,F.style):kA),O=t.htmlContent.fold(()=>t.textContent.map(T),F=>R.some(OA(F,[sA])));return{dom:AA(t.ariaLabel),optComponents:[C,O,t.shortcutContent.map(sH),S,t.caret]}},rC=(t,s,a,i=R.none())=>t.presets==="color"?hB(t,s,i):pB(t,s,a,i),bB=(t,s,a)=>it(t,"tooltipWorker").map(i=>[Wo.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:id}}),mode:"follow-highlight",onShow:(d,g)=>{i(h=>{Wo.setComponents(d,[vy({element:ue.fromDom(h)})])})}})]).getOrThunk(()=>a.map(i=>[Wo.config({...s.providers.tooltips.getConfig({tooltipText:i}),mode:"follow-highlight"})]).getOr([])),lH=t=>wg.DOM.encode(t),Mp=(t,s)=>{const a=Vi.translate(t),i=lH(a);if(s.length>0){const d=new RegExp(oC(s),"gi");return i.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return i},uH=(t,s,a,i,d,g,h,C=!0)=>{const S=rC({presets:i,textContent:R.none(),htmlContent:a?t.text.map(O=>Mp(O,s)):R.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:R.none(),checkMark:R.none(),caret:R.none(),value:t.value},h.providers,C,t.icon),T=t.text.filter(O=>!a&&O!=="");return Rp({context:"mode:design",data:Dp(t),enabled:t.enabled,getApi:oe({}),onAction:O=>d(t.value,t.meta),onSetup:oe(Q),triggersSubmenu:!1,itemBehaviours:bB(t,h,T)},S,g,h.providers)},RA=(t,s)=>Ne(t,a=>{switch(a.type){case"cardcontainer":return cH(a,RA(a.items,s));case"cardimage":return iH(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>Io(s.cardText.highlightOn,g))?R.from(s.cardText.matchText).getOr(""):"";return OA(Mp(a.text,d),a.classes)}}),vB=(t,s,a,i)=>{const d=h=>({isEnabled:()=>!Bt.isDisabled(h),setEnabled:C=>{Bt.set(h,!C),dt(sr(h.element,"*"),S=>{h.getSystem().getByDom(S).each(T=>{T.hasConfigured(Bt)&&Bt.set(T,!C)})})}}),g={dom:AA(t.label),optComponents:[R.some({dom:{tag:"div",classes:[NE,NN]},components:RA(t.items,i)})]};return Rp({context:"mode:design",data:Dp({text:R.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:R.from(i.itemBehaviours).getOr([])},g,s,a.providers)},yB=(t,s,a,i,d,g,h,C=!0)=>{const S=P=>({setActive:F=>{nn.set(P,F)},isActive:()=>nn.isOn(P),isEnabled:()=>!Bt.isDisabled(P),setEnabled:F=>Bt.set(P,!F)}),T=rC({presets:a,textContent:s?t.text:R.none(),htmlContent:R.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:R.none(),checkMark:s?R.some(gB(h.icons)):R.none(),caret:R.none(),value:t.value},h,C),O=t.text.filter(oe(!s)).map(P=>Wo.config(h.tooltips.getConfig({tooltipText:h.translate(P)})));return Uo(Rp({context:t.context,data:Dp(t),enabled:t.enabled,getApi:S,onAction:P=>i(t.value),onSetup:P=>(P.setActive(d),Q),triggersSubmenu:!1,itemBehaviours:[...O.toArray()]},T,g,h),{toggling:{toggleClass:oA,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},DA=n0(iE(),lE()),KE=t=>({value:CB(t)}),YE=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,XE=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,MA=t=>YE.test(t)||XE.test(t),CB=t=>gv(t,"#").toUpperCase(),wB=t=>MA(t)?R.some({value:CB(t)}):R.none(),dH=t=>({value:t.value.replace(YE,(a,i,d,g)=>i+i+d+d+g+g)}),fH=t=>{const s=dH(t),a=XE.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},PA=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},T0=t=>{const s=PA(t.red)+PA(t.green)+PA(t.blue);return KE(s)},NA=Math.min,BA=Math.max,JE=Math.round,mH=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,gH=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Pp=(t,s,a,i)=>({red:t,green:s,blue:a,alpha:i}),$A=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},xB=t=>{let s,a,i;const d=(t.hue||0)%360;let g=t.saturation/100,h=t.value/100;if(g=BA(0,NA(g,1)),h=BA(0,NA(h,1)),g===0)return s=a=i=JE(255*h),Pp(s,a,i,1);const C=d/60,S=h*g,T=S*(1-Math.abs(C%2-1)),O=h-S;switch(Math.floor(C)){case 0:s=S,a=T,i=0;break;case 1:s=T,a=S,i=0;break;case 2:s=0,a=S,i=T;break;case 3:s=0,a=T,i=S;break;case 4:s=T,a=0,i=S;break;case 5:s=S,a=0,i=T;break;default:s=a=i=0}return s=JE(255*(s+O)),a=JE(255*(a+O)),i=JE(255*(i+O)),Pp(s,a,i,1)},aC=t=>{const s=fH(t),a=parseInt(s[1],16),i=parseInt(s[2],16),d=parseInt(s[3],16);return Pp(a,i,d,1)},SB=(t,s,a,i)=>{const d=parseInt(t,10),g=parseInt(s,10),h=parseInt(a,10),C=parseFloat(i);return Pp(d,g,h,C)},IA=t=>{const s=mH.exec(t);if(s!==null)return R.some(SB(s[1],s[2],s[3],"1"));const a=gH.exec(t);return a!==null?R.some(SB(a[1],a[2],a[3],a[4])):R.none()},EB=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,_B=Pp(255,0,0,1),TB=t=>{t.dispatch("SkinLoaded")},hH=(t,s)=>{t.dispatch("SkinLoadError",s)},pH=t=>{t.dispatch("ResizeEditor")},FA=(t,s)=>{t.dispatch("ResizeContent",s)},bH=(t,s)=>{t.dispatch("ScrollContent",s)},kB=(t,s)=>{t.dispatch("TextColorChange",s)},QE=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},OB=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),vH=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},yH=(t,s)=>{t.dispatch("StylesTextUpdate",s)},CH=(t,s)=>{t.dispatch("AlignTextUpdate",s)},wH=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},xH=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},SH=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},LA=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},AB=t=>{t.dispatch("ToggleSidebar")},RB=t=>{t.dispatch("ToggleView")},e_=(t,s)=>()=>{t(),s()},Jr=t=>Np(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),EH=(t,s)=>a=>{const i=gc(),d=()=>{a.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,a.setActive);i.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),i.clear()}},t_=(t,s)=>a=>{const i=Jr(t)(a),d=EH(t,s)(a);return()=>{i(),d()}},Np=(t,s,a)=>i=>{const d=()=>a(i),g=()=>{a(i),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},DB=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},Dc=(t,s)=>()=>t.execCommand(s);var Bp=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const MB={},_H=(t,s=10)=>{const a=Bp.getItem(t),i=J(a)?JSON.parse(a):[],g=(T=>s-T.length<0?T.slice(0,s):T)(i),h=T=>{Le(g,T).each(C),g.unshift(T),g.length>s&&g.pop(),Bp.setItem(t,JSON.stringify(g))},C=T=>{g.splice(T,1)};return{add:h,state:()=>g.slice(0)}},PB=t=>it(MB,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=Bp.getItem(s);if(Ht(a)){const d=Bp.getItem("tinymce-custom-colors");Bp.setItem(s,Vt(d)?d:"[]")}const i=_H(s,10);return MB[t]=i,i}),TH=t=>Ne(PB(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),cC=(t,s)=>{PB(t).add(s)},$p=(t,s,a)=>({hue:t,saturation:s,value:a}),iC=t=>{let s=0,a=0,i=0;const d=t.red/255,g=t.green/255,h=t.blue/255,C=Math.min(d,Math.min(g,h)),S=Math.max(d,Math.max(g,h));if(C===S)return i=C,$p(0,0,i*100);const T=d===C?g-h:h===C?d-g:h-d;return s=d===C?3:h===C?1:5,s=60*(s-T/(S-C)),a=(S-C)/S,i=S,$p(Math.round(s),Math.round(a*100),Math.round(i*100))},NB=t=>iC(aC(t)),BB=t=>T0(xB(t)),kH=t=>wB(t).orThunk(()=>IA(t).map(T0)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const i=a.getImageData(0,0,1,1).data,d=i[0],g=i[1],h=i[2],C=i[3];return T0(Pp(d,g,h,C))}),lC="forecolor",uC="hilitecolor",n_=5,$B=t=>IB(t.map((s,a)=>a%2===0?"#"+kH(s).value:s)),IB=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:t[a],icon:"checkmark",type:"choiceitem"});return s},gu=t=>s=>s.options.get(t),HA="#000000",OH=t=>{const s=t.options.register,a=g=>En(g,J)?{value:$B(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},i=g=>En(g,J)?{value:IB(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},d=g=>sn(g)&&g>0?{value:g,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_raw",{processor:i}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:d,default:VA(t)}),s("color_cols_foreground",{processor:d,default:FB(t,lC)}),s("color_cols_background",{processor:d,default:FB(t,uC)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:HA}),s("color_default_background",{processor:"string",default:HA})},o_=(t,s)=>s===lC&&t.options.isSet("color_map_foreground")?gu("color_map_foreground")(t):s===uC&&t.options.isSet("color_map_background")?gu("color_map_background")(t):t.options.isSet("color_map_raw")?gu("color_map_raw")(t):gu("color_map")(t),VA=(t,s="default")=>Math.max(n_,Math.ceil(Math.sqrt(o_(t,s).length))),FB=(t,s)=>{const a=gu("color_cols")(t),i=VA(t,s);return a===VA(t)?i:a},LB=(t,s="default")=>Math.round(s===lC?gu("color_cols_foreground")(t):s===uC?gu("color_cols_background")(t):gu("color_cols")(t)),HB=gu("custom_colors"),AH=gu("color_default_foreground"),RH=gu("color_default_background"),DH="rgba(0, 0, 0, 0)",MH=t=>IA(t).exists(s=>s.alpha!==0),VB=t=>hc(t,s=>{if(oo(s)){const a=Dr(s,"background-color");return It(MH(a),a)}else return R.none()}).getOr(DH),zB=(t,s)=>{const a=ue.fromDom(t.selection.getStart()),i=s==="hilitecolor"?VB(a):Dr(a,"color");return IA(i).map(d=>"#"+T0(d).value)},PH=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},Ed=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},NH=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{PH(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{Ed(t,s)})},UB=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},dC=(t,s,a,i)=>{a==="custom"?KB(t)(g=>{g.each(h=>{cC(s,h),t.execCommand("mceApplyTextcolor",s,h),i(h)})},zB(t,s).getOr(HA)):a==="remove"?(i(""),t.execCommand("mceRemoveTextcolor",s)):(i(a),t.execCommand("mceApplyTextcolor",s,a))},Ps=(t,s,a)=>t.concat(TH(s).concat(UB(a))),WB=(t,s,a)=>i=>{i(Ps(t,s,a))},zA=(t,s,a)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(i,a)},ZB=(t,s)=>{t.setTooltip(s)},jB=(t,s)=>a=>{const i=zB(t,s);return Na(i,a.toUpperCase())},UA=(t,s,a)=>{if(Mo(a))return s==="forecolor"?"Text color":"Background color";const i=s==="forecolor"?"Text color {0}":"Background color {0}",d=Ps(o_(t,s),s,!1),g=Zt(d,h=>h.value===a).getOr({text:""}).text;return t.translate([i,t.translate(g)])},GB=(t,s,a,i)=>{t.ui.registry.addSplitButton(s,{tooltip:UA(t,a,i.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:jB(t,a),columns:LB(t,a),fetch:WB(o_(t,a),a,HB(t)),onAction:d=>{dC(t,a,i.get(),Q)},onItemAction:(d,g)=>{dC(t,a,g,h=>{i.set(h),kB(t,{name:s,color:h})})},onSetup:d=>{zA(d,s,i.get());const g=h=>{h.name===s&&(zA(d,h.name,h.color),ZB(d,UA(t,a,h.color)))};return t.on("TextColorChange",g),e_(Jr(t)(d),()=>{t.off("TextColorChange",g)})}})},qB=(t,s,a,i,d)=>{t.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(ZB(g,UA(t,a,d.get())),zA(g,s,d.get()),Jr(t)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:jB(t,a),initData:{storageKey:a},onAction:g=>{dC(t,a,g.value,h=>{d.set(h),kB(t,{name:s,color:h})})}}]})},KB=t=>(s,a)=>{let i=!1;const d=C=>{const T=C.getData().colorpicker;i?(s(R.from(T)),C.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",T]))},g=(C,S)=>{S.name==="hex-valid"&&(i=S.value)},h={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onAction:g,onSubmit:d,onClose:Q,onCancel:()=>{s(R.none())}})},BH=t=>{NH(t);const s=AH(t),a=RH(t),i=Et(s),d=Et(a);GB(t,"forecolor","forecolor",i),GB(t,"backcolor","hilitecolor",d),qB(t,"forecolor","forecolor","Text color",i),qB(t,"backcolor","hilitecolor","Background color",d)},WA=(t,s,a,i,d,g,h,C)=>{const S=VE(s),O=$H(s,a,i,d!=="color"?"normal":"color",g,h,C);return dA(t,S,O,i,{menuType:d})},$H=(t,s,a,i,d,g,h)=>Bd(Ne(t,C=>C.type==="choiceitem"?iB(C).fold(Sd,S=>R.some(yB(S,a===1,i,s,g(S.value),d,h,VE(t)))):R.none())),s_=(t,s)=>{const a=kg(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?bo(d.element,"[aria-checked=true]"):R.none()}},IH=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${ME}`:`.${x0}`}},FH=(t,s)=>{const a=LH(t,s),i=s.colorinput.getColorCols(t.initData.storageKey),d="color",h={...WA(mt("menu-value"),a,C=>{t.onAction({value:C})},i,d,Ol.CLOSE_ON_EXECUTE,t.select.getOr(jn),s.shared.providers),markers:kg(d),movement:s_(i,d),showMenuRole:!1};return{type:"widget",data:{value:mt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[DA.widget(pp.sketch(h))]}},LH=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>Ps(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),i=>i.concat(UB(a)))},YB=mt("cell-over"),XB=mt("cell-execute"),HH=t=>(s,a)=>t.shared.providers.translate(["{0} columns, {1} rows",a,s]),VH=(t,s,a)=>{const i=h=>yt(h,YB,{row:t,col:s}),d=h=>yt(h,XB,{row:t,col:s}),g=(h,C)=>{C.stop(),d(h)};return Ds({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:He([qt("insert-table-picker-cell",[ke(Gc(),$t.focus),ke(nr(),d),ke(sf(),g),ke(q1(),g)]),nn.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),$t.config({onFocus:i})])})},zH=(t,s,a)=>{const i=[];for(let d=0;d<s;d++){const g=[];for(let h=0;h<a;h++){const C=t(d+1,h+1);g.push(VH(d,h,C))}i.push(g)}return i},UH=(t,s,a,i,d)=>{for(let g=0;g<i;g++)for(let h=0;h<d;h++)nn.set(t[g][h],g<=s&&h<=a)},WH=t=>_e(t,s=>Ne(s,Ga)),JB=(t,s)=>_o(`${s}x${t}`),ZH={inserttable:(t,s)=>{const d=HH(s),g=zH(d,10,10),h=JB(0,0),C=Nn({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[h],behaviours:He([zt.config({})])});return{type:"widget",data:{value:mt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[DA.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:WH(g).concat(C.asSpec()),behaviours:He([qt("insert-table-picker",[go(S=>{zt.set(C.get(S),[h])}),eb(YB,(S,T,O)=>{const{row:P,col:F}=O.event;UH(g,P,F,10,10),zt.set(C.get(S),[JB(P+1,F+1)])}),eb(XB,(S,T,O)=>{const{row:P,col:F}=O.event;un(S,Vs()),t.onAction({numRows:P+1,numColumns:F+1})})]),_t.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:FH},QB=(t,s)=>it(ZH,t.fancytype).map(a=>a(t,s)),jH=(t,s,a,i=!0,d=!1)=>{const g=d?aH(a.icons):rH(a.icons),h=S=>({isEnabled:()=>!Bt.isDisabled(S),setEnabled:T=>Bt.set(S,!T),setIconFill:(T,O)=>{bo(S.element,`svg path[class="${T}"], rect[class="${T}"]`).each(P=>{Nt(P,"fill",O)})},setTooltip:T=>{const O=a.translate(T);Nt(S.element,"aria-label",O)}}),C=rC({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:R.none(),ariaLabel:t.text,caret:R.some(g),checkMark:R.none(),shortcutContent:t.shortcut},a,i);return Rp({context:t.context,data:Dp(t),getApi:h,enabled:t.enabled,onAction:Q,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},C,s,a)},e5=(t,s,a,i=!0)=>{const d=h=>({isEnabled:()=>!Bt.isDisabled(h),setEnabled:C=>Bt.set(h,!C)}),g=rC({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:R.none(),ariaLabel:t.text,caret:R.none(),checkMark:R.none(),shortcutContent:t.shortcut},a,i);return Rp({context:t.context,data:Dp(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},GH=t=>({type:"separator",dom:{tag:"div",classes:[x0,A7]},components:t.text.map(_o).toArray()}),qH=(t,s,a,i=!0)=>{const d=h=>({setActive:C=>{nn.set(h,C)},isActive:()=>nn.isOn(h),isEnabled:()=>!Bt.isDisabled(h),setEnabled:C=>Bt.set(h,!C)}),g=rC({iconContent:t.icon,textContent:t.text,htmlContent:R.none(),ariaLabel:t.text,checkMark:R.some(gB(a.icons)),caret:R.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,i);return Uo(Rp({context:t.context,data:Dp(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:oA,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},KH=uH,ZA=GH,YH=e5,XH=jH,JH=qH,QH=QB,t5=vB;var tV=Object.freeze({__proto__:null,getCoupled:(t,s,a,i)=>a.getOrCreate(t,s,i),getExistingCoupled:(t,s,a,i)=>a.getExisting(t,s,i)}),n5=[$n("others",Ei(on.value,Uc()))],nV=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,h)=>{if(Fo(g.others).length===0)throw new Error("Cannot find any known coupled components");return it(t,h)},a=(g,h,C)=>s(h,C).getOrThunk(()=>{const T=it(h.others,C).getOrDie("No information found for coupled component: "+C)(g),O=g.getSystem().build(T);return t[C]=O,O}),i=(g,h,C)=>s(h,C).orThunk(()=>(it(h.others,C).getOrDie("No information found for coupled component: "+C),R.none())),d=oe({});return Pr({readState:d,getExisting:i,getOrCreate:a})}});const ts=zs({fields:n5,name:"coupling",apis:tV,state:nV}),jA=t=>{let s=R.none(),a=[];const i=T=>jA(O=>{d(P=>{O(T(P))})}),d=T=>{h()?S(T):a.push(T)},g=T=>{h()||(s=R.some(T),C(a),a=[])},h=()=>s.isSome(),C=T=>{dt(T,S)},S=T=>{s.each(O=>{setTimeout(()=>{T(O)},0)})};return t(g),{get:d,map:i,isReady:h}},oV={nu:jA,pure:t=>jA(s=>{s(t)})},sV=t=>{setTimeout(()=>{throw t},0)},k0=t=>{const s=S=>{t().then(S,sV)};return{map:S=>k0(()=>t().then(S)),bind:S=>k0(()=>t().then(T=>S(T).toPromise())),anonBind:S=>k0(()=>t().then(()=>S.toPromise())),toLazy:()=>oV.nu(s),toCached:()=>{let S=null;return k0(()=>(S===null&&(S=t()),S))},toPromise:t,get:s}},Fr={nu:t=>k0(()=>new Promise(t)),pure:t=>k0(()=>Promise.resolve(t))},o5=oe("sink"),s5=oe(Ja({name:o5(),overrides:oe({dom:{tag:"div"},behaviours:He([ar.config({useFixed:Dt})]),events:zn([lf(pc()),lf(Wa()),lf(sf())])})})),GA=(t,s)=>{const a=t.getHotspot(s).getOr(s),i="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:i,hotspot:a,overrides:d}),g=>({type:i,hotspot:a,overrides:d,layouts:g}))},rV=(t,s,a)=>{const i=t.fetch;return i(a).map(s)},aV=(t,s,a,i,d,g,h)=>{const C=rV(t,s,i),S=r5(i,t);return C.map(T=>T.bind(O=>{const P=O.menus[O.primary];return R.from(P).each(F=>{t.listRole.each(V=>{F.role=V})}),R.from(xd.sketch({...g.menu(),uid:Ph(""),data:O,highlightOnOpen:h,onOpenMenu:(F,V)=>{const j=S().getOrDie();ar.position(j,V,{anchor:a}),_n.decloak(d)},onOpenSubmenu:(F,V,j)=>{const Y=S().getOrDie();ar.position(Y,j,{anchor:{type:"submenu",item:V}}),_n.decloak(d)},onRepositionMenu:(F,V,j)=>{const Y=S().getOrDie();ar.position(Y,V,{anchor:a}),dt(j,ie=>{ar.position(Y,ie.triggeredMenu,{anchor:{type:"submenu",item:ie.triggeringItem}})})},onEscape:()=>($t.focus(i),_n.close(d),R.some(!0))}))}))},r_=(t,s,a,i,d,g,h)=>{const C=GA(t,a);return aV(t,s,C,a,i,d,h).map(T=>(T.fold(()=>{_n.isOpen(i)&&_n.close(i)},O=>{_n.cloak(i),_n.open(i,O),g(i)}),i))},cV=(t,s,a,i,d,g,h)=>(_n.close(i),Fr.pure(i)),qA=(t,s,a,i,d,g)=>{const h=ts.getCoupled(a,"sandbox");return(_n.isOpen(h)?cV:r_)(t,s,a,h,i,d,g)},KA=(t,s,a)=>{const i=yn.getCurrent(s).getOr(s),d=sa(t.element);a?Wt(i.element,"min-width",d+"px"):w1(i.element,d)},r5=(t,s)=>t.getSystem().getByUid(s.uid+"-"+o5()).map(a=>()=>on.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>on.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),a5=t=>{_n.getState(t).each(s=>{xd.repositionMenus(s)})},YA=(t,s,a)=>{const i=Fh(),d=(C,S)=>{const T=GA(t,s);i.link(s.element),t.matchWidth&&KA(T.hotspot,S,t.useMinWidth),t.onOpen(T,C,S),a!==void 0&&a.onOpen!==void 0&&a.onOpen(C,S)},g=(C,S)=>{i.unlink(s.element),h().getOr(S).element.dom.dispatchEvent(new window.FocusEvent("focusout")),a!==void 0&&a.onClose!==void 0&&a.onClose(C,S)},h=r5(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:i.id}},behaviours:Ec.augment(t.sandboxBehaviours,[rt.config({store:{mode:"memory",initialValue:s}}),_n.config({onOpen:d,onClose:g,isPartOf:(C,S,T)=>sd(S,T)||sd(s,T),getAttachPoint:()=>h().getOrDie()}),yn.config({find:C=>_n.getState(C).bind(S=>yn.getCurrent(S))}),Ea.config({channels:{...rp({isExtraPart:jn}),...ap({doReposition:a5})}})])}},XA=t=>{const s=ts.getCoupled(t,"sandbox");a5(s)},a_=()=>[fe("sandboxClasses",[]),Ec.field("sandboxBehaviours",[yn,Ea,_n,rt])],iV=oe([Oe("dom"),Oe("fetch"),xn("onOpen"),Cr("onExecute"),fe("getHotspot",R.some),fe("getAnchorOverrides",oe({})),ld(),Ws("dropdownBehaviours",[nn,ts,_t,$t]),Oe("toggleClass"),fe("eventOrder",{}),Pn("lazySink"),fe("matchWidth",!1),fe("useMinWidth",!1),Pn("role"),Pn("listRole")].concat(a_())),lV=oe([_c({schema:[yl(),fe("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),s5()]),c5=(t,s,a,i)=>{const d=O=>it(t.dom,"attributes").bind(P=>it(P,O)),g=O=>{_n.getState(O).each(P=>{xd.highlightPrimary(P)})},h=(O,P,F)=>qA(t,rn,O,i,P,F),C=O=>{h(O,g,Ra.HighlightMenuAndItem).get(Q)},S={expand:O=>{nn.isOn(O)||h(O,Q,Ra.HighlightNone).get(Q)},open:O=>{nn.isOn(O)||h(O,Q,Ra.HighlightMenuAndItem).get(Q)},refetch:O=>ts.getExistingCoupled(O,"sandbox").fold(()=>h(O,Q,Ra.HighlightMenuAndItem).map(Q),F=>r_(t,rn,O,F,i,Q,Ra.HighlightMenuAndItem).map(Q)),isOpen:nn.isOn,close:O=>{nn.isOn(O)&&h(O,Q,Ra.HighlightMenuAndItem).get(Q)},repositionMenus:O=>{nn.isOn(O)&&XA(O)}},T=(O,P)=>(qu(O),R.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:Zs(t.dropdownBehaviours,[nn.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),ts.config({others:{sandbox:O=>YA(t,O,{onOpen:()=>nn.on(O),onClose:()=>nn.off(O)})}}),_t.config({mode:"special",onSpace:T,onEnter:T,onDown:(O,P)=>{if(ci.isOpen(O)){const F=ts.getCoupled(O,"sandbox");g(F)}else ci.open(O);return R.some(!0)},onEscape:(O,P)=>ci.isOpen(O)?(ci.close(O),R.some(!0)):R.none()}),$t.config({})]),events:R2(R.some(C)),eventOrder:{...t.eventOrder,[nr()]:["disabling","toggling","alloy.base.behaviour"]},apis:S,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),O=>({role:O})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},ci=pr({name:"Dropdown",configFields:iV(),partFields:lV(),factory:c5,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),uV=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},dV=t=>{const s=rt.getValue(t),a=IE(t).map(K2);ci.refetch(s).get(()=>{const i=ts.getCoupled(s,"sandbox");a.each(d=>IE(i).each(g=>M7(g,d)))})},fV=(t,s)=>{mV(t).each(a=>{Gv(t,a.element,s.event.eventType,s.event.interactionEvent)})},mV=t=>_n.getState(t).bind(qe.getHighlighted).bind(qe.getHighlighted),gV=t=>qr(t.element,FE)?R.some(t.element):bo(t.element,"."+FE),fC=(t,s,a)=>{qN(t).each(i=>{P7(i,a),gV(s).each(g=>{Ho(g,"id").each(h=>Nt(i.element,"aria-controls",h))})}),Nt(a.element,"aria-selected","true")},hV=(t,s,a)=>{Nt(a.element,"aria-selected","false")},c_=t=>{qN(t).each(s=>$t.focus(s))},pV=t=>ts.getExistingCoupled(t,"sandbox").bind(IE).map(K2).map(a=>a.fetchPattern).getOr("");var i_;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(i_||(i_={}));const bV=(t,s,a,i,d)=>{const g=a.shared.providers,h=C=>d?{...C,shortcut:R.none(),icon:C.text.isSome()?R.none():C.icon}:C;switch(t.type){case"menuitem":return X7(t).fold(Sd,C=>R.some(YH(h(C),s,g,i)));case"nestedmenuitem":return Q7(t).fold(Sd,C=>R.some(XH(h(C),s,g,i,d)));case"togglemenuitem":return eH(t).fold(Sd,C=>R.some(JH(h(C),s,g,i)));case"separator":return z7(t).fold(Sd,C=>R.some(ZA(C)));case"fancymenuitem":return K7(t).fold(Sd,C=>QH(C,a));default:return console.error("Unknown item in general menu",t),R.none()}},vV=(t,s,a,i,d,g,h)=>{const C=i===1,S=!C||VE(t);return Bd(Ne(t,T=>{switch(T.type){case"separator":return Rl(T).fold(Sd,O=>R.some(ZA(O)));case"cardmenuitem":return wA(T).fold(Sd,O=>R.some(t5({...O,onAction:P=>{O.onAction(P),a(O.value,O.meta)}},d,g,{itemBehaviours:bB(O.meta,g,R.none()),cardText:{matchText:s,highlightOn:h}})));case"autocompleteitem":default:return aB(T).fold(Sd,O=>R.some(KH(O,s,C,"normal",a,d,g,S)))}}))},yV=(t,s,a,i,d,g)=>{const h=VE(s),C=Bd(Ne(s,O=>{const P=V=>d?!Vn(V,"text"):h,F=V=>bV(V,a,i,P(V),d);return O.type==="nestedmenuitem"&&O.getSubmenuItems().length<=0?F({...O,enabled:!1}):F(O)})),S=uV(g);return(d?XN:dA)(t,h,C,1,S)},O0=t=>xd.singleData(t.value,t),A0=(t,s,a,i)=>{const d=s_(s,i),g=kg(i);return{data:O0({...t,movement:d,menuBehaviours:_0.unnamedEvents(s!=="auto"?[]:[go((h,C)=>{EA(h,4,g.item).each(({numColumns:S,numRows:T})=>{_t.setGridSize(h,T,S)})})])}),menu:{markers:kg(i),fakeFocus:a===i_.ContentFocus}}},i5=t=>Nb.create(ue.fromDom(t.startContainer),t.startOffset,ue.fromDom(t.endContainer),t.endOffset),wV={register:(t,s)=>{const a=mt("autocompleter"),i=Et(!1),d=Et(!1),g=In(),h=Ds(Ao.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:He([qt("dismissAutocompleter",[ke(ja(),()=>P()),ke(jv(),(X,ae)=>{Ho(ae.event.target,"id").each(ce=>Nt(ue.fromDom(t.getBody()),"aria-activedescendant",ce))})])]),lazySink:s.getSink})),C=()=>Ao.isOpen(h),S=d.get,T=()=>{if(C()){Ao.hide(h),t.dom.remove(a,!1);const X=ue.fromDom(t.getBody());Ho(X,"aria-owns").filter(ae=>ae===a).each(()=>{Po(X,"aria-owns"),Po(X,"aria-activedescendant")})}},O=()=>Ao.getContent(h).bind(X=>us(X.components(),0)),P=()=>t.execCommand("mceAutocompleterClose"),F=X=>{const ae=ir(X,ce=>R.from(ce.columns)).getOr(1);return _e(X,ce=>{const ye=ce.items;return vV(ye,ce.matchText,(we,Ge)=>{const ut={hide:()=>P(),reload:Te=>{T(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:Te})}};t.execCommand("mceAutocompleterRefreshActiveRange"),g.get().each(Te=>{i.set(!0),ce.onAction(ut,Te,we,Ge),i.set(!1)})},ae,Ol.BUBBLE_TO_SANDBOX,s,ce.highlightOn)})},V=(X,ae)=>{const ce=ir(X,ye=>R.from(ye.columns)).getOr(1);Ao.showMenuAt(h,{anchor:{type:"selection",getSelection:()=>g.get().map(i5),root:ue.fromDom(t.getBody())}},A0(dA("autocompleter-value",!0,ae,ce,{menuType:"normal"}),ce,i_.ContentFocus,"normal")),O().each(qe.highlightFirst)},j=X=>{const ae=F(X);ae.length>0?(V(X,ae),Nt(ue.fromDom(t.getBody()),"aria-owns",a),t.inline||Y()):T()},Y=()=>{t.dom.get(a)&&t.dom.remove(a,!1);const X=t.getDoc().documentElement,ae=t.selection.getNode(),ce=Ah(h.element);Zl(ce,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${ae.offsetTop}px`,left:`${ae.offsetLeft}px`}),t.dom.add(X,ce.dom),bo(ce,'[role="menu"]').each(ye=>{Qt(ye,"position"),Qt(ye,"max-height")})};t.on("AutocompleterStart",({lookupData:X})=>{d.set(!0),i.set(!1),j(X)}),t.on("AutocompleterUpdate",({lookupData:X})=>j(X)),t.on("AutocompleterUpdateActiveRange",({range:X})=>g.set(X)),t.on("AutocompleterEnd",()=>{T(),d.set(!1),i.set(!1),g.clear()});const ie={cancelIfNecessary:P,isMenuOpen:C,isActive:S,isProcessingAction:i.get,getMenu:O};O7.setup(ie,t)}},mC=(t,s,a)=>Cl(t,s,a).isSome(),l5=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{t.apply(null,g),a=null},s)}}},u5=5,xV=400,d5=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?R.none():R.some(s.touches[0])},SV=(t,s)=>{const a=Math.abs(t.clientX-s.x),i=Math.abs(t.clientY-s.y);return a>u5||i>u5},EV=t=>{const s=In(),a=Et(!1),i=l5(T=>{t.triggerEvent(ju(),T),a.set(!0)},xV),d=T=>(d5(T).each(O=>{i.cancel();const P={x:O.clientX,y:O.clientY,target:T.target};i.schedule(T),a.set(!1),s.set(P)}),R.none()),g=T=>(i.cancel(),d5(T).each(O=>{s.on(P=>{SV(O,P)&&s.clear()})}),R.none()),h=T=>{i.cancel();const O=P=>qn(P.target,T.target);return s.get().filter(O).map(P=>a.get()?(T.prevent(),!1):t.triggerEvent(q1(),T))},C=km([{key:_i(),value:d},{key:Uu(),value:g},{key:nf(),value:h}]);return{fireIfReady:(T,O)=>it(C,O).bind(P=>P(T))}},_V=t=>t.raw.which===Ft[0]&&!Io(["input","textarea"],$c(t.target))&&!mC(t.target,'[contenteditable="true"]'),TV=(t,s)=>{const a={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=EV(a),g=Ne(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),V=>Kr(t,V,j=>{d.fireIfReady(j,V).each(ie=>{ie&&j.kill()}),a.triggerEvent(V,j)&&j.kill()})),h=In(),C=Kr(t,"paste",V=>{d.fireIfReady(V,"paste").each(Y=>{Y&&V.kill()}),a.triggerEvent("paste",V)&&V.kill(),h.set(setTimeout(()=>{a.triggerEvent(wh(),V)},0))}),S=Kr(t,"keydown",V=>{a.triggerEvent("keydown",V)?V.kill():a.stopBackspace&&_V(V)&&V.prevent()}),T=Kr(t,"focusin",V=>{a.triggerEvent("focusin",V)&&V.kill()}),O=In(),P=Kr(t,"focusout",V=>{a.triggerEvent("focusout",V)&&V.kill(),O.set(setTimeout(()=>{a.triggerEvent(rf(),V)},0))});return{unbind:()=>{dt(g,V=>{V.unbind()}),S.unbind(),T.unbind(),P.unbind(),C.unbind(),h.on(clearTimeout),O.on(clearTimeout)}}},f5=(t,s)=>{const a=it(t,"target").getOr(s);return Et(a)},m5=(t,s)=>{const a=Et(!1),i=Et(!1);return{stop:()=>{a.set(!0)},cut:()=>{i.set(!0)},isStopped:a.get,isCut:i.get,event:t,setSource:s.set,getSource:s.get}},R0=t=>{const s=Et(!1);return{stop:()=>{s.set(!0)},cut:Q,isStopped:s.get,isCut:jn,event:t,setSource:se("Cannot set source of a broadcasted event"),getSource:se("Cannot get source of a broadcasted event")}},hu=wa.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),g5=(t,s,a,i,d,g)=>{const h=t(s,i),C=m5(a,d);return h.fold(()=>(g.logEventNoHandlers(s,i),hu.complete()),S=>{const T=S.descHandler;return nd(T)(C),C.isStopped()?(g.logEventStopped(s,S.element,T.purpose),hu.stopped()):C.isCut()?(g.logEventCut(s,S.element,T.purpose),hu.complete()):Ic(S.element).fold(()=>(g.logNoParent(s,S.element,T.purpose),hu.complete()),P=>(g.logEventResponse(s,S.element,T.purpose),hu.resume(P)))})},JA=(t,s,a,i,d,g)=>g5(t,s,a,i,d,g).fold(Dt,h=>JA(t,s,a,h,d,g),jn),h5=(t,s,a,i,d)=>{const g=f5(a,i);return g5(t,s,a,i,g,d)},l_=(t,s,a)=>{const i=R0(s);return dt(t,d=>{const g=d.descHandler;nd(g)(i)}),i.isStopped()},kV=(t,s,a,i)=>D0(t,s,a,a.target,i),D0=(t,s,a,i,d)=>{const g=f5(a,i);return JA(t,s,a,i,g,d)},gC=(t,s)=>({element:t,descHandler:s}),OV=(t,s)=>({id:t,descHandler:s}),AV=()=>{const t={},s=(h,C,S)=>{Bs(S,(T,O)=>{const P=t[O]!==void 0?t[O]:{};P[C]=Gm(T,h),t[O]=P})},a=(h,C)=>Zm(C).bind(S=>it(h,S)).map(S=>gC(C,S));return{registerId:s,unregisterId:h=>{Bs(t,(C,S)=>{Vn(C,h)&&delete C[h]})},filterByType:h=>it(t,h).map(C=>Xg(C,(S,T)=>OV(T,S))).getOr([]),find:(h,C,S)=>it(t,C).bind(T=>hc(S,O=>a(T,O),h))}},RV=()=>{const t=AV(),s={},a=T=>{const O=T.element;return Zm(O).getOrThunk(()=>uy("uid-",T.element))},i=(T,O)=>{const P=s[O];if(P===T)g(T);else throw new Error('The tagId "'+O+'" is already used by: '+ed(P.element)+`
Cannot use it for: `+ed(T.element)+`
The conflicting element is`+(uc(P.element)?" ":" not ")+"already in the DOM")},d=T=>{const O=a(T);lc(s,O)&&i(T,O);const P=[T];t.registerId(P,O,T.events),s[O]=T},g=T=>{Zm(T.element).each(O=>{delete s[O],t.unregisterId(O)})};return{find:(T,O,P)=>t.find(T,O,P),filter:T=>t.filterByType(T),register:d,unregister:g,getById:T=>it(s,T)}},pu=Oa({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:Yb(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[fe("components",[]),Ws("containerBehaviours",[]),fe("events",{}),fe("domModification",{}),fe("eventOrder",{})]}),QA=t=>{const s=X=>Ic(t.element).fold(Dt,ae=>qn(X,ae)),a=RV(),i=(X,ae)=>a.find(s,X,ae),d=TV(t.element,{triggerEvent:(X,ae)=>ly(X,ae.target,ce=>kV(i,X,ae,ce))}),g={debugInfo:oe("real"),triggerEvent:(X,ae,ce)=>{ly(X,ae,ye=>D0(i,X,ce,ae,ye))},triggerFocus:(X,ae)=>{Zm(X).fold(()=>{wc(X)},ce=>{ly(ki(),X,ye=>(h5(i,ki(),{originator:ae,kill:Q,prevent:Q,target:X},X,ye),!1))})},triggerEscape:(X,ae)=>{g.triggerEvent("keydown",X.element,ae.event)},getByUid:X=>Y(X),getByDom:X=>ie(X),build:Ds,buildOrPatch:yy,addToGui:X=>{S(X)},removeFromGui:X=>{T(X)},addToWorld:X=>{h(X)},removeFromWorld:X=>{C(X)},broadcast:X=>{F(X)},broadcastOn:(X,ae)=>{V(X,ae)},broadcastEvent:(X,ae)=>{j(X,ae)},isConnected:Dt},h=X=>{X.connect(g),$a(X.element)||(a.register(X),dt(X.components(),h),g.triggerEvent(Y1(),X.element,{target:X.element}))},C=X=>{$a(X.element)||(dt(X.components(),C),a.unregister(X)),X.disconnect()},S=X=>{ru(t,X)},T=X=>{au(X)},O=()=>{d.unbind(),ya(t.element)},P=X=>{const ae=a.filter(Oi());dt(ae,ce=>{const ye=ce.descHandler;nd(ye)(X)})},F=X=>{P({universal:!0,data:X})},V=(X,ae)=>{P({universal:!1,channels:X,data:ae})},j=(X,ae)=>{const ce=a.filter(X);return l_(ce,ae)},Y=X=>a.getById(X).fold(()=>on.error(new Error('Could not find component with uid: "'+X+'" in system.')),on.value),ie=X=>{const ae=Zm(X).getOr("not found");return Y(ae)};return h(t),{root:t,element:t.element,destroy:O,add:S,remove:T,getByUid:Y,getByDom:ie,addToWorld:h,removeFromWorld:C,broadcast:F,broadcastOn:V,broadcastEvent:j}},u_=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Ne(t.items,s.interpreter)}),DV=oe([fe("prefix","form-field"),Ws("fieldBehaviours",[yn,rt])]),e3=oe([Ja({schema:[Oe("dom")],name:"label"}),Ja({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Oe("text")],name:"aria-descriptor"}),xr({factory:{sketch:t=>{const s=zw(t,["factory"]);return t.factory.sketch(s)}},schema:[Oe("factory")],name:"field"})]),MV=(t,s,a,i)=>{const d=Zs(t.fieldBehaviours,[yn.config({find:C=>Jn(C,t,"field")}),rt.config({store:{mode:"manual",getValue:C=>yn.getCurrent(C).bind(rt.getValue),setValue:(C,S)=>{yn.getCurrent(C).each(T=>{rt.setValue(T,S)})}}})]),g=zn([go((C,S)=>{const T=Ii(C,t,["label","field","aria-descriptor"]);T.field().each(O=>{const P=mt(t.prefix);T.label().each(F=>{Nt(F.element,"for",P),Nt(O.element,"id",P)}),T["aria-descriptor"]().each(F=>{const V=mt(t.prefix);Nt(F.element,"id",V),Nt(O.element,"aria-describedby",V)})})})]),h={getField:C=>Jn(C,t,"field"),getLabel:C=>Jn(C,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:h}},Hn=pr({name:"FormField",configFields:DV(),partFields:e3(),factory:MV,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var PV=tinymce.util.Tools.resolve("tinymce.html.Entities");const M0=(t,s,a,i)=>{const d=BV(t,s,a,i);return Hn.sketch(d)},NV=(t,s)=>M0(t,s,[],[]),BV=(t,s,a,i)=>({dom:t3(a),components:t.toArray().concat([s]),fieldBehaviours:He(i)}),$V=()=>t3([]),t3=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),Pg=(t,s)=>Hn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[_o(s.translate(t))]}),ec=mt("form-component-change"),hC=mt("form-close"),Ng=mt("form-cancel"),_d=mt("form-action"),P0=mt("form-submit"),d_=mt("form-block"),n3=mt("form-unblock"),p5=mt("form-tabchange"),b5=mt("form-resize"),IV=(t,s,a)=>{const i=t.label.map(V=>Pg(V,s)),d=s.icons(),g=V=>{var j;return(j=d[V])!==null&&j!==void 0?j:V},h=V=>(j,Y)=>{Cl(Y.event.target,"[data-collection-item-value]").each(ie=>{V(j,Y,ie,Jt(ie,"data-collection-item-value"))})},C=(V,j)=>{const ie=s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()?" tox-collection__item--state-disabled":"",X=Ne(j,ye=>{const we=Vi.translate(ye.text),Ge=t.columns===1?`<div class="tox-collection__item-label">${we}</div>`:"",ut=`<div class="tox-collection__item-icon">${g(ye.icon)}</div>`,Te={_:" "," - ":" ","-":" "},ft=we.replace(/\_| \- |\-/g,nt=>Te[nt]);return`<div data-mce-tooltip="${ft}" class="tox-collection__item${ie}" tabindex="-1" data-collection-item-value="${PV.encodeAllRaw(ye.value)}" aria-label="${ft}">${ut}${Ge}</div>`}),ae=t.columns!=="auto"&&t.columns>1?ta(X,t.columns):[X],ce=Ne(ae,ye=>`<div class="tox-collection__group">${ye.join("")}</div>`);xa(V.element,ce.join(""))},S=h((V,j,Y,ie)=>{j.stop(),s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()||yt(V,_d,{name:t.name,value:ie})}),T=[ke(Gc(),h((V,j,Y)=>{wc(Y,!0)})),ke(sf(),S),ke(q1(),S),ke(qc(),h((V,j,Y)=>{bo(V.element,"."+_p).each(ie=>{Un(ie,_p)}),rs(Y,_p)})),ke(Ww(),h(V=>{bo(V.element,"."+_p).each(j=>{Un(j,_p),Xm(j)})})),Yl(h((V,j,Y,ie)=>{yt(V,_d,{name:t.name,value:ie})}))],O=(V,j)=>Ne(sr(V.element,".tox-collection__item"),j),P=Hn.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:rn},behaviours:He([Bt.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable,onDisabled:V=>{O(V,j=>{rs(j,"tox-collection__item--state-disabled"),Nt(j,"aria-disabled",!0)})},onEnabled:V=>{O(V,j=>{Un(j,"tox-collection__item--state-disabled"),Po(j,"aria-disabled")})}}),as(()=>s.checkUiComponentContext(t.context)),zt.config({}),Wo.config({...s.tooltips.getConfig({tooltipText:"",onShow:V=>{bo(V.element,"."+_p+"[data-mce-tooltip]").each(j=>{Ho(j,"data-mce-tooltip").each(Y=>{Wo.setComponents(V,s.tooltips.getComponents({tooltipText:Y}))})})}}),mode:"children-keyboard-focus",anchor:V=>({type:"node",node:bo(V.element,"."+_p).orThunk(()=>Dx(".tox-collection__item")),root:V.element,layouts:{onLtr:oe([ds,Ln,vs,or,ys,Cs]),onRtl:oe([ds,Ln,vs,or,ys,Cs])},bubble:ti(0,-2,{})})}),rt.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(V,j)=>{C(V,j),t.columns==="auto"&&EA(V,5,"tox-collection__item").each(({numRows:Y,numColumns:ie})=>{_t.setGridSize(V,Y,ie)}),un(V,b5)}}),vo.config({}),_t.config(IH(t.columns,"normal")),qt("collection-events",T)]),eventOrder:{[nr()]:["disabling","alloy.base.behaviour","collection-events"],[qc()]:["collection-events","tooltipping"]}});return M0(i,P,["tox-form__group--collection"],[])},FV=["input","textarea"],o3=t=>{const s=$c(t);return Io(FV,s)},Ip=(t,s)=>{const a=s.getRoot(t).getOr(t.element);Un(a,s.invalidClass),s.notify.each(i=>{o3(t.element)&&Nt(t.element,"aria-invalid",!1),i.getContainer(t).each(d=>{xa(d,i.validHtml)}),i.onValid(t)})},v5=(t,s,a,i)=>{const d=s.getRoot(t).getOr(t.element);rs(d,s.invalidClass),s.notify.each(g=>{o3(t.element)&&Nt(t.element,"aria-invalid",!0),g.getContainer(t).each(h=>{xa(h,i)}),g.onInvalid(t,i)})},y5=(t,s,a)=>s.validator.fold(()=>Fr.pure(on.value(!0)),i=>i.validate(t)),s3=(t,s,a)=>(s.notify.each(i=>{i.onValidate(t)}),y5(t,s).map(i=>t.getSystem().isConnected()?i.fold(d=>(v5(t,s,a,d),on.error(d)),d=>(Ip(t,s),on.value(d))):on.error("No longer in system")));var Ui=Object.freeze({__proto__:null,markValid:Ip,markInvalid:v5,query:y5,run:s3,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return qr(a,s.invalidClass)}}),w5=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>zn([ke(a.onEvent,i=>{s3(i,t,s).get(rn)})].concat(a.validateOnLoad?[go(i=>{s3(i,t,s).get(Q)})]:[]))).getOr({})}),LV=[Oe("invalidClass"),fe("getRoot",R.none),Hs("notify",[fe("aria","alert"),fe("getContainer",R.none),fe("validHtml",""),xn("onValid"),xn("onInvalid"),xn("onValidate")]),Hs("validator",[Oe("validate"),fe("onEvent","input"),fe("validateOnLoad",!0)])];const Td=zs({fields:LV,name:"invalidating",active:w5,apis:Ui,extra:{validation:t=>s=>{const a=rt.getValue(s);return Fr.pure(t(a))}}});var x5=Object.freeze({__proto__:null,events:()=>zn([qv(wk(),Dt)]),exhibit:()=>Gr({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const N0=zs({fields:[],name:"unselecting",active:x5}),HV=(t,s)=>ci.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:He([ai.button(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),as(()=>s.providers.checkUiComponentContext(t.context)),N0.config({}),vo.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>Fr.nu(i=>t.fetch(i)).map(i=>R.from(O0(Uo(WA(mt("menu-value"),i,d=>{t.onItemAction(a,d)},t.columns,t.presets,Ol.CLOSE_ON_EXECUTE,jn,s.providers),{movement:s_(t.columns,t.presets)})))),parts:{menu:q2(!1,1,t.presets)}}),S5=mt("color-input-change"),a3=mt("color-swatch-change"),E5=mt("color-picker-cancel"),_5=(t,s,a,i)=>{const d=Hn.parts.field({factory:fu,inputClasses:["tox-textfield"],data:i,onSetValue:T=>Td.run(T).get(Q),inputBehaviours:He([Bt.config({disabled:()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable}),as(()=>s.providers.checkUiComponentContext(t.context)),vo.config({}),Td.config({invalidClass:"tox-textbox-field-invalid",getRoot:T=>pi(T.element),notify:{onValid:T=>{const O=rt.getValue(T);yt(T,S5,{color:O})}},validator:{validateOnLoad:!1,validate:T=>{const O=rt.getValue(T);if(O.length===0)return Fr.pure(on.value(!0));{const P=ue.fromTag("span");Wt(P,"background-color",O);const F=Xo(P,"background-color").fold(()=>on.error("blah"),V=>on.value(O));return Fr.pure(F)}}}})]),selectOnFocus:!1}),g=t.label.map(T=>Pg(T,s.providers)),h=(T,O)=>{yt(T,a3,{value:O})},C=(T,O)=>{S.getOpt(T).each(P=>{O==="custom"?a.colorPicker(F=>{F.fold(()=>un(P,E5),V=>{h(P,V),cC(t.storageKey,V)})},"#ffffff"):O==="remove"?h(P,""):h(P,O)})},S=Nn(HV({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[ys,vs,ds],onLtr:()=>[vs,ys,ds]},components:[],fetch:WB(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:C,context:t.context},s));return Hn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,S.asSpec()]}]),fieldBehaviours:He([qt("form-field-events",[ke(S5,(T,O)=>{S.getOpt(T).each(P=>{Wt(P.element,"background-color",O.event.color)}),yt(T,ec,{name:t.name})}),ke(a3,(T,O)=>{Hn.getField(T).each(P=>{rt.setValue(P,O.event.value),yn.getCurrent(T).each($t.focus)})}),ke(E5,(T,O)=>{Hn.getField(T).each(P=>{yn.getCurrent(T).each($t.focus)})})])])})},T5=Ja({schema:[Oe("dom")],name:"label"}),Jf=t=>Ja({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),i=>({events:zn([Dm(_i(),(d,g,h)=>i(d,h),[s]),Dm(Wa(),(d,g,h)=>i(d,h),[s]),Dm(yh(),(d,g,h)=>{h.mouseIsDown.get()&&i(d,h)},[s])])}))}),VV=Jf("top-left"),zV=Jf("top"),UV=Jf("top-right"),WV=Jf("right"),ZV=Jf("bottom-right"),jV=Jf("bottom"),c3=Jf("bottom-left"),GV=Jf("left"),qV=xr({name:"thumb",defaults:oe({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:zn([Kl(_i(),t,"spectrum"),Kl(Uu(),t,"spectrum"),Kl(nf(),t,"spectrum"),Kl(Wa(),t,"spectrum"),Kl(yh(),t,"spectrum"),Kl(j1(),t,"spectrum")])})}),pC=t=>ws(t.event),KV=xr({schema:[Bn("mouseIsDown",()=>Et(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,i=(d,g)=>a.getValueFromEvent(g).map(h=>a.setValueFrom(d,t,h));return{behaviours:He([_t.config({mode:"special",onLeft:(d,g)=>a.onLeft(d,t,pC(g)),onRight:(d,g)=>a.onRight(d,t,pC(g)),onUp:(d,g)=>a.onUp(d,t,pC(g)),onDown:(d,g)=>a.onDown(d,t,pC(g))}),vo.config({}),$t.config({})]),events:zn([ke(_i(),i),ke(Uu(),i),ke(Wa(),i),ke(yh(),(d,g)=>{t.mouseIsDown.get()&&i(d,g)})])}}});var YV=[T5,GV,WV,zV,jV,VV,UV,c3,ZV,qV,KV];const bC=oe("slider.change.value"),XV=t=>t.type.indexOf("touch")!==-1,i3=t=>{const s=t.event.raw;if(XV(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?R.some(a.touches[0]).map(i=>No(i.clientX,i.clientY)):R.none()}else{const a=s;return a.clientX!==void 0?R.some(a).map(i=>No(i.clientX,i.clientY)):R.none()}},JV="top",k5="right",O5="bottom",QV="left",Fp=t=>t.model.minX,Lp=t=>t.model.minY,f_=t=>t.model.minX-1,m_=t=>t.model.minY-1,Hp=t=>t.model.maxX,Bg=t=>t.model.maxY,vC=t=>t.model.maxX+1,yC=t=>t.model.maxY+1,g_=(t,s,a)=>s(t)-a(t),l3=t=>g_(t,Hp,Fp),h_=t=>g_(t,Bg,Lp),A5=t=>l3(t)/2,R5=t=>h_(t)/2,B0=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,D5=t=>t.snapToGrid,p_=t=>t.snapStart,kd=t=>t.rounded,b_=(t,s)=>t[s+"-edge"]!==void 0,$0=t=>b_(t,QV),M5=t=>b_(t,k5),v_=t=>b_(t,JV),P5=t=>b_(t,O5),Qf=t=>t.model.value.get(),$g=(t,s)=>({x:t,y:s}),Wi=(t,s)=>{yt(t,bC(),{value:s})},ez=(t,s)=>{Wi(t,$g(f_(s),m_(s)))},u3=(t,s)=>{Wi(t,m_(s))},d3=(t,s)=>{Wi(t,$g(A5(s),m_(s)))},f3=(t,s)=>{Wi(t,$g(vC(s),m_(s)))},tz=(t,s)=>{Wi(t,vC(s))},ii=(t,s)=>{Wi(t,$g(vC(s),R5(s)))},nz=(t,s)=>{Wi(t,$g(vC(s),yC(s)))},oz=(t,s)=>{Wi(t,yC(s))},N5=(t,s)=>{Wi(t,$g(A5(s),yC(s)))},B5=(t,s)=>{Wi(t,$g(f_(s),yC(s)))},sz=(t,s)=>{Wi(t,f_(s))},rz=(t,s)=>{Wi(t,$g(f_(s),R5(s)))},m3=(t,s,a,i)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-i),g3=(t,s,a,i)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+i),$5=(t,s,a)=>Math.max(s,Math.min(a,t)),az=(t,s,a,i,d)=>d.fold(()=>{const g=t-s,h=Math.round(g/i)*i;return $5(s+h,s-1,a+1)},g=>{const h=(t-g)%i,C=Math.round(h/i),S=Math.floor((t-g)/i),T=Math.floor((a-g)/i),O=Math.min(T,S+C),P=g+O*i;return Math.max(g,P)}),cz=(t,s,a)=>Math.min(a,Math.max(t,s))-s,h3=t=>{const{min:s,max:a,range:i,value:d,step:g,snap:h,snapStart:C,rounded:S,hasMinEdge:T,hasMaxEdge:O,minBound:P,maxBound:F,screenRange:V}=t,j=T?s-1:s,Y=O?a+1:a;if(d<P)return j;if(d>F)return Y;{const ie=cz(d,P,F),X=$5(ie/V*i+s,j,Y);return h&&X>=s&&X<=a?az(X,s,a,g,C):S?Math.round(X):X}},I5=t=>{const{min:s,max:a,range:i,value:d,hasMinEdge:g,hasMaxEdge:h,maxBound:C,maxOffset:S,centerMinEdge:T,centerMaxEdge:O}=t;return d<s?g?0:T:d>a?h?C:O:(d-s)/i*S},p3="top",F5="right",b3="bottom",CC="left",L5="width",H5="height",bu=t=>t.element.dom.getBoundingClientRect(),Zi=(t,s)=>t[s],I0=t=>{const s=bu(t);return Zi(s,CC)},V5=t=>{const s=bu(t);return Zi(s,F5)},F0=t=>{const s=bu(t);return Zi(s,p3)},Vp=t=>{const s=bu(t);return Zi(s,b3)},v3=t=>{const s=bu(t);return Zi(s,L5)},y3=t=>{const s=bu(t);return Zi(s,H5)},C3=(t,s,a)=>(t+s)/2-a,z5=(t,s)=>{const a=bu(t),i=bu(s),d=Zi(a,CC),g=Zi(a,F5),h=Zi(i,CC);return C3(d,g,h)},U5=(t,s)=>{const a=bu(t),i=bu(s),d=Zi(a,p3),g=Zi(a,b3),h=Zi(i,p3);return C3(d,g,h)},zp=(t,s)=>{yt(t,bC(),{value:s})},w3=(t,s,a)=>{const i={min:Fp(s),max:Hp(s),range:l3(s),value:a,step:B0(s),snap:D5(s),snapStart:p_(s),rounded:kd(s),hasMinEdge:$0(s),hasMaxEdge:M5(s),minBound:I0(t),maxBound:V5(t),screenRange:v3(t)};return h3(i)},iz=(t,s,a)=>{const i=w3(t,s,a);return zp(t,i),i},W5=(t,s)=>{const a=Fp(s);zp(t,a)},Z5=(t,s)=>{const a=Hp(s);zp(t,a)},x3=(t,s,a,i)=>{const g=(t>0?g3:m3)(Qf(a),Fp(a),Hp(a),B0(a,i));return zp(s,g),R.some(g)},S3=t=>(s,a,i)=>x3(t,s,a,i).map(Dt),Da=t=>i3(t).map(a=>a.left),j5=(t,s,a,i,d)=>{const h=v3(t),C=i.bind(O=>R.some(z5(O,t))).getOr(0),S=d.bind(O=>R.some(z5(O,t))).getOr(h),T={min:Fp(s),max:Hp(s),range:l3(s),value:a,hasMinEdge:$0(s),hasMaxEdge:M5(s),minBound:I0(t),minOffset:0,maxBound:V5(t),maxOffset:h,centerMinEdge:C,centerMaxEdge:S};return I5(T)},E3=(t,s,a,i,d,g)=>{const h=j5(s,g,a,i,d);return I0(s)-I0(t)+h},lz=(t,s,a,i)=>{const d=Qf(a),g=E3(t,i.getSpectrum(t),d,i.getLeftEdge(t),i.getRightEdge(t),a),h=sa(s.element)/2;Wt(s.element,"left",g-h+"px")},G5=S3(-1),uz=S3(1),dz=R.none,fz=R.none,q5={"top-left":R.none(),top:R.none(),"top-right":R.none(),right:R.some(tz),"bottom-right":R.none(),bottom:R.none(),"bottom-left":R.none(),left:R.some(sz)};var Od=Object.freeze({__proto__:null,setValueFrom:iz,setToMin:W5,setToMax:Z5,findValueOfOffset:w3,getValueFromEvent:Da,findPositionOfValue:E3,setPositionFromValue:lz,onLeft:G5,onRight:uz,onUp:dz,onDown:fz,edgeActions:q5});const L0=(t,s)=>{yt(t,bC(),{value:s})},y_=(t,s,a)=>{const i={min:Lp(s),max:Bg(s),range:h_(s),value:a,step:B0(s),snap:D5(s),snapStart:p_(s),rounded:kd(s),hasMinEdge:v_(s),hasMaxEdge:P5(s),minBound:F0(t),maxBound:Vp(t),screenRange:y3(t)};return h3(i)},C_=(t,s,a)=>{const i=y_(t,s,a);return L0(t,i),i},_3=(t,s)=>{const a=Lp(s);L0(t,a)},mz=(t,s)=>{const a=Bg(s);L0(t,a)},gz=(t,s,a,i)=>{const g=(t>0?g3:m3)(Qf(a),Lp(a),Bg(a),B0(a,i));return L0(s,g),R.some(g)},K5=t=>(s,a,i)=>gz(t,s,a,i).map(Dt),hz=t=>i3(t).map(a=>a.top),pz=(t,s,a,i,d)=>{const h=y3(t),C=i.bind(O=>R.some(U5(O,t))).getOr(0),S=d.bind(O=>R.some(U5(O,t))).getOr(h),T={min:Lp(s),max:Bg(s),range:h_(s),value:a,hasMinEdge:v_(s),hasMaxEdge:P5(s),minBound:F0(t),minOffset:0,maxBound:Vp(t),maxOffset:h,centerMinEdge:C,centerMaxEdge:S};return I5(T)},T3=(t,s,a,i,d,g)=>{const h=pz(s,g,a,i,d);return F0(s)-F0(t)+h},bz=(t,s,a,i)=>{const d=Qf(a),g=T3(t,i.getSpectrum(t),d,i.getTopEdge(t),i.getBottomEdge(t),a),h=ps(s.element)/2;Wt(s.element,"top",g-h+"px")},Y5=R.none,vz=R.none,Ad=K5(-1),w_=K5(1),yz={"top-left":R.none(),top:R.some(u3),"top-right":R.none(),right:R.none(),"bottom-right":R.none(),bottom:R.some(oz),"bottom-left":R.none(),left:R.none()};var Cz=Object.freeze({__proto__:null,setValueFrom:C_,setToMin:_3,setToMax:mz,findValueOfOffset:y_,getValueFromEvent:hz,findPositionOfValue:T3,setPositionFromValue:bz,onLeft:Y5,onRight:vz,onUp:Ad,onDown:w_,edgeActions:yz});const wC=(t,s)=>{yt(t,bC(),{value:s})},xC=(t,s)=>({x:t,y:s}),k3=(t,s,a)=>{const i=w3(t,s,a.left),d=y_(t,s,a.top),g=xC(i,d);return wC(t,g),g},x_=(t,s,a,i,d)=>{const g=t>0?g3:m3,h=s?Qf(i).x:g(Qf(i).x,Fp(i),Hp(i),B0(i,d)),C=s?g(Qf(i).y,Lp(i),Bg(i),B0(i,d)):Qf(i).y;return wC(a,xC(h,C)),R.some(h)},Ig=(t,s)=>(a,i,d)=>x_(t,s,a,i,d).map(Dt),SC=(t,s)=>{const a=Fp(s),i=Lp(s);wC(t,xC(a,i))},X5=(t,s)=>{const a=Hp(s),i=Bg(s);wC(t,xC(a,i))},J5=t=>i3(t),Q5=(t,s,a,i)=>{const d=Qf(a),g=E3(t,i.getSpectrum(t),d.x,i.getLeftEdge(t),i.getRightEdge(t),a),h=T3(t,i.getSpectrum(t),d.y,i.getTopEdge(t),i.getBottomEdge(t),a),C=sa(s.element)/2,S=ps(s.element)/2;Wt(s.element,"left",g-C+"px"),Wt(s.element,"top",h-S+"px")},e$=Ig(-1,!1),wz=Ig(1,!1),xz=Ig(-1,!0),Sz=Ig(1,!0),Ez={"top-left":R.some(ez),top:R.some(d3),"top-right":R.some(f3),right:R.some(ii),"bottom-right":R.some(nz),bottom:R.some(N5),"bottom-left":R.some(B5),left:R.some(rz)};var _z=Object.freeze({__proto__:null,setValueFrom:k3,setToMin:SC,setToMax:X5,getValueFromEvent:J5,setPositionFromValue:Q5,onLeft:e$,onRight:wz,onUp:xz,onDown:Sz,edgeActions:Ez});const t$=[fe("stepSize",1),fe("speedMultiplier",10),fe("onChange",Q),fe("onChoose",Q),fe("onInit",Q),fe("onDragStart",Q),fe("onDragEnd",Q),fe("snapToGrid",!1),fe("rounded",!0),Pn("snapStart"),$n("model",Qo("mode",{x:[fe("minX",0),fe("maxX",100),Bn("value",t=>Et(t.mode.minX)),Oe("getInitialValue"),so("manager",Od)],y:[fe("minY",0),fe("maxY",100),Bn("value",t=>Et(t.mode.minY)),Oe("getInitialValue"),so("manager",Cz)],xy:[fe("minX",0),fe("maxX",100),fe("minY",0),fe("maxY",100),Bn("value",t=>Et({x:t.mode.minX,y:t.mode.minY})),Oe("getInitialValue"),so("manager",_z)]})),Ws("sliderBehaviours",[_t,rt]),Bn("mouseIsDown",()=>Et(!1))],Ml=pr({name:"Slider",configFields:t$,partFields:YV,factory:(t,s,a,i)=>{const d=we=>at(we,t,"thumb"),g=we=>at(we,t,"spectrum"),h=we=>Jn(we,t,"left-edge"),C=we=>Jn(we,t,"right-edge"),S=we=>Jn(we,t,"top-edge"),T=we=>Jn(we,t,"bottom-edge"),O=t.model,P=O.manager,F=(we,Ge)=>{P.setPositionFromValue(we,Ge,t,{getLeftEdge:h,getRightEdge:C,getTopEdge:S,getBottomEdge:T,getSpectrum:g})},V=(we,Ge)=>{O.value.set(Ge);const ut=d(we);F(we,ut)},j=(we,Ge)=>{V(we,Ge);const ut=d(we);return t.onChange(we,ut,Ge),R.some(!0)},Y=we=>{P.setToMin(we,t)},ie=we=>{P.setToMax(we,t)},X=we=>{const Ge=()=>{Jn(we,t,"thumb").each(Te=>{const ft=O.value.get();t.onChoose(we,Te,ft)})},ut=t.mouseIsDown.get();t.mouseIsDown.set(!1),ut&&Ge()},ae=(we,Ge)=>{Ge.stop(),t.mouseIsDown.set(!0),t.onDragStart(we,d(we))},ce=(we,Ge)=>{Ge.stop(),t.onDragEnd(we,d(we)),X(we)},ye=we=>{Jn(we,t,"spectrum").map(_t.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Zs(t.sliderBehaviours,[_t.config({mode:"special",focusIn:ye}),rt.config({store:{mode:"manual",getValue:we=>O.value.get(),setValue:V}}),Ea.config({channels:{[jb()]:{onReceive:X}}})]),events:zn([ke(bC(),(we,Ge)=>{j(we,Ge.event.value)}),go((we,Ge)=>{const ut=O.getInitialValue();O.value.set(ut);const Te=d(we);F(we,Te);const ft=g(we);t.onInit(we,Te,ft,O.value.get())}),ke(_i(),ae),ke(nf(),ce),ke(Wa(),(we,Ge)=>{ye(we),ae(we,Ge)}),ke(j1(),ce)]),apis:{resetToMin:Y,resetToMax:ie,setValue:V,refresh:F},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),S_=mt("rgb-hex-update"),n$=mt("slider-update"),O3=mt("palette-update"),EC=(t,s)=>{const a=Ml.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=Ml.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Ml.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:oe(0)},components:[a,i],sliderBehaviours:He([$t.config({})]),onChange:(d,g,h)=>{Nt(d.element,"aria-valuenow",Math.floor(360-h*3.6)),yt(d,n$,{value:h})}})},o$="form",s$=[Ws("formBehaviours",[rt])],r$=t=>"<alloy.field."+t+">",kz=t=>{const s=(()=>{const g=[];return{field:(C,S)=>(g.push(C),o0(o$,r$(C),S)),record:oe(g)}})(),a=t(s),i=s.record(),d=Ne(i,g=>xr({name:g,pname:r$(g)}));return dp(o$,s$,d,Az,a)},Oz=(t,s)=>t.fold(()=>on.error(s),on.value),Az=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Zs(t.formBehaviours,[rt.config({store:{mode:"manual",getValue:a=>{const i=US(a,t);return Lo(i,(d,g)=>d().bind(h=>{const C=yn.getCurrent(h);return Oz(C,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+ed(h.element)))}).map(rt.getValue))},setValue:(a,i)=>{Bs(i,(d,g)=>{Jn(a,t,g).each(h=>{yn.getCurrent(h).each(C=>{rt.setValue(C,d)})})})}}})]),apis:{getField:(a,i)=>Jn(a,t,i).bind(yn.getCurrent)}}),Up={getField:hb((t,s,a)=>t.getField(s,a)),sketch:kz},a$=mt("valid-input"),A3=mt("invalid-input"),E_=mt("validating-input"),vu="colorcustom.rgb.",R3={isEnabled:Dt,setEnabled:Q,immediatelyShow:Q,immediatelyHide:Q},c$=(t,s,a,i,d,g)=>{const h=(Y,ie)=>{const X=ie.get();Y!==X.isEnabled()&&(X.setEnabled(Y),Y?X.immediatelyShow():X.immediatelyHide())},C=(Y,ie,X)=>Td.config({invalidClass:s("invalid"),notify:{onValidate:ae=>{yt(ae,E_,{type:Y})},onValid:ae=>{h(!1,X),yt(ae,a$,{type:Y,value:rt.getValue(ae)})},onInvalid:ae=>{h(!0,X),yt(ae,A3,{type:Y,value:rt.getValue(ae)})}},validator:{validate:ae=>{const ce=rt.getValue(ae),ye=ie(ce)?on.value(!0):on.error(t("aria.input.invalid"));return Fr.pure(ye)},validateOnLoad:!1}}),S=(Y,ie,X,ae,ce)=>{const ye=Et(R3),we=t(vu+"range"),Ge=Hn.parts.label({dom:{tag:"label"},components:[_o(X)]}),ut=Hn.parts.field({data:ce,factory:fu,inputAttributes:{type:"text","aria-label":ae,...ie==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:He([C(ie,Y,ye),vo.config({}),Wo.config({...d({tooltipText:"",onSetup:Mn=>{ye.set({isEnabled:()=>Wo.isEnabled(Mn),setEnabled:vt=>Wo.setEnabled(Mn,vt),immediatelyShow:()=>Wo.immediateOpenClose(Mn,!0),immediatelyHide:()=>Wo.immediateOpenClose(Mn,!1)}),Wo.setEnabled(Mn,!1)},onShow:(Mn,vt)=>{Wo.setComponents(Mn,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[_o(t(ie==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:Mn=>{Td.isInvalid(Mn)&&Td.run(Mn).get(Q)}}),Te=mt("aria-invalid"),ft=Nn(g("invalid",R.some(Te),"warning")),nt=Nn({dom:{tag:"div",classes:[s("invalid-icon")]},components:[ft.asSpec()]}),ht=[Ge,ut,nt.asSpec()],gn=ie!=="hex"?[Hn.parts["aria-descriptor"]({text:we})]:[],lo=ht.concat(gn);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:lo}},T=(Y,ie)=>{const X=T0(ie);return Up.getField(Y,"hex").each(ae=>{$t.isFocused(ae)||rt.setValue(Y,{hex:X.value})}),X},O=(Y,ie)=>{const X=ie.red,ae=ie.green,ce=ie.blue;rt.setValue(Y,{red:X,green:ae,blue:ce})},P=Nn({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),F=(Y,ie)=>{P.getOpt(Y).each(X=>{Wt(X.element,"background-color","#"+ie.value)})};return Oa({factory:()=>{const Y={red:Et(R.some(255)),green:Et(R.some(255)),blue:Et(R.some(255)),hex:Et(R.some("ffffff"))},ie=(vt,$e)=>{const et=aC($e);O(vt,et),ye(et)},X=vt=>Y[vt].get(),ae=(vt,$e)=>{Y[vt].set($e)},ce=()=>X("red").bind(vt=>X("green").bind($e=>X("blue").map(et=>Pp(vt,$e,et,1)))),ye=vt=>{const $e=vt.red,et=vt.green,Lt=vt.blue;ae("red",R.some($e)),ae("green",R.some(et)),ae("blue",R.some(Lt))},we=(vt,$e)=>{const et=$e.event;et.type!=="hex"?ae(et.type,R.none()):i(vt)},Ge=(vt,$e)=>{a(vt);const et=KE($e);ae("hex",R.some(et.value));const Lt=aC(et);O(vt,Lt),ye(Lt),yt(vt,S_,{hex:et}),F(vt,et)},ut=(vt,$e,et)=>{const Lt=parseInt(et,10);ae($e,R.some(Lt)),ce().each(tn=>{const St=T(vt,tn);yt(vt,S_,{hex:St}),F(vt,St)})},Te=vt=>vt.type==="hex",ft=(vt,$e)=>{const et=$e.event;Te(et)?Ge(vt,et.value):ut(vt,et.type,et.value)},nt=vt=>({label:t(vu+vt+".label"),description:t(vu+vt+".description")}),ht=nt("red"),gn=nt("green"),lo=nt("blue"),Mn=nt("hex");return Uo(Up.sketch(vt=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[vt.field("red",Hn.sketch(S($A,"red",ht.label,ht.description,255))),vt.field("green",Hn.sketch(S($A,"green",gn.label,gn.description,255))),vt.field("blue",Hn.sketch(S($A,"blue",lo.label,lo.description,255))),vt.field("hex",Hn.sketch(S(MA,"hex",Mn.label,Mn.description,"ffffff"))),P.asSpec()],formBehaviours:He([Td.config({invalidClass:s("form-invalid")}),qt("rgb-form-events",[ke(a$,ft),ke(A3,we),ke(E_,we)])])})),{apis:{updateHex:(vt,$e)=>{rt.setValue(vt,{hex:$e.value}),ie(vt,$e),F(vt,$e)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(Y,ie,X)=>{Y.updateHex(ie,X)}},extraApis:{}})},i$=(t,s)=>{const a=Ml.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=Ml.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(T,O)=>{const{width:P,height:F}=T,V=T.getContext("2d");if(V===null)return;V.fillStyle=O,V.fillRect(0,0,P,F);const j=V.createLinearGradient(0,0,P,0);j.addColorStop(0,"rgba(255,255,255,1)"),j.addColorStop(1,"rgba(255,255,255,0)"),V.fillStyle=j,V.fillRect(0,0,P,F);const Y=V.createLinearGradient(0,0,0,F);Y.addColorStop(0,"rgba(0,0,0,0)"),Y.addColorStop(1,"rgba(0,0,0,1)"),V.fillStyle=Y,V.fillRect(0,0,P,F)},g=(T,O)=>{const P=T.components()[0].element.dom,F=$p(O,100,100),V=xB(F);d(P,EB(V))},h=(T,O)=>{const P=iC(aC(O));Ml.setValue(T,{x:P.saturation,y:100-P.value}),Nt(T.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",P.saturation,P.value]))};return Oa({factory:T=>{const O=oe({x:0,y:0}),P=(j,Y,ie)=>{sn(ie)||Nt(j.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(ie.x),Math.floor(100-ie.y)])),yt(j,O3,{value:ie})},F=(j,Y,ie,X)=>{d(ie.element.dom,EB(_B))},V=He([yn.config({find:R.some}),$t.config({})]);return Ml.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:O},rounded:!1,components:[a,i],onChange:P,onInit:F,sliderBehaviours:V})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(T,O,P)=>{g(O,P)},setThumb:(T,O,P)=>{h(O,P)}},extraApis:{}})},D3=(t,s,a,i)=>{const d=h=>{const C=c$(t,s,h.onValidHex,h.onInvalidHex,a,i),S=i$(t,s),T=Te=>(100-Te)/100*360,O=Te=>100-Te/360*100,P={paletteRgba:Et(_B),paletteHue:Et(0)},F=Nn(EC(t,s)),V=Nn(S.sketch({})),j=Nn(C.sketch({})),Y=(Te,ft,nt)=>{V.getOpt(Te).each(ht=>{S.setHue(ht,nt)})},ie=(Te,ft)=>{j.getOpt(Te).each(nt=>{C.updateHex(nt,ft)})},X=(Te,ft,nt)=>{F.getOpt(Te).each(ht=>{Ml.setValue(ht,O(nt))})},ae=(Te,ft)=>{V.getOpt(Te).each(nt=>{S.setThumb(nt,ft)})},ce=(Te,ft)=>{const nt=aC(Te);P.paletteRgba.set(nt),P.paletteHue.set(ft)},ye=(Te,ft,nt,ht)=>{ce(ft,nt),dt(ht,gn=>{gn(Te,ft,nt)})},we=()=>{const Te=[ie];return(ft,nt)=>{const ht=nt.event.value,gn=P.paletteHue.get(),lo=$p(gn,ht.x,100-ht.y),Mn=BB(lo);ye(ft,Mn,gn,Te)}},Ge=()=>{const Te=[Y,ie];return(ft,nt)=>{const ht=T(nt.event.value),gn=P.paletteRgba.get(),lo=iC(gn),Mn=$p(ht,lo.saturation,lo.value),vt=BB(Mn);ye(ft,vt,ht,Te)}},ut=()=>{const Te=[Y,X,ae];return(ft,nt)=>{const ht=nt.event.hex,gn=NB(ht);ye(ft,ht,gn.hue,Te)}};return{uid:h.uid,dom:h.dom,components:[V.asSpec(),F.asSpec(),j.asSpec()],behaviours:He([qt("colour-picker-events",[ke(S_,ut()),ke(O3,we()),ke(n$,Ge())]),yn.config({find:Te=>j.getOpt(Te)}),_t.config({mode:"acyclic"})])}};return Oa({name:"ColourPicker",configFields:[Oe("dom"),fe("onValidHex",Q),fe("onInvalidHex",Q)],factory:d})},ji={self:()=>yn.config({find:R.some}),memento:t=>yn.config({find:t.getOpt}),childAt:t=>yn.config({find:s=>Au(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},Mz=At([fe("preprocess",rn),fe("postprocess",rn)]),Pz=(t,s)=>{const a=ca("RepresentingConfigs.memento processors",Mz,s);return rt.config({store:{mode:"manual",getValue:i=>{const d=t.get(i),g=rt.getValue(d);return a.postprocess(g)},setValue:(i,d)=>{const g=a.preprocess(d),h=t.get(i);rt.setValue(h,g)}}})},Wp=(t,s,a)=>rt.config({store:{mode:"manual",...t.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:a}}),l$=(t,s,a)=>Wp(t,i=>s(i.element),(i,d)=>a(i.element,d)),Nz=t=>l$(t,Ql,xa),_C=t=>rt.config({store:{mode:"memory",initialValue:t}}),u$={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},Bz=t=>s=>J(s)?t.translate(u$[s]):t.translate(s),$z=(t,s,a)=>{const i=T=>"tox-"+T,d=(T,O,P=T,F=T)=>si(P,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+T],attributes:{title:s.translate(F),"aria-live":"polite",...O.fold(()=>({}),V=>({id:V}))}},s.icons),g=D3(Bz(s),i,s.tooltips.getConfig,d),h=T=>{yt(T,_d,{name:"hex-valid",value:!0})},C=T=>{yt(T,_d,{name:"hex-valid",value:!1})},S=Nn(g.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:h,onInvalidHex:C}));return{dom:{tag:"div"},components:[S.asSpec()],behaviours:He([Wp(a,T=>{const O=S.get(T);return yn.getCurrent(O).bind(V=>rt.getValue(V).hex).map(V=>"#"+gv(V,"#")).getOr("")},(T,O)=>{const P=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,F=R.from(P.exec(O)).bind(Y=>us(Y,1)),V=S.get(T);yn.getCurrent(V).fold(()=>{console.log("Can not find form")},Y=>{rt.setValue(Y,{hex:F.getOr("")}),Up.getField(Y,"hex").each(ie=>{un(ie,Ti())})})}),ji.self()])}};var Iz=tinymce.util.Tools.resolve("tinymce.Resource");const TC=t=>Vn(t,"init"),Fz=t=>{const s=In(),a=Nn({dom:{tag:t.tag}}),i=In(),d=!TC(t)&&t.onFocus.isSome()?[$t.config({onFocus:g=>{t.onFocus.each(h=>{h(g.element.dom)})}}),vo.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:He([qt("custom-editor-events",[go(g=>{a.getOpt(g).each(h=>{(TC(t)?t.init(h.element.dom):Iz.load(t.scriptId,t.scriptUrl).then(C=>C(h.element.dom,t.settings))).then(C=>{i.on(S=>{C.setValue(S)}),i.clear(),s.set(C)})})})]),Wp(R.none(),()=>s.get().fold(()=>i.get().getOr(""),g=>g.getValue()),(g,h)=>{s.get().fold(()=>i.set(h),C=>C.setValue(h))}),ji.self()].concat(d)),components:[a.asSpec()]}};var em=tinymce.util.Tools.resolve("tinymce.util.Tools");const __=mt("browse.files.event"),d$=(t,s)=>{const a=em.explode(s.getOption("images_file_types")),i=d=>ma(a,g=>ol(d.name.toLowerCase(),`.${g.toLowerCase()}`));return yo(ic(t),i)},Lz=(t,s,a)=>{const i=(F,V)=>{V.stop()},d=F=>(V,j)=>{dt(F,Y=>{Y(V,j)})},g=(F,V)=>{var j;if(!Bt.isDisabled(F)){const Y=V.event.raw;yt(F,__,{files:(j=Y.dataTransfer)===null||j===void 0?void 0:j.files})}},h=(F,V)=>{const j=V.event.raw.target;yt(F,__,{files:j.files})},C=(F,V)=>{V&&(rt.setValue(F,d$(V,s)),yt(F,ec,{name:t.name}))},S=Nn({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:He([qt("input-file-events",[lf(sf()),lf(q1())])])}),T=t.label.map(F=>Pg(F,s)),O=Hn.parts.field({factory:Ms,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[_o(s.translate("Browse for an image")),S.asSpec()],action:F=>{S.get(F).element.dom.click()},buttonBehaviours:He([ji.self(),_C(a.getOr([])),vo.config({}),ai.button(()=>s.checkUiComponentContext(t.context).shouldDisable),as(()=>s.checkUiComponentContext(t.context))])}),P={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:He([Bt.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable}),as(()=>s.checkUiComponentContext(t.context)),nn.config({toggleClass:"dragenter",toggleOnExecute:!1}),qt("dropzone-events",[ke("dragenter",d([i,nn.toggle])),ke("dragleave",d([i,nn.toggle])),ke("dragover",i),ke("drop",d([i,g])),ke(gl(),h)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[_o(s.translate("Drop an image here"))]},O]}]};return M0(T,P,["tox-form__group--stretched"],[qt("handle-files",[ke(__,(F,V)=>{Hn.getField(F).each(j=>{C(j,V.event.files)})})])])},Hz=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Ne(t.items,s.interpreter)}),P3=(t,s)=>{let a=null,i=null;return{cancel:()=>{pt(a)||(clearTimeout(a),a=null,i=null)},throttle:(...h)=>{i=h,pt(a)&&(a=setTimeout(()=>{const C=i;a=null,i=null,t.apply(null,C)},s))}}},Vz=(t,s)=>{let a=null;return{cancel:()=>{pt(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{pt(a)&&(a=setTimeout(()=>{a=null,t.apply(null,g)},s))}}},T_=(t,s)=>{let a=null;const i=()=>{pt(a)||(clearTimeout(a),a=null)};return{cancel:i,throttle:(...g)=>{i(),a=setTimeout(()=>{a=null,t.apply(null,g)},s)}}},N3=mt("alloy-fake-before-tabstop"),B3=mt("alloy-fake-after-tabstop"),f$=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:He([$t.config({ignore:!0}),vo.config({})])}),$3=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[f$([N3]),s,f$([B3])],behaviours:He([ji.childAt(1)])}),I3=(t,s)=>{yt(t,pc(),{raw:{which:9,shiftKey:s}})},zz=(t,s)=>{const a=s.element;qr(a,N3)?I3(t,!0):qr(a,B3)&&I3(t,!1)},kC=t=>mC(t,["."+N3,"."+B3].join(","),jn),k_=mt("update-dialog"),m$=mt("update-title"),F3=mt("update-body"),g$=mt("update-footer"),L3=mt("body-send-message"),O_=mt("dialog-focus-shifted"),H3=kn().browser,OC=H3.isSafari(),Uz=H3.isFirefox(),h$=OC||Uz,Wz=H3.isChromium(),Zz=({scrollTop:t,scrollHeight:s,clientHeight:a})=>Math.ceil(t)+a>=s,p$=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),jz=(t,s)=>{const a=t.body;return R.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!Wz&&!OC||Vt(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},A_=(t,s,a)=>{const i=t.dom;R.from(i.contentDocument).fold(a,d=>{let g=0;const h=jz(d,s).map(S=>(g=S.scrollTop,S)).forall(Zz),C=()=>{const S=i.contentWindow;Vt(S)&&(h?p$(S,"bottom"):!h&&h$&&g!==0&&p$(S,g))};OC&&i.addEventListener("load",C,{once:!0}),d.open(),d.write(s),d.close(),OC||C()})},Gz=It(h$,OC?500:200).map(t=>P3(A_,t)),qz=(t,s)=>{const a=Et(t.getOr(""));return{getValue:i=>a.get(),setValue:(i,d)=>{if(a.get()!==d){const g=i.element,h=()=>Nt(g,"srcdoc",d);s?Gz.fold(oe(A_),C=>C.throttle)(g,d,h):h()}a.set(d)}}},AC=(t,s,a)=>{const i="tox-dialog__iframe",d=t.transparent?[]:[`${i}--opaque`],g=t.border?["tox-navobj-bordered"]:[],h={...t.label.map(P=>({title:P})).getOr({}),...a.map(P=>({srcdoc:P})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},C=qz(a,t.streamContent),S=t.label.map(P=>Pg(P,s)),T=P=>$3(R.from(g),{uid:P.uid,dom:{tag:"iframe",attributes:h,classes:[i,...d]},behaviours:He([vo.config({}),$t.config({}),Wp(a,C.getValue,C.setValue),Ea.config({channels:{[O_]:{onReceive:(F,V)=>{V.newFocus.each(j=>{pi(F.element).each(Y=>{(qn(F.element,j)?rs:Un)(Y,"tox-navobj-bordered-focus")})})}}}})])}),O=Hn.parts.field({factory:{sketch:T}});return M0(S,O,["tox-form__group--stretched"],[])},V3=t=>new Promise((s,a)=>{const i=()=>{g(),s(t)},d=[Kr(t,"load",i),Kr(t,"error",()=>{g(),a("Unable to load data from image: "+t.dom.src)})],g=()=>dt(d,h=>h.unbind());t.dom.complete&&i()}),Kz=(t,s,a,i,d)=>{const g=a*d,h=i*d,C=Math.max(0,t/2-g/2),S=Math.max(0,s/2-h/2);return{left:C.toString()+"px",top:S.toString()+"px",width:g.toString()+"px",height:h.toString()+"px"}},Yz=(t,s,a)=>{const i=sa(t),d=ps(t);return Math.min(i/s,d/a,1)},z3=(t,s)=>{const a=Et(s.getOr({url:""})),i=Nn({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(S=>({src:S.url})).getOr({})}}),d=Nn({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),g=(S,T)=>{const O={url:T.url};T.zoom.each(F=>O.zoom=F),T.cachedWidth.each(F=>O.cachedWidth=F),T.cachedHeight.each(F=>O.cachedHeight=F),a.set(O);const P=()=>{const{cachedWidth:F,cachedHeight:V,zoom:j}=O;if(!bn(F)&&!bn(V)){if(bn(j)){const ie=Yz(S.element,F,V);O.zoom=ie}const Y=Kz(sa(S.element),ps(S.element),F,V,O.zoom);d.getOpt(S).each(ie=>{Zl(ie.element,Y)})}};i.getOpt(S).each(F=>{const V=F.element;T.url!==Jt(V,"src")&&(Nt(V,"src",T.url),Un(S.element,"tox-imagepreview__loaded")),P(),V3(V).then(j=>{S.getSystem().isConnected()&&(rs(S.element,"tox-imagepreview__loaded"),O.cachedWidth=j.dom.naturalWidth,O.cachedHeight=j.dom.naturalHeight,P())})})},h={};t.height.each(S=>h.height=S);const C=s.map(S=>({url:S.url,zoom:R.from(S.zoom),cachedWidth:R.from(S.cachedWidth),cachedHeight:R.from(S.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:h,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:He([ji.self(),Wp(C,()=>a.get(),g)])}},Xz=(t,s,a)=>{const i="tox-label",d=t.align==="center"?[`${i}--center`]:[],g=t.align==="end"?[`${i}--end`]:[],h=Nn({dom:{tag:"label",classes:[i,...d,...g]},components:[_o(s.providers.translate(t.label))]}),C=Ne(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[h.asSpec(),...C],behaviours:He([ji.self(),zt.config({}),Nz(R.none()),_t.config({mode:"acyclic"}),qt("label",[go(S=>{t.for.each(T=>{a(T).each(O=>{h.getOpt(S).each(P=>{var F;const V=(F=Jt(O.element,"id"))!==null&&F!==void 0?F:mt("form-field");Nt(O.element,"id",V),Nt(P.element,"for",V)})})})})])])}},R_=mt("toolbar.button.execute"),b$=t=>Yl((s,a)=>{GE(t,s)(i=>{yt(s,R_,{buttonApi:i}),t.onAction(i)})}),Zp=mt("common-button-display-events"),v$={[nr()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[ia()]:["toolbar-button-events",Zp],[Za()]:["toolbar-button-events","dropdown-events","tooltipping"],[Wa()]:["focusing","alloy.base.behaviour",Zp]},D_=t=>Wt(t.element,"width",Dr(t.element,"width")),U3=(t,s,a)=>si(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),W3=(t,s)=>U3(t,s,[]),tm=(t,s)=>U3(t,s,[zt.config({})]),Z3=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[_o(a.translate(t))],behaviours:He([zt.config({})])}),Gi=mt("update-menu-text"),Fg=mt("update-menu-icon"),M_=(t,s,a,i)=>{const d=Et(Q),g=t.text.map(Y=>Nn(Z3(Y,s,a.providers))),h=t.icon.map(Y=>Nn(tm(Y,a.providers.icons))),C=(Y,ie)=>{const X=rt.getValue(Y);return $t.focus(X),yt(X,"keydown",{raw:ie.event.raw}),ci.close(X),R.some(!0)},S=t.role.fold(()=>({}),Y=>({role:Y})),T=R.from(t.listRole).map(Y=>({listRole:Y})).getOr({}),O=t.ariaLabel.fold(()=>({}),Y=>({"aria-label":a.providers.translate(Y)})),P=si("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),F=mt("common-button-display-events"),V="dropdown-events";return Nn(ci.sketch({...t.uid?{uid:t.uid}:{},...S,...T,dom:{tag:"button",classes:[s,`${s}--select`].concat(Ne(t.classes,Y=>`${s}--${Y}`)),attributes:{...O,...Vt(i)?{"data-mce-name":i}:{}}},components:Mg([h.map(Y=>Y.asSpec()),g.map(Y=>Y.asSpec()),R.some(P)]),matchWidth:!0,useMinWidth:!0,onOpen:(Y,ie,X)=>{t.searchable&&c_(X)},dropdownBehaviours:He([...t.dropdownBehaviours,ai.button(()=>t.disabled||a.providers.checkUiComponentContext(t.context).shouldDisable),as(()=>a.providers.checkUiComponentContext(t.context)),N0.config({}),zt.config({}),...t.tooltip.map(Y=>Wo.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(Y)}))).toArray(),qt(V,[Rg(t,d),Dg(t,d)]),qt(F,[go((Y,ie)=>{t.listRole!=="listbox"&&D_(Y)})]),qt("update-dropdown-width-variable",[ke(af(),(Y,ie)=>ci.close(Y))]),qt("menubutton-update-display-text",[ke(Gi,(Y,ie)=>{g.bind(X=>X.getOpt(Y)).each(X=>{zt.set(X,[_o(a.providers.translate(ie.event.text))])})}),ke(Fg,(Y,ie)=>{h.bind(X=>X.getOpt(Y)).each(X=>{zt.set(X,[tm(ie.event.icon,a.providers.icons)])})})])]),eventOrder:Uo(v$,{[Wa()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[ia()]:["toolbar-button-events",Wo.name(),V,F]}),sandboxBehaviours:He([_t.config({mode:"special",onLeft:C,onRight:C}),qt("dropdown-sandbox-events",[ke(cA,(Y,ie)=>{dV(Y),ie.stop()}),ke(jN,(Y,ie)=>{fV(Y,ie),ie.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...q2(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:fC,onCollapseMenu:(Y,ie,X)=>{qe.getHighlighted(X).each(ae=>{fC(Y,X,ae)})},onDehighlightItem:hV}}},getAnchorOverrides:()=>({maxHeightFunction:(Y,ie)=>{eS()(Y,ie-10)}}),fetch:Y=>Fr.nu(An(t.fetch,Y))})).asSpec()},y$=t=>J(t),C$=t=>t.type==="separator",Jz=t=>Vn(t,"getSubmenuItems"),Qz={type:"separator"},w$=(t,s)=>{const a=So(t,(i,d)=>y$(d)?d===""?i:d==="|"?i.length>0&&!C$(i[i.length-1])?i.concat([Qz]):i:Vn(s,d.toLowerCase())?i.concat([s[d.toLowerCase()]]):i:i.concat([d]),[]);return a.length>0&&C$(a[a.length-1])&&a.pop(),a},e9=(t,s)=>{const a=t.getSubmenuItems(),i=S$(a,s),d=Uo(i.menus,{[t.value]:i.items}),g=Uo(i.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},x$=t=>{const s=it(t,"value").getOrThunk(()=>mt("generated-menu-item"));return Uo({value:s},t)},S$=(t,s)=>{const a=w$(J(t)?t.split(" "):t,s);return _s(a,(i,d)=>{if(Jz(d)){const g=x$(d),h=e9(g,s);return{menus:Uo(i.menus,h.menus),items:[h.item,...i.items],expansions:Uo(i.expansions,h.expansions)}}else return{...i,items:[d,...i.items]}},{menus:{},expansions:{},items:[]})},t9=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),j3=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),H0=(t,s,a,i)=>{const d=mt("primary-menu"),g=S$(t,a.shared.providers.menuItems());if(g.items.length===0)return R.none();const h=t9(i),C=yV(d,g.items,s,a,i.isHorizontalMenu,h),S=j3(i),T=Lo(g.menus,(P,F)=>yV(F,P,s,a,!1,S)),O=Uo(T,ef(d,C));return R.from(xd.tieredData(d,O,g.expansions))},P_=t=>!Vn(t,"items"),E$="data-value",N_=(t,s,a,i,d)=>Ne(a,g=>P_(g)?{type:"togglemenuitem",...d?{}:{role:"option"},text:g.text,value:g.value,active:g.value===i,onAction:()=>{rt.setValue(t,g.value),yt(t,ec,{name:s}),$t.focus(t)}}:{type:"nestedmenuitem",text:g.text,getSubmenuItems:()=>N_(t,s,g.items,i,d)}),G3=(t,s)=>ir(t,a=>P_(a)?It(a.value===s,a):G3(a.items,s)),_$=(t,s,a)=>{const i=ma(t.items,T=>!P_(T)),d=s.shared.providers,g=a.bind(T=>G3(t.items,T)).orThunk(()=>ga(t.items).filter(P_)),h=t.label.map(T=>Pg(T,d)),C=Hn.parts.field({dom:{},factory:{sketch:T=>M_({context:t.context,uid:T.uid,text:g.map(O=>O.text),icon:R.none(),tooltip:R.none(),role:It(!i,"combobox"),...i?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(O,P)=>{const F=N_(O,t.name,t.items,rt.getValue(O),i);P(H0(F,Ol.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:R.none()}))},onSetup:oe(Q),getApi:oe({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[vo.config({}),Wp(g.map(O=>O.value),O=>Jt(O.element,E$),(O,P)=>{G3(t.items,P).each(F=>{Nt(O.element,E$,F.value),yt(O,Gi,{text:F.text})})})]},"tox-listbox",s.shared)}}),S={dom:{tag:"div",classes:["tox-listboxfield"]},components:[C]};return Hn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Yt([h.toArray(),[S]]),fieldBehaviours:He([Bt.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:T=>{Hn.getField(T).each(Bt.disable)},onEnabled:T=>{Hn.getField(T).each(Bt.enable)}})])})},n9=(t,s)=>({dom:{tag:"div",classes:t.classes},components:Ne(t.items,s.shared.interpreter)}),T$=(t,s)=>{const a=Ne(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),i=t.data.map(d=>ef("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:Zs(t.selectBehaviours,[$t.config({}),rt.config({store:{mode:"manual",getValue:d=>ei(d.element),setValue:(d,g)=>{const h=ga(t.options);Zt(t.options,S=>S.value===g).isSome()?Ef(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&h.each(S=>Ef(d.element,S.value))},...i}})])}},o9=Oa({name:"HtmlSelect",configFields:[Oe("options"),Ws("selectBehaviours",[$t,rt]),fe("selectClasses",[]),fe("selectAttributes",{}),Pn("data")],factory:T$}),s9=(t,s,a)=>{const i=Ne(t.items,S=>({text:s.translate(S.text),value:S.value})),d=t.label.map(S=>Pg(S,s)),g=Hn.parts.field({dom:{},...a.map(S=>({data:S})).getOr({}),selectAttributes:{size:t.size},options:i,factory:o9,selectBehaviours:He([Bt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),vo.config({}),qt("selectbox-change",[ke(gl(),(S,T)=>{yt(S,ec,{name:t.name})})])])}),h=t.size>1?R.none():R.some(si("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),C={dom:{tag:"div",classes:["tox-selectfield"]},components:Yt([[g],h.toArray()])};return Hn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Yt([d.toArray(),[C]]),fieldBehaviours:He([Bt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:S=>{Hn.getField(S).each(Bt.disable)},onEnabled:S=>{Hn.getField(S).each(Bt.enable)}}),as(()=>s.checkUiComponentContext(t.context))])})},r9=oe([fe("field1Name","field1"),fe("field2Name","field2"),vf("onLockedChange"),eu(["lockClass"]),fe("locked",!1),Ec.field("coupledFieldBehaviours",[yn,rt])]),a9=(t,s,a)=>Jn(t,s,a).bind(yn.getCurrent),k$=(t,s)=>xr({factory:Hn,name:t,overrides:a=>({fieldBehaviours:He([qt("coupled-input-behaviour",[ke(Ti(),i=>{a9(i,a,s).each(d=>{Jn(i,a,"lock").each(g=>{nn.isOn(g)&&a.onLockedChange(i,d,g)})})})])])})}),O$=oe([k$("field1","field2"),k$("field2","field1"),xr({factory:Ms,schema:[Oe("dom")],name:"lock",overrides:t=>({buttonBehaviours:He([nn.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),c9=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Ec.augment(t.coupledFieldBehaviours,[yn.config({find:R.some}),rt.config({store:{mode:"manual",getValue:d=>{const g=hg(d,t,["field1","field2"]);return{[t.field1Name]:rt.getValue(g.field1()),[t.field2Name]:rt.getValue(g.field2())}},setValue:(d,g)=>{const h=hg(d,t,["field1","field2"]);lc(g,t.field1Name)&&rt.setValue(h.field1(),g[t.field1Name]),lc(g,t.field2Name)&&rt.setValue(h.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>Jn(d,t,"field1"),getField2:d=>Jn(d,t,"field2"),getLock:d=>Jn(d,t,"lock")}}),li=pr({name:"FormCoupledInputs",configFields:r9(),partFields:O$(),factory:c9,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),A$=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let i=t.value.toFixed(a(t.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+t.unit},q3=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const i=parseFloat(a[1]),d=a[2];return on.value({value:i,unit:d})}else return on.error(t)},R$=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=d=>Vn(a,d);return t.unit===s?R.some(t.value):i(t.unit)&&i(s)?a[t.unit]===a[s]?R.some(t.value):R.some(t.value/a[t.unit]*a[s]):R.none()},K3=t=>R.none(),D$=(t,s)=>a=>R$(a,s).map(i=>({value:i*t,unit:s})),i9=(t,s)=>{const a=q3(t).toOptional(),i=q3(s).toOptional();return ku(a,i,(d,g)=>R$(d,g.unit).map(h=>g.value/h).map(h=>D$(h,g.unit)).getOr(K3)).getOr(K3)},l9=(t,s)=>{let a=K3;const i=mt("ratio-event"),d=V=>si(V,{tag:"span",classes:["tox-icon","tox-lock-icon__"+V]},s.icons),g=t.label.getOr("Constrain proportions"),h=s.translate(g),C=li.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":h,"data-mce-name":g}},components:[d("lock"),d("unlock")],buttonBehaviours:He([Bt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),as(()=>s.checkUiComponentContext(t.context)),vo.config({}),Wo.config(s.tooltips.getConfig({tooltipText:h}))])}),S=V=>({dom:{tag:"div",classes:["tox-form__group"]},components:V}),T=V=>Hn.parts.field({factory:fu,inputClasses:["tox-textfield"],inputBehaviours:He([Bt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),as(()=>s.checkUiComponentContext(t.context)),vo.config({}),qt("size-input-events",[ke(qc(),(j,Y)=>{yt(j,i,{isField1:V})}),ke(gl(),(j,Y)=>{yt(j,ec,{name:t.name})})])]),selectOnFocus:!1}),O=V=>({dom:{tag:"label",classes:["tox-label"]},components:[_o(s.translate(V))]}),P=li.parts.field1(S([Hn.parts.label(O("Width")),T(!0)])),F=li.parts.field2(S([Hn.parts.label(O("Height")),T(!1)]));return li.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[P,F,S([O(m4),C])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(V,j,Y)=>{q3(rt.getValue(V)).each(ie=>{a(ie).each(X=>{rt.setValue(j,A$(X))})})},coupledFieldBehaviours:He([Bt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:V=>{li.getField1(V).bind(Hn.getField).each(Bt.disable),li.getField2(V).bind(Hn.getField).each(Bt.disable),li.getLock(V).each(Bt.disable)},onEnabled:V=>{li.getField1(V).bind(Hn.getField).each(Bt.enable),li.getField2(V).bind(Hn.getField).each(Bt.enable),li.getLock(V).each(Bt.enable)}}),as(()=>s.checkUiComponentContext("mode:design")),qt("size-input-events2",[ke(i,(V,j)=>{const Y=j.event.isField1,ie=Y?li.getField1(V):li.getField2(V),X=Y?li.getField2(V):li.getField1(V),ae=ie.map(rt.getValue).getOr(""),ce=X.map(rt.getValue).getOr("");a=i9(ae,ce)})])])})},u9=(t,s,a)=>{const i=Ml.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[_o(s.translate(t.label))]}),d=Ml.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=Ml.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Ml.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:oe(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[i,d,g],sliderBehaviours:He([ji.self(),$t.config({})]),onChoose:(h,C,S)=>{yt(h,ec,{name:t.name,value:S})},onChange:(h,C,S)=>{yt(h,ec,{name:t.name,value:S})}})},M$=(t,s)=>{const a=C=>({dom:{tag:"th",innerHtml:s.translate(C)}}),i=C=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Ne(C,a)}]}),d=C=>({dom:{tag:"td",innerHtml:s.translate(C)}}),g=C=>({dom:{tag:"tr"},components:Ne(C,d)}),h=C=>({dom:{tag:"tbody"},components:Ne(C,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(t.header),h(t.cells)],behaviours:He([vo.config({}),$t.config({})])}},Y3=(t,s)=>{const a=t.label.map(V=>Pg(V,s)),i=[Bt.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable}),as(()=>s.checkUiComponentContext(t.context)),_t.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:V=>(un(V,P0),R.some(!0))}),qt("textfield-change",[ke(Ti(),(V,j)=>{yt(V,ec,{name:t.name})}),ke(wh(),(V,j)=>{yt(V,ec,{name:t.name})})]),vo.config({})],d=t.validation.map(V=>Td.config({getRoot:j=>pi(j.element),invalidClass:"tox-invalid",validator:{validate:j=>{const Y=rt.getValue(j),ie=V.validator(Y);return Fr.pure(ie===!0?on.value(Y):on.error(ie))},validateOnLoad:V.validateOnLoad}})).toArray(),g=t.placeholder.fold(oe({}),V=>({placeholder:s.translate(V)})),h=t.inputMode.fold(oe({}),V=>({inputmode:V})),C={...g,...h,"data-mce-name":t.name},S=Hn.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(V=>({data:V})).getOr({}),inputAttributes:C,inputClasses:[t.classname],inputBehaviours:He(Yt([i,d])),selectOnFocus:!1,factory:fu}),T=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[S]}:S,P=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),F=[Bt.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:V=>{Hn.getField(V).each(Bt.disable)},onEnabled:V=>{Hn.getField(V).each(Bt.enable)}}),as(()=>s.checkUiComponentContext(t.context))];return M0(a,T,P,F)},P$=(t,s,a)=>Y3({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:R.none(),maximized:t.maximized,data:a,context:t.context},s),B_=(t,s,a)=>Y3({name:t.name,multiline:!0,label:t.label,inputMode:R.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:R.none(),maximized:t.maximized,data:a,context:t.context},s),RC=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),nm=t=>t.dimension.property,jp=(t,s)=>t.dimension.getDimension(s),$_=(t,s)=>{const a=RC(t,s);Ri(a,[s.shrinkingClass,s.growingClass])},I_=(t,s)=>{Un(t.element,s.openClass),rs(t.element,s.closedClass),Wt(t.element,nm(s),"0px"),zd(t.element)},X3=(t,s)=>{Un(t.element,s.closedClass),rs(t.element,s.openClass),Qt(t.element,nm(s))},N$=(t,s,a,i)=>{a.setCollapsed(),Wt(t.element,nm(s),jp(s,t.element)),$_(t,s),I_(t,s),s.onStartShrink(t),s.onShrunk(t)},d9=(t,s,a,i)=>{const d=i.getOrThunk(()=>jp(s,t.element));a.setCollapsed(),Wt(t.element,nm(s),d),zd(t.element);const g=RC(t,s);Un(g,s.growingClass),rs(g,s.shrinkingClass),I_(t,s),s.onStartShrink(t)},J3=(t,s,a)=>{const i=jp(s,t.element);(i==="0px"?N$:d9)(t,s,a,R.some(i))},Q3=(t,s,a)=>{const i=RC(t,s),d=qr(i,s.shrinkingClass),g=jp(s,t.element);X3(t,s);const h=jp(s,t.element);(d?()=>{Wt(t.element,nm(s),g),zd(t.element)}:()=>{I_(t,s)})(),Un(i,s.shrinkingClass),rs(i,s.growingClass),X3(t,s),Wt(t.element,nm(s),h),a.setExpanded(),s.onStartGrow(t)},f9=(t,s,a)=>{if(a.isExpanded()){Qt(t.element,nm(s));const i=jp(s,t.element);Wt(t.element,nm(s),i)}},m9=(t,s,a)=>{a.isExpanded()||Q3(t,s,a)},B$=(t,s,a)=>{a.isExpanded()&&J3(t,s,a)},g9=(t,s,a)=>{a.isExpanded()&&N$(t,s,a)},h9=(t,s,a)=>a.isExpanded(),Ut=(t,s,a)=>a.isCollapsed(),V0=(t,s,a)=>{const i=RC(t,s);return qr(i,s.growingClass)===!0},eR=(t,s,a)=>{const i=RC(t,s);return qr(i,s.shrinkingClass)===!0};var $$=Object.freeze({__proto__:null,refresh:f9,grow:m9,shrink:B$,immediateShrink:g9,hasGrown:h9,hasShrunk:Ut,isGrowing:V0,isShrinking:eR,isTransitioning:(t,s,a)=>V0(t,s)||eR(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?J3:Q3)(t,s,a)},disableTransitions:$_,immediateGrow:(t,s,a)=>{a.isExpanded()||(X3(t,s),Wt(t.element,nm(s),jp(s,t.element)),$_(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),y9=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const i=s.expanded;return Gr(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:ef(s.dimension.property,"0px")})},events:(t,s)=>zn([Ku(Ch(),(a,i)=>{i.event.raw.propertyName===t.dimension.property&&($_(a,t),s.isExpanded()&&Qt(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),I$=[Oe("closedClass"),Oe("openClass"),Oe("shrinkingClass"),Oe("growingClass"),Pn("getAnimationRoot"),xn("onShrunk"),xn("onStartShrink"),xn("onGrown"),xn("onStartGrow"),fe("expanded",!1),$n("dimension",Qo("property",{width:[so("property","width"),so("getDimension",t=>sa(t)+"px")],height:[so("property","height"),so("getDimension",t=>ps(t)+"px")]}))],C9=Object.freeze({__proto__:null,init:t=>{const s=Et(t.expanded),a=()=>"expanded: "+s.get();return Pr({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:An(s.set,!1),setExpanded:An(s.set,!0),readState:a})}});const tc=zs({fields:I$,name:"sliding",active:y9,apis:$$,state:C9}),tR=t=>({isEnabled:()=>!Bt.isDisabled(t),setEnabled:s=>Bt.set(t,!s),setActive:s=>{const a=t.element;s?(rs(a,"tox-tbtn--enabled"),Nt(a,"aria-pressed",!0)):(Un(a,"tox-tbtn--enabled"),Po(a,"aria-pressed"))},isActive:()=>qr(t.element,"tox-tbtn--enabled"),setText:s=>{yt(t,Gi,{text:s})},setIcon:s=>yt(t,Fg,{icon:s})}),Gp=(t,s,a,i,d=!0,g)=>M_({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:i,fetch:(h,C)=>{const S={pattern:t.search.isSome()?pV(h):""};t.fetch(T=>{C(H0(T,Ol.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},S,tR(h))},onSetup:t.onSetup,getApi:tR,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[vo.config({})]:[]],context:t.context},s,a.shared,g),F$=(t,s,a)=>{const i=g=>h=>{const C=!h.isActive();h.setActive(C),g.storage.set(C),a.shared.getSink().each(S=>{s().getOpt(S).each(T=>{wc(T.element),yt(T,_d,{name:g.name,value:g.storage.get()})})})},d=g=>h=>{h.setActive(g.storage.get())};return g=>{g(Ne(t,h=>{const C=h.text.fold(()=>({}),S=>({text:S}));return{type:h.type,active:!1,...C,context:h.context,onAction:i(h),onSetup:d(h)}}))}},L$=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[_o(t)]}),H$=(t,s,a)=>{t.customStateIcon.each(i=>s.push(z$(i,a.shared.providers.icons,t.customStateIconTooltip.fold(()=>[],d=>[Wo.config(a.shared.providers.tooltips.getConfig({tooltipText:d}))]),["tox-icon-custom-state"],t.customStateIconTooltip.fold(()=>({}),d=>({title:d})))))},V$=mt("leaf-label-event-id"),nR=({leaf:t,onLeafAction:s,visible:a,treeId:i,selectedId:d,backstage:g})=>{const h=t.menu.map(S=>Gp(S,"tox-mbtn",g,R.none(),a)),C=[L$(t.title)];return H$(t,C,g),h.each(S=>C.push(S)),Ms.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:C,role:"treeitem",action:S=>{s(t.id),S.getSystem().broadcastOn([`update-active-item-${i}`],{value:t.id})},eventOrder:{[pc()]:[V$,"keying"]},buttonBehaviours:He([...a?[vo.config({})]:[],nn.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Ea.config({channels:{[`update-active-item-${i}`]:{onReceive:(S,T)=>{(T.value===t.id?nn.on:nn.off)(S)}}}}),qt(V$,[go((S,T)=>{d.each(O=>{(O===t.id?nn.on:nn.off)(S)})}),ke(pc(),(S,T)=>{const O=T.event.raw.code==="ArrowLeft",P=T.event.raw.code==="ArrowRight";O?(bs(S.element,".tox-tree--directory").each(F=>{S.getSystem().getByDom(F).each(V=>{Cc(F,".tox-tree--directory__label").each(j=>{V.getSystem().getByDom(j).each($t.focus)})})}),T.stop()):P&&T.stop()})])])})},z$=(t,s,a,i,d)=>si(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(i||[]),behaviours:a,attributes:d},s),w9=(t,s)=>z$(t,s,[]),U$=mt("directory-label-event-id"),x9=({directory:t,visible:s,noChildren:a,backstage:i})=>{const d=t.menu.map(C=>Gp(C,"tox-mbtn",i,R.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[w9("chevron-right",i.shared.providers.icons)]},L$(t.title)];H$(t,g,i),d.each(C=>{g.push(C)});const h=C=>{bs(C.element,".tox-tree--directory").each(S=>{C.getSystem().getByDom(S).each(T=>{const O=!nn.isOn(T);nn.toggle(T),yt(C,"expand-tree-node",{expanded:O,node:t.id})})})};return Ms.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:h,eventOrder:{[pc()]:[U$,"keying"]},buttonBehaviours:He([...s?[vo.config({})]:[],qt(U$,[ke(pc(),(C,S)=>{const T=S.event.raw.code==="ArrowRight",O=S.event.raw.code==="ArrowLeft";T&&a&&S.stop(),(T||O)&&bs(C.element,".tox-tree--directory").each(P=>{C.getSystem().getByDom(P).each(F=>{!nn.isOn(F)&&T||nn.isOn(F)&&O?(h(C),S.stop()):O&&!nn.isOn(F)&&(bs(F.element,".tox-tree--directory").each(V=>{Cc(V,".tox-tree--directory__label").each(j=>{F.getSystem().getByDom(j).each($t.focus)})}),S.stop())})})})])])})},S9=({children:t,onLeafAction:s,visible:a,treeId:i,expandedIds:d,selectedId:g,backstage:h})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(C=>C.type==="leaf"?nR({leaf:C,selectedId:g,onLeafAction:s,visible:a,treeId:i,backstage:h}):L_({directory:C,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:h})),behaviours:He([tc.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),zt.config({})])}),E9=mt("directory-event-id"),L_=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:d,expandedIds:g,selectedId:h})=>{const{children:C}=t,S=Et(g),T=P=>C.map(F=>F.type==="leaf"?nR({leaf:F,selectedId:h,onLeafAction:s,visible:P,treeId:i,backstage:d}):L_({directory:F,expandedIds:S.get(),selectedId:h,onLeafAction:s,labelTabstopping:P,treeId:i,backstage:d})),O=g.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[x9({directory:t,visible:a,noChildren:t.children.length===0,backstage:d}),S9({children:C,expandedIds:g,selectedId:h,onLeafAction:s,visible:O,treeId:i,backstage:d})],behaviours:He([qt(E9,[go((P,F)=>{nn.set(P,O)}),ke("expand-tree-node",(P,F)=>{const{expanded:V,node:j}=F.event;S.set(V?[...S.get(),j]:S.get().filter(Y=>Y!==j))})]),nn.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(P,F)=>{const V=P.components()[1],j=T(F);F?tc.grow(V):tc.shrink(V),zt.set(V,j)}})])}},_9=mt("tree-event-id"),T9=(t,s)=>{const a=t.onLeafAction.getOr(Q),i=t.onToggleExpand.getOr(Q),d=t.defaultExpandedIds,g=Et(d),h=Et(t.defaultSelectedId),C=mt("tree-id"),S=(T,O)=>t.items.map(P=>P.type==="leaf"?nR({leaf:P,selectedId:T,onLeafAction:a,visible:!0,treeId:C,backstage:s}):L_({directory:P,selectedId:T,onLeafAction:a,expandedIds:O,labelTabstopping:!0,treeId:C,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:S(h.get(),g.get()),behaviours:He([_t.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),qt(_9,[ke("expand-tree-node",(T,O)=>{const{expanded:P,node:F}=O.event;g.set(P?[...g.get(),F]:g.get().filter(V=>V!==F)),i(g.get(),{expanded:P,node:F})})]),Ea.config({channels:{[`update-active-item-${C}`]:{onReceive:(T,O)=>{h.set(R.some(O.value)),zt.set(T,S(R.some(O.value),g.get()))}}}}),zt.config({})])}};var k9=Object.freeze({__proto__:null,events:(t,s)=>{const i=t.stream.streams.setup(t,s);return zn([ke(t.event,i),hl(()=>s.cancel())].concat(t.cancelEvent.map(d=>[ke(d,()=>s.cancel())]).getOr([])))}});const W$=t=>{const s=Et(null);return Pr({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var O9=Object.freeze({__proto__:null,throttle:W$,init:t=>t.stream.streams.state(t)});const A9=(t,s)=>{const a=t.stream,i=T_(t.onStream,a.delay);return s.setTimer(i),(d,g)=>{i.throttle(d,g),a.stopEvent&&g.stop()}};var R9=[$n("stream",Qo("mode",{throttle:[Oe("delay"),fe("stopEvent",!0),so("streams",{setup:A9,state:W$})]})),fe("event","input"),Pn("cancelEvent"),vf("onStream")];const oR=zs({fields:R9,name:"streaming",active:k9,state:O9}),H_=(t,s,a)=>{const i=rt.getValue(a);rt.setValue(s,i),Z$(s)},sR=(t,s)=>{const a=t.element,i=ei(a),d=a.dom;Jt(a,"type")!=="number"&&s(d,i)},Z$=t=>{sR(t,(s,a)=>s.setSelectionRange(a.length,a.length))},D9=(t,s)=>{sR(t,(a,i)=>a.setSelectionRange(s,i.length))},M9=(t,s,a)=>{if(t.selectsOver){const i=rt.getValue(s),d=t.getDisplayText(i),g=rt.getValue(a);return t.getDisplayText(g).indexOf(d)===0?R.some(()=>{H_(t,s,a),D9(s,d.length)}):R.none()}else return R.none()},rR=oe("alloy.typeahead.itemexecute"),P9=(t,s,a,i)=>{const d=(P,F,V)=>{t.previewing.set(!1);const j=ts.getCoupled(P,"sandbox");if(_n.isOpen(j))yn.getCurrent(j).each(Y=>{qe.getHighlighted(Y).fold(()=>{V(Y)},()=>{Q1(j,Y.element,"keydown",F)})});else{const Y=ie=>{yn.getCurrent(ie).each(V)};r_(t,h(P),P,j,i,Y,Ra.HighlightMenuAndItem).get(Q)}},g=UN(t),h=P=>F=>F.map(V=>{const j=mv(V.menus),Y=_e(j,X=>yo(X.items,ae=>ae.type==="item"));return rt.getState(P).update(Ne(Y,X=>X.data)),V}),C=P=>yn.getCurrent(P),S="typeaheadevents",T=[$t.config({}),rt.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:P=>ei(P.element),getFallbackEntry:P=>({value:P,meta:{}}),setValue:(P,F)=>{Ef(P.element,t.model.getDisplayText(F))},...t.initialData.map(P=>ef("initialValue",P)).getOr({})}}),oR.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(P,F)=>{const V=ts.getCoupled(P,"sandbox");if($t.isFocused(P)&&ei(P.element).length>=t.minChars){const Y=C(V).bind(X=>qe.getHighlighted(X).map(rt.getValue));t.previewing.set(!0);const ie=X=>{C(V).each(ae=>{Y.fold(()=>{t.model.selectsOver&&qe.highlightFirst(ae)},ce=>{qe.highlightBy(ae,ye=>rt.getValue(ye).value===ce.value),qe.getHighlighted(ae).orThunk(()=>(qe.highlightFirst(ae),R.none()))})})};r_(t,h(P),P,V,i,ie,Ra.HighlightJustMenu).get(Q)}},cancelEvent:K1()}),_t.config({mode:"special",onDown:(P,F)=>(d(P,F,qe.highlightFirst),R.some(!0)),onEscape:P=>{const F=ts.getCoupled(P,"sandbox");return _n.isOpen(F)?(_n.close(F),R.some(!0)):R.none()},onUp:(P,F)=>(d(P,F,qe.highlightLast),R.some(!0)),onEnter:P=>{const F=ts.getCoupled(P,"sandbox"),V=_n.isOpen(F);if(V&&!t.previewing.get())return C(F).bind(j=>qe.getHighlighted(j)).map(j=>(yt(P,rR(),{item:j}),!0));{const j=rt.getValue(P);return un(P,K1()),t.onExecute(F,P,j),V&&_n.close(F),R.some(!0)}}}),nn.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),ts.config({others:{sandbox:P=>YA(t,P,{onOpen:()=>nn.on(P),onClose:()=>{t.lazyTypeaheadComp.get().each(F=>Po(F.element,"aria-activedescendant")),nn.off(P)}})}}),qt(S,[go(P=>{t.lazyTypeaheadComp.set(R.some(P))}),hl(P=>{t.lazyTypeaheadComp.set(R.none())}),Yl(P=>{const F=Q;qA(t,h(P),P,i,F,Ra.HighlightMenuAndItem).get(Q)}),ke(rR(),(P,F)=>{const V=ts.getCoupled(P,"sandbox");H_(t.model,P,F.event.item),un(P,K1()),t.onItemExecute(P,V,F.event.item,rt.getValue(P)),_n.close(V),Z$(P)})].concat(t.dismissOnBlur?[ke(rf(),P=>{const F=ts.getCoupled(P,"sandbox");Br(F.element).isNone()&&_n.close(F)})]:[]))],O={[Za()]:[rt.name(),oR.name(),S],...t.eventOrder};return{uid:t.uid,dom:WN(Uo(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...Zs(t.typeaheadBehaviours,T)},eventOrder:O}},N9=oe([Pn("lazySink"),Oe("fetch"),fe("minChars",5),fe("responseTime",1e3),xn("onOpen"),fe("getHotspot",R.some),fe("getAnchorOverrides",oe({})),fe("layouts",R.none()),fe("eventOrder",{}),Lw("model",{},[fe("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),fe("selectsOver",!0),fe("populateFromBrowse",!0)]),xn("onSetValue"),Cr("onExecute"),xn("onItemExecute"),fe("inputClasses",[]),fe("inputAttributes",{}),fe("inputStyles",{}),fe("matchWidth",!0),fe("useMinWidth",!1),fe("dismissOnBlur",!0),eu(["openClass"]),Pn("initialData"),Pn("listRole"),Ws("typeaheadBehaviours",[$t,rt,oR,_t,nn,ts]),Bn("lazyTypeaheadComp",()=>Et(R.none)),Bn("previewing",()=>Et(!0))].concat(zN()).concat(a_())),j$=oe([_c({schema:[yl()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,i)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{M9(t.model,d,i).fold(()=>{t.model.selectsOver?(qe.dehighlight(a,i),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&H_(t.model,d,i),Ho(i.element,"id").each(g=>Nt(d.element,"aria-activedescendant",g))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(i=>(yt(i,rR(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(i=>{t.model.populateFromBrowse&&H_(t.model,i,a)})}})})]),B9=pr({name:"Typeahead",configFields:N9(),partFields:j$(),factory:P9}),qi=t=>({...t,toCached:()=>qi(t.toCached()),bindFuture:S=>qi(t.bind(T=>T.fold(O=>Fr.pure(on.error(O)),O=>S(O)))),bindResult:S=>qi(t.map(T=>T.bind(S))),mapResult:S=>qi(t.map(T=>T.map(S))),mapError:S=>qi(t.map(T=>T.mapError(S))),foldResult:(S,T)=>t.map(O=>O.fold(S,T)),withTimeout:(S,T)=>qi(Fr.nu(O=>{let P=!1;const F=setTimeout(()=>{P=!0,O(on.error(T()))},S);t.get(V=>{P||(clearTimeout(F),O(V))})}))}),G$=t=>qi(Fr.nu(t)),aR=t=>qi(Fr.pure(on.value(t))),K$={nu:G$,wrap:qi,pure:aR,value:aR,error:t=>qi(Fr.pure(on.error(t))),fromResult:t=>qi(Fr.pure(t)),fromFuture:t=>qi(t.map(on.value)),fromPromise:t=>G$(s=>{t.then(a=>{s(on.value(a))},a=>{s(on.error(a))})})},V_=(t,s,a=[],i,d,g,h)=>{const C=s.fold(()=>({}),O=>({action:O})),S={buttonBehaviours:He([ai.item(()=>!t.enabled||h.checkUiComponentContext(t.context).shouldDisable),as(()=>h.checkUiComponentContext(t.context)),vo.config({}),...g.map(O=>Wo.config(h.tooltips.getConfig({tooltipText:h.translate(O)}))).toArray(),qt("button press",[Kv("click")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...C},T=Uo(S,{dom:i});return Uo(T,{components:d})},Y$=(t,s,a,i=[],d)=>{const g=t.tooltip.map(T=>({"aria-label":a.translate(T)})).getOr({}),h={tag:"button",classes:["tox-tbtn"],attributes:{...g,"data-mce-name":d}},C=t.icon.map(T=>W3(T,a.icons)),S=Mg([C]);return V_(t,s,i,h,S,t.tooltip,a)},cR=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},X$=(t,s,a,i=[],d=[])=>{const g=a.translate(t.text),h=t.icon.map(V=>W3(V,a.icons)),C=[h.getOrThunk(()=>_o(g))],S=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),P={tag:"button",classes:[...cR(S),...h.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":g,"data-mce-name":t.text}},F=t.icon.map(oe(g));return V_(t,s,i,P,C,F,a)},Pl=(t,s,a,i=[],d=[])=>{const g=X$(t,R.some(s),a,i,d);return Ms.sketch(g)},DC=(t,s)=>a=>{s==="custom"?yt(a,_d,{name:t,value:{}}):s==="submit"?un(a,P0):s==="cancel"?un(a,Ng):console.error("Unknown button type: ",s)},z_=(t,s)=>s==="menu",F9=(t,s)=>s==="custom"||s==="cancel"||s==="submit",iR=(t,s)=>s==="togglebutton",L9=(t,s,a)=>{var i,d;const g=t.icon.map(ce=>tm(ce,s.icons)).map(Nn),h=ce=>{yt(ce,_d,{name:t.name,value:{setIcon:ye=>{g.map(we=>we.getOpt(ce).each(Ge=>{zt.set(Ge,[tm(ye,s.icons)])}))}}})},C=t.buttonType.getOr(t.primary?"primary":"secondary"),S={...t,name:(i=t.name)!==null&&i!==void 0?i:"",primary:C==="primary",tooltip:t.tooltip,enabled:(d=t.enabled)!==null&&d!==void 0?d:!1,borderless:!1},T=S.tooltip.or(t.text).map(ce=>({"aria-label":s.translate(ce)})).getOr({}),O=cR(C??"secondary"),P=t.icon.isSome()&&t.text.isSome(),F={tag:"button",classes:[...O.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...P?["tox-button--icon-and-text"]:[]],attributes:{...T,...Vt(a)?{"data-mce-name":a}:{}}},V=[],j=s.translate(t.text.getOr("")),Y=_o(j),X=[...Mg([g.map(ce=>ce.asSpec())]),...t.text.isSome()?[Y]:[]],ae=V_(S,R.some(h),V,F,X,t.tooltip,s);return Ms.sketch(ae)},z0=(t,s,a)=>{if(z_(t,s)){const i=()=>h,d=t,g={...t,type:"menubutton",search:R.none(),onSetup:C=>(C.setEnabled(t.enabled),Q),fetch:F$(d.items,i,a)},h=Nn(Gp(g,"tox-tbtn",a,R.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return h.asSpec()}else if(F9(t,s)){const i=DC(t.name,s),d={...t,context:s==="cancel"?"any":t.context,borderless:!1};return Pl(d,i,a.shared.providers,[])}else{if(iR(t,s))return L9(t,a.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},J$=(t,s)=>{const a=DC(t.name,"custom");return NV(R.none(),Hn.parts.field({factory:Ms,...X$(t,R.some(a),s,[_C(""),ji.self()])}))},lR={type:"separator"},H9=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:Q}),uR=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:Q}),Q$=t=>Ne(t,H9),V9=(t,s)=>yo(s,a=>a.type===t),eI=(t,s)=>Q$(V9(t,s)),dR=t=>eI("header",t.targets),z9=t=>eI("anchor",t.targets),U9=t=>R.from(t.anchorTop).map(s=>uR("<top>",s)).toArray(),tI=t=>R.from(t.anchorBottom).map(s=>uR("<bottom>",s)).toArray(),nI=t=>Ne(t,s=>uR(s,s)),W9=t=>So(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(lR,a),[]),fR=(t,s)=>{const a=t.toLowerCase();return yo(s,i=>{var d;const g=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,h=(d=i.value)!==null&&d!==void 0?d:"";return Rr(g.toLowerCase(),a)||Rr(h.toLowerCase(),a)})},Z9=(t,s,a)=>{var i,d;const g=rt.getValue(s),h=(d=(i=g==null?void 0:g.meta)===null||i===void 0?void 0:i.text)!==null&&d!==void 0?d:g.value;return a.getLinkInformation().fold(()=>[],S=>{const T=fR(h,nI(a.getHistory(t)));return t==="file"?W9([T,fR(h,dR(S)),fR(h,Yt([U9(S),z9(S),tI(S)]))]):T})},oI=mt("aria-invalid"),sI=(t,s,a,i)=>{const d=s.shared.providers,g=ae=>{const ce=rt.getValue(ae);a.addToHistory(ce.value,t.filetype)},h={...i.map(ae=>({initialData:ae})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":oI,type:"url"},minChars:0,responseTime:0,fetch:ae=>{const ce=Z9(t.filetype,ae,a),ye=H0(ce,Ol.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:R.none()});return Fr.pure(ye)},getHotspot:ae=>j.getOpt(ae),onSetValue:(ae,ce)=>{ae.hasConfigured(Td)&&Td.run(ae).get(Q)},typeaheadBehaviours:He([...a.getValidationHandler().map(ae=>Td.config({getRoot:ce=>pi(ce.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(ce,ye)=>{O.getOpt(ce).each(we=>{Nt(we.element,"title",d.translate(ye))})}},validator:{validate:ce=>{const ye=rt.getValue(ce);return K$.nu(we=>{ae({type:t.filetype,url:ye.value},Ge=>{if(Ge.status==="invalid"){const ut=on.error(Ge.message);we(ut)}else{const ut=on.value(Ge.message);we(ut)}})})},validateOnLoad:!1}})).toArray(),Bt.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable}),vo.config({}),qt("urlinput-events",[ke(Ti(),ae=>{const ce=ei(ae.element),ye=ce.trim();ye!==ce&&Ef(ae.element,ye),t.filetype==="file"&&yt(ae,ec,{name:t.name})}),ke(gl(),ae=>{yt(ae,ec,{name:t.name}),g(ae)}),ke(wh(),ae=>{yt(ae,ec,{name:t.name}),g(ae)})])]),eventOrder:{[Ti()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:ae=>ae.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:q2(!1,1,"normal")},onExecute:(ae,ce,ye)=>{yt(ce,P0,{})},onItemExecute:(ae,ce,ye,we)=>{g(ae),yt(ae,ec,{name:t.name})}},C=Hn.parts.field({...h,factory:B9}),S=t.label.map(ae=>Pg(ae,d)),O=Nn(((ae,ce,ye=ae,we=ae)=>si(ye,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+ae],attributes:{title:d.translate(we),"aria-live":"polite",...ce.fold(()=>({}),Ge=>({id:Ge}))}},d.icons))("invalid",R.some(oI),"warning")),P=Nn({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[O.asSpec()]}),F=a.getUrlPicker(t.filetype),V=mt("browser.url.event"),j=Nn({dom:{tag:"div",classes:["tox-control-wrap"]},components:[C,P.asSpec()],behaviours:He([Bt.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable})])}),Y=Nn(Pl({context:t.context,name:t.name,icon:R.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:R.none(),borderless:!0},ae=>un(ae,V),d,[],["tox-browse-url"])),ie=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Yt([[j.asSpec()],F.map(()=>Y.asSpec()).toArray()])}),X=ae=>{yn.getCurrent(ae).each(ce=>{const ye=rt.getValue(ce),we={fieldname:t.name,...ye};F.each(Ge=>{Ge(we).get(ut=>{rt.setValue(ce,ut),yt(ae,ec,{name:t.name})})})})};return Hn.sketch({dom:$V(),components:S.toArray().concat([ie()]),fieldBehaviours:He([Bt.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:ae=>{Hn.getField(ae).each(Bt.disable),Y.getOpt(ae).each(Bt.disable)},onEnabled:ae=>{Hn.getField(ae).each(Bt.enable),Y.getOpt(ae).each(Bt.enable)}}),as(()=>d.checkUiComponentContext(t.context)),qt("url-input-events",[ke(V,X)])])})},yu=(t,s)=>{const a=tA(t.icon,s.icons);return pu.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[Ms.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(t.iconTooltip)}},action:i=>yt(i,_d,{name:"alert-banner",value:t.url}),buttonBehaviours:He([AN()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},mR=(t,s)=>{t.dom.checked=s},j9=t=>t.dom.checked,G9=(t,s,a)=>{const i=S=>(S.element.dom.click(),R.some(!0)),d=Hn.parts.field({factory:{sketch:rn},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:He([ji.self(),Bt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:S=>{pi(S.element).each(T=>rs(T,"tox-checkbox--disabled"))},onEnabled:S=>{pi(S.element).each(T=>Un(T,"tox-checkbox--disabled"))}}),vo.config({}),$t.config({}),l$(a,j9,mR),_t.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),qt("checkbox-events",[ke(gl(),(S,T)=>{yt(S,ec,{name:t.name})})])])}),g=Hn.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[_o(s.translate(t.label))],behaviours:He([N0.config({})])}),h=S=>si(S==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+S]},s.icons),C=Nn({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[h("checked"),h("unchecked")]});return Hn.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,C.asSpec(),g],fieldBehaviours:He([Bt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),as(()=>s.checkUiComponentContext(t.context))])})},q9=(t,s)=>{const a=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],i=qt("htmlpanel",[go(d=>{t.onInit(d.element.dom)})]);return t.presets==="presentation"?pu.sketch({dom:{tag:"div",classes:a,innerHtml:t.html},containerBehaviours:He([Wo.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{bo(d.element,"[data-mce-tooltip]:hover").orThunk(()=>Br(d.element)).each(g=>{Ho(g,"data-mce-tooltip").each(h=>{Wo.setComponents(d,s.tooltips.getComponents({tooltipText:h}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:bo(d.element,"[data-mce-tooltip]:hover").orThunk(()=>Br(d.element).filter(g=>Ho(g,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:oe([ds,Ln,vs,or,ys,Cs]),onRtl:oe([ds,Ln,vs,or,ys,Cs])},bubble:ti(0,-2,{})})}),i])}):pu.sketch({dom:{tag:"div",classes:a,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:He([vo.config({}),$t.config({}),i])})},js=t=>(s,a,i,d,g)=>it(a,"name").fold(()=>t(a,d,R.none(),g),h=>s.field(h,t(a,d,it(i,h),g))),K9=t=>(s,a,i,d,g)=>{const h=Uo(a,{source:"dynamic"});return js(t)(s,h,i,d,g)},rI={bar:js((t,s)=>u_(t,s.shared)),collection:js((t,s,a)=>IV(t,s.shared.providers,a)),alertbanner:js((t,s)=>yu(t,s.shared.providers)),input:js((t,s,a)=>P$(t,s.shared.providers,a)),textarea:js((t,s,a)=>B_(t,s.shared.providers,a)),label:js((t,s,a,i)=>Xz(t,s.shared,i)),iframe:K9((t,s,a)=>AC(t,s.shared.providers,a)),button:js((t,s)=>J$(t,s.shared.providers)),checkbox:js((t,s,a)=>G9(t,s.shared.providers,a)),colorinput:js((t,s,a)=>_5(t,s.shared,s.colorinput,a)),colorpicker:js((t,s,a)=>$z(t,s.shared.providers,a)),dropzone:js((t,s,a)=>Lz(t,s.shared.providers,a)),grid:js((t,s)=>Hz(t,s.shared)),listbox:js((t,s,a)=>_$(t,s,a)),selectbox:js((t,s,a)=>s9(t,s.shared.providers,a)),sizeinput:js((t,s)=>l9(t,s.shared.providers)),slider:js((t,s,a)=>u9(t,s.shared.providers,a)),urlinput:js((t,s,a)=>sI(t,s,s.urlinput,a)),customeditor:js(Fz),htmlpanel:js((t,s)=>q9(t,s.shared.providers)),imagepreview:js((t,s,a)=>z3(t,a)),table:js((t,s)=>M$(t,s.shared.providers)),tree:js((t,s)=>T9(t,s)),panel:js((t,s)=>n9(t,s))},aI={field:(t,s)=>s,record:oe([])},Y9=(t,s,a,i,d)=>{const g=Uo(i,{shared:{interpreter:h=>cI(t,h,a,g,d)}});return cI(t,s,a,g,d)},cI=(t,s,a,i,d)=>it(rI,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),g=>g(t,s,a,i,d)),Er=(t,s,a,i)=>cI(aI,t,s,a,i),Rd="layout-inset",gR=t=>t.x,MC=(t,s)=>t.x+t.width/2-s.width/2,hR=(t,s)=>t.x+t.width-s.width,pR=t=>t.y,bR=(t,s)=>t.y+t.height-s.height,iI=(t,s)=>t.y+t.height/2-s.height/2,U_=(t,s,a)=>fr(hR(t,s),bR(t,s),a.insetSouthwest(),wb(),"southwest",mr(t,{right:0,bottom:3}),Rd),W_=(t,s,a)=>fr(gR(t),bR(t,s),a.insetSoutheast(),_y(),"southeast",mr(t,{left:1,bottom:3}),Rd),PC=(t,s,a)=>fr(hR(t,s),pR(t),a.insetNorthwest(),Ey(),"northwest",mr(t,{right:0,top:2}),Rd),NC=(t,s,a)=>fr(gR(t),pR(t),a.insetNortheast(),Cb(),"northeast",mr(t,{left:1,top:2}),Rd),Ki=(t,s,a)=>fr(MC(t,s),pR(t),a.insetNorth(),gt(),"north",mr(t,{top:2}),Rd),Lg=(t,s,a)=>fr(MC(t,s),bR(t,s),a.insetSouth(),Lh(),"south",mr(t,{bottom:3}),Rd),vR=(t,s,a)=>fr(hR(t,s),iI(t,s),a.insetEast(),Nx(),"east",mr(t,{right:0}),Rd),yR=(t,s,a)=>fr(gR(t),iI(t,s),a.insetWest(),Ty(),"west",mr(t,{left:1}),Rd),X9=t=>{switch(t){case"north":return Ki;case"northeast":return NC;case"northwest":return PC;case"south":return Lg;case"southeast":return W_;case"southwest":return U_;case"east":return vR;case"west":return yR}},CR=(t,s,a,i,d)=>Ny(i).map(X9).getOr(Ki)(t,s,a,i,d),J9=t=>{switch(t){case"north":return Lg;case"northeast":return W_;case"northwest":return U_;case"south":return Ki;case"southeast":return NC;case"southwest":return PC;case"east":return yR;case"west":return vR}},Q9=(t,s,a,i,d)=>Ny(i).map(J9).getOr(Ki)(t,s,a,i,d),U0={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},$K=(t,s,a)=>{const d={maxHeightFunction:id()},g=()=>({type:"node",root:Vd(lr(t())),node:R.from(t()),bubble:ti(12,12,U0),layouts:{onRtl:()=>[NC],onLtr:()=>[PC]},overrides:d}),h=()=>({type:"hotspot",hotspot:s(),bubble:ti(-12,12,U0),layouts:{onRtl:()=>[vs,ys,ds],onLtr:()=>[ys,vs,ds]},overrides:d});return()=>a()?g():h()},IK=(t,s,a,i)=>{const g={maxHeightFunction:id()},h=()=>({type:"node",root:Vd(lr(s())),node:R.from(s()),bubble:ti(12,12,U0),layouts:{onRtl:()=>[Ki],onLtr:()=>[Ki]},overrides:g}),C=()=>t?{type:"node",root:Vd(lr(s())),node:R.from(s()),bubble:ti(0,-cl(s()),U0),layouts:{onRtl:()=>[Ln],onLtr:()=>[Ln]},overrides:g}:{type:"hotspot",hotspot:a(),bubble:ti(0,0,U0),layouts:{onRtl:()=>[Ln],onLtr:()=>[Ln]},overrides:g};return()=>i()?h():C()},eU=(t,s,a)=>{const i=()=>({type:"node",root:Vd(lr(t())),node:R.from(t()),layouts:{onRtl:()=>[Ki],onLtr:()=>[Ki]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[ds],onLtr:()=>[ds]}});return()=>a()?i():d()},tU=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),i=t.model.table.getSelectedCells();if(i.length>1){const d=i[0],g=i[i.length-1],h={firstCell:ue.fromDom(d),lastCell:ue.fromDom(g)};return R.some(h)}return R.some(og.range(ue.fromDom(a.startContainer),a.startOffset,ue.fromDom(a.endContainer),a.endOffset))}}),nU=t=>s=>({type:"node",root:t(),node:s}),lI=(t,s,a,i)=>{const d=Tl(t),g=()=>ue.fromDom(t.getBody()),h=()=>ue.fromDom(t.getContentAreaContainer()),C=()=>d||!i();return{inlineDialog:$K(h,s,C),inlineBottomDialog:IK(t.inline,h,a,C),banner:eU(h,s,C),cursor:tU(t,g),node:nU(g)}},wR=t=>(s,a)=>{KB(t)(s,a)},oU=t=>()=>HB(t),sU=t=>s=>o_(t,s),uI=t=>s=>LB(t,s),rU=t=>({colorPicker:wR(t),hasCustomColors:oU(t),getColors:sU(t),getColorCols:uI(t)}),aU=t=>()=>gE(t),cU=t=>({isDraggableModal:aU(t)}),iU=t=>{const s=Et(FO(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},Z_=t=>lc(t,"items"),xR=t=>lc(t,"format"),dI=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],lU=t=>Vn(t,"items"),uU=t=>Vn(t,"block"),dU=t=>Vn(t,"inline"),fI=t=>Vn(t,"selector"),mI=t=>So(t,(s,a)=>{if(lU(a)){const i=mI(a.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:a.title,items:i.formats}])}}else if(dU(a)||uU(a)||fI(a)){const d=`custom-${J(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),j_=(t,s)=>{const a=mI(s),i=d=>{dt(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?i(a.customFormats):t.on("init",()=>{i(a.customFormats)}),a.formats},gI=t=>kO(t).map(s=>{const a=j_(t,s);return JP(t)?dI.concat(a):a}).getOr(dI),G_=t=>{const s=Fo(t);return s.length===1&&Io(s,"title")},hI=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),q_=(t,s,a,i)=>{const d=S=>hI(S,a,i),g=S=>{const T=C(S.items);return{...S,type:"submenu",getStyleItems:oe(T)}},h=S=>{const T=J(S.name)?S.name:mt(S.title),O=`custom-${T}`,P={...S,type:"formatter",format:O,isSelected:a(O),getStylePreview:i(O)};return t.formatter.register(T,P),P},C=S=>Ne(S,T=>Z_(T)?g(T):xR(T)?d(T):G_(T)?{...T,type:"separator"}:h(T));return C(s)},BC=t=>{const s=C=>()=>t.formatter.match(C),a=C=>()=>{const S=t.formatter.get(C);return S!==void 0?R.some({tag:S.length>0&&(S[0].inline||S[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(C))}):R.none()},i=Et([]),d=Et([]),g=Et(!1);return t.on("PreInit",C=>{const S=gI(t),T=q_(t,S,s,a);i.set(T)}),t.on("addStyleModifications",C=>{const S=q_(t,C.items,s,a);d.set(S),g.set(C.replace)}),{getData:()=>{const C=g.get()?[]:i.get(),S=d.get();return C.concat(S)}}},pI=t=>{let i=0;const d=()=>i>0,g=C=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[_o(C.tooltipText)]}];return{getConfig:C=>({delayForShow:()=>d()?60:300,delayForHide:oe(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:g(C),onShow:(S,T)=>{i++,C.onShow&&C.onShow(S,T)},onHide:(S,T)=>{i--,C.onHide&&C.onHide(S,T)},onSetup:C.onSetup}),getComponents:g}},fU=t=>Vt(t)&&t.nodeType===1,bI=em.trim,SR=t=>s=>!!(fU(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),vI=SR("true"),mU=SR("false"),K_=(t,s,a,i,d)=>({type:t,title:s,url:a,level:i,attach:d}),Y_=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return vI(s)}return!1},gU=(t,s)=>Ne(sr(ue.fromDom(s),t),a=>a.dom),yI=t=>t.innerText||t.textContent,W0=t=>t.id?t.id:mt("h"),CI=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,wI=t=>CI(t)&&X_(t),ER=t=>t&&/^(H[1-6])$/.test(t.nodeName),X_=t=>Y_(t)&&!mU(t),_R=t=>ER(t)&&X_(t),hU=t=>ER(t)?parseInt(t.nodeName.substr(1),10):0,pU=t=>{var s;const a=W0(t),i=()=>{t.id=a};return K_("header",(s=yI(t))!==null&&s!==void 0?s:"","#"+a,hU(t),i)},bU=t=>{const s=t.id||t.name,a=yI(t);return K_("anchor",a||"#"+s,"#"+s,0,Q)},TR=t=>Ne(yo(t,_R),pU),vU=t=>Ne(yo(t,wI),bU),yU=t=>gU("h1,h2,h3,h4,h5,h6,a:not([href])",t),CU=t=>bI(t.title).length>0,wU={find:t=>{const s=yU(t);return yo(TR(s).concat(vU(s)),CU)}},J_="tinymce-url-history",xI=5,kR=t=>J(t)&&/^https?/.test(t),xU=t=>Be(t)&&t.length<=xI&&Tu(t,kR),Z0=t=>ge(t)&&zr(t,s=>!xU(s)).isNone(),SI=()=>{const t=Bp.getItem(J_);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+J_+" was not valid JSON",a),{};throw a}return Z0(s)?s:(console.log("Local storage "+J_+" was not valid format",s),{})},SU=t=>{if(!Z0(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Bp.setItem(J_,JSON.stringify(t))},OR=t=>{const s=SI();return it(s,t).getOr([])},EI=(t,s)=>{if(!kR(t))return;const a=SI(),i=it(a,s).getOr([]),d=yo(i,g=>g!==t);a[s]=[t].concat(d).slice(0,xI),SU(a)},_I=t=>!!t,EU=t=>Lo(em.makeMap(t,/[, ]/),_I),AR=t=>R.from(DO(t)),_U=t=>{const s=R.from(mE(t)).filter(_I).map(EU);return AR(t).fold(jn,a=>s.fold(Dt,i=>Fo(i).length>0?i:!1))},TU=(t,s)=>{const a=_U(t);return Xt(a)?a?AR(t):R.none():a[s]?AR(t):R.none()},kU=(t,s)=>TU(t,s).map(a=>i=>Fr.nu(d=>{const g=(C,S)=>{if(!J(C))throw new Error("Expected value to be string");if(S!==void 0&&!ge(S))throw new Error("Expected meta to be a object");d({value:C,meta:S})},h={filetype:s,fieldname:i.fieldname,...R.from(i.meta).getOr({})};a.call(t,g,i.value,h)})),TI=t=>R.from(t).filter(J).getOrUndefined(),OU=t=>MO(t)?R.some({targets:wU.find(t.getBody()),anchorTop:TI(PO(t)),anchorBottom:TI(aN(t))}):R.none(),AU=t=>R.from(sN(t)),LK=t=>({getHistory:OR,addToHistory:EI,getLinkInformation:()=>OU(t),getValidationHandler:()=>AU(t),getUrlPicker:s=>kU(t,s)}),RU=(t,s,a,i)=>{const d=Et(!1),g=iU(s),h={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Vi.translate,isDisabled:()=>!s.ui.isEnabled(),getOption:s.options.get,tooltips:pI(t.dialog),checkUiComponentContext:X=>{const[ae,ce=""]=X.split(":"),ye=s.ui.registry.getAll().contexts,we=it(ye,ae).fold(()=>it(ye,"mode").map(Ge=>Ge("design")).getOr(!1),Ge=>ce.charAt(0)==="!"?!Ge(ce.slice(1)):Ge(ce));return{contextType:ae,shouldDisable:!we}}},C=LK(s),S=BC(s),T=rU(s),O=cU(s),P=()=>d.get(),F=X=>d.set(X),V={shared:{providers:h,anchors:lI(s,a,i,g.isPositionedAtTop),header:g},urlinput:C,styles:S,colorinput:T,dialog:O,isContextMenuOpen:P,setContextMenuState:F},j=X=>R.none(),Y={...V,shared:{...V.shared,interpreter:X=>Er(X,{},Y,j),getSink:t.popup}},ie={...V,shared:{...V.shared,interpreter:X=>Er(X,{},ie,j),getSink:t.dialog}};return{popup:Y,dialog:ie}},kI=(t,s,a)=>{const i=(Te,ft)=>{dt([s,...a],nt=>{nt.broadcastEvent(Te,ft)})},d=(Te,ft)=>{dt([s,...a],nt=>{nt.broadcastOn([Te],ft)})},g=Te=>d(cu(),{target:Te.target}),h=xi(),C=Kr(h,"touchstart",g),S=Kr(h,"touchmove",Te=>i(xk(),Te)),T=Kr(h,"touchend",Te=>i(Zw(),Te)),O=Kr(h,"mousedown",g),P=Kr(h,"mouseup",Te=>{Te.raw.button===0&&d(jb(),{target:Te.target})}),F=Te=>d(cu(),{target:ue.fromDom(Te.target)}),V=Te=>{Te.button===0&&d(jb(),{target:ue.fromDom(Te.target)})},j=()=>{dt(t.editorManager.get(),Te=>{t!==Te&&Te.dispatch("DismissPopups",{relatedTarget:t})})},Y=Te=>i(Gu(),qx(Te)),ie=Te=>{d(pd(),{}),i(af(),qx(Te))},X=lr(ue.fromDom(t.getElement())),ae=By(X,"scroll",Te=>{requestAnimationFrame(()=>{const ft=t.getContainer();if(ft!=null){const ht=Eg(t,s.element).map(gn=>[gn.element,...gn.others]).getOr([]);ma(ht,gn=>qn(gn,Te.target))&&(t.dispatch("ElementScroll",{target:Te.target.dom}),i(Zv(),Te))}})}),ce=()=>d(pd(),{}),ye=Te=>{Te.state&&d(cu(),{target:ue.fromDom(t.getContainer())})},we=Te=>{d(cu(),{target:ue.fromDom(Te.relatedTarget.getContainer())})},Ge=Te=>t.dispatch("focusin",Te),ut=Te=>t.dispatch("focusout",Te);t.on("PostRender",()=>{t.on("click",F),t.on("tap",F),t.on("mouseup",V),t.on("mousedown",j),t.on("ScrollWindow",Y),t.on("ResizeWindow",ie),t.on("ResizeEditor",ce),t.on("AfterProgressState",ye),t.on("DismissPopups",we),dt([s,...a],Te=>{Te.element.dom.addEventListener("focusin",Ge),Te.element.dom.addEventListener("focusout",ut)})}),t.on("remove",()=>{t.off("click",F),t.off("tap",F),t.off("mouseup",V),t.off("mousedown",j),t.off("ScrollWindow",Y),t.off("ResizeWindow",ie),t.off("ResizeEditor",ce),t.off("AfterProgressState",ye),t.off("DismissPopups",we),dt([s,...a],Te=>{Te.element.dom.removeEventListener("focusin",Ge),Te.element.dom.removeEventListener("focusout",ut)}),O.unbind(),C.unbind(),S.unbind(),T.unbind(),P.unbind(),ae.unbind()}),t.on("detach",()=>{dt([s,...a],Bf),dt([s,...a],Te=>Te.destroy())})},Gs=y2,Yi=VS,OI=oe([fe("shell",!1),Oe("makeItem"),fe("setupItem",Q),Ec.field("listBehaviours",[zt])]),DU=Ja({name:"items",overrides:()=>({behaviours:He([zt.config({})])})}),MU=oe([DU]),PU=oe("CustomList"),NU=(t,s,a,i)=>{const d=(C,S)=>{h(C).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},T=>{const O=zt.contents(T),P=S.length,F=P-O.length,V=F>0?ls(F,()=>t.makeItem()):[],j=O.slice(P);dt(j,ie=>zt.remove(T,ie)),dt(V,ie=>zt.append(T,ie));const Y=zt.contents(T);dt(Y,(ie,X)=>{t.setupItem(C,ie,S[X],X)})})},g=t.shell?{behaviours:[zt.config({})],components:[]}:{behaviours:[],components:s},h=C=>t.shell?R.some(C):Jn(C,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:Zs(t.listBehaviours,g.behaviours),apis:{setItems:d}}},AI=pr({name:PU(),configFields:OI(),partFields:MU(),factory:NU,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),j0=oe([Oe("dom"),fe("shell",!0),Ws("toolbarBehaviours",[zt])]),RI=oe([Ja({name:"groups",overrides:()=>({behaviours:He([zt.config({})])})})]),$U=(t,s,a,i)=>{const d=(C,S)=>{g(C).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},T=>{zt.set(T,S)})},g=C=>t.shell?R.some(C):Jn(C,t,"groups"),h=t.shell?{behaviours:[zt.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:h.components,behaviours:Zs(t.toolbarBehaviours,h.behaviours),apis:{setGroups:d,refresh:Q},domModification:{attributes:{role:"group"}}}},Nl=pr({name:"Toolbar",configFields:j0(),partFields:RI(),factory:$U,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),IU=Q,FU=jn,DI=oe([]);var qp=Object.freeze({__proto__:null,setup:IU,isDocked:FU,getBehaviours:DI});const Q_=oe(mt("toolbar-height-change")),ui={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},$C="tox-tinymce--toolbar-sticky-on",RR="tox-tinymce--toolbar-sticky-off",MI=(t,s)=>{const a=Fa(s),d=Ld(s).dom.innerHeight,g=Zr(a),h=ue.fromDom(t.elm),C=jd(h),S=ps(h),T=C.y,O=T+S,P=Vo(s),F=ps(s),V=P.top,j=V+F,Y=Math.abs(V-g.top)<2,ie=Math.abs(j-(g.top+d))<2;if(Y&&T<j)Cm(g.left,T-F,a);else if(ie&&O>V){const X=T-d+S+F;Cm(g.left,X,a)}},IC=(t,s)=>Io(ro.getModes(t),s),PI=t=>{const s=i=>cl(i)+(parseInt(Dr(i,"margin-top"),10)||0)+(parseInt(Dr(i,"margin-bottom"),10)||0),a=t.element;pi(a).each(i=>{const d="padding-"+ro.getModes(t)[0];if(ro.isDocked(t)){const g=sa(i);Wt(a,"width",g+"px"),Wt(i,d,s(a)+"px")}else Qt(a,"width"),Qt(i,d)})},NI=(t,s)=>{s?(Un(t,ui.fadeOutClass),Bm(t,[ui.transitionClass,ui.fadeInClass])):(Un(t,ui.fadeInClass),Bm(t,[ui.fadeOutClass,ui.transitionClass]))},BI=(t,s)=>{const a=ue.fromDom(t.getContainer());s?(rs(a,$C),Un(a,RR)):(rs(a,RR),Un(a,$C))},LU=(t,s)=>{const a=Fa(s);xl(a).filter(i=>!qn(s,i)).filter(i=>qn(i,ue.fromDom(a.dom.body))||Ia(t,i)).each(()=>wc(s))},HU=(t,s)=>Br(t).orThunk(()=>s().toOptional().bind(a=>Br(a.element))),VU=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(ro.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(PI)}),t.on("SkinLoaded",()=>{a().each(i=>{ro.isDocked(i)?ro.reset(i):ro.refresh(i)})}),t.on("FullscreenStateChanged",()=>{a().each(ro.reset)})),t.on("AfterScrollIntoView",i=>{a().each(d=>{ro.refresh(d);const g=d.element;tO(g)&&MI(i,g)})}),t.on("PostRender",()=>{BI(t,!1)})},G0=t=>t().map(ro.isDocked).getOr(!1),FC=()=>[Ea.config({channels:{[Q_()]:{onReceive:PI}}})],eT=(t,s)=>{const a=In(),i=s.getSink,d=C=>{i().each(S=>C(S.element))},g=C=>{t.inline||PI(C),BI(t,ro.isDocked(C)),C.getSystem().broadcastOn([pd()],{}),i().each(S=>S.getSystem().broadcastOn([pd()],{}))},h=t.inline?[]:FC();return[$t.config({}),ro.config({contextual:{lazyContext:C=>{const S=cl(C.element),T=t.inline?t.getContentAreaContainer():t.getContainer();return R.from(T).map(O=>{const P=zo(ue.fromDom(O));return Eg(t,C.element).fold(()=>{const V=P.height-S,j=P.y+(IC(C,"top")?0:S);return ko(P.x,j,P.width,V)},V=>{const j=$u(P,_g(V)),Y=IC(C,"top")?j.y:j.y+S;return ko(j.x,Y,j.width,j.height-S)})})},onShow:()=>{d(C=>NI(C,!0))},onShown:C=>{d(S=>Ri(S,[ui.transitionClass,ui.fadeInClass])),a.get().each(S=>{LU(C.element,S),a.clear()})},onHide:C=>{HU(C.element,i).fold(a.clear,a.set),d(S=>NI(S,!1))},onHidden:()=>{d(C=>Ri(C,[ui.transitionClass]))},...ui},lazyViewport:C=>Eg(t,C.element).fold(()=>{const T=Is(),O=nN(t),P=T.y+(IC(C,"top")&&!zO(t)?O:0),F=T.height-(IC(C,"bottom")?O:0);return{bounds:ko(T.x,P,T.width,F),optScrollEnv:R.none()}},T=>({bounds:_g(T),optScrollEnv:R.some({currentScrollTop:T.element.dom.scrollTop,scrollElmTop:Vo(T.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...h]};var zU=Object.freeze({__proto__:null,setup:VU,isDocked:G0,getBehaviours:eT});const UU=t=>{const s=t.editor,a=t.sticky?eT:DI;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:He(a(s,t.sharedBackstage))}},DR=At([ms,$n("items",Iw([$v([fA,Ua("items",ot)]),ot]))].concat(Op)),WU=t=>Oo("GroupToolbarButton",DR,t),LC=[As("text"),As("tooltip"),As("icon"),mo("search",!1,Iw([Wc,At([As("placeholder")])],t=>Xt(t)?t?R.some({placeholder:R.none()}):R.none():R.some(t))),jc("fetch"),po("onSetup",()=>Q),ss("context","mode:design")],MR=At([ms,...LC]),$I=t=>Oo("menubutton",MR,t),ZU=At([ms,Y2,ri,Xf,oB,eB,kp,Qs("presets","normal",["normal","color","listpreview"]),sB(1),S0,tB,ss("context","mode:design")]),jU=t=>Oo("SplitButton",ZU,t);var PR=Oa({factory:(t,s)=>{const a=(d,g)=>{const h=Ne(g,C=>{const S={type:"menubutton",text:C.text,fetch:O=>{O(C.getItems())},context:"any"},T=$I(S).mapError(O=>Qd(O)).getOrDie();return Gp(T,"tox-mbtn",s.backstage,R.some("menuitem"))});zt.set(d,h)},i={focus:_t.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:He([zt.config({}),qt("menubar-events",[go(d=>{t.onSetup(d)}),ke(Gc(),(d,g)=>{bo(d.element,".tox-mbtn--active").each(h=>{Cl(g.event.target,".tox-mbtn").each(C=>{qn(h,C)||d.getSystem().getByDom(h).each(S=>{d.getSystem().getByDom(C).each(T=>{ci.expand(T),ci.close(S),$t.focus(T)})})})})}),ke(Sh(),(d,g)=>{g.event.prevFocus.bind(h=>d.getSystem().getByDom(h).toOptional()).each(h=>{g.event.newFocus.bind(C=>d.getSystem().getByDom(C).toOptional()).each(C=>{ci.isOpen(h)&&(ci.expand(C),ci.close(h))})})})]),_t.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),R.some(!0))}),vo.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Oe("dom"),Oe("uid"),Oe("onEscape"),Oe("backstage"),fe("onSetup",Q)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const GU="⚡️Upgrade",II="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",FI=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:II,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:GU}}]}),tT="container",qU=[Ws("slotBehaviours",[])],HC=t=>"<alloy.field."+t+">",nT=t=>{const s=(()=>{const g=[];return{slot:(C,S)=>(g.push(C),o0(tT,HC(C),S)),record:oe(g)}})(),a=t(s),i=s.record(),d=Ne(i,g=>xr({name:g,pname:HC(g)}));return dp(tT,qU,d,LI,a)},LI=(t,s)=>{const a=Y=>v2(t),i=(Y,ie)=>Jn(Y,t,ie),d=(Y,ie)=>(X,ae)=>Jn(X,t,ae).map(ce=>Y(ce,ae)).getOr(ie),g=Y=>(ie,X)=>{dt(X,ae=>Y(ie,ae))},h=(Y,ie)=>Jt(Y.element,"aria-hidden")!=="true",C=(Y,ie)=>{if(!h(Y)){const X=Y.element;Qt(X,"display"),Po(X,"aria-hidden"),yt(Y,Am(),{name:ie,visible:!0})}},S=(Y,ie)=>{if(h(Y)){const X=Y.element;Wt(X,"display","none"),Nt(X,"aria-hidden","true"),yt(Y,Am(),{name:ie,visible:!1})}},T=d(h,!1),O=d(S),P=g(O),F=Y=>P(Y,a()),V=d(C),j={getSlotNames:a,getSlot:i,isShowing:T,hideSlot:O,hideAllSlots:F,showSlot:V};return{uid:t.uid,dom:t.dom,components:s,behaviours:Yb(t.slotBehaviours),apis:j}},Qr={...Lo({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>hb(t)),sketch:nT},KU=At([ri,Y2,po("onShow",Q),po("onHide",Q),kp]),YU=t=>Oo("sidebar",KU,t),NR=t=>{const{sidebars:s}=t.ui.registry.getAll();dt(Fo(s),a=>{const i=s[a],d=()=>Na(R.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:i.icon,tooltip:i.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const h=()=>g.setActive(d());return t.on("ToggleSidebar",h),()=>{t.off("ToggleSidebar",h)}},context:"any"})})},XU=t=>({element:()=>t.element.dom}),BR=(t,s)=>{const a=Ne(Fo(s),i=>{const d=s[i],g=Fe(YU(d));return{name:i,getApi:XU,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return Ne(a,i=>{const d=Et(Q);return t.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:_0.unnamedEvents([Rg(i,d),Dg(i,d),ke(Am(),(g,h)=>{const C=h.event;Zt(a,T=>T.name===C.name).each(T=>{(C.visible?T.onShow:T.onHide)(T.getApi(g))})})])})})},JU=t=>Qr.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:BR(s,t),slotBehaviours:_0.unnamedEvents([go(a=>Qr.hideAllSlots(a))])})),$R=(t,s,a)=>{yn.getCurrent(t).each(d=>{zt.set(d,[JU(s)]);const g=a==null?void 0:a.toLowerCase();J(g)&&Vn(s,g)&&yn.getCurrent(d).each(h=>{Qr.showSlot(h,g),tc.immediateGrow(d),Qt(d.element,"width"),oT(t.element,"region")})})},oT=(t,s)=>{Nt(t,"role",s)},QU=(t,s)=>{yn.getCurrent(t).each(i=>{yn.getCurrent(i).each(g=>{tc.hasGrown(i)?Qr.isShowing(g,s)?(tc.shrink(i),oT(t.element,"presentation")):(Qr.hideAllSlots(g),Qr.showSlot(g,s),oT(t.element,"region")):(Qr.hideAllSlots(g),Qr.showSlot(g,s),tc.grow(i),oT(t.element,"region"))})})},eW=t=>yn.getCurrent(t).bind(a=>tc.isGrowing(a)||tc.hasGrown(a)?yn.getCurrent(a).bind(g=>Zt(Qr.getSlotNames(g),h=>Qr.isShowing(g,h))):R.none()),IR=mt("FixSizeEvent"),FR=mt("AutoSizeEvent"),UK=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:He([vo.config({}),$t.config({}),tc.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{yn.getCurrent(s).each(Qr.hideAllSlots),un(s,FR)},onGrown:s=>{un(s,FR)},onStartGrow:s=>{yt(s,IR,{width:Xo(s.element,"width").getOr("")})},onStartShrink:s=>{yt(s,IR,{width:sa(s.element)+"px"})}}),zt.config({}),yn.config({find:s=>{const a=zt.contents(s);return ga(a)}})])}],behaviours:He([ji.childAt(0),qt("sidebar-sliding-events",[ke(IR,(s,a)=>{Wt(s.element,"width",a.event.width)}),ke(FR,(s,a)=>{Qt(s.element,"width")})])])});var HI=Object.freeze({__proto__:null,block:(t,s,a,i)=>{Nt(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=He([_t.config({mode:"special",onTab:()=>R.some(!0),onShiftTab:()=>R.some(!0)}),$t.config({})]),h=i(d,g),C=d.getSystem().build(h);zt.append(d,Ga(C)),C.hasConfigured(_t)&&s.focus&&_t.focusIn(C),a.isBlocked()||s.onBlock(t),a.blockWith(()=>zt.remove(d,C))},unblock:(t,s,a)=>{Po(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()},isBlocked:(t,s,a)=>a.isBlocked()}),nW=[po("getRoot",R.none),er("focus",!0),xn("onBlock"),xn("onUnblock")],oW=Object.freeze({__proto__:null,init:()=>{const t=hk(),s=a=>{t.set({destroy:a})};return Pr({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const Cu=zs({fields:nW,name:"blocking",apis:HI,state:oW}),sW=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:lu('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),LR=t=>yn.getCurrent(t).each(s=>wc(s.element,!0)),rW=(t,s)=>{const a="tabindex",i=`data-mce-${a}`;R.from(t.iframeElement).map(ue.fromDom).each(d=>{s?(Ho(d,a).each(g=>Nt(d,i,g)),Nt(d,a,-1)):(Po(d,a),Ho(d,i).each(g=>{Nt(d,a,g),Po(d,i)}))})},aW=(t,s,a,i)=>{const d=s.element;if(rW(t,a),a)Cu.block(s,sW(i)),Qt(d,"display"),Po(d,"aria-hidden"),t.hasFocus()&&LR(s);else{const g=yn.getCurrent(s).exists(h=>kf(h.element));Cu.unblock(s),Wt(d,"display","none"),Nt(d,"aria-hidden","true"),g&&t.focus()}},cW=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:He([zt.config({}),Cu.config({focus:!1}),yn.config({find:s=>ga(s.components())})]),components:[]}),jK=t=>t.type==="focusin",GK=t=>jK(t)?(t.composed?ga(t.composedPath()):R.from(t.target)).map(ue.fromDom).filter(oo).exists(a=>qr(a,"mce-pastebin")):!1,VI=(t,s,a)=>{const i=Et(!1),d=In(),g=C=>{i.get()&&!GK(C)&&(C.preventDefault(),LR(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",C=>{C.command.toLowerCase()==="mcefocus"&&C.value!==!0&&g(C)})});const h=C=>{C!==i.get()&&(i.set(C),aW(t,s(),C,a.providers),QE(t,C))};t.on("ProgressState",C=>{if(d.on(clearTimeout),sn(C.time)){const S=yp.setEditorTimeout(t,()=>h(C.state),C.time);d.set(S)}else h(C.state),d.clear()})},zI=(t,s)=>So(t,(d,g)=>s(g,d.len).fold(oe(d),C=>({len:C.finish,list:d.list.concat([C])})),{len:0,list:[]}).list,HR=(t,s,a)=>({within:t,extra:s,withinWidth:a}),UI=(t,s,a)=>{const i=zI(t,(C,S)=>{const T=a(C);return R.some({element:C,start:S,finish:S+T,width:T})}),d=yo(i,C=>C.finish<=s),g=_s(d,(C,S)=>C+S.width,0),h=i.slice(d.length);return{within:d,extra:h,withinWidth:g}},Ma=t=>Ne(t,s=>s.element),iW=(t,s,a)=>{const i=Ma(t.concat(s));return HR(i,[],a)},WI=(t,s,a,i)=>{const d=Ma(t).concat([a]);return HR(d,Ma(s),i)},ZI=(t,s,a)=>HR(Ma(t),[],a),lW=(t,s,a)=>{const i=UI(s,t,a);return i.extra.length===0?R.some(i):R.none()},VC=(t,s,a,i)=>{const d=lW(t,s,a).getOrThunk(()=>UI(s,t-a(i),a)),g=d.within,h=d.extra,C=d.withinWidth;return h.length===1&&h[0].width<=a(i)?iW(g,h,C):h.length>=1?WI(g,h,i,C):ZI(g,h,C)},jI=(t,s)=>{const a=Ne(s,i=>Ga(i));Nl.setGroups(t,a)},sT=t=>ir(t,s=>Br(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),GI=(t,s,a)=>{const i=s.builtGroups.get();if(i.length===0)return;const d=at(t,s,"primary"),g=ts.getCoupled(t,"overflowGroup");Wt(d.element,"visibility","hidden");const h=i.concat([g]),C=sT(h);a([]),jI(d,h);const S=sa(d.element),T=VC(S,s.builtGroups.get(),O=>Math.ceil(O.element.dom.getBoundingClientRect().width),g);T.extra.length===0?(zt.remove(d,g),a([])):(jI(d,T.within),a(T.extra)),Qt(d.element,"visibility"),zd(d.element),C.each($t.focus)},zC=oe([Ws("splitToolbarBehaviours",[ts]),Bn("builtGroups",()=>Et([]))]),uW=oe([eu(["overflowToggledClass"]),ml("getOverflowBounds"),Oe("lazySink"),Bn("overflowGroups",()=>Et([])),xn("onOpened"),xn("onClosed")].concat(zC())),dW=oe([xr({factory:Nl,schema:j0(),name:"primary"}),_c({schema:j0(),name:"overflow"}),_c({name:"overflow-button"}),_c({name:"overflow-group"})]),Mc=oe((t,s)=>{Cw(t,Math.floor(s))}),fW=oe([eu(["toggledClass"]),Oe("lazySink"),jc("fetch"),ml("getBounds"),Hs("fireDismissalEventInstead",[fe("event",ja())]),ld(),xn("onToggled")]),rT=oe([_c({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:He([nn.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),_c({factory:Nl,schema:j0(),name:"toolbar",overrides:t=>({toolbarBehaviours:He([_t.config({mode:"cyclic",onEscape:s=>(Jn(s,t,"button").each($t.focus),R.none())})])})})]),UC=In(),qI=(t,s)=>{UC.set(!0),VR(t,s),UC.clear()},VR=(t,s)=>{const a=ts.getCoupled(t,"toolbarSandbox");_n.isOpen(a)?_n.close(a):_n.open(a,s.toolbar())},aT=(t,s,a,i)=>{const d=a.getBounds.map(h=>h()),g=a.lazySink(t).getOrDie();ar.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:i,overrides:{maxWidthFunction:Mc()}}},d)},KI=(t,s,a,i,d)=>{Nl.setGroups(s,d),aT(t,s,a,i),nn.on(t)},mW=(t,s,a)=>{const i=Fh(),d=(h,C)=>{const S=UC.get().getOr(!1);a.fetch().get(T=>{KI(t,C,a,s.layouts,T),i.link(t.element),S||_t.focusIn(C)})},g=()=>{nn.off(t),UC.get().getOr(!1)||$t.focus(t),i.unlink(t.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:He([_t.config({mode:"special",onEscape:h=>(_n.close(h),R.some(!0))}),_n.config({onOpen:d,onClose:g,isPartOf:(h,C,S)=>sd(C,S)||sd(t,S),getAttachPoint:()=>a.lazySink(t).getOrDie()}),Ea.config({channels:{...rp({isExtraPart:jn,...a.fireDismissalEventInstead.map(h=>({fireEventInstead:{event:h.event}})).getOr({})}),...ap({doReposition:()=>{_n.getState(ts.getCoupled(t,"toolbarSandbox")).each(h=>{aT(t,h,a,s.layouts)})}})}})])}},Hg=pr({name:"FloatingToolbarButton",factory:(t,s,a,i)=>({...Ms.sketch({...i.button(),action:d=>{VR(d,i)},buttonBehaviours:Ec.augment({dump:i.button().buttonBehaviours},[ts.config({others:{toolbarSandbox:d=>mW(d,a,t)}})])}),apis:{setGroups:(d,g)=>{_n.getState(ts.getCoupled(d,"toolbarSandbox")).each(h=>{KI(d,h,t,a.layouts,g)})},reposition:d=>{_n.getState(ts.getCoupled(d,"toolbarSandbox")).each(g=>{aT(d,g,t,a.layouts)})},toggle:d=>{VR(d,i)},toggleWithoutFocusing:d=>{qI(d,i)},getToolbar:d=>_n.getState(ts.getCoupled(d,"toolbarSandbox")),isOpen:d=>_n.isOpen(ts.getCoupled(d,"toolbarSandbox"))}}),configFields:fW(),partFields:rT(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),gW=oe([Oe("items"),eu(["itemSelector"]),Ws("tgroupBehaviours",[_t])]),hW=oe([lp({name:"items",unit:"item"})]),pW=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Zs(t.tgroupBehaviours,[_t.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),WC=pr({name:"ToolbarGroup",configFields:gW(),partFields:hW(),factory:pW}),zR=t=>Ne(t,s=>Ga(s)),UR=(t,s,a)=>{GI(t,a,i=>{a.overflowGroups.set(i),s.getOpt(t).each(d=>{Hg.setGroups(d,zR(i))})})},bW=(t,s,a,i)=>{const d=Nn(Hg.sketch({fetch:()=>Fr.nu(g=>{g(zR(t.overflowGroups.get()))}),layouts:{onLtr:()=>[ys,vs],onRtl:()=>[vs,ys],onBottomLtr:()=>[Cs,or],onBottomRtl:()=>[or,Cs]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(g,h)=>t[h?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:Zs(t.splitToolbarBehaviours,[ts.config({others:{overflowGroup:()=>WC.sketch({...i["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,h)=>{t.builtGroups.set(Ne(h,g.getSystem().build)),UR(g,d,t)},refresh:g=>UR(g,d,t),toggle:g=>{d.getOpt(g).each(h=>{Hg.toggle(h)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(Hg.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(Hg.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(h=>{Hg.reposition(h)})},getOverflow:g=>d.getOpt(g).bind(Hg.getToolbar)},domModification:{attributes:{role:"group"}}}},YI=pr({name:"SplitFloatingToolbar",configFields:uW(),partFields:dW(),factory:bW,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),XI=oe([eu(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),xn("onOpened"),xn("onClosed")].concat(zC())),JI=oe([xr({factory:Nl,schema:j0(),name:"primary"}),xr({factory:Nl,schema:j0(),name:"overflow",overrides:t=>({toolbarBehaviours:He([tc.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{Jn(s,t,"overflow-button").each(a=>{nn.off(a)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{Jn(s,t,"overflow-button").each(nn.on)}}),_t.config({mode:"acyclic",onEscape:s=>(Jn(s,t,"overflow-button").each($t.focus),R.some(!0))})])})}),_c({name:"overflow-button",overrides:t=>({buttonBehaviours:He([nn.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),_c({name:"overflow-group"})]),QI=(t,s)=>Jn(t,s,"overflow").map(tc.hasGrown).getOr(!1),WR=(t,s,a)=>{Jn(t,s,"overflow-button").each(i=>{Jn(t,s,"overflow").each(d=>{if(ZR(t,s),tc.hasShrunk(d)){const g=s.onOpened;s.onOpened=h=>{a||_t.focusIn(d),g(h),s.onOpened=g}}else{const g=s.onClosed;s.onClosed=h=>{a||$t.focus(i),g(h),s.onClosed=g}}tc.toggleGrow(d)})})},ZR=(t,s)=>{Jn(t,s,"overflow").each(a=>{GI(t,s,i=>{const d=Ne(i,g=>Ga(g));Nl.setGroups(a,d)}),Jn(t,s,"overflow-button").each(i=>{tc.hasGrown(a)&&nn.on(i)}),tc.refresh(a)})},vW=(t,s,a,i)=>{const d="alloy.toolbar.toggle",g=(h,C)=>{const S=Ne(C,h.getSystem().build);t.builtGroups.set(S)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Zs(t.splitToolbarBehaviours,[ts.config({others:{overflowGroup:h=>WC.sketch({...i["overflow-group"](),items:[Ms.sketch({...i["overflow-button"](),action:C=>{un(h,d)}})]})}}),qt("toolbar-toggle-events",[ke(d,h=>{WR(h,t,!1)})])]),apis:{setGroups:(h,C)=>{g(h,C),ZR(h,t)},refresh:h=>ZR(h,t),toggle:h=>{WR(h,t,!1)},toggleWithoutFocusing:h=>{WR(h,t,!0)},isOpen:h=>QI(h,t)},domModification:{attributes:{role:"group"}}}},cT=pr({name:"SplitSlidingToolbar",configFields:XI(),partFields:JI(),factory:vW,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),eF=t=>{const s=t.title.fold(()=>({}),a=>({attributes:{title:a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[WC.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:He([vo.config({}),$t.config({})])}},iT=t=>WC.sketch(eF(t)),tF=(t,s)=>{const a=go(i=>{const d=Ne(t.initGroups,iT);Nl.setGroups(i,d)});return He([ai.toolbarButton(()=>t.providers.checkUiComponentContext("any").shouldDisable),as(()=>t.providers.checkUiComponentContext("any")),_t.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),qt("toolbar-events",[a])])},nF=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":eF({title:R.none(),items:[]}),"overflow-button":Y$({context:"any",name:"more",icon:R.some("more-drawer"),enabled:!0,tooltip:R.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:R.none(),borderless:!1},R.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:tF(t,s)}},yW=t=>{const s=nF(t),a=4,i=YI.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return YI.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=jd(d),h=p1(d),C=jd(h),S=Math.max(h.dom.scrollHeight,C.height);return ko(g.x+a,C.y,g.width-a*2,S)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},CW=t=>{const s=cT.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=cT.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=nF(t);return cT.sketch({...i,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([Q_()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([Q_()],{type:"closed"}),t.onToggled(d,!1)}})},lT=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return Nl.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===oi.scrolling?["tox-toolbar--scrolling"]:[])},components:[Nl.parts.groups({})],toolbarBehaviours:tF(t,s)})},oF=[Xf,ri,As("tooltip"),Qs("buttonType","secondary",["primary","secondary"]),er("borderless",!1),jc("onAction"),ss("context","mode:design")],wW=[...oF,Yf,yr("type",["button"])],xW=[...oF,er("active",!1),yr("type",["togglebutton"])],jR={button:wW,togglebutton:xW},SW=[yr("type",["group"]),zu("buttons",[],Qo("type",jR))],EW=Qo("type",{...jR,group:SW}),GR=At([zu("buttons",[],EW),jc("onShow"),jc("onHide")]),_W=t=>Oo("view",GR,t),uT=(t,s)=>{var a,i;const d=t.type==="togglebutton",g=t.icon.map(ce=>tm(ce,s.icons)).map(Nn),C=ce=>{const ye=Te=>{g.map(ft=>ft.getOpt(ce).each(nt=>{zt.set(nt,[tm(Te,s.icons)])}))},we=Te=>{const ft=ce.element;Te?(rs(ft,"tox-button--enabled"),Nt(ft,"aria-pressed",!0)):(Un(ft,"tox-button--enabled"),Po(ft,"aria-pressed"))},Ge=()=>qr(ce.element,"tox-button--enabled"),ut=()=>wc(ce.element);if(d)return t.onAction({setIcon:ye,setActive:we,isActive:Ge,focus:ut});if(t.type==="button")return t.onAction({setIcon:ye})},S={...t,name:d?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:R.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},T=cR((i=t.buttonType)!==null&&i!==void 0?i:"secondary"),O=d?t.text.map(s.translate):R.some(s.translate(t.text)),P=O.map(_o),F=S.tooltip.or(O).map(ce=>({"aria-label":s.translate(ce)})).getOr({}),V=g.map(ce=>ce.asSpec()),j=Mg([V,P]),Y=t.icon.isSome()&&P.isSome(),ie={tag:"button",classes:T.concat(...t.icon.isSome()&&!Y?["tox-button--icon"]:[]).concat(...Y?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:F},X=[],ae=V_(S,R.some(C),X,ie,j,t.tooltip,s);return Ms.sketch(ae)},sF=(t,s)=>uT(t,s),rF=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Ne(t.buttons,a=>sF(a,s))}),aF=kn().deviceType,TW=aF.isPhone(),KK=aF.isTablet(),kW=t=>{let s=!1;const a=Ne(t.buttons,i=>i.type==="group"?(s=!0,rF(i,t.providers)):sF(i,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...TW||KK?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:He([$t.config({}),_t.config({mode:"flow",selector:"button, .tox-button",focusInside:Cd.OnEnterOrSpaceMode})]),components:s?a:[pu.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),pu.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},OW=t=>({uid:t.uid,behaviours:He([$t.config({}),vo.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),qR=(t,s,a,i)=>{const d={getPane:g=>Gs.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:He([$t.config({}),_t.config({mode:"cyclic",focusInside:Cd.OnEnterOrSpaceMode})]),apis:d}};var q0=pr({name:"silver.View",configFields:[Oe("viewConfig")],partFields:[Ja({factory:{sketch:kW},schema:[Oe("buttons"),Oe("providers")],name:"header"}),Ja({factory:{sketch:OW},schema:[],name:"pane"})],factory:qR,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const dT=(t,s,a)=>Xg(s,(i,d)=>{const g=Fe(_W(i));return t.slot(d,q0.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[q0.parts.header({buttons:g.buttons,providers:a})]:[],q0.parts.pane({})]}))}),cF=(t,s)=>Qr.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:dT(a,t,s),slotBehaviours:_0.unnamedEvents([go(i=>Qr.hideAllSlots(i))])})),KR=t=>Zt(Qr.getSlotNames(t),s=>Qr.isShowing(t,s)),YR=t=>{const s=t.element;Wt(s,"display","none"),Nt(s,"aria-hidden","true")},AW=t=>{const s=t.element;Qt(s,"display"),Po(s,"aria-hidden")},iF=t=>({getContainer:oe(t)}),Kp=(t,s,a)=>{Qr.getSlot(t,s).each(i=>{q0.getPane(i).each(d=>{a(i)(iF(d.element.dom))})})},lF=(t,s)=>Kp(t,s,q0.getOnShow),RW=(t,s)=>Kp(t,s,q0.getOnHide);var fT=Oa({factory:(t,s)=>{const g={setViews:(h,C)=>{zt.set(h,[cF(C,s.backstage.shared.providers)])},whichView:h=>yn.getCurrent(h).bind(KR),toggleView:(h,C,S,T)=>yn.getCurrent(h).exists(O=>{const P=KR(O),F=P.exists(j=>T===j),V=Qr.getSlot(O,T).isSome();return V&&(Qr.hideAllSlots(O),F?(YR(h),C()):(S(),AW(h),Qr.showSlot(O,T),lF(O,T)),P.each(j=>RW(O,j))),V})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:He([zt.config({}),yn.config({find:h=>{const C=zt.contents(h);return ga(C)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[Oe("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,i,d)=>t.toggleView(s,a,i,d),whichView:(t,s)=>t.whichView(s)}});const XR=(t,s,a)=>{let i=!1;const d=h=>{Gk(h,".tox-statusbar").each(C=>{Dr(C,"display")==="none"&&Jt(C,"aria-hidden")==="true"?(Qt(C,"display"),Po(C,"aria-hidden")):(Wt(C,"display","none"),Nt(C,"aria-hidden","true"))})},g={getSocket:h=>Gs.getPart(h,t,"socket"),setSidebar:(h,C,S)=>{Gs.getPart(h,t,"sidebar").each(T=>$R(T,C,S))},toggleSidebar:(h,C)=>{Gs.getPart(h,t,"sidebar").each(S=>QU(S,C))},whichSidebar:h=>Gs.getPart(h,t,"sidebar").bind(eW).getOrNull(),getHeader:h=>Gs.getPart(h,t,"header"),getToolbar:h=>Gs.getPart(h,t,"toolbar"),setToolbar:(h,C)=>{Gs.getPart(h,t,"toolbar").each(S=>{const T=Ne(C,iT);S.getApis().setGroups(S,T)})},setToolbars:(h,C)=>{Gs.getPart(h,t,"multiple-toolbar").each(S=>{const T=Ne(C,O=>Ne(O,iT));AI.setItems(S,T)})},refreshToolbar:h=>{Gs.getPart(h,t,"toolbar").each(S=>S.getApis().refresh(S))},toggleToolbarDrawer:h=>{Gs.getPart(h,t,"toolbar").each(C=>{Co(C.getApis().toggle,S=>S(C))})},toggleToolbarDrawerWithoutFocusing:h=>{Gs.getPart(h,t,"toolbar").each(C=>{Co(C.getApis().toggleWithoutFocusing,S=>S(C))})},isToolbarDrawerToggled:h=>Gs.getPart(h,t,"toolbar").bind(C=>R.from(C.getApis().isOpen).map(S=>S(C))).getOr(!1),getThrobber:h=>Gs.getPart(h,t,"throbber"),focusToolbar:h=>{Gs.getPart(h,t,"toolbar").orThunk(()=>Gs.getPart(h,t,"multiple-toolbar")).each(S=>{_t.focusIn(S)})},setMenubar:(h,C)=>{Gs.getPart(h,t,"menubar").each(S=>{PR.setMenus(S,C)})},focusMenubar:h=>{Gs.getPart(h,t,"menubar").each(C=>{PR.focus(C)})},setViews:(h,C)=>{Gs.getPart(h,t,"viewWrapper").each(S=>{fT.setViews(S,C)})},toggleView:(h,C)=>Gs.getPart(h,t,"viewWrapper").exists(S=>fT.toggleView(S,()=>g.showMainView(h),()=>g.hideMainView(h),C)),whichView:h=>Gs.getPart(h,t,"viewWrapper").bind(fT.whichView).getOrNull(),hideMainView:h=>{i=g.isToolbarDrawerToggled(h),i&&g.toggleToolbarDrawer(h),Gs.getPart(h,t,"editorContainer").each(C=>{const S=C.element;d(S),Wt(S,"display","none"),Nt(S,"aria-hidden","true")})},showMainView:h=>{i&&g.toggleToolbarDrawer(h),Gs.getPart(h,t,"editorContainer").each(C=>{const S=C.element;d(S),Qt(S,"display"),Po(S,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:g,behaviours:t.behaviours}},DW=Yi.optional({factory:PR,name:"menubar",schema:[Oe("backstage")]}),MW=t=>t.type===oi.sliding?CW:t.type===oi.floating?yW:lT,uF=Yi.optional({factory:{sketch:t=>AI.sketch({uid:t.uid,dom:t.dom,listBehaviours:He([_t.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>lT({type:t.type,uid:mt("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),R.some(!0))}),setupItem:(s,a,i,d)=>{Nl.setGroups(a,i)},shell:!0})},name:"multiple-toolbar",schema:[Oe("dom"),Oe("onEscape")]}),dF=Yi.optional({factory:{sketch:t=>{const s=MW(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),R.some(!0)),onToggled:(i,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[Oe("dom"),Oe("onEscape"),Oe("getSink")]}),mT=Yi.optional({factory:{sketch:UU},name:"header",schema:[Oe("dom")]}),JR=Yi.optional({factory:{sketch:FI},name:"promotion",schema:[Oe("dom")]}),PW=Yi.optional({name:"socket",schema:[Oe("dom")]}),NW=Yi.optional({factory:{sketch:UK},name:"sidebar",schema:[Oe("dom")]}),fF=Yi.optional({factory:{sketch:cW},name:"throbber",schema:[Oe("dom")]}),BW=Yi.optional({factory:fT,name:"viewWrapper",schema:[Oe("backstage")]}),$W=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),IW=Yi.optional({factory:{sketch:$W},name:"editorContainer",schema:[]});var no=pr({name:"OuterContainer",factory:XR,configFields:[Oe("dom"),Oe("behaviours")],partFields:[mT,DW,dF,uF,PW,NW,JR,fF,BW,IW],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,i)=>{t.setSidebar(s,a,i)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const FW="file edit view insert format tools table help",mF={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},QR=(t,s,a)=>{const i=tN(a).split(/[ ,]/);return{text:t.title,getItems:()=>_e(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:ma(i,h=>h===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},eD=t=>t.split(" "),gF=(t,s)=>{const a={...mF,...s.menus},i=Fo(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?eD(FW):eD(s.menubar===!1?"":s.menubar),g=yo(d,C=>{const S=Vn(mF,C);return i?S||it(s.menus,C).exists(T=>Vn(T,"items")):S}),h=Ne(g,C=>{const S=a[C];return QR({title:S.title,items:eD(S.items)},s,t)});return yo(h,C=>{const S=T=>J(T)||T.type!=="separator";return C.getItems().length>0&&ma(C.getItems(),S)})},hF=t=>{const s=()=>{t._skinLoaded=!0,TB(t)};return()=>{t.initialized?s():t.on("init",s)}},LW=(t,s)=>()=>hH(t,{message:s}),tD=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),nD=(t,s,a,i)=>(t.on("remove",()=>i.unloadRawCss(s)),i.loadRawCss(s,a)),pF=async(t,s)=>{const i="ui/"+bE(t).getOr("default")+"/skin.css",d=tinymce.Resource.get(i);if(J(d))nD(t,i,d,t.ui.styleSheetLoader);else{const g=t.editorManager.suffix,h=s+`/skin${g}.css`;return tD(t,h,t.ui.styleSheetLoader)}},HW=async(t,s)=>{if(La(ue.fromDom(t.getElement()))){const d="ui/"+bE(t).getOr("default")+"/skin.shadowdom.css",g=tinymce.Resource.get(d);if(J(g))nD(t,d,g,wg.DOM.styleSheetLoader);else{const h=t.editorManager.suffix,C=s+`/skin.shadowdom${h}.css`;return tD(t,C,wg.DOM.styleSheetLoader)}}},VW=async(t,s)=>{const a=()=>{const d=IO(s),g=s.editorManager.suffix;d&&s.contentCSS.push(d+(t?"/content.inline":"/content")+`${g}.css`)};bE(s).fold(a,d=>{const g="ui/"+d+(t?"/content.inline":"/content")+".css",h=tinymce.Resource.get(g);J(h)?nD(s,g,h,s.ui.styleSheetLoader):a()});const i=IO(s);if(!$O(s)&&J(i))return Promise.all([pF(s,i),HW(s,i)]).then()},bF=(t,s)=>VW(t,s).then(hF(s),LW(s,"Skin could not be loaded")),vF=An(bF,!1),zW=An(bF,!0),K0=(t,s,a)=>Mo(a)?t.translate(s):t.translate([s,t.translate(a)]),UW=(t,s)=>{const a=(h,C,S,T)=>{const O=t.shared.providers.translate(h.title);if(h.type==="separator")return R.some({type:"separator",text:O});if(h.type==="submenu"){const P=_e(h.getStyleItems(),F=>i(F,C,T));return C===0&&P.length<=0?R.none():R.some({type:"nestedmenuitem",text:O,enabled:P.length>0,getSubmenuItems:()=>_e(h.getStyleItems(),F=>i(F,C,T))})}else return R.some({type:"togglemenuitem",text:O,icon:h.icon,active:h.isSelected(T),enabled:!S,onAction:s.onAction(h),...h.getStylePreview().fold(()=>({}),P=>({meta:{style:P}}))})},i=(h,C,S)=>{const T=h.type==="formatter"&&s.isInvalid(h);return C===0?T?[]:a(h,C,!1,S).toArray():a(h,C,T,S).toArray()},d=h=>{const C=s.getCurrentValue(),S=s.shouldHide?0:1;return _e(h,T=>i(T,S,C))};return{validateItems:d,getFetch:(h,C)=>(S,T)=>{const O=C(),P=d(O),F=H0(P,Ol.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!1,search:R.none()});T(F)}}},Vg=(t,s)=>{const a=s.dataset,i=a.type==="basic"?()=>Ne(a.data,d=>hI(d,s.isSelectedFor,s.getPreviewFor)):a.getData;return{items:UW(t,s),getStyleItems:i}},Yp=(t,s,a,i,d,g)=>{const{items:h,getStyleItems:C}=Vg(s,a),S=Et(a.tooltip),T=P=>({getComponent:oe(P),setTooltip:F=>{const V=s.shared.providers.translate(F);Nt(P.element,"aria-label",V),S.set(F)}}),O=P=>{const F=V=>P.setTooltip(K0(t,i(V.value),V.value));return t.on(d,F),e_(Np(t,"NodeChange",V=>{const j=V.getComponent();a.updateText(j),Bt.set(V.getComponent(),!t.selection.isEditable())})(P),()=>t.off(d,F))};return M_({context:"mode:design",text:a.icon.isSome()?R.none():a.text,icon:a.icon,ariaLabel:R.some(a.tooltip),tooltip:R.none(),role:R.none(),fetch:h.getFetch(s,C),onSetup:O,getApi:T,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[Wo.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(a.tooltip),onShow:P=>{if(a.tooltip!==S.get()){const F=s.shared.providers.translate(S.get());Wo.setComponents(P,s.shared.providers.tooltips.getComponents({tooltipText:F}))}}})})]},"tox-tbtn",s.shared,g)},WW=t=>Ne(t,s=>{let a=s,i=s;const d=s.split("=");return d.length>1&&(a=d[0],i=d[1]),{title:a,format:i}}),ZW=t=>({type:"basic",data:t});var Y0;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(Y0||(Y0={}));const jW=(t,s)=>s===Y0.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),oD=(t,s,a)=>{const i=t.options.get(s);return{type:"basic",data:WW(jW(i,a))}},GW="Align",yF=oe("Alignment {0}"),CF="left",sD=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],rD=t=>{const s=()=>Zt(sD,C=>t.formatter.match(C.format)),a=C=>()=>t.formatter.match(C),i=C=>R.none,d=C=>{const T=s().fold(oe(CF),O=>O.title.toLowerCase());yt(C,Fg,{icon:`align-${T}`}),CH(t,{value:T})},g=ZW(sD),h=C=>()=>Zt(sD,S=>S.format===C.format).each(S=>t.execCommand(S.command));return{tooltip:K0(t,yF(),CF),text:R.none(),icon:R.some("align-left"),isSelectedFor:a,getCurrentValue:R.none,getPreviewFor:i,onAction:h,updateText:d,dataset:g,shouldHide:!1,isInvalid:C=>!t.formatter.canApply(C.format)}},gT=(t,s)=>Yp(t,s,rD(t),yF,"AlignTextUpdate","align"),aD=(t,s)=>{const a=Vg(s,rD(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(GW),onSetup:Jr(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},cD=(t,s)=>{const a=s(),i=Ne(a,d=>d.format);return R.from(t.formatter.closest(i)).bind(d=>Zt(a,g=>g.format===d))},zg="Blocks",iD=oe("Block {0}"),lD="Paragraph",wF=t=>{const s=g=>()=>t.formatter.match(g),a=g=>()=>{const h=t.formatter.get(g);return h?R.some({tag:h.length>0&&(h[0].inline||h[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(g))}):R.none()},i=g=>{const C=cD(t,()=>d.data).fold(oe(lD),S=>S.title);yt(g,Gi,{text:C}),SH(t,{value:C})},d=oD(t,"block_formats",Y0.SemiColon);return{tooltip:K0(t,iD(),lD),text:R.some(lD),icon:R.none(),isSelectedFor:s,getCurrentValue:R.none,getPreviewFor:a,onAction:DB(t),updateText:i,dataset:d,shouldHide:!1,isInvalid:g=>!t.formatter.canApply(g.format)}},qW=(t,s)=>Yp(t,s,wF(t),iD,"BlocksTextUpdate","blocks"),KW=(t,s)=>{const a=Vg(s,wF(t));t.ui.registry.addNestedMenuItem("blocks",{text:zg,onSetup:Jr(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},YW="Fonts",xF=oe("Font {0}"),uD="System Font",SF=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],EF=t=>{const s=t.split(/\s*,\s*/);return Ne(s,a=>a.replace(/^['"]+|['"]+$/g,""))},_F=(t,s)=>s.length>0&&Tu(s,a=>t.indexOf(a.toLowerCase())>-1),dD=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const a=EF(t.toLowerCase());return _F(a,SF)||_F(a,s)}else return!1},TF=t=>{const s=()=>{const S=j=>j?EF(j)[0]:"",T=t.queryCommandValue("FontName"),O=C.data,P=T?T.toLowerCase():"",F=P2(t);return{matchOpt:Zt(O,j=>{const Y=j.format;return Y.toLowerCase()===P||S(Y).toLowerCase()===S(P).toLowerCase()}).orThunk(()=>It(dD(P,F),{title:uD,format:P})),font:T}},a=S=>T=>T.exists(O=>O.format===S),i=()=>{const{matchOpt:S}=s();return S},d=S=>()=>R.some({tag:"div",styles:S.indexOf("dings")===-1?{"font-family":S}:{}}),g=S=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,S.format)})},h=S=>{const{matchOpt:T,font:O}=s(),P=T.fold(oe(O),F=>F.title);yt(S,Gi,{text:P}),LA(t,{value:P})},C=oD(t,"font_family_formats",Y0.SemiColon);return{tooltip:K0(t,xF(),uD),text:R.some(uD),icon:R.none(),isSelectedFor:a,getCurrentValue:i,getPreviewFor:d,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:jn}},XW=(t,s)=>Yp(t,s,TF(t),xF,"FontFamilyTextUpdate","fontfamily"),JW=(t,s)=>{const a=Vg(s,TF(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(YW),onSetup:Jr(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},QW={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},eZ=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),i="\\.",d=C=>`(?:${C})?`,h=`[+-]?(?:${["Infinity",t+i+d(t)+d(a),i+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${h})(.*)$`)})(),tZ=(t,s)=>ma(s,a=>ma(QW[a],i=>t===i)),ZC=(t,s)=>R.from(eZ.exec(t)).bind(i=>{const d=Number(i[1]),g=i[2];return tZ(g,s)?R.some({value:d,unit:g}):R.none()}),kF=(t,s)=>ZC(t,s).map(({value:a,unit:i})=>a+i),fD={tab:oe(9),escape:oe(27),enter:oe(13),backspace:oe(8),delete:oe(46),left:oe(37),up:oe(38),right:oe(39),down:oe(40),space:oe(32),home:oe(36),end:oe(35),pageUp:oe(33),pageDown:oe(34)},nZ=(t,s,a,i)=>{let d=R.none();const g=ce=>ce.map(ye=>rt.getValue(ye)).getOr(""),h=Np(t,"NodeChange SwitchMode",ce=>{const ye=ce.getComponent();d=R.some(ye),a.updateInputValue(ye),Bt.set(ye,!t.selection.isEditable())}),C=ce=>({getComponent:oe(ce)}),S=Et(Q),T=mt("custom-number-input-events"),O=(ce,ye,we)=>{const Ge=g(d),ut=a.getNewValue(Ge,ce),Te=Ge.length-`${ut}`.length,ft=d.map(ht=>ht.element.dom.selectionStart-Te),nt=d.map(ht=>ht.element.dom.selectionEnd-Te);a.onAction(ut,we),d.each(ht=>{rt.setValue(ht,ut),ye&&(ft.each(gn=>ht.element.dom.selectionStart=gn),nt.each(gn=>ht.element.dom.selectionEnd=gn))})},P=(ce,ye)=>O((we,Ge)=>we-Ge,ce,ye),F=(ce,ye)=>O((we,Ge)=>we+Ge,ce,ye),V=ce=>pi(ce.element).fold(R.none,ye=>(wc(ye),R.some(!0))),j=ce=>kf(ce.element)?(b1(ce.element).each(ye=>wc(ye)),R.some(!0)):R.none(),Y=(ce,ye,we,Ge)=>{const ut=Et(Q),Te=s.shared.providers.translate(we),ft=mt("altExecuting"),nt=Np(t,"NodeChange SwitchMode",gn=>{Bt.set(gn.getComponent(),!t.selection.isEditable())}),ht=gn=>{Bt.isDisabled(gn)||ce(!0)};return Ms.sketch({dom:{tag:"button",attributes:{"aria-label":Te,"data-mce-name":ye},classes:Ge.concat(ye)},components:[W3(ye,s.shared.providers.icons)],buttonBehaviours:He([Bt.config({}),Wo.config(s.shared.providers.tooltips.getConfig({tooltipText:Te})),qt(ft,[Rg({onSetup:nt,getApi:C},ut),Dg({getApi:C},ut),ke(pc(),(gn,lo)=>{(lo.event.raw.keyCode===fD.space()||lo.event.raw.keyCode===fD.enter())&&(Bt.isDisabled(gn)||ce(!1))}),ke(sf(),ht),ke(nf(),ht)])]),eventOrder:{[pc()]:[ft,"keying"],[sf()]:[ft,"alloy.base.behaviour"],[nf()]:[ft,"alloy.base.behaviour"],[ia()]:["alloy.base.behaviour",ft,"tooltipping"],[Za()]:[ft,"tooltipping"]}})},ie=Nn(Y(ce=>P(!1,ce),"minus","Decrease font size",[])),X=Nn(Y(ce=>F(!1,ce),"plus","Increase font size",[])),ae=Nn({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[fu.sketch({inputBehaviours:He([Bt.config({}),qt(T,[Rg({onSetup:h,getApi:C},S),Dg({getApi:C},S)]),qt("input-update-display-text",[ke(Gi,(ce,ye)=>{rt.setValue(ce,ye.event.text)}),ke(Ww(),ce=>{a.onAction(rt.getValue(ce))}),ke(gl(),ce=>{a.onAction(rt.getValue(ce))})]),_t.config({mode:"special",onEnter:ce=>(O(rn,!0,!0),R.some(!0)),onEscape:V,onUp:ce=>(F(!0,!1),R.some(!0)),onDown:ce=>(P(!0,!1),R.some(!0)),onLeft:(ce,ye)=>(ye.cut(),R.none()),onRight:(ce,ye)=>(ye.cut(),R.none())})])})],behaviours:He([$t.config({}),_t.config({mode:"special",onEnter:j,onSpace:j,onEscape:V}),qt("input-wrapper-events",[ke(Gc(),ce=>{dt([ie,X],ye=>{const we=ue.fromDom(ye.get(ce).element.dom);kf(we)&&Xm(we)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...Vt(i)?{"data-mce-name":i}:{}}},components:[ie.asSpec(),ae.asSpec(),X.asSpec()],behaviours:He([$t.config({}),_t.config({mode:"flow",focusInside:Cd.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:ce=>kf(ce.element)?R.none():(wc(ce.element),R.some(!0))})])}},OF="Font sizes",AF=oe("Font size {0}"),RF="12pt",oZ={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},DF={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},sZ=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},MF=(t,s)=>/[0-9.]+px$/.test(t)?sZ(parseInt(t,10)*72/96,s||0)+"pt":it(DF,t).getOr(t),rZ=t=>it(oZ,t).getOr(""),PF=t=>{const s=()=>{let S=R.none();const T=C.data,O=t.queryCommandValue("FontSize");if(O)for(let P=3;S.isNone()&&P>=0;P--){const F=MF(O,P),V=rZ(F);S=Zt(T,j=>j.format===O||j.format===F||j.format===V)}return{matchOpt:S,size:O}},a=S=>T=>T.exists(O=>O.format===S),i=()=>{const{matchOpt:S}=s();return S},d=oe(R.none),g=S=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,S.format)})},h=S=>{const{matchOpt:T,size:O}=s(),P=T.fold(oe(O),F=>F.title);yt(S,Gi,{text:P}),wH(t,{value:P})},C=oD(t,"font_size_formats",Y0.Space);return{tooltip:K0(t,AF(),RF),text:R.some(RF),icon:R.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:i,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:jn}},aZ=(t,s)=>Yp(t,s,PF(t),AF,"FontSizeTextUpdate","fontsize"),cZ=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},iZ=16,lZ=t=>t>=0,uZ=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:i=>yt(i,Gi,{text:s()}),onAction:(i,d)=>t.execCommand("FontSize",!1,i,{skip_focus:!d}),getNewValue:(i,d)=>{ZC(i,["unsupportedLength","empty"]);const g=s(),h=ZC(i,["unsupportedLength","empty"]).or(ZC(g,["unsupportedLength","empty"])),C=h.map(F=>F.value).getOr(iZ),S=rN(t),T=h.map(F=>F.unit).filter(F=>F!=="").getOr(S),O=d(C,cZ(T).step),P=`${lZ(O)?O:C}${T}`;return P!==g&&xH(t,{value:P}),P}}},NF=(t,s)=>nZ(t,s,uZ(t),"fontsizeinput"),dZ=(t,s)=>{const a=Vg(s,PF(t));t.ui.registry.addNestedMenuItem("fontsize",{text:OF,onSetup:Jr(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},fZ="Formats",BF=t=>Mo(t)?"Formats":"Format {0}",$F=(t,s)=>{const a="Formats",i=h=>()=>t.formatter.match(h),d=h=>()=>{const C=t.formatter.get(h);return C!==void 0?R.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(h))}):R.none()},g=h=>{const C=P=>Z_(P)?_e(P.items,C):xR(P)?[{title:P.title,format:P.format}]:[],S=_e(gI(t),C),O=cD(t,oe(S)).fold(oe({title:a,tooltipLabel:""}),P=>({title:P.title,tooltipLabel:P.title}));yt(h,Gi,{text:O.title}),yH(t,{value:O.tooltipLabel})};return{tooltip:K0(t,BF(""),""),text:R.some(a),icon:R.none(),isSelectedFor:i,getCurrentValue:R.none,getPreviewFor:d,onAction:DB(t),updateText:g,shouldHide:QP(t),isInvalid:h=>!t.formatter.canApply(h.format),dataset:s}},mZ=(t,s)=>{const a={type:"advanced",...s.styles};return Yp(t,s,$F(t,a),BF,"StylesTextUpdate","styles")},gZ=(t,s)=>{const a={type:"advanced",...s.styles},i=Vg(s,$F(t,a));t.ui.registry.addNestedMenuItem("styles",{text:fZ,onSetup:Jr(t),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},hZ=oe([Oe("toggleClass"),Oe("fetch"),vf("onExecute"),fe("getHotspot",R.some),fe("getAnchorOverrides",oe({})),ld(),vf("onItemExecute"),Pn("lazySink"),Oe("dom"),xn("onOpen"),Ws("splitDropdownBehaviours",[ts,_t,$t]),fe("matchWidth",!1),fe("useMinWidth",!1),fe("eventOrder",{}),Pn("role"),Pn("listRole")].concat(a_())),IF=xr({factory:Ms,schema:[Oe("dom")],name:"arrow",defaults:()=>({buttonBehaviours:He([$t.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(qu)},buttonBehaviours:He([nn.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),pZ=xr({factory:Ms,schema:[Oe("dom")],name:"button",defaults:()=>({buttonBehaviours:He([$t.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),bZ=oe([IF,pZ,Ja({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Oe("text")],name:"aria-descriptor"}),_c({schema:[yl()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(i=>{t.onItemExecute(i,s,a)})}})}),s5()]),FF=(t,s,a,i)=>{const d=O=>{yn.getCurrent(O).each(P=>{qe.highlightFirst(P),_t.focusIn(P)})},g=O=>{qA(t,rn,O,i,d,Ra.HighlightMenuAndItem).get(Q)},h=O=>(g(O),R.some(!0)),C=O=>{const P=at(O,t,"button");return qu(P),R.some(!0)},S={...zn([go((O,P)=>{Jn(O,t,"aria-descriptor").each(V=>{const j=mt("aria");Nt(V.element,"id",j),Nt(O.element,"aria-describedby",j)})})]),...R2(R.some(g))},T={repositionMenus:O=>{nn.isOn(O)&&XA(O)}};return{uid:t.uid,dom:t.dom,components:s,apis:T,eventOrder:{...t.eventOrder,[nr()]:["disabling","toggling","alloy.base.behaviour"]},events:S,behaviours:Zs(t.splitDropdownBehaviours,[ts.config({others:{sandbox:O=>{const P=at(O,t,"arrow");return YA(t,O,{onOpen:()=>{nn.on(P),nn.on(O)},onClose:()=>{nn.off(P),nn.off(O)}})}}}),_t.config({mode:"special",onSpace:C,onEnter:C,onDown:h}),$t.config({}),nn.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},hT=pr({name:"SplitDropdown",configFields:hZ(),partFields:bZ(),factory:FF,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),mD=t=>({isEnabled:()=>!Bt.isDisabled(t),setEnabled:s=>Bt.set(t,!s),setText:s=>yt(t,Gi,{text:s}),setIcon:s=>yt(t,Fg,{icon:s})}),LF=t=>({setActive:s=>{nn.set(t,s)},isActive:()=>nn.isOn(t),isEnabled:()=>!Bt.isDisabled(t),setEnabled:s=>Bt.set(t,!s),setText:s=>yt(t,Gi,{text:s}),setIcon:s=>yt(t,Fg,{icon:s})}),HF=(t,s)=>t.map(a=>({"aria-label":s.translate(a)})).getOr({}),VF=mt("focus-button"),gD=(t,s,a,i,d,g,h)=>{const C=s.map(T=>Nn(Z3(T,"tox-tbtn",d))),S=t.map(T=>Nn(tm(T,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...HF(a,d),...Vt(h)?{"data-mce-name":h}:{}}},components:Mg([S.map(T=>T.asSpec()),C.map(T=>T.asSpec())]),eventOrder:{[Wa()]:["focusing","alloy.base.behaviour",Zp],[ia()]:[Zp,"toolbar-group-button-events"]},buttonBehaviours:He([ai.toolbarButton(()=>d.checkUiComponentContext(g).shouldDisable),as(()=>d.checkUiComponentContext(g)),qt(Zp,[go((T,O)=>D_(T)),ke(Gi,(T,O)=>{C.bind(P=>P.getOpt(T)).each(P=>{zt.set(P,[_o(d.translate(O.event.text))])})}),ke(Fg,(T,O)=>{S.bind(P=>P.getOpt(T)).each(P=>{zt.set(P,[tm(O.event.icon,d.icons)])})}),ke(Wa(),(T,O)=>{O.event.prevent(),un(T,VF)})])].concat(i.getOr([])))}},X0=(t,s,a,i,d)=>{const g=s.shared,h=Et(Q),C={toolbarButtonBehaviours:[],getApi:mD,onSetup:t.onSetup},S=[qt("toolbar-group-button-events",[Rg(C,h),Dg(C,h)])];return Hg.sketch({lazySink:g.getSink,fetch:()=>Fr.nu(T=>{T(Ne(a(t.items),iT))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:gD(t.icon,t.text,t.tooltip,R.some(S),g.providers,t.context,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},zF=(t,s,a,i)=>{var d;const g=Et(Q),h=gD(t.icon,t.text,t.tooltip,R.none(),a,t.context,i);return Ms.sketch({dom:h.dom,components:h.components,eventOrder:v$,buttonBehaviours:{...He([qt("toolbar-button-events",[b$({onAction:t.onAction,getApi:s.getApi}),Rg(s,g),Dg(s,g)]),...t.tooltip.map(C=>Wo.config(a.tooltips.getConfig({tooltipText:a.translate(C)+t.shortcut.map(S=>` (${TA(S)})`).getOr("")}))).toArray(),ai.toolbarButton(()=>!t.enabled||a.checkUiComponentContext(t.context).shouldDisable),as(()=>a.checkUiComponentContext(t.context))].concat(s.toolbarButtonBehaviours)),[Zp]:(d=h.buttonBehaviours)===null||d===void 0?void 0:d[Zp]}})},vZ=(t,s,a)=>UF(t,s,[],a),UF=(t,s,a,i)=>zF(t,{toolbarButtonBehaviours:a.length>0?[qt("toolbarButtonWith",a)]:[],getApi:mD,onSetup:t.onSetup},s,i),yZ=(t,s,a)=>WF(t,s,[],a),WF=(t,s,a,i)=>zF(t,{toolbarButtonBehaviours:[zt.config({}),nn.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[qt("toolbarToggleButtonWith",a)]:[]),getApi:LF,onSetup:t.onSetup},s,i),CZ=(t,s,a)=>i=>Fr.nu(d=>s.fetch(d)).map(d=>R.from(O0(Uo(WA(mt("menu-value"),d,g=>{s.onItemAction(t(i),g)},s.columns,s.presets,Ol.CLOSE_ON_EXECUTE,s.select.getOr(jn),a),{movement:s_(s.columns,s.presets),menuBehaviours:_0.unnamedEvents(s.columns!=="auto"?[]:[go((g,h)=>{EA(g,4,LN(s.presets)).each(({numRows:C,numColumns:S})=>{_t.setGridSize(g,C,S)})})])})))),wZ=(t,s,a)=>{const i=Et(t.tooltip.getOr("")),d=C=>({isEnabled:()=>!Bt.isDisabled(C),setEnabled:S=>Bt.set(C,!S),setIconFill:(S,T)=>{bo(C.element,`svg path[class="${S}"], rect[class="${S}"]`).each(O=>{Nt(O,"fill",T)})},setActive:S=>{Nt(C.element,"aria-pressed",S),bo(C.element,"span").each(T=>{C.getSystem().getByDom(T).each(O=>nn.set(O,S))})},isActive:()=>bo(C.element,"span").exists(S=>C.getSystem().getByDom(S).exists(nn.isOn)),setText:S=>bo(C.element,"span").each(T=>C.getSystem().getByDom(T).each(O=>yt(O,Gi,{text:S}))),setIcon:S=>bo(C.element,"span").each(T=>C.getSystem().getByDom(T).each(O=>yt(O,Fg,{icon:S}))),setTooltip:S=>{const T=s.providers.translate(S);Nt(C.element,"aria-label",T),i.set(S)}}),g=Et(Q),h={getApi:d,onSetup:t.onSetup};return hT.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...HF(t.tooltip,s.providers),...Vt(a)?{"data-mce-name":a}:{}}},onExecute:C=>{const S=d(C);S.isEnabled()&&t.onAction(S)},onItemExecute:(C,S,T)=>{},splitDropdownBehaviours:He([qt("split-dropdown-events",[go((C,S)=>D_(C)),ke(VF,$t.focus),Rg(h,g),Dg(h,g)]),ai.splitButton(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),as(()=>s.providers.checkUiComponentContext(t.context)),N0.config({}),...t.tooltip.map(C=>Wo.config({...s.providers.tooltips.getConfig({tooltipText:s.providers.translate(C),onShow:S=>{if(i.get()!==C){const T=s.providers.translate(i.get());Wo.setComponents(S,s.providers.tooltips.getComponents({tooltipText:T}))}}})})).toArray()]),eventOrder:{[ia()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[Za()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:CZ(d,t,s.providers),parts:{menu:q2(!1,t.columns,t.presets)},components:[hT.parts.button(gD(t.icon,t.text,R.none(),R.some([nn.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),ai.toolbarButton(jn),as(oe({contextType:"any",shouldDisable:!1}))]),s.providers,t.context)),hT.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:tA("chevron-down",s.providers.icons)},buttonBehaviours:He([ai.splitButton(jn),as(oe({contextType:"any",shouldDisable:!1}))])}),hT.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},xZ=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],Xp=(t,s)=>(a,i,d,g)=>{const h=t(a).mapError(C=>Qd(C)).getOrDie();return s(h,i,d,g)},SZ={button:Xp(X2,(t,s,a,i)=>vZ(t,s.shared.providers,i)),togglebutton:Xp(Q2,(t,s,a,i)=>yZ(t,s.shared.providers,i)),menubutton:Xp($I,(t,s,a,i)=>Gp(t,"tox-tbtn",s,R.none(),!1,i)),splitbutton:Xp(jU,(t,s,a,i)=>wZ(t,s.shared,i)),grouptoolbarbutton:Xp(WU,(t,s,a,i)=>{const d=a.ui.registry.getAll().buttons,g=C=>pT(a,{buttons:d,toolbar:C,allowToolbarGroups:!1},s,R.none()),h={[oS]:s.shared.header.isPositionedAtTop()?fs.TopToBottom:fs.BottomToTop};switch(xg(a)){case oi.floating:return X0(t,s,g,h,i);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},EZ=(t,s,a,i)=>it(SZ,t.type).fold(()=>(console.error("skipping button defined by",t),R.none()),d=>R.some(d(t,s,a,i))),hD={styles:mZ,fontsize:aZ,fontsizeinput:NF,fontfamily:XW,blocks:qW,align:gT},ZF=t=>{const s=Ne(xZ,a=>{const i=yo(a.items,d=>Vn(t,d)||Vn(hD,d));return{name:a.name,items:i}});return yo(s,a=>a.items.length>0)},_Z=t=>{const s=t.split("|");return Ne(s,a=>({items:a.trim().split(" ")}))},TZ=t=>En(t,s=>Vn(s,"name")&&Vn(s,"items")),kZ=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?ZF(a):J(s)?_Z(s):TZ(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},OZ=(t,s,a,i,d,g)=>it(s,a.toLowerCase()).orThunk(()=>g.bind(h=>ir(h,C=>it(s,C+a.toLowerCase())))).fold(()=>it(hD,a.toLowerCase()).map(h=>h(t,d)),h=>h.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),R.none()):EZ(h,d,t,a.toLowerCase())),pT=(t,s,a,i)=>{const d=kZ(s),g=Ne(d,h=>{const C=_e(h.items,S=>S.trim().length===0?[]:OZ(t,s.buttons,S,s.allowToolbarGroups,a,i).toArray());return{title:R.from(t.translate(h.name)),items:C}});return yo(g,h=>h.items.length>0)},jF=(t,s,a,i)=>{const d=s.mainUi.outerContainer,g=a.toolbar,h=a.buttons;if(En(g,J)){const C=g.map(S=>{const T={toolbar:S,buttons:h,allowToolbarGroups:a.allowToolbarGroups};return pT(t,T,i,R.none())});no.setToolbars(d,C)}else no.setToolbar(d,pT(t,a,i,R.none()))},pD=kn(),AZ=pD.os.isiOS()&&pD.os.version.major<=12,RZ=(t,s)=>{const{uiMotherships:a}=s,i=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,h=Et(No(d.innerWidth,d.innerHeight)),C=Et(No(g.offsetWidth,g.offsetHeight)),S=()=>{const F=h.get();(F.left!==d.innerWidth||F.top!==d.innerHeight)&&(h.set(No(d.innerWidth,d.innerHeight)),FA(t))},T=()=>{const F=t.getDoc().documentElement,V=C.get();(V.left!==F.offsetWidth||V.top!==F.offsetHeight)&&(C.set(No(F.offsetWidth,F.offsetHeight)),FA(t))},O=F=>{bH(t,F)};i.bind(d,"resize",S),i.bind(d,"scroll",O);const P=By(ue.fromDom(t.getBody()),"load",T);t.on("hide",()=>{dt(a,F=>{Wt(F.element,"display","none")})}),t.on("show",()=>{dt(a,F=>{Qt(F.element,"display")})}),t.on("NodeChange",T),t.on("remove",()=>{P.unbind(),i.unbind(d,"resize",S),i.unbind(d,"scroll",O),d=null})},DZ=(t,s,a)=>{Kf(t)&&l2(a.mainUi.mothership.element,a.popupUi.mothership),ka(s,a.dialogUi.mothership)};var bT=Object.freeze({__proto__:null,render:(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:h}=s,C=Et(0),S=g.outerContainer;vF(t);const T=ue.fromDom(d.targetNode),O=Vd(lr(T));l2(T,g.mothership),DZ(t,O,s),t.on("PostRender",()=>{no.setSidebar(S,a.sidebar,BO(t))}),t.on("SkinLoaded",()=>{jF(t,s,a,i),C.set(t.getWin().innerWidth),no.setMenubar(S,gF(t,a)),no.setViews(S,a.views),RZ(t,s)});const P=no.getSocket(S).getOrDie("Could not find expected socket element");if(AZ){Zl(P.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const Y=Vz(()=>{t.dispatch("ScrollContent")},20),ie=Kr(P.element,"scroll",Y.throttle);t.on("remove",ie.unbind)}mB(t,s),t.addCommand("ToggleSidebar",(Y,ie)=>{no.toggleSidebar(S,ie),AB(t)}),t.addQueryValueHandler("ToggleSidebar",()=>{var Y;return(Y=no.whichSidebar(S))!==null&&Y!==void 0?Y:""}),t.addCommand("ToggleView",(Y,ie)=>{if(no.toggleView(S,ie)){const X=S.element;g.mothership.broadcastOn([cu()],{target:X}),dt(h,ae=>{ae.broadcastOn([cu()],{target:X})}),pt(no.whichView(S))&&(t.focus(),t.nodeChanged(),no.refreshToolbar(S)),RB(t)}}),t.addQueryValueHandler("ToggleView",()=>{var Y;return(Y=no.whichView(S))!==null&&Y!==void 0?Y:""});const F=xg(t),V=()=>{no.refreshToolbar(s.mainUi.outerContainer)};(F===oi.sliding||F===oi.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const Y=t.getWin().innerWidth;Y!==C.get()&&(V(),C.set(Y))});const j={setEnabled:Y=>{sC(s,Y?"setEnabled":"setDisabled")},isEnabled:()=>!Bt.isDisabled(S)};return{iframeContainer:P.element.dom,editorContainer:S.element.dom,api:j}}});const GF=t=>/^[0-9\.]+(|px)$/i.test(""+t)?R.some(parseInt(""+t,10)):R.none(),J0=t=>sn(t)?t+"px":t,Jp=(t,s,a)=>{const i=s.filter(g=>t<g),d=a.filter(g=>t>g);return i.or(d).getOr(t)},qF=t=>{const s=_O(t),a=wp(t),i=uE(t);return GF(s).map(d=>Jp(d,a,i))},MZ=t=>qF(t).getOr(_O(t)),KF=t=>{const s=M2(t),a=TO(t),i=xp(t);return GF(s).map(d=>Jp(d,a,i))},PZ=t=>KF(t).getOr(M2(t)),{ToolbarLocation:bD,ToolbarMode:YF}=o7,vT=40,XF=(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:h}=a,C=wg.DOM,S=Tl(t),T=Sg(t),O=xp(t).or(KF(t)),P=i.shared.header,F=P.isPositionedAtTop,V=150,j=xg(t),Y=j===YF.sliding||j===YF.floating,ie=Et(!1),X=()=>ie.get()&&!t.removed,ae=vt=>Y?vt.fold(oe(0),$e=>$e.components().length>1?ps($e.components()[1].element):0):0,ce=vt=>{switch(dE(t)){case bD.auto:const $e=no.getToolbar(g.outerContainer),et=ae($e),Lt=ps(vt.element)-et,tn=zo(s);if(tn.y>Lt)return"top";{const jt=p1(s),Yn=Math.max(jt.dom.scrollHeight,ps(jt));return tn.bottom<Yn-Lt||Is().bottom<tn.bottom-Lt?"bottom":"top"}case bD.bottom:return"bottom";case bD.top:default:return"top"}},ye=vt=>{d.on($e=>{ro.setModes($e,[vt]),P.setDockingMode(vt);const et=F()?fs.TopToBottom:fs.BottomToTop;Nt($e.element,oS,et)})},we=()=>{d.on(vt=>{const $e=O.getOrThunk(()=>wm().width-Ru(s).left-10);Wt(vt.element,"max-width",$e+"px")})},Ge=(vt,$e)=>{d.on(et=>{const Lt=no.getToolbar(g.outerContainer),tn=ae(Lt),St=zo(s),jt=ut(t,g.outerContainer.element),Yn=()=>jt.fold(()=>St.x,Vr=>{const mi=zo(Vr);return qn(Vr,bi())?St.x:St.x-mi.x}),Zn=()=>jt.fold(()=>F()?Math.max(St.y-ps(et.element)+tn,0):St.bottom,Vr=>{var mi;const gi=zo(Vr),$l=(mi=Vr.dom.scrollTop)!==null&&mi!==void 0?mi:0,Dd=qn(Vr,bi())?Math.max(St.y-ps(et.element)+tn,0):St.y-gi.y+$l-ps(et.element)+tn;return F()?Dd:St.bottom}),rc=Yn(),Do=It(vt,Math.ceil(g.outerContainer.element.dom.getBoundingClientRect().width)).filter(Vr=>Vr>V).map(Vr=>{const mi=$e.getOr(Zr()),gi=window.innerWidth-(rc-mi.left),$l=Math.max(Math.min(Vr,gi),V);return gi<Vr&&Wt(g.outerContainer.element,"width",$l+"px"),{width:$l+"px"}}).getOr({width:"max-content"}),fi={position:"absolute",left:Math.round(rc)+"px",top:Zn()+"px"};Zl(g.outerContainer.element,{...fi,...Do})})},ut=(vt,$e)=>Kf(vt)?$m($e):R.none(),Te=()=>{dt(h,vt=>{vt.broadcastOn([pd()],{})})},ft=()=>!S&&(Vo(g.outerContainer.element).left+Tn(g.outerContainer.element)>=window.innerWidth-vT||Xo(g.outerContainer.element,"width").isSome())?(Wt(g.outerContainer.element,"position","absolute"),Wt(g.outerContainer.element,"left","0px"),Qt(g.outerContainer.element,"width"),!0):!1,nt=vt=>{if(!X())return;S||we();const $e=Zr(),et=S?!1:ft();if(Y&&no.refreshToolbar(g.outerContainer),!S){const Lt=Zr(),tn=It($e.left!==Lt.left,$e);Ge(et,tn),tn.each(St=>{Cm(St.left,Lt.top)})}T&&d.on(vt),Te()},ht=()=>S||!T||!X()?!1:d.get().exists(vt=>{const $e=P.getDockingMode(),et=ce(vt);return et!==$e?(ye(et),!0):!1});return{isVisible:X,isPositionedAtTop:F,show:()=>{ie.set(!0),Wt(g.outerContainer.element,"display","flex"),C.addClass(t.getBody(),"mce-edit-focus"),dt(h,vt=>{Qt(vt.element,"display")}),ht(),Kf(t)?nt(vt=>ro.isDocked(vt)?ro.reset(vt):ro.refresh(vt)):nt(ro.refresh)},hide:()=>{ie.set(!1),Wt(g.outerContainer.element,"display","none"),C.removeClass(t.getBody(),"mce-edit-focus"),dt(h,vt=>{Wt(vt.element,"display","none")})},update:nt,updateMode:()=>{ht()&&nt(ro.reset)},repositionPopups:Te}},vD=(t,s)=>{const a=zo(t);return{pos:s?a.y:a.bottom,bounds:a}},JF=(t,s,a,i)=>{const d=Et(vD(s,a.isPositionedAtTop())),g=T=>{const{pos:O,bounds:P}=vD(s,a.isPositionedAtTop()),{pos:F,bounds:V}=d.get(),j=P.height!==V.height||P.width!==V.width;d.set({pos:O,bounds:P}),j&&FA(t,T),a.isVisible()&&(F!==O?a.update(ro.reset):j&&(a.updateMode(),a.repositionPopups()))};i||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(ro.reset)),t.on("NodeChange keydown",T=>{requestAnimationFrame(()=>g(T))});let h=0;const C=T_(()=>a.update(ro.refresh),33);t.on("ScrollWindow",()=>{const T=Zr().left;T!==h&&(h=T,C.throttle()),a.updateMode()}),Kf(t)&&t.on("ElementScroll",T=>{a.update(ro.refresh)});const S=gc();S.set(By(ue.fromDom(t.getBody()),"load",T=>g(T.raw))),t.on("remove",()=>{S.clear()})};var BZ=Object.freeze({__proto__:null,render:(t,s,a,i,d)=>{const{mainUi:g}=s,h=In(),C=ue.fromDom(d.targetNode),S=XF(t,C,s,i,h),T=RO(t);zW(t);const O=()=>{if(h.isSet()){S.show();return}h.set(no.getHeader(g.outerContainer).getOrDie());const F=LO(t);Kf(t)?(l2(C,g.mothership),l2(C,s.popupUi.mothership)):ka(F,g.mothership),ka(F,s.dialogUi.mothership);const V=()=>{jF(t,s,a,i),no.setMenubar(g.outerContainer,gF(t,a)),S.show(),JF(t,C,S,T),t.nodeChanged()};T?t.once("SkinLoaded",V):V()};t.on("show",O),t.on("hide",S.hide),T||(t.on("focus",O),t.on("blur",S.hide)),t.on("init",()=>{(t.hasFocus()||T)&&O()}),mB(t,s);const P={show:O,hide:S.hide,setEnabled:F=>{sC(s,F?"setEnabled":"setDisabled")},isEnabled:()=>!Bt.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:P}}});const QF=()=>{const t=In(),s=In(),a=In();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const g=t.get().map(C=>C.mothership),h=s.get().map(C=>C.mothership);return g.fold(()=>h.toArray(),C=>h.fold(()=>[C],S=>qn(C.element,S.element)?[C]:[C,S]))},lazyGetInOuterOrDie:(g,h)=>()=>a.get().bind(C=>h(C.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},$Z="contexttoolbar-show",e6="contexttoolbar-hide",IZ=t=>({hide:()=>un(t,Vs()),getValue:()=>rt.getValue(t)}),t6=(t,s)=>ke(R_,(a,i)=>{const d=t.get(a),g=IZ(d);s.onAction(g,i.event.buttonApi)}),FZ=(t,s,a)=>{const{primary:i,...d}=s.original,g=Fe(X2({...d,type:"button",onAction:Q}));return UF(g,a,[t6(t,s)])},jC=(t,s,a)=>{const{primary:i,...d}=s.original,g=Fe(Q2({...d,type:"togglebutton",onAction:Q}));return WF(g,a,[t6(t,s)])},LZ=t=>t.type==="contextformtogglebutton",HZ=(t,s,a)=>LZ(s)?jC(t,s,a):FZ(t,s,a),VZ=(t,s,a)=>{const i=Ne(s,h=>Nn(HZ(t,h,a)));return{asSpecs:()=>Ne(i,h=>h.asSpec()),findPrimary:h=>ir(s,(C,S)=>C.primary?R.from(i[S]).bind(T=>T.getOpt(h)).filter(De(Bt.isDisabled)):R.none())}},yD=(t,s)=>{const a=t.label.fold(()=>({}),g=>({"aria-label":g})),i=Nn(fu.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:He([Bt.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),as(()=>s.checkUiComponentContext("mode:design")),_t.config({mode:"special",onEnter:g=>d.findPrimary(g).map(h=>(qu(h),!0)),onLeft:(g,h)=>(h.cut(),R.none()),onRight:(g,h)=>(h.cut(),R.none())})])})),d=VZ(i,t.commands,s);return[{title:R.none(),items:[i.asSpec()]},{title:R.none(),items:d.asSpecs()}]},n6={renderContextForm:(t,s,a)=>lT({type:t,uid:mt("context-toolbar"),initGroups:yD(s,a),onEscape:R.none,cyclicKeying:!0,providers:a}),buildInitGroups:yD},o6=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,zZ=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=yv(ue.fromDom(t.startContainer),t.startOffset).element;return($a(a)?Ic(a):R.some(a)).filter(oo).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},CD=t=>{const s=t.selection.getRng(),a=zZ(s);if(t.inline){const i=Zr();return ko(i.left+a.left,i.top+a.top,a.width,a.height)}else{const i=jd(ue.fromDom(t.getBody()));return ko(i.x+a.left,i.y+a.top,a.width,a.height)}},UZ=(t,s)=>s.filter(a=>uc(a)&&hm(a)).map(jd).getOrThunk(()=>CD(t)),WZ=(t,s,a)=>{const i=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:i,width:d-i}},GC=(t,s,a,i,d,g)=>{const h=ue.fromDom(t.getContainer()),C=bo(h,".tox-editor-header").getOr(h),S=zo(C),T=S.y>=s.bottom,O=i&&!T;if(t.inline&&O)return{y:Math.max(S.bottom+g,a.y),bottom:a.bottom};if(t.inline&&!O)return{y:a.y,bottom:Math.min(S.y-g,a.bottom)};const P=d==="line"?zo(h):s;return O?{y:Math.max(S.bottom+g,a.y),bottom:Math.min(P.bottom-g,a.bottom)}:{y:Math.max(P.y+g,a.y),bottom:Math.min(S.y-g,a.bottom)}},wD=(t,s,a,i=0)=>{const d=wm(window),g=zo(ue.fromDom(t.getContentAreaContainer())),h=pE(t)||vE(t)||N2(t),{x:C,width:S}=WZ(g,d,i);if(t.inline&&!h)return ko(C,d.y,S,d.height);{const T=s.header.isPositionedAtTop(),{y:O,bottom:P}=GC(t,g,d,T,a,i);return ko(C,O,S,P-O)}},yT=12,s6={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},xD={maxHeightFunction:id(),maxWidthFunction:Mc()},SD=(t,s)=>{const a=t.selection.getRng(),i=yv(ue.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&qn(i.element,s)},r6=(t,s,a)=>{const i=Xo(t,"position");Wt(t,"position",s);const d=a(t);return i.each(g=>Wt(t,"position",g)),d},ED=t=>t==="node",ZZ=(t,s,a,i,d)=>{const g=CD(t),h=i.lastElement().exists(C=>qn(a,C));if(SD(t,a))return h?CR:Ki;if(h)return r6(s,i.getMode(),()=>o6(g,zo(s),-20)&&!i.isReposition()?Q9:CR);{const C=i.getMode()==="fixed"?d.y+Zr().top:d.y,S=ps(s)+yT;return C+S<=g.y?Ki:Lg}},Q0=(t,s,a,i)=>{const d=S=>(T,O,P,F,V)=>{const j=ZZ(t,F,S,a,V),Y={...T,y:V.y,height:V.height};return{...j(Y,O,P,F,V),alwaysFit:!0}},g=S=>ED(i)?[d(S)]:[];return s?{onLtr:S=>[ds,vs,ys,or,Cs,Ln].concat(g(S)),onRtl:S=>[ds,ys,vs,Cs,or,Ln].concat(g(S))}:{onLtr:S=>[Ln,ds,or,vs,Cs,ys].concat(g(S)),onRtl:S=>[Ln,ds,Cs,ys,or,vs].concat(g(S))}},CT=(t,s,a,i)=>s==="line"?{bubble:ti(yT,0,s6),layouts:{onLtr:()=>[xb],onRtl:()=>[Ay]},overrides:xD}:{bubble:ti(0,yT,s6,1/yT),layouts:Q0(t,a,i,s),overrides:xD},ev=(t,s)=>{const a=yo(s,g=>g.predicate(t.dom)),{pass:i,fail:d}=um(a,g=>g.type==="contexttoolbar");return{contextToolbars:i,contextForms:d}},_D=t=>{if(t.length<=1)return t;{const s=g=>ma(t,h=>h.position===g),a=g=>yo(t,h=>h.position===g),i=s("selection"),d=s("node");if(i||d)if(d&&i){const g=a("node"),h=Ne(a("selection"),C=>({...C,position:"node"}));return g.concat(h)}else return a(i?"selection":"node");else return a("line")}},TD=t=>{if(t.length<=1)return t;{const s=i=>Zt(t,d=>d.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>yo(t,d=>d.position===i))}},a6=(t,s,a)=>{const i=ev(t,s);if(i.contextForms.length>0)return R.some({elem:t,toolbars:[i.contextForms[0]]});{const d=ev(t,a);if(d.contextForms.length>0)return R.some({elem:t,toolbars:[d.contextForms[0]]});if(i.contextToolbars.length>0||d.contextToolbars.length>0){const g=_D(i.contextToolbars.concat(d.contextToolbars));return R.some({elem:t,toolbars:g})}else return R.none()}},wT=(t,s,a)=>t(s)?R.none():V1(s,i=>{if(oo(i)){const{contextToolbars:d,contextForms:g}=ev(i,a.inNodeScope),h=g.length>0?g:TD(d);return h.length>0?R.some({elem:i,toolbars:h}):R.none()}else return R.none()},t),c6=(t,s)=>{const a=ue.fromDom(s.getBody()),i=h=>qn(h,a),d=h=>!i(h)&&!Ia(a,h),g=ue.fromDom(s.selection.getNode());return d(g)?R.none():a6(g,t.inNodeScope,t.inEditorScope).orThunk(()=>wT(i,g,t))},i6=(t,s)=>{const a={},i=[],d=[],g={},h={},C=(O,P)=>{const F=Fe(tC(P));a[O]=F,F.launch.map(V=>{g["form:"+O]={...P.launch,type:V.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(F)}}}),F.scope==="editor"?d.push(F):i.push(F),h[O]=F},S=(O,P)=>{Z7(P).each(F=>{P.scope==="editor"?d.push(F):i.push(F),h[O]=F})},T=Fo(t);return dt(T,O=>{const P=t[O];P.type==="contextform"?C(O,P):P.type==="contexttoolbar"&&S(O,P)}),{forms:a,inNodeScope:i,inEditorScope:d,lookupTable:h,formNavigators:g}},xT=mt("forward-slide"),l6=mt("backward-slide"),ST=mt("change-slide-event"),kD="tox-pop--resizing",jZ=t=>{const s=Et([]);return Ao.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),Ao.getContent(a).each(i=>{Qt(i.element,"visibility")}),Un(a.element,kD),Qt(a.element,"width")},inlineBehaviours:He([qt("context-toolbar-events",[Ku(Ch(),(a,i)=>{i.event.raw.propertyName==="width"&&(Un(a.element,kD),Qt(a.element,"width"))}),ke(ST,(a,i)=>{const d=a.element;Qt(d,"width");const g=sa(d);Ao.setContent(a,i.event.contents),rs(d,kD);const h=sa(d);Wt(d,"width",g+"px"),Ao.getContent(a).each(C=>{i.event.focus.bind(S=>(wc(S),Br(d))).orThunk(()=>(_t.focusIn(C),xl(lr(d))))}),setTimeout(()=>{Wt(a.element,"width",h+"px")},0)}),ke(xT,(a,i)=>{Ao.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:xl(lr(a.element))}]))}),yt(a,ST,{contents:i.event.forwardContents,focus:R.none()})}),ke(l6,(a,i)=>{d1(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),yt(a,ST,{contents:Ga(d.bar),focus:d.focus})})})]),_t.config({mode:"special",onEscape:a=>d1(s.get()).fold(()=>t.onEscape(),i=>(un(a,l6),R.some(!0)))})]),lazySink:()=>on.value(t.sink)})},tv="tox-pop--transition",u6=(t,s,a,i)=>{const d=i.backstage,g=d.shared,h=kn().deviceType.isTouch,C=In(),S=In(),T=In(),O=Ds(jZ({sink:a,onEscape:()=>(t.focus(),R.some(!0))})),P=()=>{const nt=T.get().getOr("node"),ht=ED(nt)?1:0;return wD(t,g,nt,ht)},F=()=>!t.removed&&!(h()&&d.isContextMenuOpen()),V=nt=>Na(ku(nt,C.get(),qn),!0),j=()=>{if(F()){const nt=P(),ht=Na(T.get(),"node")?UZ(t,C.get()):CD(t);return nt.height<=0||!o6(ht,nt,.01)}else return!0},Y=()=>{C.clear(),S.clear(),T.clear(),Ao.hide(O)},ie=()=>{if(Ao.isOpen(O)){const nt=O.element;Qt(nt,"display"),j()?Wt(nt,"display","none"):(S.set(0),Ao.reposition(O))}},X=nt=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[nt],behaviours:He([_t.config({mode:"acyclic"}),qt("pop-dialog-wrap-events",[go(ht=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>_t.focusIn(ht))}),hl(ht=>{t.shortcuts.remove("ctrl+F9")})])])}),ae=ra(()=>i6(s,nt=>{const ht=we([nt]);yt(O,xT,{forwardContents:X(ht)})})),ce=(nt,ht)=>pT(t,{buttons:nt,toolbar:ht.items,allowToolbarGroups:!1},i.backstage,R.some(["form:"])),ye=(nt,ht)=>n6.buildInitGroups(nt,ht),we=nt=>{const{buttons:ht}=t.ui.registry.getAll(),gn=ae(),lo={...ht,...gn.formNavigators},Mn=xg(t)===oi.scrolling?oi.scrolling:oi.default,vt=Yt(Ne(nt,$e=>$e.type==="contexttoolbar"?ce(lo,$e):ye($e,g.providers)));return lT({type:Mn,uid:mt("context-toolbar"),initGroups:vt,onEscape:R.none,cyclicKeying:!0,providers:g.providers})},Ge=(nt,ht)=>{const gn=nt==="node"?g.anchors.node(ht):g.anchors.cursor(),lo=CT(t,nt,h(),{lastElement:C.get,isReposition:()=>Na(S.get(),0),getMode:()=>ar.getMode(a)});return Uo(gn,lo)},ut=(nt,ht)=>{if(ft.cancel(),!F())return;const gn=we(nt),lo=nt[0].position,Mn=Ge(lo,ht);T.set(lo),S.set(1);const vt=O.element;Qt(vt,"display"),V(ht)||(Un(vt,tv),ar.reset(a,O)),Ao.showWithinBounds(O,X(gn),{anchor:Mn,transition:{classes:[tv],mode:"placement"}},()=>R.some(P())),ht.fold(C.clear,C.set),j()&&Wt(vt,"display","none")};let Te=!1;const ft=T_(()=>{if(!(!t.hasFocus()||t.removed||Te))if(qr(O.element,tv))ft.throttle();else{const nt=ae();c6(nt,t).fold(Y,ht=>{ut(ht.toolbars,R.some(ht.elem))})}},17);t.on("init",()=>{t.on("remove",Y),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",ie),t.on("click keyup focus SetContent",ft.throttle),t.on(e6,Y),t.on($Z,nt=>{const ht=ae();it(ht.lookupTable,nt.toolbarKey).each(gn=>{ut([gn],It(nt.target!==t,nt.target)),Ao.getContent(O).each(_t.focusIn)})}),t.on("focusout",nt=>{yp.setEditorTimeout(t,()=>{Br(a.element).isNone()&&Br(O.element).isNone()&&Y()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&Y()}),t.on("ExecCommand",({command:nt})=>{nt.toLowerCase()==="toggleview"&&Y()}),t.on("AfterProgressState",nt=>{nt.state?Y():t.hasFocus()&&ft.throttle()}),t.on("dragstart",()=>{Te=!0}),t.on("dragend drop",()=>{Te=!1}),t.on("NodeChange",nt=>{Br(O.element).fold(ft.throttle,Q)})})},GZ=t=>{dt([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:Dc(t,a.cmd),onSetup:t_(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Jr(t),onAction:Dc(t,"JustifyNone")})},d6=(t,s)=>{const a=()=>{const i=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=In();return Ne(i,h=>({type:"togglemenuitem",text:s.display(h),onSetup:C=>{const S=O=>{O&&(g.on(P=>P.setActive(!1)),g.set(C)),C.setActive(O)};S(Na(d,s.hash(h)));const T=s.watcher(t,h,S);return()=>{g.clear(),T()}},onAction:()=>s.setCurrent(t,h)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},qZ=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:fN,hash:s=>kF(s,["fixed","relative","empty"]).getOr(s),display:rn,watcher:(s,a,i)=>s.formatter.formatChanged("lineheight",i,!1,{value:a}).unbind,getCurrent:s=>R.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:Jr(t),onMenuSetup:Jr(t)}),KZ=t=>R.from(eN(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:oe(a),hash:i=>bn(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,d,g)=>{var h;return i.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(h=d.customCode)!==null&&h!==void 0?h:null}).unbind},getCurrent:i=>{const d=ue.fromDom(i.selection.getNode());return hc(d,g=>R.some(g).filter(oo).bind(h=>Ho(h,"lang").map(S=>{const T=Ho(h,"data-mce-lang").getOrUndefined();return{code:S,customCode:T,title:""}})))},setCurrent:(i,d)=>i.execCommand("Lang",!1,d),onToolbarSetup:i=>{const d=gc();return i.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",i.setActive,!0)),e_(d.clear,Jr(t)(i))},onMenuSetup:Jr(t)})),YZ=t=>{d6(t,qZ(t)),KZ(t).each(s=>d6(t,s))},f6=(t,s)=>{aD(t,s),JW(t,s),gZ(t,s),KW(t,s),dZ(t,s)},m6=t=>{t.ui.registry.addContext("editable",()=>t.selection.isEditable()),t.ui.registry.addContext("mode",s=>t.mode.get()===s),t.ui.registry.addContext("any",Dt),t.ui.registry.addContext("formatting",s=>t.formatter.canApply(s)),t.ui.registry.addContext("insert",s=>t.schema.isValidChild(t.selection.getNode().tagName,s))},g6=t=>Np(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),h6=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:g6(t),onAction:Dc(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Jr(t),onAction:Dc(t,"indent")})},XZ=t=>{h6(t)},OD=(t,s)=>a=>{a.setActive(s.get());const i=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",i),e_(()=>t.off("PastePlainTextToggle",i),Jr(t)(a))},p6=t=>{const s=Et(uN(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:OD(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:OD(t,s)})},AD=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},QK=t=>{em.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:t_(t,s.name),onAction:AD(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const a="h"+s,i=`Access+${s}`;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:t_(t,a),onAction:AD(t,a),shortcut:i})}},JZ=t=>{em.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Dc(t,s.action),shortcut:s.shortcut,context:s.context})}),em.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Jr(t),onAction:Dc(t,s.action)})})},QZ=t=>{em.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Dc(t,s.action),onSetup:t_(t,s.name)})})},ej=t=>{QK(t),JZ(t),QZ(t)},tj=t=>{em.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:Dc(t,s.action),context:s.context})}),em.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:Jr(t),onAction:Dc(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Jr(t),onAction:AD(t,"code")})},nj=t=>{ej(t),tj(t)},ET=(t,s)=>Np(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),oj=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:ET(t,"hasUndo"),onAction:Dc(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:ET(t,"hasRedo"),onAction:Dc(t,"redo")})},sj=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:ET(t,"hasUndo"),onAction:Dc(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:ET(t,"hasRedo"),onAction:Dc(t,"redo"),shortcut:"Meta+Y"})},rj=t=>{oj(t),sj(t)},aj=t=>Np(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),cj=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:aj(t),onAction:Dc(t,"mceToggleVisualAid"),context:"any"})},ij=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Dc(t,"mceToggleVisualAid"),context:"any"})},lj=t=>{ij(t),cj(t)},b6=(t,s)=>{GZ(t),nj(t),f6(t,s),rj(t),BH(t),lj(t),XZ(t),YZ(t),p6(t),m6(t)},uj=t=>J(t)?t.split(/[ ,]/):t,v6=t=>s=>s.options.get(t),dj=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:J(a)||En(a,J)?{value:uj(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},y6=v6("contextmenu_never_use_native"),fj=v6("contextmenu_avoid_overlap"),mj=t=>C6(t).length===0,C6=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:yo(a,i=>Vn(s,i))},qC=(t,s)=>({type:"makeshift",x:t,y:s}),gj=(t,s,a)=>qC(t.x+s,t.y+a),_T=t=>t.type==="longpress"||t.type.indexOf("touch")===0,hj=t=>{if(_T(t)){const s=t.touches[0];return qC(s.pageX,s.pageY)}else return qC(t.pageX,t.pageY)},pj=t=>{if(_T(t)){const s=t.touches[0];return qC(s.clientX,s.clientY)}else return qC(t.clientX,t.clientY)},RD=(t,s)=>{const a=wg.DOM.getPos(t);return gj(s,a.x,a.y)},w6=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?hj(s):RD(t.getContentAreaContainer(),pj(s)):DD(t),DD=t=>({type:"selection",root:ue.fromDom(t.selection.getNode())}),bj=t=>({type:"node",node:R.some(ue.fromDom(t.selection.getNode())),root:ue.fromDom(t.getBody())}),x6=(t,s,a)=>{switch(a){case"node":return bj(t);case"point":return w6(t,s);case"selection":return DD(t)}},vj=(t,s,a,i,d,g)=>{const h=a(),C=x6(t,s,g);H0(h,Ol.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:R.none()}).map(S=>{s.preventDefault(),Ao.showMenuAt(d,{anchor:C},{menu:{markers:kg("normal")},data:S})})},yj={onLtr:()=>[ds,vs,ys,or,Cs,Ln,Ki,Lg,NC,W_,PC,U_],onRtl:()=>[ds,ys,vs,Cs,or,Ln,Ki,Lg,PC,U_,NC,W_]},Cj=12,MD={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},wj=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],d=a.getRng();return Qh(t.getWin(),og.domRange(d)).exists(h=>h.left<=i.clientX&&h.right>=i.clientX&&h.top<=i.clientY&&h.bottom>=i.clientY)}},S6=t=>{const s=t.selection.getRng(),a=()=>{yp.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",a);const i=h=>{h.preventDefault(),h.stopImmediatePropagation()};t.on("mousedown",i,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",i)}},xj=(t,s,a)=>{const i=x6(t,s,a);return{bubble:ti(0,a==="point"?Cj:0,MD),layouts:yj,overrides:{maxWidthFunction:Mc(),maxHeightFunction:id()},...i}},Sj=(t,s,a,i,d,g,h)=>{const C=xj(t,s,g);H0(a,Ol.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:R.none()}).map(S=>{s.preventDefault();const T=h?Ra.HighlightMenuAndItem:Ra.HighlightNone;Ao.showMenuWithinBounds(d,{anchor:C},{menu:{markers:kg("normal"),highlightOnOpen:T},data:S,type:"horizontal"},()=>R.some(wD(t,i.shared,g==="node"?"node":"selection"))),t.dispatch(e6)})},PD=(t,s,a,i,d,g)=>{const h=kn(),C=h.os.isiOS(),S=h.os.isMacOS(),T=h.os.isAndroid(),O=h.deviceType.isTouch(),P=()=>!(T||C||S&&O),F=()=>{const V=a();Sj(t,s,V,i,d,g,P())};if((S||C)&&g!=="node"){const V=()=>{S6(t),F()};wj(t,s)?V():(t.once("selectionchange",V),t.once("touchend",()=>t.off("selectionchange",V)))}else F()},E6=t=>J(t)?t==="|":t.type==="separator",TT={type:"separator"},_6=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(J(t))return t;switch(t.type){case"separator":return TT;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const i=t.getSubmenuItems();return J(i)?i:Ne(i,_6)}};default:const a=t;return{type:"menuitem",...s(a),onAction:Kt(a.onAction)}}},T6=(t,s)=>{if(s.length===0)return t;const i=d1(t).filter(d=>!E6(d)).fold(()=>[],d=>[TT]);return t.concat(i).concat(s).concat([TT])},ND=(t,s,a)=>{const i=So(s,(d,g)=>it(t,g.toLowerCase()).map(h=>{const C=h.update(a);if(J(C)&&Ba(Vl(C)))return T6(d,C.split(" "));if(Be(C)&&C.length>0){const S=Ne(C,_6);return T6(d,S)}else return d}).getOrThunk(()=>d.concat([g])),[]);return i.length>0&&E6(i[i.length-1])&&i.pop(),i},Ej=(t,s)=>s.ctrlKey&&!y6(t),_j=t=>t.type==="longpress"||Vn(t,"touches"),k6=(t,s)=>!_j(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),O6=(t,s)=>k6(t,s)?t.selection.getStart(!0):s.target,Tj=(t,s)=>{const a=fj(t),i=k6(t,s)?"selection":"point";if(Ba(a)){const d=O6(t,s);return mC(ue.fromDom(d),a)?"node":i}else return i},A6=(t,s,a)=>{const d=kn().deviceType.isTouch,g=Ds(Ao.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:He([qt("dismissContextMenu",[ke(ja(),(S,T)=>{_n.close(S),t.focus()})])])})),h=()=>Ao.hide(g),C=S=>{if(y6(t)&&S.preventDefault(),Ej(t,S)||mj(t))return;const T=Tj(t,S),O=()=>{const F=O6(t,S),V=t.ui.registry.getAll(),j=C6(t);return ND(V.contextMenus,j,F)};(d()?PD:vj)(t,S,O,a,g,T)};t.on("init",()=>{const S="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(S,h),t.on("longpress contextmenu",C)})},BD=wa.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),kT=t=>s=>s.translate(-t.left,-t.top),OT=t=>s=>s.translate(t.left,t.top),om=t=>(s,a)=>So(t,(i,d)=>d(i),No(s,a)),AT=(t,s,a)=>t.fold(om([OT(a),kT(s)]),om([kT(s)]),om([])),nv=(t,s,a)=>t.fold(om([OT(a)]),om([]),om([OT(s)])),R6=(t,s,a)=>t.fold(om([]),om([kT(a)]),om([OT(s),kT(a)])),kj=(t,s,a,i,d,g)=>{const h=nv(t,d,g),C=nv(s,d,g);return Math.abs(h.left-C.left)<=a&&Math.abs(h.top-C.top)<=i},D6=(t,s,a,i,d,g)=>{const h=nv(t,d,g),C=nv(s,d,g),S=Math.abs(h.left-C.left),T=Math.abs(h.top-C.top);return No(S,T)},M6=(t,s,a)=>{const i=t.fold((d,g)=>({position:R.some("absolute"),left:R.some(d+"px"),top:R.some(g+"px")}),(d,g)=>({position:R.some("absolute"),left:R.some(d-a.left+"px"),top:R.some(g-a.top+"px")}),(d,g)=>({position:R.some("fixed"),left:R.some(d+"px"),top:R.some(g+"px")}));return{right:R.none(),bottom:R.none(),...i}},P6=(t,s,a)=>t.fold((i,d)=>RT(i+s,d+a),(i,d)=>Ug(i+s,d+a),(i,d)=>Xi(i+s,d+a)),$D=(t,s,a,i)=>{const d=(g,h)=>(C,S)=>{const T=g(s,a,i);return h(C.getOr(T.left),S.getOr(T.top))};return t.fold(d(R6,RT),d(nv,Ug),d(AT,Xi))},RT=BD.offset,Ug=BD.absolute,Xi=BD.fixed,ID=(t,s)=>{const a=Jt(t,s);return bn(a)?NaN:parseInt(a,10)},Oj=(t,s)=>{const a=t.element,i=ID(a,s.leftAttr),d=ID(a,s.topAttr);return isNaN(i)||isNaN(d)?R.none():R.some(No(i,d))},Aj=(t,s,a)=>{const i=t.element;Nt(i,s.leftAttr,a.left+"px"),Nt(i,s.topAttr,a.top+"px")},Rj=(t,s)=>{const a=t.element;Po(a,s.leftAttr),Po(a,s.topAttr)},Dj=(t,s,a,i)=>Oj(t,s).fold(()=>a,d=>Xi(d.left+i.left,d.top+i.top)),N6=(t,s,a,i,d,g)=>{const h=Dj(t,s,a,i),C=s.mustSnap?Pj(t,s,h,d,g):Nj(t,s,h,d,g),S=AT(h,d,g);return Aj(t,s,S),C.fold(()=>({coord:Xi(S.left,S.top),extra:R.none()}),T=>({coord:T.output,extra:T.extra}))},Mj=(t,s)=>{Rj(t,s)},B6=(t,s,a,i)=>ir(t,d=>{const g=d.sensor;return kj(s,g,d.range.left,d.range.top,a,i)?R.some({output:$D(d.output,s,a,i),extra:d.extra}):R.none()}),Pj=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return B6(g,a,i,d).orThunk(()=>So(g,(S,T)=>{const O=T.sensor,P=D6(a,O,T.range.left,T.range.top,i,d);return S.deltas.fold(()=>({deltas:R.some(P),snap:R.some(T)}),F=>{const V=(P.left+P.top)/2,j=(F.left+F.top)/2;return V<=j?{deltas:R.some(P),snap:R.some(T)}:S})},{deltas:R.none(),snap:R.none()}).snap.map(S=>({output:$D(S.output,a,i,d),extra:S.extra})))},Nj=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return B6(g,a,i,d)},Bj=(t,s,a)=>({coord:$D(t.output,t.output,s,a),extra:t.extra});var $j=Object.freeze({__proto__:null,snapTo:(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=Fa(t.element),h=Zr(g),C=sb(d),S=Bj(i,h,C),T=M6(S.coord,h,C);Lc(d,T)}}});const FD="data-initial-z-index",Ij=t=>{Ic(t.element).filter(oo).each(s=>{Ho(s,FD).fold(()=>Qt(s,"z-index"),a=>Wt(s,"z-index",a)),Po(s,FD)})},Fj=t=>{Ic(t.element).filter(oo).each(s=>{Xo(s,"z-index").each(a=>{Nt(s,FD,a)}),Wt(s,"z-index",Dr(t.element,"z-index"))})},LD=(t,s)=>{t.getSystem().addToGui(s),Fj(s)},$6=t=>{Ij(t),t.getSystem().removeFromGui(t)},I6=(t,s,a)=>t.getSystem().build(pu.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var KC=Hs("snaps",[Oe("getSnapPoints"),xn("onSensor"),Oe("leftAttr"),Oe("topAttr"),fe("lazyViewport",Is),fe("mustSnap",!1)]);const HD=[fe("useFixed",jn),Oe("blockerClass"),fe("getTarget",rn),fe("onDrag",Q),fe("repositionTarget",!0),fe("onDrop",Q),po("getBounds",Is),KC],Lj=t=>fm(Xo(t,"left"),Xo(t,"top"),Xo(t,"position"),(s,a,i)=>(i==="fixed"?Xi:RT)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=Vo(t);return Ug(s.left,s.top)}),VD=(t,s,a,i,d)=>{const g=d.bounds,h=nv(s,a,i),C=Jc(h.left,g.x,g.x+g.width-d.width),S=Jc(h.top,g.y,g.y+g.height-d.height),T=Ug(C,S);return s.fold(()=>{const O=R6(T,a,i);return RT(O.left,O.top)},oe(T),()=>{const O=AT(T,a,i);return Xi(O.left,O.top)})},Hj=(t,s,a,i,d,g,h)=>{const C=s.fold(()=>{const S=P6(a,g.left,g.top),T=AT(S,i,d);return Xi(T.left,T.top)},S=>{const T=N6(t,S,a,g,i,d);return T.extra.each(O=>{S.onSensor(t,O)}),T.coord});return VD(t,C,i,d,h)},Vj=(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=Fa(t.element),h=Zr(g),C=sb(d),S=Lj(d),T=Hj(t,s.snaps,S,h,C,i,a),O=M6(T,h,C);Lc(d,O)}s.onDrag(t,d,i)},F6=(t,s)=>({bounds:t.getBounds(),height:cl(s.element),width:Tn(s.element)}),zD=(t,s,a,i,d)=>{const g=a.update(i,d),h=a.getStartData().getOrThunk(()=>F6(s,t));g.each(C=>{Vj(t,s,h,C)})},L6=(t,s,a,i)=>{s.each($6),a.snaps.each(g=>{Mj(t,g)});const d=a.getTarget(t.element);i.reset(),a.onDrop(t,d)},UD=t=>(s,a)=>{const i=d=>{a.setStartData(F6(s,d))};return zn([ke(Gu(),d=>{a.getStartData().each(()=>i(d))}),...t(s,a,i)])},zj=t=>zn([ke(Wa(),t.forceDrop),ke(j1(),t.drop),ke(yh(),(s,a)=>{t.move(a.event)}),ke(Z1(),t.delayDrop)]);var Uj=Object.freeze({__proto__:null,getData:t=>R.from(No(t.x,t.y)),getDelta:(t,s)=>No(s.left-t.left,s.top-t.top)});const H6=(t,s,a)=>[ke(Wa(),(i,d)=>{if(d.event.raw.button!==0)return;d.stop();const h=()=>L6(i,R.some(T),t,s),C=l5(h,200),S={drop:h,delayDrop:C.schedule,forceDrop:h,move:P=>{C.cancel(),zD(i,t,s,Uj,P)}},T=I6(i,t.blockerClass,zj(S));(()=>{a(i),LD(i,T)})()})],Wj=[...HD,so("dragger",{handlers:UD(H6)})],Zj=t=>zn([ke(_i(),t.forceDrop),ke(nf(),t.drop),ke(W1(),t.drop),ke(Uu(),(s,a)=>{t.move(a.event)})]),jj=t=>{const s=t[0];return R.some(No(s.clientX,s.clientY))};var V6=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?jj(a):R.none()},getDelta:(t,s)=>No(s.left-t.left,s.top-t.top)});const YC=(t,s,a)=>{const i=In(),d=g=>{L6(g,i.get(),t,s),i.clear()};return[ke(_i(),(g,h)=>{h.stop();const C=()=>d(g),S={drop:C,delayDrop:Q,forceDrop:C,move:P=>{zD(g,t,s,V6,P)}},T=I6(g,t.blockerClass,Zj(S));i.set(T),(()=>{a(g),LD(g,T)})()}),ke(Uu(),(g,h)=>{h.stop(),zD(g,t,s,V6,h.event)}),ke(nf(),(g,h)=>{h.stop(),d(g)}),ke(W1(),d)]},Gj=[...HD,so("dragger",{handlers:UD(YC)})],qj=(t,s,a)=>[...H6(t,s,a),...YC(t,s,a)],Kj=[...HD,so("dragger",{handlers:UD(qj)})];var z6=Object.freeze({__proto__:null,mouse:Wj,touch:Gj,mouseOrTouch:Kj}),Yj=Object.freeze({__proto__:null,init:()=>{let t=R.none(),s=R.none();const a=()=>{t=R.none(),s=R.none()},i=(S,T)=>{const O=t.map(P=>S.getDelta(P,T));return t=R.some(T),O},d=(S,T)=>S.getData(T).bind(O=>i(S,O)),g=S=>{s=R.some(S)},h=()=>s,C=oe({});return Pr({readState:C,reset:a,update:d,getStartData:h,setStartData:g})}});const Qp=ey({branchKey:"mode",branches:z6,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:R.from(t.extra)})},state:Yj,apis:$j}),WD=40,DT=WD/2,MT=(t,s,a,i,d,g)=>t.fold(()=>Qp.snap({sensor:Ug(a-DT,i-DT),range:No(d,g),output:Ug(R.some(a),R.some(i)),extra:{td:s}}),h=>{const C=a-DT,S=i-DT,T=WD,O=WD,P=h.element.dom.getBoundingClientRect();return Qp.snap({sensor:Ug(C,S),range:No(T,O),output:Ug(R.some(a-P.width/2),R.some(i-P.height/2)),extra:{td:s}})}),ZD=(t,s,a)=>{const i=(d,g)=>d.exists(h=>qn(h,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const h=g.td;i(s.get(),h)||(s.set(h),a(h))},mustSnap:!0}},U6=t=>Nn(Ms.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:He([Qp.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),N0.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),Xj=(t,s)=>{const a=Et([]),i=Et([]),d=Et(!1),g=In(),h=In(),C=ut=>{const Te=jd(ut);return MT(V.getOpt(s),ut,Te.x,Te.y,Te.width,Te.height)},S=()=>Ne(a.get(),ut=>C(ut)),T=ut=>{const Te=jd(ut);return MT(j.getOpt(s),ut,Te.right,Te.bottom,Te.width,Te.height)},O=()=>Ne(i.get(),ut=>T(ut)),P=ZD(S,g,ut=>{h.get().each(Te=>{t.dispatch("TableSelectorChange",{start:ut,finish:Te})})}),F=ZD(O,h,ut=>{g.get().each(Te=>{t.dispatch("TableSelectorChange",{start:Te,finish:ut})})}),V=U6(P),j=U6(F),Y=Ds(V.asSpec()),ie=Ds(j.asSpec()),X=(ut,Te,ft,nt)=>{const ht=Te.dom.getBoundingClientRect();Qt(ut.element,"display");const gn=Ld(ue.fromDom(t.getBody())).dom.innerHeight,lo=ft(ht),Mn=nt(ht,gn);(lo||Mn)&&Wt(ut.element,"display","none")},ae=(ut,Te,ft,nt)=>{const ht=ft(Te);Qp.snapTo(ut,ht),X(ut,Te,Mn=>Mn[nt]<0,(Mn,vt)=>Mn[nt]>vt)},ce=ut=>ae(Y,ut,C,"top"),ye=()=>g.get().each(ce),we=ut=>ae(ie,ut,T,"bottom"),Ge=()=>h.get().each(we);if(kn().deviceType.isTouch()){const ut=Te=>Ne(Te,ue.fromDom);t.on("TableSelectionChange",Te=>{d.get()||(ru(s,Y),ru(s,ie),d.set(!0));const ft=ue.fromDom(Te.start),nt=ue.fromDom(Te.finish);g.set(ft),h.set(nt),R.from(Te.otherCells).each(ht=>{a.set(ut(ht.upOrLeftCells)),i.set(ut(ht.downOrRightCells)),ce(ft),we(nt)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{ye(),Ge()}),t.on("TableSelectionClear",()=>{d.get()&&(au(Y),au(ie),d.set(!1)),g.clear(),h.clear()})}};var Jj=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const Qj=(t,s)=>{const a=R.from(Jt(t,"id")).getOrThunk(()=>{const i=mt("aria");return Nt(s,"id",i),i});Nt(t,"aria-describedby",a)},eG=t=>{Po(t,"aria-describedby")},tG=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",nG=(t,s,a)=>{var i;const d=(i=s.delimiter)!==null&&i!==void 0?i:"›",g=(T,O,P)=>Ms.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":P}},components:[_o(T)],action:F=>{t.focus(),t.selection.select(O),t.nodeChanged()},buttonBehaviours:He([Wo.config({...a.tooltips.getConfig({tooltipText:a.translate(["Select the {0} element",O.nodeName.toLowerCase()]),onShow:(F,V)=>{Qj(F.element,V.element)},onHide:F=>{eG(F.element)}})}),ai.button(a.isDisabled),as(()=>a.checkUiComponentContext("any"))])}),h=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[_o(` ${d} `)]}),C=T=>So(T,(O,P,F)=>{const V=g(P.name,P.element,F);return F===0?O.concat([V]):O.concat([h(),V])},[]),S=T=>{const O=[];let P=T.length;for(;P-- >0;){const F=T[P];if(F.nodeType===1&&!tG(F)){const V=OB(t,F);if(V.isDefaultPrevented()||O.push({name:V.name,element:F}),V.isPropagationStopped())break}}return O};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:He([_t.config({mode:"flow",selector:"div[role=button]"}),Bt.config({disabled:a.isDisabled}),as(()=>a.checkUiComponentContext("any")),vo.config({}),zt.config({}),qt("elementPathEvents",[go((T,O)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>_t.focusIn(T)),t.on("NodeChange",P=>{const F=S(P.parents),V=F.length>0?C(F):[];zt.set(T,V)})})])]),components:[]}};var Wg;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(Wg||(Wg={}));const oG=(t,s,a,i,d)=>{const g={height:Jp(i+s.top,wp(t),uE(t))};return a===Wg.Both&&(g.width=Jp(d+s.left,TO(t),xp(t))),g},W6=(t,s,a)=>{const i=ue.fromDom(t.getContainer()),d=oG(t,s,a,ps(i),sa(i));Bs(d,(g,h)=>{sn(g)&&Wt(i,h,J0(g))}),pH(t)},sG=t=>{const s=lN(t);return s===!1?Wg.None:s==="both"?Wg.Both:Wg.Vertical},PT=(t,s,a,i)=>{const g=No(a*20,i*20);return W6(t,g,s),R.some(!0)},rG=(t,s)=>{const a=sG(t);if(a===Wg.None)return R.none();const i=a===Wg.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return R.some(si("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":s.translate(i),"data-mce-name":"resize-handle"},behaviours:[Qp.config({mode:"mouse",repositionTarget:!1,onDrag:(d,g,h)=>W6(t,h,a),blockerClass:"tox-blocker"}),_t.config({mode:"special",onLeft:()=>PT(t,a,-1,0),onRight:()=>PT(t,a,1,0),onUp:()=>PT(t,a,0,-1),onDown:()=>PT(t,a,0,1)}),vo.config({}),$t.config({}),Wo.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")}))]},s.icons))},aG=(t,s)=>{const a=(i,d,g)=>zt.set(i,[_o(s.translate(["{0} "+g,d[g]]))]);return Ms.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:He([ai.button(s.isDisabled),as(()=>s.checkUiComponentContext("any")),vo.config({}),zt.config({}),rt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),qt("wordcount-events",[Yl(i=>{const d=rt.getValue(i),g=d.mode==="words"?"characters":"words";rt.setValue(i,{mode:g,count:d.count}),a(i,d.count,g)}),go(i=>{t.on("wordCountUpdate",d=>{const{mode:g}=rt.getValue(i);rt.setValue(i,{mode:g,count:d.wordCount}),a(i,d.wordCount,g)})})])]),eventOrder:{[nr()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},Z6=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",Jj.trim()])},behaviours:He([$t.config({})])}]}),i=()=>{const C=TA("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[_o(Vi.translate(["Press {0} for help",C]))]}},d=()=>{const C=[];return t.hasPlugin("wordcount")&&C.push(aG(t,s)),NO(t)&&C.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:C}},g=()=>{const C=[],S=dN(t),T=iN(t),O=NO(t)||t.hasPlugin("wordcount"),P=()=>{const F="tox-statusbar__text-container--flex-start",V="tox-statusbar__text-container--flex-end",j="tox-statusbar__text-container--space-around";if(S){const Y="tox-statusbar__text-container-3-cols";return!O&&!T?[Y,j]:O&&!T?[Y,V]:[Y,F]}return[O&&!T?V:F]};return T&&C.push(nG(t,{},s)),S&&C.push(i()),O&&C.push(d()),C.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...P()]},components:C}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const C=g(),S=rG(t,s);return C.concat(S.toArray())})()}},j6=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),cG=(t,s)=>{const a=t.inline,i=a?BZ:bT,d=Sg(t)?zU:qp,g=QF(),h=In(),C=In(),S=In(),F=kn().deviceType.isTouch()?["tox-platform-touch"]:[],V=FO(t),j=xg(t),Y=Nn({dom:{tag:"div",classes:["tox-anchorbar"]}}),ie=Nn({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),X=()=>g.mainUi.get().map(St=>St.outerContainer).bind(no.getHeader),ae=()=>on.fromOption(g.dialogUi.get().map(St=>St.sink),"UI has not been rendered"),ce=()=>on.fromOption(g.popupUi.get().map(St=>St.sink),"(popup) UI has not been rendered"),ye=g.lazyGetInOuterOrDie("anchor bar",Y.getOpt),we=g.lazyGetInOuterOrDie("bottom anchor bar",ie.getOpt),Ge=g.lazyGetInOuterOrDie("toolbar",no.getToolbar),ut=g.lazyGetInOuterOrDie("throbber",no.getThrobber),Te=RU({popup:ce,dialog:ae},t,ye,we),ft=()=>{const St={attributes:{[oS]:V?fs.BottomToTop:fs.TopToBottom}},jt=no.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Te.popup,onEscape:()=>{t.focus()}}),Yn=no.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Te.popup.shared.getSink,providers:Te.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:Dd=>{vH(t,Dd)},type:j,lazyToolbar:Ge,lazyHeader:()=>X().getOrDie("Could not find header element"),...St}),Zn=no.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Te.popup.shared.providers,onEscape:()=>{t.focus()},type:j}),rc=N2(t),Do=vE(t),fi=pE(t),Vr=hE(t),mi=nt(),gi=rc||Do||fi,$l=()=>rc?[Zn]:Do?[Yn]:[],tw=Vr?[mi,jt]:[jt];return no.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(gi?[]:["tox-editor-header--empty"]),...St},components:Yt([fi?tw:[],$l(),Tl(t)?[]:[Y.asSpec()]]),sticky:Sg(t),editor:t,sharedBackstage:Te.popup.shared})},nt=()=>no.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),ht=()=>{const St=no.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),jt=no.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[St,jt]}},gn=()=>{const St=LO(t),jt=qn(bi(),St)&&Dr(St,"display")==="grid",Yn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(F),attributes:{...Vi.isRtl()?{dir:"rtl"}:{}}},behaviours:He([ar.config({useFixed:()=>d.isDocked(X)})])},Zn={dom:{styles:{width:document.body.clientWidth+"px"}},events:zn([ke(af(),fi=>{Wt(fi.element,"width",document.body.clientWidth+"px")})])},rc=Ds(Uo(Yn,jt?Zn:{})),Do=QA(rc);return C.set(Do),{sink:rc,mothership:Do}},lo=()=>{const St={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(F),attributes:{...Vi.isRtl()?{dir:"rtl"}:{}}},behaviours:He([ar.config({useFixed:()=>d.isDocked(X),getBounds:()=>s.getPopupSinkBounds()})])},jt=Ds(St),Yn=QA(jt);return S.set(Yn),{sink:jt,mothership:Yn}},Mn=()=>{const St=ft(),jt=ht(),Yn=no.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Te.popup}),Zn=no.parts.viewWrapper({backstage:Te.popup}),rc=cN(t)&&!a?R.some(Z6(t,Te.popup.shared.providers)):R.none(),Do=Yt([V?[]:[St],a?[]:[jt],V?[St]:[]]),fi=no.parts.editorContainer({components:Yt([Do,a?[]:[ie.asSpec()]])}),Vr=HO(t),mi={role:"application",...Vi.isRtl()?{dir:"rtl"}:{},...Vr?{"aria-hidden":"true"}:{}},gi=Ds(no.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(V?["tox-tinymce--toolbar-bottom"]:[]).concat(F),styles:{visibility:"hidden",...Vr?{opacity:"0",border:"0"}:{}},attributes:mi},components:[fi,...a?[]:[Zn,...rc.toArray()],Yn],behaviours:He([as(()=>Te.popup.shared.providers.checkUiComponentContext("any")),Bt.config({disableClass:"tox-tinymce--disabled"}),_t.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),$l=QA(gi);return h.set($l),{mothership:$l,outerContainer:gi}},vt=St=>{const jt=J0(MZ(t)),Yn=J0(PZ(t));return t.inline||(vw("div","width",Yn)&&Wt(St.element,"width",Yn),vw("div","height",jt)?Wt(St.element,"height",jt):Wt(St.element,"height","400px")),jt},$e=St=>{t.addShortcut("alt+F9","focus menubar",()=>{no.focusMenubar(St)}),t.addShortcut("alt+F10","focus toolbar",()=>{no.focusToolbar(St)}),t.addCommand("ToggleToolbarDrawer",(jt,Yn)=>{Yn!=null&&Yn.skipFocus?no.toggleToolbarDrawerWithoutFocusing(St):no.toggleToolbarDrawer(St)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>no.isToolbarDrawerToggled(St))},et=St=>{const{mainUi:jt,popupUi:Yn,uiMotherships:Zn}=St;Lo(OO(t),(c1,cM)=>{t.ui.registry.addGroupToolbarButton(cM,c1)});const{buttons:rc,menuItems:Do,contextToolbars:fi,sidebars:Vr,views:mi}=t.ui.registry.getAll(),gi=yE(t),$l={menuItems:Do,menus:mN(t),menubar:oN(t),toolbar:gi.getOrThunk(()=>fE(t)),allowToolbarGroups:j===oi.floating,buttons:rc,sidebar:Vr,views:mi};$e(jt.outerContainer),kI(t,jt.mothership,Zn),d.setup(t,Te.popup.shared,X),b6(t,Te.popup),A6(t,Te.popup.shared.getSink,Te.popup),NR(t),VI(t,ut,Te.popup.shared),u6(t,fi,Yn.sink,{backstage:Te.popup}),Xj(t,Yn.sink);const tw=t.getElement(),Dd=vt(jt.outerContainer),aM={targetNode:tw,height:Dd};return i.render(t,St,$l,Te.popup,aM)},Lt=St=>(S.set(St.mothership),St),tn=()=>{const St=Mn(),jt=gn(),Yn=Kf(t)?lo():Lt(jt);g.dialogUi.set(jt),g.popupUi.set(Yn),g.mainUi.set(St);const Zn={popupUi:Yn,dialogUi:jt,mainUi:St,uiMotherships:g.getUiMotherships()};return et(Zn)};return{popups:{backstage:Te.popup,getMothership:()=>j6("popups",S)},dialogs:{backstage:Te.dialog,getMothership:()=>j6("dialogs",C)},renderUI:tn}},iG=t=>t.dom.textContent,lG=(t,s)=>{const a=Ho(t,"id").fold(()=>{const i=mt("dialog-label");return Nt(s,"id",i),i},rn);Nt(t,"aria-labelledby",a)},uG=oe([Oe("lazySink"),Pn("dragBlockClass"),po("getBounds",Is),fe("useTabstopAt",Dt),fe("firstTabstop",0),fe("eventOrder",{}),Ws("modalBehaviours",[_t]),Cr("onExecute"),Wm("onEscape")]),jD={sketch:rn},dG=oe([Ja({name:"draghandle",overrides:(t,s)=>({behaviours:He([Qp.config({mode:"mouse",getTarget:a=>bs(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),xr({schema:[Oe("dom")],name:"title"}),xr({factory:jD,schema:[Oe("dom")],name:"close"}),xr({factory:jD,schema:[Oe("dom")],name:"body"}),Ja({factory:jD,schema:[Oe("dom")],name:"footer"}),_c({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[fe("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),fe("components",[])],name:"blocker"})]),fG=(t,s,a,i)=>{const d=In(),g=j=>{d.set(j);const Y=t.lazySink(j).getOrDie(),ie=i.blocker(),X=Y.getSystem().build({...ie,components:ie.components.concat([Ga(j)]),behaviours:He([$t.config({}),qt("dialog-blocker-events",[Ku(qc(),()=>{Cu.isBlocked(j)?Q():_t.focusIn(j)})])])});ru(Y,X),_t.focusIn(j)},h=j=>{d.clear(),Ic(j.element).each(Y=>{j.getSystem().getByDom(Y).each(ie=>{au(ie)})})},C=j=>at(j,t,"body"),S=j=>Jn(j,t,"footer"),T=(j,Y)=>{Cu.block(j,Y)},O=j=>{Cu.unblock(j)},P=mt("modal-events"),F={...t.eventOrder,[ia()]:[P].concat(t.eventOrder["alloy.system.attached"]||[])},V=kn();return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:h,getBody:C,getFooter:S,setIdle:O,setBusy:T},eventOrder:F,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Zs(t.modalBehaviours,[zt.config({}),_t.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),Cu.config({getRoot:d.get}),qt(P,[go(j=>{const Y=at(j,t,"title").element,ie=iG(Y);V.os.isMacOS()&&Vt(ie)?Nt(j.element,"aria-label",ie):lG(j.element,Y)})])])}},Ns=pr({name:"ModalDialog",configFields:uG(),partFields:dG(),factory:fG,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),G6=At([ms,fA].concat(Ag)),mG=Wc,XC=[UE("button"),ri,Qs("align","end",["start","end"]),zE,Al,L1("buttonType",["primary","secondary"]),ss("context","mode:design")],GD=[...XC,Yf],qD=[yr("type",["submit","cancel","custom"]),...GD],gG=[yr("type",["menu"]),Xf,Y2,ri,Ua("items",G6),...XC],hG=[...XC,yr("type",["togglebutton"]),Y2,ri,Xf,er("active",!1)],pG=Qo("type",{submit:qD,cancel:qD,custom:qD,menu:gG,togglebutton:hG}),bG=[ms,Yf,yr("level",["info","warn","error","success"]),QN,fe("url","")],vG=At(bG),ov=t=>[ms,t],yG=[ms,Yf,Al,UE("button"),ri,H7,L1("buttonType",["primary","secondary","toolbar"]),zE,ss("context","mode:design")],CG=At(yG),sv=[ms,fA],wu=sv.concat([gA]),wG=sv.concat([mA,Al,ss("context","mode:design")]),xG=At(wG),SG=Wc,KD=wu.concat([sB("auto"),ss("context","mode:design")]),JC=At(KD),YD=$v([Tp,Yf,QN]),NT=wu.concat([ss("storageKey","default"),ss("context","mode:design")]),e1=At(NT),BT=ot,q6=At(wu),K6=ot,Y6=sv.concat([ss("tag","textarea"),Os("scriptId"),Os("scriptUrl"),ml("onFocus"),H1("settings",void 0)]),EG=sv.concat([ss("tag","textarea"),jc("init")]),_G=mh(t=>Oo("customeditor.old",za(EG),t).orThunk(()=>Oo("customeditor.new",za(Y6),t))),TG=ot,X6=wu.concat([ss("context","mode:design")]),J6=At(X6),XD=ql(),kG=t=>[ms,F1("columns"),t],OG=[ms,Os("html"),Qs("presets","presentation",["presentation","document"]),po("onInit",Q),er("stretched",!1)],AG=At(OG),Q6=wu.concat([er("border",!1),er("sandboxed",!0),er("streamContent",!1),er("transparent",!0)]),RG=At(Q6),DG=ot,MG=At(sv.concat([As("height")])),JD=At([Os("url"),hh("zoom"),hh("cachedWidth"),hh("cachedHeight")]),QD=wu.concat([As("inputMode"),As("placeholder"),er("maximized",!1),Al,ss("context","mode:design")]),PG=At(QD),eL=ot,NG=t=>[ms,mA,t,Qs("align","start",["start","center","end"]),As("for")],BG=[Yf,Tp],tL=[Yf,Ua("items",Tm("items",()=>nL))],nL=Iw([At(BG),At(tL)]),$G=wu.concat([Ua("items",nL),Al,ss("context","mode:design")]),t1=At($G),oL=ot,IG=wu.concat([Lv("items",[Yf,Tp]),Hv("size",1),Al,ss("context","mode:design")]),$T=At(IG),rv=ot,IT=wu.concat([er("constrain",!0),Al,ss("context","mode:design")]),sL=At(IT),QC=At([Os("width"),Os("height")]),nc=sv.concat([mA,Hv("min",0),Hv("max",0)]),FT=At(nc),rL=Xd,aL=[ms,Ua("header",ot),Ua("cells",zc(ot))],FG=At(aL),LG=wu.concat([As("placeholder"),er("maximized",!1),Al,ss("context","mode:design")]),Zg=At(LG),uY=ot,cL=[yr("type",["directory","leaf"]),JN,Os("id"),fl("menu",MR),As("customStateIcon"),As("customStateIconTooltip")],n1=At(cL),LT=cL.concat([Ua("children",Tm("children",()=>Jd("type",{directory:eM,leaf:n1})))]),eM=At(LT),VG=Jd("type",{directory:eM,leaf:n1}),zG=[ms,Ua("items",VG),ml("onLeafAction"),ml("onToggleExpand"),zu("defaultExpandedIds",[],ot),As("defaultSelectedId")],UG=At(zG),WG=wu.concat([Qs("filetype","file",["image","media","file"]),Al,As("picker_text"),ss("context","mode:design")]),av=At(WG),dY=At([Tp,pA]),tM=t=>Ls("items","items",ll(),zc(mh(s=>Oo(`Checking item of ${t}`,nM,s).fold(a=>on.error(Qd(a)),a=>on.value(a))))),nM=ks(()=>Jd("type",{alertbanner:vG,bar:At(ov(tM("bar"))),button:CG,checkbox:xG,colorinput:e1,colorpicker:q6,dropzone:J6,grid:At(kG(tM("grid"))),iframe:RG,input:PG,listbox:t1,selectbox:$T,sizeinput:sL,slider:FT,textarea:Zg,urlinput:av,customeditor:_G,htmlpanel:AG,imagepreview:MG,collection:JC,label:At(NG(tM("label"))),table:FG,tree:UG,panel:iL})),fY=[ms,fe("classes",[]),Ua("items",nM)],iL=At(fY),ZG=[UE("tab"),JN,Ua("items",nM)],ew=[ms,Lv("tabs",ZG)],jG=At(ew),GG=GD,lL=pG,qG=At([Os("title"),$n("body",Jd("type",{panel:iL,tabpanel:jG})),ss("size","normal"),zu("buttons",[],lL),fe("initialData",{}),po("onAction",Q),po("onChange",Q),po("onSubmit",Q),po("onClose",Q),po("onCancel",Q),po("onTabChange",Q)]),mY=t=>Oo("dialog",qG,t),e=At([yr("type",["cancel","custom"]),...GG]),n=At([Os("title"),Os("url"),hh("height"),hh("width"),ph("buttons",e),po("onAction",Q),po("onCancel",Q),po("onClose",Q),po("onMessage",Q)]),o=t=>Oo("dialog",n,t),r=t=>ge(t)?[t].concat(_e(mv(t),r)):Be(t)?_e(t,r):[],c=t=>J(t.type)&&J(t.name),u={checkbox:SG,colorinput:BT,colorpicker:K6,dropzone:XD,input:eL,iframe:DG,imagepreview:JD,selectbox:rv,sizeinput:QC,slider:rL,listbox:oL,size:QC,textarea:uY,urlinput:dY,customeditor:TG,collection:YD,togglemenuitem:mG},m=t=>R.from(u[t.type]),v=t=>yo(r(t),c),w=t=>{const s=v(t),a=_e(s,i=>m(i).fold(()=>[],d=>[$n(i.name,d)]));return At(a)},E=t=>{var s;const a=Fe(mY(t)),i=w(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:i,initialData:d}},M={open:(t,s)=>{const a=E(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=Fe(o(s));return t(a)},redial:t=>E(t)};var B=Object.freeze({__proto__:null,events:(t,s)=>{const a=(i,d)=>{t.updateState.each(g=>{const h=g(i,d);s.set(h)}),t.renderComponents.each(g=>{const h=g(d,s.get());(t.reuseDom?b0:kP)(i,h)})};return zn([ke(Oi(),(i,d)=>{const g=d;if(!g.universal){const h=t.channel;Io(g.channels,h)&&a(i,g.data)}}),go((i,d)=>{t.initialData.each(g=>{a(i,g)})})])}}),G=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),W=[Oe("channel"),Pn("renderComponents"),Pn("updateState"),Pn("initialData"),er("reuseDom",!0)],ne=Object.freeze({__proto__:null,init:()=>{const t=Et(R.none()),s=()=>t.set(R.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const re=zs({fields:W,name:"reflecting",active:B,apis:G,state:ne}),le=t=>{const s=[],a={};return Bs(t,(i,d)=>{i.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?on.error(s):on.value(a)},de=(t,s,a,i)=>{const d=Nn(Up.sketch(g=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Ne(t.items,h=>Y9(g,h,s,a,i))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:He([_t.config({mode:"acyclic",useTabstopAt:De(kC)}),ji.memento(d),Pz(d,{postprocess:g=>le(g).fold(h=>(console.error(h),{}),rn)}),qt("dialog-body-panel",[ke(qc(),(g,h)=>{g.getSystem().broadcastOn([O_],{newFocus:R.some(h.event.target)})})])])}},Ae=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:R2(t.action),behaviours:Zs(t.tabButtonBehaviours,[$t.config({}),_t.config({mode:"execution",useSpace:!0,useEnter:!0}),rt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),Ve=Oa({name:"TabButton",configFields:[fe("uid",void 0),Oe("value"),Ls("dom","dom",M1(()=>({attributes:{role:"tab",id:mt("aria"),"aria-selected":"false"}})),Uc()),Pn("action"),fe("domModification",{}),Ws("tabButtonBehaviours",[$t,_t,rt]),Oe("view")],factory:Ae}),ct=oe([Oe("tabs"),Oe("dom"),fe("clickToDismiss",!1),Ws("tabbarBehaviours",[qe,_t]),eu(["tabClass","selectedClass"])]),Ee=lp({factory:Ve,name:"tabs",unit:"tab",overrides:t=>{const s=(i,d)=>{qe.dehighlight(i,d),yt(i,Gw(),{tabbar:i,button:d})},a=(i,d)=>{qe.highlight(i,d),yt(i,jw(),{tabbar:i,button:d})};return{action:i=>{const d=i.getSystem().getByUid(t.uid).getOrDie(),g=qe.isHighlighted(d,i);(g&&t.clickToDismiss?s:g?Q:a)(d,i)},domModification:{classes:[t.markers.tabClass]}}}}),be=oe([Ee]),Me=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Zs(t.tabbarBehaviours,[qe.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{Nt(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{Nt(g.element,"aria-selected","false")}}),_t.config({mode:"flow",getInitial:d=>qe.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),lt=pr({name:"Tabbar",configFields:ct(),partFields:be(),factory:Me}),xt=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:Zs(t.tabviewBehaviours,[zt.config({})]),domModification:{attributes:{role:"tabpanel"}}}),dn=Oa({name:"Tabview",configFields:[Ws("tabviewBehaviours",[zt])],factory:xt}),fn=oe([fe("selectFirst",!0),xn("onChangeTab"),xn("onDismissTab"),fe("tabs",[]),Ws("tabSectionBehaviours",[])]),Fn=xr({factory:lt,schema:[Oe("dom"),Vu("markers",[Oe("tabClass"),Oe("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),Gn=xr({factory:dn,name:"tabview"}),ns=oe([Fn,Gn]),_r=(t,s,a,i)=>{const d=h=>{const C=rt.getValue(h);Jn(h,t,"tabview").each(S=>{Zt(t.tabs,O=>O.value===C).each(O=>{const P=O.view();Ho(h.element,"id").each(F=>{Nt(S.element,"aria-labelledby",F)}),zt.set(S,P),t.onChangeTab(S,h,P)})})},g=(h,C)=>{Jn(h,t,"tabbar").each(S=>{C(S).each(qu)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:Yb(t.tabSectionBehaviours),events:zn(Yt([t.selectFirst?[go((h,C)=>{g(h,qe.getFirst)})]:[],[ke(jw(),(h,C)=>{const S=C.event.button;d(S)}),ke(Gw(),(h,C)=>{const S=C.event.button;t.onDismissTab(h,S)})]])),apis:{getViewItems:h=>Jn(h,t,"tabview").map(C=>zt.contents(C)).getOr([]),showTab:(h,C)=>{g(h,T=>{const O=qe.getCandidates(T);return Zt(O,F=>rt.getValue(F)===C).filter(F=>!qe.isHighlighted(T,F))})}}}},cs=pr({name:"TabSection",configFields:fn(),partFields:ns(),factory:_r,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),Ke=(t,s,a)=>Ne(t,(i,d)=>{zt.set(a,t[d].view());const g=s.dom.getBoundingClientRect();return zt.set(a,[]),g.height}),wt=t=>ga(Yg(t,(s,a)=>s>a?-1:s<a?1:0)),Rn=(t,s,a)=>{const i=p1(t).dom,d=bs(t,".tox-dialog-wrap").getOr(t),g=Dr(d,"position")==="fixed";let h;g?h=Math.max(i.clientHeight,window.innerHeight):h=Math.max(i.offsetHeight,i.scrollHeight);const C=ps(s),T=s.dom.offsetLeft>=a.dom.offsetLeft+sa(a)?Math.max(ps(a),C):C,O=parseInt(Dr(t,"margin-top"),10)||0,P=parseInt(Dr(t,"margin-bottom"),10)||0,V=ps(t)+O+P-T;return h-V},st=(t,s)=>{ga(t).each(a=>cs.showTab(s,a.value))},Rt=(t,s)=>{Wt(t,"height",s+"px"),Wt(t,"flex-basis",s+"px")},Mt=(t,s,a)=>{bs(t,'[role="dialog"]').each(i=>{bo(i,'[role="tablist"]').each(d=>{a.get().map(g=>(Wt(s,"height","0"),Wt(s,"flex-basis","0"),Math.min(g,Rn(i,s,d)))).each(g=>{Rt(s,g)})})})},Qe=t=>bo(t,'[role="tabpanel"]'),mn=t=>{const s=In();return{extraEvents:[go(d=>{const g=d.element;Qe(g).each(h=>{Wt(h,"visibility","hidden"),d.getSystem().getByDom(h).toOptional().each(C=>{const S=Ke(t,h,C);wt(S).fold(s.clear,s.set)}),Mt(g,h,s),Qt(h,"visibility"),st(t,d),requestAnimationFrame(()=>{Mt(g,h,s)})})}),ke(af(),d=>{const g=d.element;Qe(g).each(h=>{Mt(g,h,s)})}),ke(b5,(d,g)=>{const h=d.element;Qe(h).each(C=>{const S=xl(lr(C));Wt(C,"visibility","hidden");const T=Xo(C,"height").map(F=>parseInt(F,10));Qt(C,"height"),Qt(C,"flex-basis");const O=C.dom.getBoundingClientRect().height;T.forall(F=>O>F)?(s.set(O),Mt(h,C,s)):T.each(F=>{Rt(C,F)}),Qt(C,"visibility"),S.each(wc)})})],selectFirst:!1}},pn="send-data-to-section",xs="send-data-to-view",eo=(t,s,a,i)=>{const d=Et({}),g=O=>{const P=rt.getValue(O),F=le(P).getOr({}),V=d.get(),j=Uo(V,F);d.set(j)},h=O=>{const P=d.get();rt.setValue(O,P)},C=Et(null),S=Ne(t.tabs,O=>({value:O.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[_o(a.shared.providers.translate(O.title))],view:()=>[Up.sketch(P=>({dom:{tag:"div",classes:["tox-form"]},components:Ne(O.items,F=>Y9(P,F,s,a,i)),formBehaviours:He([_t.config({mode:"acyclic",useTabstopAt:De(kC)}),qt("TabView.form.events",[go(h),hl(g)]),Ea.config({channels:km([{key:pn,value:{onReceive:g}},{key:xs,value:{onReceive:h}}])})])}))]})),T=mn(S);return cs.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(O,P,F)=>{const V=rt.getValue(P);yt(O,p5,{name:V,oldName:C.get()}),C.set(V)},tabs:S,components:[cs.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[lt.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:He([vo.config({})])}),cs.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:T.selectFirst,tabSectionBehaviours:He([qt("tabpanel",T.extraEvents),_t.config({mode:"acyclic"}),yn.config({find:O=>ga(cs.getViewItems(O))}),Wp(R.none(),O=>(O.getSystem().broadcastOn([pn],{}),d.get()),(O,P)=>{d.set(P),O.getSystem().broadcastOn([xs],{})})])})},Tr=(t,s,a,i,d,g)=>{const h=T=>{const O=T.body;switch(O.type){case"tabpanel":return[eo(O,T.initialData,i,g)];default:return[de(O,T.initialData,i,g)]}},C=(T,O)=>R.some({isTabPanel:()=>O.body.type==="tabpanel"}),S={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(T=>({id:T})).getOr({}),...d?S:{}}},components:[],behaviours:He([ji.childAt(0),re.config({channel:`${F3}-${s}`,updateState:C,renderComponents:h,initialData:t})])}},oc=(t,s,a,i,d,g)=>Tr(t,s,R.some(a),i,d,g),xu=(t,s,a,i)=>{const d=Tr(t,s,R.none(),a,!1,i);return Ns.parts.body(d)},ea=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[$3(R.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:He([vo.config({}),$t.config({})])})]}],behaviours:He([_t.config({mode:"acyclic",useTabstopAt:De(kC)})])};return Ns.parts.body(s)},di=Cp.deviceType.isTouch(),Ji=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),Lr=(t,s)=>Ns.parts.close(Ms.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:He([vo.config({})])})),sc=()=>Ns.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),Ct=(t,s)=>Ns.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:lu(`<p>${_N(s.translate(t))}</p>`)}]}]}),On=t=>Ns.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),Zo=(t,s)=>[pu.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),pu.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],Ss=t=>{const s="tox-dialog",a=s+"-wrap",i=a+"__backdrop",d=s+"__disable-scroll";return Ns.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),R.some(!0)),useTabstopAt:g=>!kC(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:lu(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:di?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:a,modalBehaviours:He([$t.config({}),qt("dialog-events",t.dialogEvents.concat([Ku(qc(),(g,h)=>{Cu.isBlocked(g)?Q():_t.focusIn(g)}),ke(Sh(),(g,h)=>{g.getSystem().broadcastOn([O_],{newFocus:h.event.newFocus})})])),qt("scroll-lock",[go(()=>{rs(bi(),d)}),hl(()=>{Un(bi(),d)})]),...t.extraBehaviours]),eventOrder:{[nr()]:["dialog-events"],[ia()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Za()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},qs=t=>Ms.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:He([vo.config({}),Wo.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[si("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{un(s,Ng)}}),Es=(t,s,a,i)=>{const d=g=>[_o(i.translate(g.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:He([re.config({channel:`${m$}-${s}`,initialData:t,renderComponents:d})])}},Ro=()=>({dom:lu('<div class="tox-dialog__draghandle"></div>')}),Bo=(t,s,a,i)=>pu.sketch({dom:lu('<div class="tox-dialog__header"></div>'),components:[Es(t,s,R.some(a),i),Ro(),qs(i)],containerBehaviours:He([Qp.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>Cl(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),Pa=(t,s,a)=>{const i=Ns.parts.title(Es(t,s,R.none(),a)),d=Ns.parts.draghandle(Ro()),g=Ns.parts.close(qs(a)),h=[i].concat(t.draggable?[d]:[]).concat([g]);return pu.sketch({dom:lu('<div class="tox-dialog__header"></div>'),components:h})},Qi=(t,s,a)=>Pa({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),Su=(t,s,a,i)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${i.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:lu('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),Bl=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:i=>{const d=bo(t().element,".tox-dialog__header").map(g=>ps(g));Ns.setBusy(t(),(g,h)=>Su(i.message,h,s,d))},onUnblock:()=>{Ns.setIdle(t())}}),o1="tox-dialog--fullscreen",jg="tox-dialog--width-lg",sm="tox-dialog--width-md",Pc=t=>{switch(t){case"large":return R.some(jg);case"medium":return R.some(sm);default:return R.none()}},rm=(t,s)=>{const a=ue.fromDom(s.element.dom);qr(a,o1)||(Ri(a,[jg,sm]),Pc(t).each(i=>rs(a,i)))},cv=(t,s)=>{const a=ue.fromDom(t.element.dom),i=Qw(a),d=Zt(i,g=>g===jg||g===sm).or(Pc(s));AM(a,[o1,...d.toArray()])},s1=(t,s,a)=>Ds(Ss({...t,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[_C({}),...t.extraBehaviours],onEscape:i=>{un(i,Ng)},dialogEvents:s,eventOrder:{[Oi()]:[re.name(),Ea.name()],[ia()]:["scroll-lock",re.name(),"messages","dialog-events","alloy.base.behaviour"],[Za()]:["alloy.base.behaviour","dialog-events","messages",re.name(),"scroll-lock"]}})),HT=(t,s={})=>{const a=i=>{const d=Ne(i.items,g=>{const h=it(s,g.name).getOr(Et(!1));return{...g,storage:h}});return{...i,items:d}};return Ne(t,i=>i.type==="menu"?a(i):i)},r1=t=>So(t,(s,a)=>a.type==="menu"?So(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),oM=(t,s)=>[eb(qc(),zz),t(hC,(a,i,d,g)=>{kf(g.element)&&xl(lr(g.element)).each(Xm),s.onClose(),i.onClose()}),t(Ng,(a,i,d,g)=>{i.onCancel(a),un(g,hC)}),ke(n3,(a,i)=>s.onUnblock()),ke(d_,(a,i)=>s.onBlock(i.event))],uL=(t,s)=>{const a=(d,g)=>ke(d,(h,C)=>{i(h,(S,T)=>{g(t(),S,C.event,h)})}),i=(d,g)=>{re.getState(d).get().each(h=>{g(h,d)})};return[...oM(a,s),a(_d,(d,g,h)=>{g.onAction(d,{name:h.name})})]},Hr=(t,s,a)=>{const i=(g,h)=>ke(g,(C,S)=>{d(C,(T,O)=>{h(t(),T,S.event,C)})}),d=(g,h)=>{re.getState(g).get().each(C=>{h(C.internalDialog,g)})};return[...oM(i,s),i(P0,(g,h)=>h.onSubmit(g)),i(ec,(g,h,C)=>{h.onChange(g,{name:C.name})}),i(_d,(g,h,C,S)=>{const T=()=>S.getSystem().isConnected()?_t.focusIn(S):void 0,O=V=>wv(V,"disabled")||Ho(V,"aria-disabled").exists(j=>j==="true"),P=lr(S.element),F=xl(P);h.onAction(g,{name:C.name,value:C.value}),xl(P).fold(T,V=>{O(V)||F.exists(j=>Ia(V,j)&&O(j))?T():a().toOptional().filter(j=>!Ia(j.element,V)).each(T)})}),i(p5,(g,h,C)=>{h.onTabChange(g,{newTabName:C.name,oldTabName:C.oldName})}),hl(g=>{const h=t();rt.setValue(g,h.getData())})]},el=(t,s)=>z0(t,t.type,s),VT=(t,s,a)=>Zt(s,i=>i.name===a).bind(i=>i.memento.getOpt(t)),pe=(t,s)=>{const a=s.map(C=>C.footerButtons).getOr([]),i=um(a,C=>C.align==="start"),d=(C,S)=>pu.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${C}`]},components:Ne(S,T=>T.memento.asSpec())}),g=d("start",i.pass),h=d("end",i.fail);return[g,h]},he=(t,s,a)=>{const i=(d,g)=>{const h=Ne(g.buttons,S=>{const T=Nn(el(S,a));return{name:S.name,align:S.align,memento:T}}),C=S=>VT(d,h,S);return R.some({lookupByName:C,footerButtons:h})};return{dom:lu('<div class="tox-dialog__footer"></div>'),components:[],behaviours:He([re.config({channel:`${g$}-${s}`,initialData:t,updateState:i,renderComponents:pe})])}},Ye=(t,s,a)=>he(t,s,a),ze=(t,s,a)=>Ns.parts.footer(he(t,s,a)),Ot=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const i=yn.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return Up.getField(i,s).orThunk(()=>t.getFooter().bind(h=>re.getState(h).get()).bind(h=>h.lookupByName(s)))}else return R.none()},Dn=(t,s)=>{const a=t.getRoot();return re.getState(a).get().map(i=>Fe(Oo("data",i.dataValidator,s))).getOr(s)},jo=(t,s,a)=>{const i=j=>{const Y=t.getRoot();Y.getSystem().isConnected()&&j(Y)},V={getData:()=>{const j=t.getRoot(),Y=j.getSystem().isConnected()?t.getFormWrapper():j,ie=rt.getValue(Y),X=Lo(a,ae=>ae.get());return{...ie,...X}},setData:j=>{i(Y=>{const ie=V.getData(),X=Uo(ie,j),ae=Dn(t,X),ce=t.getFormWrapper();rt.setValue(ce,ae),Bs(a,(ye,we)=>{Vn(X,we)&&ye.set(X[we])})})},setEnabled:(j,Y)=>{Ot(t,j).each(Y?Bt.enable:Bt.disable)},focus:j=>{Ot(t,j).each($t.focus)},block:j=>{if(!J(j))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(Y=>{yt(Y,d_,{message:j})})},unblock:()=>{i(j=>{un(j,n3)})},showTab:j=>{i(Y=>{const ie=t.getBody();re.getState(ie).get().exists(ae=>ae.isTabPanel())&&yn.getCurrent(ie).each(ae=>{cs.showTab(ae,j)})})},redial:j=>{i(Y=>{const ie=t.getId(),X=s(j),ae=HT(X.internalDialog.buttons,a);Y.getSystem().broadcastOn([`${k_}-${ie}`],X),Y.getSystem().broadcastOn([`${m$}-${ie}`],X.internalDialog),Y.getSystem().broadcastOn([`${F3}-${ie}`],X.internalDialog),Y.getSystem().broadcastOn([`${g$}-${ie}`],{...X.internalDialog,buttons:ae}),V.setData(X.initialData)})},close:()=>{i(j=>{un(j,hC)})},toggleFullscreen:t.toggleFullscreen};return V},Eu=(t,s,a)=>{const i=mt("dialog"),d=t.internalDialog,g=Qi(d.title,i,a),h=Et(d.size),C=ce=>Ot(X,ce),S=Pc(h.get()).toArray(),T=(ce,ye)=>(h.set(ye.internalDialog.size),rm(ye.internalDialog.size,ce),R.some(ye)),O=xu({body:d.body,initialData:d.initialData},i,a,C),P=HT(d.buttons),F=r1(P),V=It(P.length!==0,ze({buttons:P},i,a)),j=Hr(()=>ae,Bl(()=>ie,a.shared.providers,s),a.shared.getSink),Y={id:i,header:g,body:O,footer:V,extraClasses:S,extraBehaviours:[re.config({channel:`${k_}-${i}`,updateState:T,initialData:t})],extraStyles:{}},ie=s1(Y,j,a),X=(()=>{const ce=()=>{const we=Ns.getBody(ie);return yn.getCurrent(we).getOr(we)},ye=()=>{cv(ie,h.get())};return{getId:oe(i),getRoot:oe(ie),getBody:()=>Ns.getBody(ie),getFooter:()=>Ns.getFooter(ie),getFormWrapper:ce,toggleFullscreen:ye}})(),ae=jo(X,s.redial,F);return{dialog:ie,instanceApi:ae}},tl=(t,s,a,i=!1,d)=>{const g=mt("dialog"),h=mt("dialog-label"),C=mt("dialog-content"),S=t.internalDialog,T=ft=>Ot(ut,ft),O=Et(S.size),P=Pc(O.get()).toArray(),F=(ft,nt)=>(O.set(nt.internalDialog.size),rm(nt.internalDialog.size,ft),d(),R.some(nt)),V=Nn(Bo({title:S.title,draggable:!0},g,h,a.shared.providers)),j=Nn(oc({body:S.body,initialData:S.initialData},g,C,a,i,T)),Y=HT(S.buttons),ie=r1(Y),X=It(Y.length!==0,Nn(Ye({buttons:Y},g,a))),ae=Hr(()=>Te,{onBlock:ft=>{Cu.block(we,(nt,ht)=>{const gn=V.getOpt(we).map(lo=>ps(lo.element));return Su(ft.message,ht,a.shared.providers,gn)})},onUnblock:()=>{Cu.unblock(we)},onClose:()=>s.closeWindow()},a.shared.getSink),ce="tox-dialog-inline",ye=kn().os,we=Ds({dom:{tag:"div",classes:["tox-dialog",ce,...P],attributes:{role:"dialog",...ye.isMacOS()?{"aria-label":S.title}:{"aria-labelledby":h}}},eventOrder:{[Oi()]:[re.name(),Ea.name()],[nr()]:["execute-on-form"],[ia()]:["reflecting","execute-on-form"]},behaviours:He([_t.config({mode:"cyclic",onEscape:ft=>(un(ft,hC),R.some(!0)),useTabstopAt:ft=>!kC(ft)&&($c(ft)!=="button"||Jt(ft,"disabled")!=="disabled"),firstTabstop:1}),re.config({channel:`${k_}-${g}`,updateState:F,initialData:t}),$t.config({}),qt("execute-on-form",ae.concat([Ku(qc(),(ft,nt)=>{_t.focusIn(ft)}),ke(Sh(),(ft,nt)=>{ft.getSystem().broadcastOn([O_],{newFocus:nt.event.newFocus})})])),Cu.config({getRoot:()=>R.some(we)}),zt.config({}),_C({})]),components:[V.asSpec(),j.asSpec(),...X.map(ft=>ft.asSpec()).toArray()]}),Ge=()=>{cv(we,O.get())},ut={getId:oe(g),getRoot:oe(we),getFooter:()=>X.map(ft=>ft.get(we)),getBody:()=>j.get(we),getFormWrapper:()=>{const ft=j.get(we);return yn.getCurrent(ft).getOr(ft)},toggleFullscreen:Ge},Te=jo(ut,s.redial,ie);return{dialog:we,instanceApi:Te}};var a1=tinymce.util.Tools.resolve("tinymce.util.URI");const dL=t=>{const s=h=>{t.getSystem().isConnected()&&h(t)};return{block:h=>{if(!J(h))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(C=>{yt(C,d_,{message:h})})},unblock:()=>{s(h=>{un(h,n3)})},close:()=>{s(h=>{un(h,hC)})},sendMessage:h=>{s(C=>{C.getSystem().broadcastOn([L3],h)})}}},fL=["insertContent","setContent","execCommand","close","block","unblock"],sM=t=>ge(t)&&fL.indexOf(t.mceAction)!==-1,mL=t=>!sM(t)&&ge(t)&&Vn(t,"mceAction"),am=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const i=Xt(a.ui)?a.ui:!1;t.execCommand(a.cmd,i,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},gL=(t,s,a,i)=>{const d=mt("dialog"),g=Qi(t.title,d,i),h=ea(t),C=t.buttons.bind(ce=>ce.length===0?R.none():R.some(ze({buttons:ce},d,i))),S=uL(()=>ae,Bl(()=>X,i.shared.providers,s)),T={...t.height.fold(()=>({}),ce=>({height:ce+"px","max-height":ce+"px"})),...t.width.fold(()=>({}),ce=>({width:ce+"px","max-width":ce+"px"}))},O=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],P=new a1(t.url,{base_uri:new a1(window.location.href)}),F=`${P.protocol}://${P.host}${P.port?":"+P.port:""}`,V=gc(),j=(ce,ye)=>R.some(ye),Y=[re.config({channel:`${k_}-${d}`,updateState:j,initialData:t}),qt("messages",[go(()=>{const ce=Kr(ue.fromDom(window),"message",ye=>{if(P.isSameOrigin(new a1(ye.raw.origin))){const we=ye.raw.data;sM(we)?am(a,ae,we):mL(we)&&t.onMessage(ae,we)}});V.set(ce)}),hl(V.clear)]),Ea.config({channels:{[L3]:{onReceive:(ce,ye)=>{bo(ce.element,"iframe").each(we=>{const Ge=we.dom.contentWindow;Vt(Ge)&&Ge.postMessage(ye,F)})}}}})],X=s1({id:d,header:g,body:h,footer:C,extraClasses:O,extraBehaviours:Y,extraStyles:T},S,i),ae=dL(X);return{dialog:X,instanceApi:ae}},hL=t=>{const s=t.shared;return{open:(i,d)=>{const g=()=>{Ns.hide(T),d()},h=Nn(z0({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:R.some("primary"),align:"end",enabled:!0,icon:R.none()},"cancel",t)),C=sc(),S=Lr(g,s.providers),T=Ds(Ss({lazySink:()=>s.getSink(),header:Ji(C,S),body:Ct(i,s.providers),footer:R.some(On(Zo([],[h.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ke(Ng,g)],eventOrder:{}}));Ns.show(T);const O=h.get(T);$t.focus(O)}}},pL=t=>{const s=t.shared;return{open:(i,d)=>{const g=F=>{Ns.hide(O),d(F)},h=Nn(z0({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:R.some("primary"),align:"end",enabled:!0,icon:R.none()},"submit",t)),C=z0({context:"any",name:"no",text:"No",primary:!1,buttonType:R.some("secondary"),align:"end",enabled:!0,icon:R.none()},"cancel",t),S=sc(),T=Lr(()=>g(!1),s.providers),O=Ds(Ss({lazySink:()=>s.getSink(),header:Ji(S,T),body:Ct(i,s.providers),footer:R.some(On(Zo([],[C,h.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ke(Ng,()=>g(!1)),ke(P0,()=>g(!0))],eventOrder:{}}));Ns.show(O);const P=h.get(O);$t.focus(P)}}},rM=(t,s)=>Fe(Oo("data",s,t)),bL=t=>mC(t,".tox-alert-dialog")||mC(t,".tox-confirm-dialog"),vn=(t,s,a)=>s&&a?[]:[ro.config({contextual:{lazyContext:()=>R.some(zo(ue.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:i=>Eg(t,i.element).map(g=>({bounds:_g(g),optScrollEnv:R.some({currentScrollTop:g.element.dom.scrollTop,scrollElmTop:Vo(g.element).top})})).getOrThunk(()=>({bounds:Is(),optScrollEnv:R.none()}))})],ve=t=>{const s=t.editor,a=Sg(s),i=hL(t.backstages.dialog),d=pL(t.backstages.dialog),g=(j,Y,ie)=>{if(!bn(Y)){if(Y.inline==="toolbar")return T(j,t.backstages.popup.shared.anchors.inlineDialog(),ie,Y);if(Y.inline==="bottom")return O(j,t.backstages.popup.shared.anchors.inlineBottomDialog(),ie,Y);if(Y.inline==="cursor")return T(j,t.backstages.popup.shared.anchors.cursor(),ie,Y)}return S(j,ie)},h=(j,Y)=>C(j,Y),C=(j,Y)=>{const ie=X=>{const ae=gL(X,{closeWindow:()=>{Ns.hide(ae.dialog),Y(ae.instanceApi)}},s,t.backstages.dialog);return Ns.show(ae.dialog),ae.instanceApi};return M.openUrl(ie,j)},S=(j,Y)=>{const ie=(X,ae,ce)=>{const ye=ae,Ge=Eu({dataValidator:ce,initialData:ye,internalDialog:X},{redial:M.redial,closeWindow:()=>{Ns.hide(Ge.dialog),Y(Ge.instanceApi)}},t.backstages.dialog);return Ns.show(Ge.dialog),Ge.instanceApi.setData(ye),Ge.instanceApi};return M.open(ie,j)},T=(j,Y,ie,X)=>{const ae=(ce,ye,we)=>{const Ge=rM(ye,we),ut=In(),Te=t.backstages.popup.shared.header.isPositionedAtTop(),ft={dataValidator:we,initialData:Ge,internalDialog:ce},nt=()=>ut.on(Mn=>{Ao.reposition(Mn),(!a||!Te)&&ro.refresh(Mn)}),ht=tl(ft,{redial:M.redial,closeWindow:()=>{ut.on(Ao.hide),s.off("ResizeEditor",nt),ut.clear(),ie(ht.instanceApi)}},t.backstages.popup,X.ariaAttrs,nt),gn=Ds(Ao.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:X.persistent?{event:"doNotDismissYet"}:{},...Te?{}:{fireRepositionEventInstead:{}},inlineBehaviours:He([qt("window-manager-inline-events",[ke(ja(),(Mn,vt)=>{un(ht.dialog,Ng)})]),...vn(s,a,Te)]),isExtraPart:(Mn,vt)=>bL(vt)}));ut.set(gn);const lo=()=>{const Mn=s.inline?bi():ue.fromDom(s.getContainer()),vt=zo(Mn);return R.some(vt)};return Ao.showWithinBounds(gn,Ga(ht.dialog),{anchor:Y},lo),(!a||!Te)&&(ro.refresh(gn),s.on("ResizeEditor",nt)),ht.instanceApi.setData(Ge),_t.focusIn(ht.dialog),ht.instanceApi};return M.open(ae,j)},O=(j,Y,ie,X)=>{const ae=(ce,ye,we)=>{const Ge=rM(ye,we),ut=In(),Te=t.backstages.popup.shared.header.isPositionedAtTop(),ft={dataValidator:we,initialData:Ge,internalDialog:ce},nt=()=>ut.on(Mn=>{Ao.reposition(Mn),ro.refresh(Mn)}),ht=tl(ft,{redial:M.redial,closeWindow:()=>{ut.on(Ao.hide),s.off("ResizeEditor ScrollWindow ElementScroll",nt),ut.clear(),ie(ht.instanceApi)}},t.backstages.popup,X.ariaAttrs,nt),gn=Ds(Ao.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:X.persistent?{event:"doNotDismissYet"}:{},...Te?{}:{fireRepositionEventInstead:{}},inlineBehaviours:He([qt("window-manager-inline-events",[ke(ja(),(Mn,vt)=>{un(ht.dialog,Ng)})]),ro.config({contextual:{lazyContext:()=>R.some(zo(ue.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:Mn=>Eg(s,Mn.element).map($e=>({bounds:_g($e),optScrollEnv:R.some({currentScrollTop:$e.element.dom.scrollTop,scrollElmTop:Vo($e.element).top})})).getOrThunk(()=>({bounds:Is(),optScrollEnv:R.none()}))})]),isExtraPart:(Mn,vt)=>bL(vt)}));ut.set(gn);const lo=()=>t.backstages.popup.shared.getSink().toOptional().bind(Mn=>{const vt=Eg(s,Mn.element),$e=15,et=vt.map(St=>_g(St)).getOr(Is()),Lt=zo(ue.fromDom(s.getContentAreaContainer())),tn=$u(Lt,et);return R.some(ko(tn.x,tn.y,tn.width,tn.height-$e))});return Ao.showWithinBounds(gn,Ga(ht.dialog),{anchor:Y},lo),ro.refresh(gn),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",nt),ht.instanceApi.setData(Ge),_t.focusIn(ht.dialog),ht.instanceApi};return M.open(ae,j)};return{open:g,openUrl:h,alert:(j,Y)=>{i.open(j,Y)},close:j=>{j.close()},confirm:(j,Y)=>{d.open(j,Y)}}},Tt=t=>{YP(t),OH(t),dj(t)};var cn=()=>{Gd.add("silver",t=>{Tt(t);let s=()=>Is();const{dialogs:a,popups:i,renderUI:d}=cG(t,{getPopupSinkBounds:()=>s()}),g=()=>{const T=d();return Eg(t,i.getMothership().element).each(P=>{s=()=>_g(P)}),T};wV.register(t,i.backstage.shared);const h=ve({editor:t,backstages:{popup:i.backstage,dialog:a.backstage}}),C=In(),S=()=>DN(t,{backstage:i.backstage},i.getMothership(),C);return{renderUI:g,getWindowManagerImpl:oe(h),getNotificationManagerImpl:S}})};cn()})();(function(){var b=tinymce.util.Tools.resolve("tinymce.ModelManager");const x=(l,f,p)=>{var y;return p(l,f.prototype)?!0:((y=l.constructor)===null||y===void 0?void 0:y.name)===f.name},k=l=>{const f=typeof l;return l===null?"null":f==="object"&&Array.isArray(l)?"array":f==="object"&&x(l,String,(p,y)=>y.isPrototypeOf(p))?"string":f},D=l=>f=>k(f)===l,$=l=>f=>typeof f===l,H=l=>f=>l===f,Z=D("string"),J=D("object"),ge=D("array"),Re=H(null),Be=$("boolean"),pt=H(void 0),Xt=l=>l==null,bn=l=>!Xt(l),Ht=$("function"),Vt=$("number"),Se=()=>{},sn=(l,f)=>(...p)=>l(f.apply(null,p)),En=(l,f)=>p=>l(f(p)),Q=l=>()=>l,Kt=l=>l,$o=(l,f)=>l===f;function ln(l,...f){return(...p)=>{const y=f.concat(p);return l.apply(null,y)}}const oe=l=>f=>!l(f),rn=l=>()=>{throw new Error(l)},Go=l=>l(),An=Q(!1),De=Q(!0);class se{constructor(f,p){this.tag=f,this.value=p}static some(f){return new se(!0,f)}static none(){return se.singletonNone}fold(f,p){return this.tag?p(this.value):f()}isSome(){return this.tag}isNone(){return!this.tag}map(f){return this.tag?se.some(f(this.value)):se.none()}bind(f){return this.tag?f(this.value):se.none()}exists(f){return this.tag&&f(this.value)}forall(f){return!this.tag||f(this.value)}filter(f){return!this.tag||f(this.value)?this:se.none()}getOr(f){return this.tag?this.value:f}or(f){return this.tag?this:f}getOrThunk(f){return this.tag?this.value:f()}orThunk(f){return this.tag?this:f()}getOrDie(f){if(this.tag)return this.value;throw new Error(f??"Called getOrDie on None")}static from(f){return bn(f)?se.some(f):se.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(f){this.tag&&f(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}se.singletonNone=new se(!1);const fa=Array.prototype.slice,jn=Array.prototype.indexOf,Dt=Array.prototype.push,R=(l,f)=>jn.call(l,f),is=(l,f)=>R(l,f)>-1,Je=(l,f)=>{for(let p=0,y=l.length;p<y;p++){const _=l[p];if(f(_,p))return!0}return!1},qo=(l,f)=>{const p=[];for(let y=0;y<l;y++)p.push(f(y));return p},Gt=(l,f)=>{const p=l.length,y=new Array(p);for(let _=0;_<p;_++){const A=l[_];y[_]=f(A,_)}return y},Le=(l,f)=>{for(let p=0,y=l.length;p<y;p++){const _=l[p];f(_,p)}},Io=(l,f)=>{for(let p=l.length-1;p>=0;p--){const y=l[p];f(y,p)}},ma=(l,f)=>{const p=[],y=[];for(let _=0,A=l.length;_<A;_++){const I=l[_];(f(I,_)?p:y).push(I)}return{pass:p,fail:y}},ls=(l,f)=>{const p=[];for(let y=0,_=l.length;y<_;y++){const A=l[y];f(A,y)&&p.push(A)}return p},ta=(l,f,p)=>(Io(l,(y,_)=>{p=f(p,y,_)}),p),Ne=(l,f,p)=>(Le(l,(y,_)=>{p=f(p,y,_)}),p),dt=(l,f,p)=>{for(let y=0,_=l.length;y<_;y++){const A=l[y];if(f(A,y))return se.some(A);if(p(A,y))break}return se.none()},L=(l,f)=>dt(l,f,An),um=(l,f)=>{for(let p=0,y=l.length;p<y;p++){const _=l[p];if(f(_,p))return se.some(p)}return se.none()},yo=l=>{const f=[];for(let p=0,y=l.length;p<y;++p){if(!ge(l[p]))throw new Error("Arr.flatten item "+p+" was not an array, input: "+l);Dt.apply(f,l[p])}return f},_s=(l,f)=>yo(Gt(l,f)),So=(l,f)=>{for(let p=0,y=l.length;p<y;++p){const _=l[p];if(f(_,p)!==!0)return!1}return!0},tk=l=>{const f=fa.call(l,0);return f.reverse(),f},Zt=(l,f)=>{const p={};for(let y=0,_=l.length;y<_;y++){const A=l[y];p[String(A)]=f(A,y)}return p},ho=(l,f)=>{const p=fa.call(l,0);return p.sort(f),p},Yt=(l,f)=>f>=0&&f<l.length?se.some(l[f]):se.none(),_e=l=>Yt(l,0),Tu=l=>Yt(l,l.length-1),Or=(l,f)=>{for(let p=0;p<l.length;p++){const y=f(l[p],p);if(y.isSome())return y}return se.none()},Pt=Object.keys,Pd=Object.hasOwnProperty,Ko=(l,f)=>{const p=Pt(l);for(let y=0,_=p.length;y<_;y++){const A=p[y],I=l[A];f(I,A)}},Yg=(l,f)=>us(l,(p,y)=>({k:y,v:f(p,y)})),us=(l,f)=>{const p={};return Ko(l,(y,_)=>{const A=f(y,_);p[A.k]=A.v}),p},ga=l=>(f,p)=>{l[p]=f},d1=(l,f,p,y)=>{Ko(l,(_,A)=>{(f(_,A)?p:y)(_,A)})},ic=(l,f)=>{const p={};return d1(l,f,ga(p),Se),p},ir=(l,f)=>{const p=[];return Ko(l,(y,_)=>{p.push(f(y,_))}),p},Fo=l=>ir(l,Kt),f1=(l,f)=>Bs(l,f)?se.from(l[f]):se.none(),Bs=(l,f)=>Pd.call(l,f),Lo=(l,f)=>Bs(l,f)&&l[f]!==void 0&&l[f]!==null,dm=l=>{for(const f in l)if(Pd.call(l,f))return!1;return!0},Ar=typeof window<"u"?window:Function("return this;")(),Hl=(l,f)=>{let p=f??Ar;for(let y=0;y<l.length&&p!==void 0&&p!==null;++y)p=p[l[y]];return p},ha=(l,f)=>{const p=l.split(".");return Hl(p,f)},Nd=(l,f)=>ha(l,f),Xg=(l,f)=>{const p=Nd(l,f);if(p==null)throw new Error(l+" not available on this browser");return p},zr=Object.getPrototypeOf,mv=l=>Xg("HTMLElement",l),it=l=>{const f=ha("ownerDocument.defaultView",l);return J(l)&&(mv(f).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(zr(l).constructor.name))},Vn=8,lc=9,Na=11,m1=1,Bd=3,To=l=>l.dom.nodeName.toLowerCase(),ku=l=>l.dom.nodeType,fm=l=>f=>ku(f)===l,Co=l=>ku(l)===Vn||To(l)==="#comment",It=l=>pa(l)&&it(l.dom),pa=fm(m1),$d=fm(Bd),g1=fm(lc),gv=fm(Na),na=l=>f=>pa(f)&&To(f)===l,Rr=(l,f,p)=>{if(Z(p)||Be(p)||Vt(p))l.setAttribute(f,p+"");else throw console.error("Invalid call to Attribute.set. Key ",f,":: Value ",p,":: Element ",l),new Error("Attribute value was not simple")},gs=(l,f,p)=>{Rr(l.dom,f,p)},ol=(l,f)=>{const p=l.dom;Ko(f,(y,_)=>{Rr(p,_,y)})},h1=(l,f)=>{Ko(f,(p,y)=>{p.fold(()=>{Mo(l,y)},_=>{Rr(l.dom,y,_)})})},Vl=(l,f)=>{const p=l.dom.getAttribute(f);return p===null?void 0:p},Ba=(l,f)=>se.from(Vl(l,f)),Mo=(l,f)=>{l.dom.removeAttribute(f)},Bc=l=>Ne(l.dom.attributes,(f,p)=>(f[p.name]=p.value,f),{}),sl=(l,f)=>{const y=(f||document).createElement("div");if(y.innerHTML=l,!y.hasChildNodes()||y.childNodes.length>1){const _="HTML does not have a single root node";throw console.error(_,l),new Error(_)}return zl(y.childNodes[0])},nk=(l,f)=>{const y=(f||document).createElement(l);return zl(y)},ok=(l,f)=>{const y=(f||document).createTextNode(l);return zl(y)},zl=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},ue={fromHtml:sl,fromTag:nk,fromText:ok,fromDom:zl,fromPoint:(l,f,p)=>se.from(l.dom.elementFromPoint(f,p)).map(zl)},ba=(l,f)=>{const p=l.dom;if(p.nodeType!==m1)return!1;{const y=p;if(y.matches!==void 0)return y.matches(f);if(y.msMatchesSelector!==void 0)return y.msMatchesSelector(f);if(y.webkitMatchesSelector!==void 0)return y.webkitMatchesSelector(f);if(y.mozMatchesSelector!==void 0)return y.mozMatchesSelector(f);throw new Error("Browser lacks native selectors")}},mm=l=>l.nodeType!==m1&&l.nodeType!==lc&&l.nodeType!==Na||l.childElementCount===0,mw=(l,f)=>{const p=f===void 0?document:f.dom;return mm(p)?[]:Gt(p.querySelectorAll(l),ue.fromDom)},hv=(l,f)=>{const p=f===void 0?document:f.dom;return mm(p)?se.none():se.from(p.querySelector(l)).map(ue.fromDom)},Eo=(l,f)=>l.dom===f.dom,pv=(l,f)=>{const p=l.dom,y=f.dom;return p===y?!1:p.contains(y)},sk=ba,Jg=l=>ue.fromDom(l.dom.ownerDocument),gm=l=>g1(l)?l:Jg(l),br=l=>ue.fromDom(gm(l).dom.documentElement),hs=l=>ue.fromDom(gm(l).dom.defaultView),Ul=l=>se.from(l.dom.parentNode).map(ue.fromDom),$c=l=>se.from(l.dom.parentElement).map(ue.fromDom),Id=(l,f)=>{const p=Ht(f)?f:An;let y=l.dom;const _=[];for(;y.parentNode!==null&&y.parentNode!==void 0;){const A=y.parentNode,I=ue.fromDom(A);if(_.push(I),p(I)===!0)break;y=A}return _},Qg=l=>se.from(l.dom.previousSibling).map(ue.fromDom),hm=l=>se.from(l.dom.nextSibling).map(ue.fromDom),oo=l=>Gt(l.dom.childNodes,ue.fromDom),$a=(l,f)=>{const p=l.dom.childNodes;return se.from(p[f]).map(ue.fromDom)},rk=l=>$a(l,0),Fd=(l,f)=>{Ul(l).each(y=>{y.dom.insertBefore(f.dom,l.dom)})},Ou=(l,f)=>{hm(l).fold(()=>{Ul(l).each(_=>{Yo(_,f)})},y=>{Fd(y,f)})},oa=(l,f)=>{rk(l).fold(()=>{Yo(l,f)},y=>{l.dom.insertBefore(f.dom,y.dom)})},Yo=(l,f)=>{l.dom.appendChild(f.dom)},ak=(l,f,p)=>{$a(l,p).fold(()=>{Yo(l,f)},y=>{Fd(y,f)})},bv=(l,f)=>{Fd(l,f),Yo(f,l)},qn=(l,f)=>{Le(f,(p,y)=>{const _=y===0?l:f[y-1];Ou(_,p)})},Ia=(l,f)=>{Le(f,p=>{Yo(l,p)})},Fa=l=>{l.dom.textContent="",Le(oo(l),f=>{vr(f)})},vr=l=>{const f=l.dom;f.parentNode!==null&&f.parentNode.removeChild(f)},p1=l=>{const f=oo(l);f.length>0&&qn(l,f),vr(l)},Ld=(l,f)=>ue.fromDom(l.dom.cloneNode(f)),Ic=l=>Ld(l,!1),Hd=l=>Ld(l,!0),pi=(l,f)=>{const p=ue.fromTag(f),y=Bc(l);return ol(p,y),p},gw=(l,f)=>{const p=pi(l,f),y=oo(Hd(l));return Ia(p,y),p},vv=(l,f)=>{const p=pi(l,f);Ou(l,p);const y=oo(l);return Ia(p,y),vr(l),p},hw=["tfoot","thead","tbody","colgroup"],Fc=l=>is(hw,l),Au=(l,f)=>({rows:l,columns:f}),b1=(l,f)=>({row:l,column:f}),v1=(l,f,p)=>({element:l,rowspan:f,colspan:p}),yv=(l,f,p,y)=>({element:l,rowspan:f,colspan:p,isNew:y}),Cv=(l,f,p,y,_,A)=>({element:l,rowspan:f,colspan:p,row:y,column:_,isLocked:A}),lr=(l,f,p)=>({element:l,cells:f,section:p}),Vd=(l,f,p,y)=>({element:l,cells:f,section:p,isNew:y}),La=(l,f,p)=>({element:l,isNew:f,isLocked:p}),Wl=(l,f,p,y)=>({element:l,cells:f,section:p,isNew:y}),pw=(l,f,p,y)=>({startRow:l,startCol:f,finishRow:p,finishCol:y}),ck=(l,f,p)=>({element:l,colspan:f,column:p}),rl=(l,f)=>({element:l,columns:f}),uc=l=>gv(l)&&bn(l.dom.host),bi=l=>ue.fromDom(l.dom.getRootNode()),al=l=>uc(l)?l:ue.fromDom(gm(l).dom.body),vi=l=>{const f=bi(l);return uc(f)?se.some(f):se.none()},Nt=l=>ue.fromDom(l.dom.host),bw=l=>{if(bn(l.target)){const f=ue.fromDom(l.target);if(pa(f)&&Jt(f)&&l.composed&&l.composedPath){const p=l.composedPath();if(p)return _e(p)}}return se.from(l.target)},Jt=l=>bn(l.dom.shadowRoot),Ho=l=>{const f=$d(l)?l.dom.parentNode:l.dom;if(f==null||f.ownerDocument===null)return!1;const p=f.ownerDocument;return vi(ue.fromDom(f)).fold(()=>p.body.contains(f),En(Ho,Nt))},wv=()=>Po(ue.fromDom(document)),Po=l=>{const f=l.dom.body;if(f==null)throw new Error("Body is not available yet");return ue.fromDom(f)},ik=(l,f,p)=>ls(Id(l,p),f),xv=(l,f)=>ls(oo(l),f),Sv=(l,f)=>{let p=[];return Le(oo(l),y=>{f(y)&&(p=p.concat([y])),p=p.concat(Sv(y,f))}),p},Wt=(l,f,p)=>ik(l,y=>ba(y,f),p),Zl=(l,f)=>xv(l,p=>ba(p,f)),Lc=(l,f)=>mw(f,l);var Dr=(l,f,p,y,_)=>l(p,y)?se.some(p):Ht(_)&&_(p)?se.none():f(p,y,_);const We=(l,f,p)=>{let y=l.dom;const _=Ht(p)?p:An;for(;y.parentNode;){y=y.parentNode;const A=ue.fromDom(y);if(f(A))return se.some(A);if(_(A))break}return se.none()},Xo=(l,f,p)=>Dr((_,A)=>A(_),We,l,f,p),Ev=(l,f)=>{const p=_=>f(ue.fromDom(_));return L(l.dom.childNodes,p).map(ue.fromDom)},vw=(l,f)=>{const p=y=>{for(let _=0;_<y.childNodes.length;_++){const A=ue.fromDom(y.childNodes[_]);if(f(A))return se.some(A);const I=p(y.childNodes[_]);if(I.isSome())return I}return se.none()};return p(l.dom)},Qt=(l,f,p)=>We(l,y=>ba(y,f),p),zd=(l,f)=>Ev(l,p=>ba(p,f)),yi=(l,f)=>hv(f,l),Ys=(l,f,p)=>Dr((_,A)=>ba(_,A),Qt,l,f,p),ps=(l,f,p=$o)=>l.exists(y=>p(y,f)),cl=l=>{const f=[],p=y=>{f.push(y)};for(let y=0;y<l.length;y++)l[y].each(p);return f},lk=(l,f)=>l!=null?f(l):se.none(),y1=(l,f)=>l?se.some(f):se.none(),No=(l,f)=>l.substring(f),yw=(l,f,p)=>f===""||l.length>=f.length&&l.substr(p,p+f.length)===f,C1=(l,f)=>Ru(l,f)?No(l,f.length):l,Vo=(l,f,p=0,y)=>{const _=l.indexOf(f,p);return _!==-1?pt(y)?!0:_+f.length<=y:!1},Ru=(l,f)=>yw(l,f,0),Du=(l,f)=>yw(l,f,l.length-f.length),sa=(l=>f=>f.replace(l,""))(/^\s+|\s+$/g),Tn=l=>l.length>0,Cw=l=>{const f=parseFloat(l);return isNaN(f)?se.none():se.some(f)},ra=l=>l.style!==void 0&&Ht(l.style.getPropertyValue),ww=(l,f,p)=>{if(!Z(p))throw console.error("Invalid call to CSS.set. Property ",f,":: Value ",p,":: Element ",l),new Error("CSS value must be a string: "+p);ra(l)&&l.style.setProperty(f,p)},x1=(l,f)=>{ra(l)&&l.style.removeProperty(f)},wo=(l,f,p)=>{const y=l.dom;ww(y,f,p)},Xs=(l,f)=>{const p=l.dom;Ko(f,(y,_)=>{ww(p,_,y)})},Mu=(l,f)=>{const p=l.dom,_=window.getComputedStyle(p).getPropertyValue(f);return _===""&&!Ho(l)?S1(p,f):_},S1=(l,f)=>ra(l)?l.style.getPropertyValue(f):"",il=(l,f)=>{const p=l.dom,y=S1(p,f);return se.from(y).filter(_=>_.length>0)},Ci=(l,f)=>{const p=l.dom;x1(p,f),ps(Ba(l,"style").map(sa),"")&&Mo(l,"style")},ur=(l,f)=>{const p=l.dom,y=f.dom;ra(p)&&ra(y)&&(y.style.cssText=p.style.cssText)},Ur=(l,f,p=0)=>Ba(l,f).map(y=>parseInt(y,10)).getOr(p),aa=(l,f)=>Ur(l,f,1),dc=l=>na("col")(l)?Ur(l,"span",1)>1:aa(l,"colspan")>1,fc=l=>aa(l,"rowspan")>1,$s=(l,f)=>parseInt(Mu(l,f),10),eh=Q(10),E1=Q(10),Ud=(l,f)=>_1(l,f,De),_1=(l,f,p)=>_s(oo(l),y=>ba(y,f)?p(y)?[y]:[]:_1(y,f,p)),xw=(l,f,p=An)=>{if(p(f))return se.none();if(is(l,To(f)))return se.some(f);const y=_=>ba(_,"table")||p(_);return Qt(f,l.join(","),y)},Wd=(l,f)=>xw(["td","th"],l,f),Pu=l=>Ud(l,"th,td"),th=l=>ba(l,"colgroup")?Zl(l,"col"):_s(Nu(l),f=>Zl(f,"col")),va=(l,f)=>Ys(l,"table",f),_v=l=>Ud(l,"tr"),Nu=l=>va(l).fold(Q([]),f=>Zl(f,"colgroup")),T1=(l,f)=>Gt(l,p=>{if(To(p)==="colgroup"){const y=Gt(th(p),_=>{const A=Ur(_,"span",1);return v1(_,1,A)});return lr(p,y,"colgroup")}else{const y=Gt(Pu(p),_=>{const A=Ur(_,"rowspan",1),I=Ur(_,"colspan",1);return v1(_,A,I)});return lr(p,y,f(p))}}),pm=l=>Ul(l).map(f=>{const p=To(f);return Fc(p)?p:"tbody"}).getOr("tbody"),Tv=l=>{const f=_v(l),y=[...Nu(l),...f];return T1(y,pm)},k1=(l,f)=>T1(l,()=>f),bm=l=>{let f=!1,p;return(...y)=>(f||(f=!0,p=l.apply(null,y)),p)},Sw=(l,f,p,y)=>{const _=l.isiOS()&&/ipad/i.test(p)===!0,A=l.isiOS()&&!_,I=l.isiOS()||l.isAndroid(),z=I||y("(pointer:coarse)"),q=_||!A&&I&&y("(min-device-width:768px)"),te=A||I&&!q,me=f.isSafari()&&l.isiOS()&&/safari/i.test(p)===!1,Ie=!te&&!q&&!me;return{isiPad:Q(_),isiPhone:Q(A),isTablet:Q(q),isPhone:Q(te),isTouch:Q(z),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:Q(me),isDesktop:Q(Ie)}},Ew=(l,f)=>{for(let p=0;p<l.length;p++){const y=l[p];if(y.test(f))return y}},vm=(l,f)=>{const p=Ew(l,f);if(!p)return{major:0,minor:0};const y=_=>Number(f.replace(p,"$"+_));return nh(y(1),y(2))},kM=(l,f)=>{const p=String(f).toLowerCase();return l.length===0?ee():vm(l,p)},ee=()=>nh(0,0),nh=(l,f)=>({major:l,minor:f}),Ha={nu:nh,detect:kM,unknown:ee},_w=(l,f)=>Or(f.brands,p=>{const y=p.brand.toLowerCase();return L(l,_=>{var A;return y===((A=_.brand)===null||A===void 0?void 0:A.toLowerCase())}).map(_=>({current:_.name,version:Ha.nu(parseInt(p.version,10),0)}))}),Tw=(l,f)=>{const p=String(f).toLowerCase();return L(l,y=>y.search(p))},uk=(l,f)=>Tw(l,f).map(p=>{const y=Ha.detect(p.versionRegexes,f);return{current:p.name,version:y}}),kn=(l,f)=>Tw(l,f).map(p=>{const y=Ha.detect(p.versionRegexes,f);return{current:p.name,version:y}}),mc=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,wi=l=>f=>Vo(f,l),Bu=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>Vo(l,"edge/")&&Vo(l,"chrome")&&Vo(l,"safari")&&Vo(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,mc],search:l=>Vo(l,"chrome")&&!Vo(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>Vo(l,"msie")||Vo(l,"trident")},{name:"Opera",versionRegexes:[mc,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:wi("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:wi("firefox")},{name:"Safari",versionRegexes:[mc,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(Vo(l,"safari")||Vo(l,"mobile/"))&&Vo(l,"applewebkit")}],kw=[{name:"Windows",search:wi("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>Vo(l,"iphone")||Vo(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:wi("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:wi("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:wi("linux"),versionRegexes:[]},{name:"Solaris",search:wi("sunos"),versionRegexes:[]},{name:"FreeBSD",search:wi("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:wi("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ym={browsers:Q(Bu),oses:Q(kw)},Hc="Edge",oh="Chromium",Zd="IE",Ow="Opera",jl="Firefox",Wr="Safari",Aw=()=>O1({current:void 0,version:Ha.unknown()}),O1=l=>{const f=l.current,p=l.version,y=_=>()=>f===_;return{current:f,version:p,isEdge:y(Hc),isChromium:y(oh),isIE:y(Zd),isOpera:y(Ow),isFirefox:y(jl),isSafari:y(Wr)}},Js={unknown:Aw,nu:O1,edge:Q(Hc),chromium:Q(oh),ie:Q(Zd),opera:Q(Ow),firefox:Q(jl),safari:Q(Wr)},ya="Windows",Zr="iOS",Cm="Android",A1="Linux",kv="macOS",wm="Solaris",xi="FreeBSD",sh="ChromeOS",dk=()=>fk({current:void 0,version:Ha.unknown()}),fk=l=>{const f=l.current,p=l.version,y=_=>()=>f===_;return{current:f,version:p,isWindows:y(ya),isiOS:y(Zr),isAndroid:y(Cm),isMacOS:y(kv),isLinux:y(A1),isSolaris:y(wm),isFreeBSD:y(xi),isChromeOS:y(sh)}},mk={unknown:dk,nu:fk,windows:Q(ya),ios:Q(Zr),android:Q(Cm),linux:Q(A1),macos:Q(kv),solaris:Q(wm),freebsd:Q(xi),chromeos:Q(sh)},Ov={detect:(l,f,p)=>{const y=ym.browsers(),_=ym.oses(),A=f.bind(q=>_w(y,q)).orThunk(()=>uk(y,l)).fold(Js.unknown,Js.nu),I=kn(_,l).fold(mk.unknown,mk.nu),z=Sw(I,A,l,p);return{browser:A,os:I,deviceType:z}}},xm=l=>window.matchMedia(l).matches;let Rw=bm(()=>Ov.detect(window.navigator.userAgent,se.from(window.navigator.userAgentData),xm));const ko=()=>Rw(),zo=(l,f)=>{const p=(z,q)=>{if(!Vt(q)&&!q.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+q);const te=z.dom;ra(te)&&(te.style[l]=q+"px")},y=z=>{const q=f(z);if(q<=0||q===null){const te=Mu(z,l);return parseFloat(te)||0}return q},_=y,A=(z,q)=>Ne(q,(te,me)=>{const Ie=Mu(z,me),tt=Ie===void 0?0:parseInt(Ie,10);return isNaN(tt)?te:te+tt},0);return{set:p,get:y,getOuter:_,aggregate:A,max:(z,q,te)=>{const me=A(z,te);return q>me?q-me:0}}},jd=(l,f)=>Cw(l).getOr(f),$u=(l,f,p)=>jd(Mu(l,f),p),Av=(l,f,p,y)=>{const _=$u(l,`padding-${p}`,0),A=$u(l,`padding-${y}`,0),I=$u(l,`border-${p}-width`,0),z=$u(l,`border-${y}-width`,0);return f-_-A-I-z},Is=(l,f)=>{const p=l.dom,y=p.getBoundingClientRect().width||p.offsetWidth;return f==="border-box"?y:Av(l,y,"left","right")},Et=l=>$u(l,"height",l.dom.offsetHeight),Iu=l=>$u(l,"width",l.dom.offsetWidth),hk=l=>Is(l,"content-box"),gc=zo("width",l=>l.dom.offsetWidth),In=l=>gc.get(l),Gd=l=>gc.getOuter(l),rh=hk,Dw=Iu,Rv=(l,f,p)=>{const y=l.cells,_=y.slice(0,f),A=y.slice(f),I=_.concat(p).concat(A);return ah(l,I)},on=(l,f,p)=>Rv(l,f,[p]),os=(l,f,p)=>{const y=l.cells;y[f]=p},ah=(l,f)=>Wl(l.element,f,l.section,l.isNew),R1=(l,f)=>{const p=l.cells,y=Gt(p,f);return Wl(l.element,y,l.section,l.isNew)},Va=(l,f)=>l.cells[f],Ca=(l,f)=>Va(l,f).element,Vc=l=>l.cells.length,uo=l=>{const f=ma(l,p=>p.section==="colgroup");return{rows:f.fail,cols:f.pass}},Si=(l,f,p)=>{const y=Gt(l.cells,p);return Wl(f(l.element),y,l.section,!0)},qd="data-snooker-locked-cols",Fs=l=>Ba(l,qd).bind(f=>se.from(f.match(/\d+/g))).map(f=>Zt(f,De)),Kd=l=>{const f=Ne(uo(l).rows,(y,_)=>(Le(_.cells,(A,I)=>{A.isLocked&&(y[I]=!0)}),y),{}),p=ir(f,(y,_)=>parseInt(_,10));return ho(p)},Jo=(l,f)=>l+","+f,Fu=(l,f,p)=>se.from(l.access[Jo(f,p)]),Sm=(l,f,p)=>{const y=fo(l,_=>p(f,_.element));return y.length>0?se.some(y[0]):se.none()},fo=(l,f)=>{const p=_s(l.all,y=>y.cells);return ls(p,f)},Lu=l=>{const f={};let p=0;return Le(l.cells,y=>{const _=y.colspan;qo(_,A=>{const I=p+A;f[I]=ck(y.element,_,I)}),p+=_}),f},Mw=l=>{const f={},p=[],_=_e(l).map(Xe=>Xe.element).bind(va).bind(Fs).getOr({});let A=0,I=0,z=0;const{pass:q,fail:te}=ma(l,Xe=>Xe.section==="colgroup");Le(te,Xe=>{const Ze=[];Le(Xe.cells,bt=>{let Pe=0;for(;f[Jo(z,Pe)]!==void 0;)Pe++;const je=Lo(_,Pe.toString()),qe=Cv(bt.element,bt.rowspan,bt.colspan,z,Pe,je);for(let Ft=0;Ft<bt.colspan;Ft++)for(let Cn=0;Cn<bt.rowspan;Cn++){const Wn=z+Cn,ao=Pe+Ft,xo=Jo(Wn,ao);f[xo]=qe,I=Math.max(I,ao+1)}Ze.push(qe)}),A++,p.push(lr(Xe.element,Ze,Xe.section)),z++});const{columns:me,colgroups:Ie}=Tu(q).map(Xe=>{const Ze=Lu(Xe);return{colgroups:[rl(Xe.element,Fo(Ze))],columns:Ze}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Au(A,I),access:f,all:p,columns:me,colgroups:Ie}},wn={fromTable:l=>{const f=Tv(l);return Mw(f)},generate:Mw,getAt:Fu,findItem:Sm,filterItems:fo,justCells:l=>_s(l.all,f=>f.cells),justColumns:l=>Fo(l.columns),hasColumns:l=>Pt(l.columns).length>0,getColumnAt:(l,f)=>se.from(l.columns[f])},ch=(l,f=De)=>{const p=l.grid,y=qo(p.columns,Kt),_=qo(p.rows,Kt);return Gt(y,A=>M1(()=>_s(_,te=>wn.getAt(l,te,A).filter(me=>me.column===A).toArray()),te=>te.colspan===1&&f(te.element),()=>wn.getAt(l,0,A)))},M1=(l,f,p)=>{const y=l();return L(y,f).orThunk(()=>se.from(y[0]).orThunk(p)).map(I=>I.element)},Pw=l=>{const f=l.grid,p=qo(f.rows,Kt),y=qo(f.columns,Kt);return Gt(p,_=>M1(()=>_s(y,q=>wn.getAt(l,_,q).filter(te=>te.row===_).fold(Q([]),te=>[te])),q=>q.rowspan===1,()=>wn.getAt(l,_,0)))},pk=(l,f)=>{if(f<0||f>=l.length-1)return se.none();const p=l[f].fold(()=>{const _=tk(l.slice(0,f));return Or(_,(A,I)=>A.map(z=>({value:z,delta:I+1})))},_=>se.some({value:_,delta:0})),y=l[f+1].fold(()=>{const _=l.slice(f+1);return Or(_,(A,I)=>A.map(z=>({value:z,delta:I+1})))},_=>se.some({value:_,delta:1}));return p.bind(_=>y.map(A=>{const I=A.delta+_.delta;return Math.abs(A.value-_.value)/I}))},P1=(l,f)=>p=>ih(p)==="rtl"?f:l,ih=l=>Mu(l,"direction")==="rtl"?"rtl":"ltr",bk=zo("height",l=>{const f=l.dom;return Ho(l)?f.getBoundingClientRect().height:f.offsetHeight}),Gl=l=>bk.get(l),N1=l=>bk.getOuter(l),Pv=Et,Hu=(l,f)=>({left:l,top:f,translate:(y,_)=>Hu(l+y,f+_)}),ul=Hu,Nw=l=>{const f=l.getBoundingClientRect();return ul(f.left,f.top)},B1=(l,f)=>l!==void 0?l:f!==void 0?f:0,Em=l=>{const f=l.dom.ownerDocument,p=f.body,y=f.defaultView,_=f.documentElement;if(p===l.dom)return ul(p.offsetLeft,p.offsetTop);const A=B1(y==null?void 0:y.pageYOffset,_.scrollTop),I=B1(y==null?void 0:y.pageXOffset,_.scrollLeft),z=B1(_.clientTop,p.clientTop),q=B1(_.clientLeft,p.clientLeft);return Bw(l).translate(I-q,A-z)},Bw=l=>{const f=l.dom,y=f.ownerDocument.body;return y===f?ul(y.offsetLeft,y.offsetTop):Ho(l)?Nw(f):ul(0,0)},Yd=(l,f)=>({row:l,y:f}),$1=(l,f)=>({col:l,x:f}),jr=l=>Em(l).left+Gd(l),I1=l=>Em(l).left,$w=(l,f)=>$1(l,I1(f)),Nv=(l,f)=>$1(l,jr(f)),Ts=l=>Em(l).top,lh=(l,f)=>Yd(l,Ts(f)),ks=(l,f)=>Yd(l,Ts(f)+N1(f)),uh=(l,f,p)=>{if(p.length===0)return[];const y=Gt(p.slice(1),(A,I)=>A.map(z=>l(I,z))),_=p[p.length-1].map(A=>f(p.length-1,A));return y.concat([_])},za=l=>-l,At={delta:Kt,positions:l=>uh(lh,ks,l),edge:Ts},Bv=P1({delta:Kt,edge:I1,positions:l=>uh($w,Nv,l)},{delta:za,edge:jr,positions:l=>uh(Nv,$w,l)}),dh={delta:(l,f)=>Bv(f).delta(l,f),positions:(l,f)=>Bv(f).positions(l,f),edge:l=>Bv(l).edge(l)},$v={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Uc=(()=>{const l="[0-9]+",p="[eE]"+("[+-]?"+l),y="\\.",_=z=>`(?:${z})?`,I=`[+-]?(?:${["Infinity",l+y+_(l)+_(p),y+l+_(p),l+_(p)].join("|")})`;return new RegExp(`^(${I})(.*)$`)})(),dl=(l,f)=>Je(f,p=>Je($v[p],y=>l===y)),Xd=(l,f)=>se.from(Uc.exec(l)).bind(y=>{const _=Number(y[1]),A=y[2];return dl(A,f)?se.some({value:_,unit:A}):se.none()}),ot=/(\d+(\.\d+)?)%/,Wc=/(\d+(\.\d+)?)px|em/,Iv=na("col"),_m=na("tr"),Zc=(l,f,p)=>{const y=$c(l).getOrThunk(()=>Po(Jg(l)));return f(l)/p(y)*100},fh=(l,f)=>{wo(l,"width",f+"px")},Jd=(l,f)=>{wo(l,"width",f+"%")},ql=(l,f)=>{wo(l,"height",f+"px")},mh=l=>{Ci(l,"height")},Ei=l=>Pv(l)+"px",Fw=(l,f,p,y)=>{const _=va(l).map(A=>{const I=p(A);return Math.floor(f/100*I)}).getOr(f);return y(l,_),_},Oo=(l,f,p,y)=>{const _=parseFloat(l);return Du(l,"%")&&To(f)!=="table"?Fw(f,_,p,y):_},Fe=l=>{const f=Ei(l);return f?Oo(f,l,Gl,ql):Gl(l)},ca=(l,f,p)=>{const y=p(l),_=aa(l,f);return y/_},Qd=(l,f)=>il(l,f).orThunk(()=>Ba(l,f).map(p=>p+"px")),Qo=l=>Qd(l,"width"),Tm=l=>Qd(l,"height"),Ls=l=>Zc(l,In,rh),Bn=l=>Iv(l)?In(l):Dw(l),gh=l=>_m(l)?Gl(l):ca(l,"rowspan",Fe),Oe=l=>Qo(l).bind(p=>Xd(p,["fixed","relative","empty"])),$n=(l,f,p)=>{wo(l,"width",f+p)},F1=l=>In(l)+"px",Os=l=>Gl(l)+"px",yr=l=>Zc(l,In,rh)+"%",jc=l=>Qo(l).exists(f=>ot.test(f)),Fv=l=>Qo(l).exists(f=>Wc.test(f)),Vu=l=>Qo(l).isNone(),Lv=Q(ot),Ua=na("col"),Pn=l=>Qo(l).getOrThunk(()=>Bn(l)+"px"),fl=l=>Tm(l).getOrThunk(()=>gh(l)+"px"),hh=l=>Gt(wn.justColumns(l),f=>se.from(f.element)),As=l=>{const f=ko().browser,p=f.isChromium()||f.isFirefox();return Ua(l)?p:!0},L1=(l,f,p,y,_,A)=>l.filter(y).fold(()=>A(pk(p,f)),I=>_(I)),ml=(l,f,p,y)=>{const _=ch(l),A=wn.hasColumns(l)?hh(l):_,I=[se.some(dh.edge(f))].concat(Gt(dh.positions(_,f),q=>q.map(te=>te.x))),z=oe(dc);return Gt(A,(q,te)=>L1(q,te,I,z,me=>{if(As(me))return p(me);{const Ie=lk(_[te],Kt);return L1(Ie,te,I,z,tt=>y(se.some(In(tt))),y)}},y))},ph=l=>l.map(f=>f+"px").getOr(""),Hs=(l,f)=>ml(l,f,Pn,ph),Mr=(l,f,p)=>ml(l,f,Ls,y=>y.fold(()=>p.minCellWidth(),_=>_/p.pixelWidth()*100)),fe=(l,f,p)=>ml(l,f,Bn,y=>y.getOrThunk(p.minCellWidth)),mo=(l,f,p,y)=>{const _=Pw(l),A=Gt(l.all,z=>se.some(z.element)),I=[se.some(At.edge(f))].concat(Gt(At.positions(_,f),z=>z.map(q=>q.y)));return Gt(A,(z,q)=>L1(z,q,I,De,p,y))},Hv=(l,f)=>mo(l,f,gh,p=>p.getOrThunk(E1)),ss=(l,f)=>mo(l,f,fl,ph),Qs=(l,f)=>()=>Ho(l)?f(l):parseFloat(il(l,"width").getOr("0")),er=l=>{const f=Qs(l,In),p=Q(0);return{width:f,pixelWidth:f,getWidths:(_,A)=>fe(_,l,A),getCellDelta:p,singleColumnWidth:Q([0]),minCellWidth:p,setElementWidth:Se,adjustTableWidth:Se,isRelative:!0,label:"none"}},po=l=>{const f=Qs(l,q=>parseFloat(yr(q))),p=Qs(l,In);return{width:f,pixelWidth:p,getWidths:(q,te)=>Mr(q,l,te),getCellDelta:q=>q/p()*100,singleColumnWidth:(q,te)=>[100-q],minCellWidth:()=>eh()/p()*100,setElementWidth:Jd,adjustTableWidth:q=>{const te=f(),me=q/100*te,Ie=te+me;Jd(l,Ie)},isRelative:!0,label:"percent"}},H1=l=>{const f=Qs(l,In);return{width:f,pixelWidth:f,getWidths:(I,z)=>fe(I,l,z),getCellDelta:Kt,singleColumnWidth:(I,z)=>[Math.max(eh(),I+z)-I],minCellWidth:eh,setElementWidth:fh,adjustTableWidth:I=>{const z=f()+I;fh(l,z)},isRelative:!1,label:"pixel"}},zu=(l,f)=>Lv().exec(f)!==null?po(l):H1(l),bh={getTableSize:l=>Qo(l).fold(()=>er(l),p=>zu(l,p)),pixelSize:H1,percentageSize:po,noneSize:er},wa=(l,f,p,y,_,A)=>({minRow:l,minCol:f,maxRow:p,maxCol:y,allCells:_,selectedCells:A}),vk=(l,f)=>{const p=l.grid.columns;let _=l.grid.rows,A=p,I=0,z=0;const q=[],te=[];return Ko(l.access,me=>{if(q.push(me),f(me)){te.push(me);const Ie=me.row,tt=Ie+me.rowspan-1,Xe=me.column,Ze=Xe+me.colspan-1;Ie<_?_=Ie:tt>I&&(I=tt),Xe<A?A=Xe:Ze>z&&(z=Ze)}}),wa(_,A,I,z,q,te)},Vv=(l,f,p)=>{const y=l[p].element,_=ue.fromTag("td");Yo(_,ue.fromTag("br")),(f?Yo:oa)(y,_)},Hw=(l,f,p,y)=>{const _=ls(l,z=>z.section!=="colgroup"),A=f.grid.columns,I=f.grid.rows;for(let z=0;z<I;z++){let q=!1;for(let te=0;te<A;te++)z<p.minRow||z>p.maxRow||te<p.minCol||te>p.maxCol||(wn.getAt(f,z,te).filter(y).isNone()?Vv(_,q,z):q=!0)}},Vw=(l,f,p,y)=>{Ko(p.columns,I=>{(I.column<f.minCol||I.column>f.maxCol)&&vr(I.element)});const _=ls(Ud(l,"tr"),I=>I.dom.childElementCount===0);Le(_,vr),(f.minCol===f.maxCol||f.minRow===f.maxRow)&&Le(Ud(l,"th,td"),I=>{Mo(I,"rowspan"),Mo(I,"colspan")}),Mo(l,qd),Mo(l,"data-snooker-col-series"),bh.getTableSize(l).adjustTableWidth(y)},zw=(l,f,p,y)=>{if(y.minCol===0&&f.grid.columns===y.maxCol+1)return 0;const _=fe(f,l,p),A=Ne(_,(te,me)=>te+me,0),q=Ne(_.slice(y.minCol,y.maxCol+1),(te,me)=>te+me,0)/A*p.pixelWidth()-p.pixelWidth();return p.getCellDelta(q)},ef=(l,f)=>{const p=tt=>ba(tt.element,f),y=Hd(l),_=Tv(y),A=bh.getTableSize(l),I=wn.generate(_),z=vk(I,p),q="th:not("+f+"),td:not("+f+")",te=_1(y,"th,td",tt=>ba(tt,q));Le(te,vr),Hw(_,I,z,p);const me=wn.fromTable(l),Ie=zw(l,me,A,z);return Vw(y,z,I,Ie),y},km=" ",vh=((l,f)=>{const p=A=>{if(!l(A))throw new Error("Can only get "+f+" value of a "+f+" node");return y(A).getOr("")},y=A=>l(A)?se.from(A.dom.nodeValue):se.none();return{get:p,getOption:y,set:(A,I)=>{if(!l(A))throw new Error("Can only set raw "+f+" value of a "+f+" node");A.dom.nodeValue=I}}})($d,"text"),zv=l=>vh.get(l),Uv=l=>vh.getOption(l),V1=(l,f)=>vh.set(l,f),hc=l=>To(l)==="img"?1:Uv(l).fold(()=>oo(l).length,f=>f.length),z1=l=>Uv(l).filter(f=>f.trim().length!==0||f.indexOf(km)>-1).isSome(),tf=l=>It(l)&&Vl(l,"contenteditable")==="false",Om=["img","br"],U1=l=>z1(l)||is(Om,To(l))||tf(l),Uw=l=>vw(l,U1),Wv=l=>yk(l,U1),yk=(l,f)=>{const p=y=>{const _=oo(y);for(let A=_.length-1;A>=0;A--){const I=_[A];if(f(I))return se.some(I);const z=p(I);if(z.isSome())return z}return se.none()};return p(l)},tr={scope:["row","col"]},_i=l=>()=>{const f=ue.fromTag("td",l.dom);return Yo(f,ue.fromTag("br",l.dom)),f},Uu=l=>()=>ue.fromTag("col",l.dom),nf=l=>()=>ue.fromTag("colgroup",l.dom),W1=l=>()=>ue.fromTag("tr",l.dom),Wa=(l,f,p)=>{const y=gw(l,f);return Ko(p,(_,A)=>{_===null?Mo(y,A):gs(y,A,_)}),y},yh=l=>l,Z1=(l,f,p)=>Uw(l).map(_=>{const A=p.join(","),I=Wt(_,A,z=>Eo(z,l));return ta(I,(z,q)=>{const te=Ic(q);return Yo(z,te),te},f)}).getOr(f),j1=(l,f)=>{Ko(tr,(p,y)=>Ba(l,y).filter(_=>is(p,_)).each(_=>gs(f,y,_)))},Gc=(l,f,p)=>{const y=(I,z)=>{ur(I.element,z),Ci(z,"height"),I.colspan!==1&&Ci(z,"width")},_=I=>{const z=ue.fromTag(To(I.element),f.dom),q=p.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),te=q.length>0?Z1(I.element,z,q):z;return Yo(te,ue.fromTag("br")),y(I,z),j1(I.element,z),l(I.element,z),z};return{col:I=>{const z=ue.fromTag(To(I.element),f.dom);return y(I,z),l(I.element,z),z},colgroup:nf(f),row:W1(f),cell:_,replace:Wa,colGap:Uu(f),gap:_i(f)}},qc=l=>({col:Uu(l),colgroup:nf(l),row:W1(l),cell:_i(l),replace:yh,colGap:Uu(l),gap:_i(l)}),Ww=(l,f)=>{const y=document.createElement("div");return y.innerHTML=l,oo(ue.fromDom(y))},pc=l=>Gt(l,ue.fromDom),of=l=>f=>f.options.get(l),Ti="100%",gl=l=>{var f;const p=l.dom,y=(f=p.getParent(l.selection.getStart(),p.isBlock))!==null&&f!==void 0?f:l.getBody();return rh(ue.fromDom(y))+"px"},sf=(l,f)=>Zu(l)||!ju(l)?f:nr(l)?{...f,width:gl(l)}:{...f,width:Ti},Ck=(l,f)=>Zu(l)||ju(l)?f:nr(l)?{...f,width:gl(l)}:{...f,width:Ti},Ch=l=>{const f=l.options.register;f("table_clone_elements",{processor:"string[]"}),f("table_use_colgroups",{processor:"boolean",default:!0}),f("table_header_type",{processor:p=>{const y=is(["section","cells","sectionCells","auto"],p);return y?{value:p,valid:y}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),f("table_sizing_mode",{processor:"string",default:"auto"}),f("table_default_attributes",{processor:"object",default:{border:"1"}}),f("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),f("table_column_resizing",{processor:p=>{const y=is(["preservetable","resizetable"],p);return y?{value:p,valid:y}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),f("table_resize_bars",{processor:"boolean",default:!0}),f("table_style_by_css",{processor:"boolean",default:!0}),f("table_merge_content_on_paste",{processor:"boolean",default:!0})},Wu=l=>se.from(l.options.get("table_clone_elements")),wk=l=>{const f=l.options.get("object_resizing");return is(f.split(","),"table")},es=of("table_header_type"),G1=of("table_column_resizing"),ki=l=>G1(l)==="preservetable",rf=l=>G1(l)==="resizetable",wh=of("table_sizing_mode"),Oi=l=>wh(l)==="relative",nr=l=>wh(l)==="fixed",Zu=l=>wh(l)==="responsive",q1=of("table_resize_bars"),ju=of("table_style_by_css"),Vs=of("table_merge_content_on_paste"),K1=l=>{const f=l.options,p=f.get("table_default_attributes");return f.isSet("table_default_attributes")?p:Ck(l,p)},Y1=l=>{const f=l.options,p=f.get("table_default_styles");return f.isSet("table_default_styles")?p:sf(l,p)},xk=of("table_use_colgroups"),Zw=l=>Ys(l,"[contenteditable]"),Gu=(l,f=!1)=>Ho(l)?l.dom.isContentEditable:Zw(l).fold(Q(f),p=>af(p)==="true"),af=l=>l.dom.contentEditable,ia=l=>ue.fromDom(l.getBody()),Za=l=>f=>Eo(f,ia(l)),ja=l=>{Mo(l,"data-mce-style");const f=p=>Mo(p,"data-mce-style");Le(Pu(l),f),Le(th(l),f),Le(_v(l),f)},xh=l=>ue.fromDom(l.selection.getStart()),Sh=l=>l.getBoundingClientRect().width,Am=l=>l.getBoundingClientRect().height,Zv=l=>(f,p)=>{const y=f.dom.getStyle(p,l)||f.dom.getAttrib(p,l);return se.from(y).filter(Tn)},jw=Zv("width"),Gw=Zv("height"),jv=l=>/^(\d+(\.\d+)?)%$/.test(l),Rm=l=>/^(\d+(\.\d+)?)px$/.test(l),un=l=>Xo(l,na("table")).exists(Gu),yt=(l,f)=>{const p=f.column,y=f.column+f.colspan-1,_=f.row,A=f.row+f.rowspan-1;return p<=l.finishCol&&y>=l.startCol&&_<=l.finishRow&&A>=l.startRow},qu=(l,f)=>f.column>=l.startCol&&f.column+f.colspan-1<=l.finishCol&&f.row>=l.startRow&&f.row+f.rowspan-1<=l.finishRow,X1=(l,f)=>{let p=!0;const y=ln(qu,f);for(let _=f.startRow;_<=f.finishRow;_++)for(let A=f.startCol;A<=f.finishCol;A++)p=p&&wn.getAt(l,_,A).exists(y);return p?se.some(f):se.none()},J1=(l,f)=>pw(Math.min(l.row,f.row),Math.min(l.column,f.column),Math.max(l.row+l.rowspan-1,f.row+f.rowspan-1),Math.max(l.column+l.colspan-1,f.column+f.colspan-1)),Gv=(l,f,p)=>{const y=wn.findItem(l,f,Eo),_=wn.findItem(l,p,Eo);return y.bind(A=>_.map(I=>J1(A,I)))},Q1=(l,f,p)=>Gv(l,f,p).bind(y=>X1(l,y)),zn=(l,f,p,y)=>wn.findItem(l,f,Eo).bind(_=>{const A=p>0?_.row+_.rowspan-1:_.row,I=y>0?_.column+_.colspan-1:_.column;return wn.getAt(l,A+p,I+y).map(q=>q.element)}),qv=(l,f,p)=>Gv(l,f,p).map(y=>{const _=wn.filterItems(l,ln(yt,y));return Gt(_,A=>A.element)}),qw=(l,f)=>{const p=(y,_)=>pv(_,y);return wn.findItem(l,f,p).map(y=>y.element)},Kv=(l,f,p)=>va(l).bind(y=>{const _=cf(y);return zn(_,l,f,p)}),ke=(l,f,p)=>{const y=cf(l);return qv(y,f,p)},Dm=(l,f,p,y,_)=>{const A=cf(l),I=Eo(l,p)?se.some(f):qw(A,f),z=Eo(l,_)?se.some(y):qw(A,y);return I.bind(q=>z.bind(te=>qv(A,q,te)))},Kw=(l,f,p)=>{const y=cf(l);return Q1(y,f,p)},cf=wn.fromTable;var Yw=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Kl=()=>{const l=te=>ue.fromDom(te.dom.cloneNode(!1)),f=te=>gm(te).dom,p=te=>pa(te)?To(te)==="body"?!0:is(Yw,To(te)):!1,y=te=>pa(te)?is(["br","img","hr","input"],To(te)):!1,_=te=>pa(te)&&Vl(te,"contenteditable")==="false",A=(te,me)=>te.dom.compareDocumentPosition(me.dom),I=(te,me)=>{const Ie=Bc(te);ol(me,Ie)},z=te=>{const me=To(te);return is(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],me)},q=te=>pa(te)?Ba(te,"lang"):se.none();return{up:Q({selector:Qt,closest:Ys,predicate:We,all:Id}),down:Q({selector:Lc,predicate:Sv}),styles:Q({get:Mu,getRaw:il,set:wo,remove:Ci}),attrs:Q({get:Vl,set:gs,remove:Mo,copyTo:I}),insert:Q({before:Fd,after:Ou,afterAll:qn,append:Yo,appendAll:Ia,prepend:oa,wrap:bv}),remove:Q({unwrap:p1,remove:vr}),create:Q({nu:ue.fromTag,clone:l,text:ue.fromText}),query:Q({comparePosition:A,prevSibling:Qg,nextSibling:hm}),property:Q({children:oo,name:To,parent:Ul,document:f,isText:$d,isComment:Co,isElement:pa,isSpecial:z,getLanguage:q,getText:zv,setText:V1,isBoundary:p,isEmptyTag:y,isNonEditable:_}),eq:Eo,is:sk}};const eb=(l,f,p,y)=>{const _=p[0],A=p.slice(1);return y(l,f,_,A)},lf=(l,f,p)=>p.length>0?eb(l,f,p,Eh):se.none(),Eh=(l,f,p,y)=>{const _=f(l,p);return ta(y,(A,I)=>{const z=f(l,I);return Ku(l,A,z)},_)},Ku=(l,f,p)=>f.bind(y=>p.filter(ln(l.eq,y))),go=(l,f)=>ln(l.eq,f),hl=(l,f,p,y=An)=>{const _=[f].concat(l.up().all(f)),A=[p].concat(l.up().all(p)),I=me=>um(me,y).fold(()=>me,tt=>me.slice(0,tt+1)),z=I(_),q=I(A),te=L(z,me=>Je(q,go(l,me)));return{firstpath:z,secondpath:q,shared:te}},Xw=lf,Yl=hl,Yv=Kl(),uf=(l,f)=>Xw(Yv,(p,y)=>l(y),f),Xv=(l,f,p)=>Yl(Yv,l,f,p),Jv=l=>Qt(l,"table"),Gr=(l,f,p)=>{const y=_=>A=>p!==void 0&&p(A)||Eo(A,_);return Eo(l,f)?se.some({boxes:se.some([l]),start:l,finish:f}):Jv(l).bind(_=>Jv(f).bind(A=>{if(Eo(_,A))return se.some({boxes:ke(_,l,f),start:l,finish:f});if(pv(_,A)){const I=Wt(f,"td,th",y(_)),z=I.length>0?I[I.length-1]:f;return se.some({boxes:Dm(_,l,_,f,A),start:l,finish:z})}else if(pv(A,_)){const I=Wt(l,"td,th",y(A)),z=I.length>0?I[I.length-1]:l;return se.some({boxes:Dm(A,l,_,f,A),start:l,finish:z})}else return Xv(l,f).shared.bind(I=>Ys(I,"table",p).bind(z=>{const q=Wt(f,"td,th",y(z)),te=q.length>0?q[q.length-1]:f,me=Wt(l,"td,th",y(z)),Ie=me.length>0?me[me.length-1]:l;return se.some({boxes:Dm(z,l,_,f,A),start:Ie,finish:te})}))}))},Mm=(l,f)=>{const p=Lc(l,f);return p.length>0?se.some(p):se.none()},Sk=(l,f)=>L(l,p=>ba(p,f)),Yu=(l,f,p)=>yi(l,f).bind(y=>yi(l,p).bind(_=>uf(Jv,[y,_]).map(A=>({first:y,last:_,table:A})))),Ek=(l,f)=>Qt(l,"table").bind(p=>yi(p,f).bind(y=>Gr(y,l).bind(_=>_.boxes.map(A=>({boxes:A,start:_.start,finish:_.finish}))))),df=(l,f,p,y,_)=>Sk(l,_).bind(A=>Kv(A,f,p).bind(I=>Ek(I,y))),tb=(l,f)=>Mm(l,f),_k=(l,f,p)=>Yu(l,f,p).bind(y=>{const _=q=>Eo(l,q),A="thead,tfoot,tbody,table",I=Qt(y.first,A,_),z=Qt(y.last,A,_);return I.bind(q=>z.bind(te=>Eo(q,te)?Kw(y.table,y.first,y.last):se.none()))}),_h=Kt,Ai=l=>{const f=(y,_)=>Ba(y,_).exists(A=>parseInt(A,10)>1),p=y=>f(y,"rowspan")||f(y,"colspan");return l.length>0&&So(l,p)?se.some(l):se.none()},Pr=(l,f,p)=>f.length<=1?se.none():_k(l,p.firstSelectedSelector,p.lastSelectedSelector).map(y=>({bounds:y,cells:f})),He="data-mce-selected",Pm="td["+He+"],th["+He+"]",zs="["+He+"]",Qv="data-mce-first-selected",ey="td["+Qv+"],th["+Qv+"]",ty="data-mce-last-selected",to="td["+ty+"],th["+ty+"]",Tk=zs,ff={selected:He,selectedSelector:Pm,firstSelected:Qv,firstSelectedSelector:ey,lastSelected:ty,lastSelectedSelector:to},Xl=(l,f,p)=>({element:p,mergable:Pr(f,l,ff),unmergable:Ai(l),selection:_h(l)}),Nm=(l,f,p)=>({element:l,clipboard:f,generators:p}),ny=(l,f,p,y)=>({selection:_h(l),clipboard:p,generators:y}),pl=l=>va(l).bind(f=>tb(f,ff.firstSelectedSelector)).fold(Q(l),f=>f[0]),Jw=l=>(f,p)=>{const y=To(f),_=y==="col"||y==="colgroup"?pl(f):f;return Ys(_,l,p)},rs=Jw("th,td,caption"),nb=Jw("th,td"),Un=l=>pc(l.model.table.getSelectedCells()),oy=l=>ls(Un(l),f=>ba(f,ff.selectedSelector)),qr=l=>va(l[0]).map(f=>{const p=ef(f,Tk);return ja(p),[p]}),Bm=(l,f)=>Gt(f,p=>l.selection.serializer.serialize(p.dom,{})).join(""),Ri=(l,f)=>{const p=l.getDoc(),y=bi(ue.fromDom(l.getBody())),_=ue.fromTag("div",p);gs(_,"data-mce-bogus","all"),Xs(_,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});const A=al(y);Ia(_,f),Yo(A,_);const I=_.dom.innerText;return vr(_),I},AM=(l,f)=>{l.on("BeforeGetContent",p=>{const y=_=>{p.preventDefault(),qr(_).each(A=>{const I=p.format==="text"?Ri(l,A):Bm(l,A);p.content=I})};if(p.selection===!0){const _=oy(l);_.length>=1&&y(_)}}),l.on("BeforeSetContent",p=>{if(p.selection===!0&&p.paste===!0){const y=Un(l);_e(y).each(_=>{va(_).each(A=>{const I=ls(Ww(p.content),q=>To(q)!=="meta"),z=na("table");if(Vs(l)&&I.length===1&&z(I[0])){p.preventDefault();const q=ue.fromDom(l.getDoc()),te=qc(q),me=Nm(_,I[0],te);f.pasteCells(A,me).each(()=>{l.focus()})}})})}})},ob=(l,f)=>({element:l,offset:f}),kk=(l,f,p)=>l.property().isText(f)&&l.property().getText(f).trim().length===0||l.property().isComment(f)?p(f).bind(y=>kk(l,y,p).orThunk(()=>se.some(y))):se.none(),Qw=(l,f)=>l.property().isText(f)?l.property().getText(f).length:l.property().children(f).length,Kc=(l,f)=>{const p=kk(l,f,l.query().prevSibling).getOr(f);if(l.property().isText(p))return ob(p,Qw(l,p));const y=l.property().children(p);return y.length>0?Kc(l,y[y.length-1]):ob(p,Qw(l,p))},Di=Kc,Nr=Kl(),$m=l=>Di(Nr,l),sb=(l,f)=>{dc(l)||Oe(l).each(y=>{const _=y.value/2;$n(l,_,y.unit),$n(f,_,y.unit)})},rb=l=>Gt(l,Q(0)),Im=(l,f,p,y,_)=>_(l.slice(0,f)).concat(y).concat(_(l.slice(p))),Xu=l=>(f,p,y,_)=>{if(l(y)){const A=Math.max(_,f[p]-Math.abs(y)),I=Math.abs(A-f[p]);return y>=0?I:-I}else return y},bl=Xu(l=>l<0),Fm=Xu(De),Ju=()=>{const l=(z,q,te,me,Ie)=>{const tt=bl(z,q,me,Ie);return Im(z,q,te+1,[tt,0],rb)},f=(z,q,te,me)=>{const Ie=(100+te)/100,tt=Math.max(me,(z[q]+te)/Ie);return Gt(z,(Xe,Ze)=>(Ze===q?tt:Xe/Ie)-Xe)},p=(z,q,te,me,Ie,tt)=>tt?f(z,q,me,Ie):l(z,q,te,me,Ie);return{resizeTable:(z,q)=>z(q),clampTableDelta:bl,calcLeftEdgeDeltas:p,calcMiddleDeltas:(z,q,te,me,Ie,tt,Xe)=>p(z,te,me,Ie,tt,Xe),calcRightEdgeDeltas:(z,q,te,me,Ie,tt)=>{if(tt)return f(z,te,me,Ie);{const Xe=bl(z,te,me,Ie);return rb(z.slice(0,te)).concat([Xe])}},calcRedestributedWidths:(z,q,te,me)=>{if(me){const tt=(q+te)/q,Xe=Gt(z,Ze=>Ze/tt);return{delta:tt*100-100,newSizes:Xe}}else return{delta:te,newSizes:z}}}},Jl=()=>{const l=(I,z,q,te,me)=>{const Ie=te>=0?q:z,tt=Fm(I,Ie,te,me);return Im(I,z,q+1,[tt,-tt],rb)};return{resizeTable:(I,z,q)=>{q&&I(z)},clampTableDelta:(I,z,q,te,me)=>{if(me){if(q>=0)return q;{const Ie=Ne(I,(tt,Xe)=>tt+Xe-te,0);return Math.max(-Ie,q)}}else return bl(I,z,q,te)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(I,z,q,te,me,Ie)=>l(I,q,te,me,Ie),calcRightEdgeDeltas:(I,z,q,te,me,Ie)=>{if(Ie)return rb(I);{const tt=te/I.length;return Gt(I,Q(tt))}},calcRedestributedWidths:(I,z,q,te)=>({delta:0,newSizes:I})}},mf=l=>wn.fromTable(l).grid,Th=na("th"),ab=l=>So(l,f=>Th(f.element)),ex=(l,f)=>l&&f?"sectionCells":l?"section":"cells",sy=l=>{const f=l.section==="thead",p=ps(Lm(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:f||p?{type:"header",subType:ex(f,p)}:{type:"body"}},Lm=l=>{const f=ls(l,p=>Th(p.element));return f.length===0?se.some("td"):f.length===l.length?se.some("th"):se.none()},tx=l=>{const f=Gt(l,_=>sy(_).type),p=is(f,"header"),y=is(f,"footer");if(!p&&!y)return se.some("body");{const _=is(f,"body");return p&&!_&&!y?se.some("header"):!p&&!_&&y?se.some("footer"):se.none()}},Ok=l=>Or(l.all,f=>{const p=sy(f);return p.type==="header"?se.from(p.subType):se.none()}),cb=(l,f,p)=>La(p(l.element,f),!0,l.isLocked),ry=(l,f)=>l.section!==f?Wl(l.element,l.cells,f,l.isNew):l,kh=()=>({transformRow:ry,transformCell:(l,f,p)=>{const y=p(l.element,f),_=To(y)!=="td"?vv(y,"td"):y;return La(_,l.isNew,l.isLocked)}}),ay=()=>({transformRow:ry,transformCell:cb}),Hm=()=>({transformRow:(l,f)=>ry(l,f==="thead"?"tbody":f),transformCell:cb}),Vm={getTableSectionType:(l,f)=>{const p=wn.fromTable(l);switch(Ok(p).getOr(f)){case"section":return kh();case"sectionCells":return ay();case"cells":return Hm()}},section:kh,sectionCells:ay,cells:Hm,fallback:()=>({transformRow:Kt,transformCell:cb})},Yc=(l,f,p,y)=>{p===y?Mo(l,f):gs(l,f,p)},Oh=(l,f,p)=>{Tu(Zl(l,f)).fold(()=>oa(l,p),y=>Ou(y,p))},nx=(l,f)=>{const p=zd(l,f).getOrThunk(()=>{const y=ue.fromTag(f,Jg(l).dom);return f==="thead"?Oh(l,"caption,colgroup",y):f==="colgroup"?Oh(l,"caption",y):Yo(l,y),y});return Fa(p),p},ox=(l,f)=>{const p=[],y=[],_=Xe=>Gt(Xe,Ze=>{Ze.isNew&&p.push(Ze.element);const bt=Ze.element;return Fa(bt),Le(Ze.cells,Pe=>{Pe.isNew&&y.push(Pe.element),Yc(Pe.element,"colspan",Pe.colspan,1),Yc(Pe.element,"rowspan",Pe.rowspan,1),Yo(bt,Pe.element)}),bt}),A=Xe=>_s(Xe,Ze=>Gt(Ze.cells,bt=>(Yc(bt.element,"span",bt.colspan,1),bt.element))),I=(Xe,Ze)=>{const bt=nx(l,Ze),je=(Ze==="colgroup"?A:_)(Xe);Ia(bt,je)},z=Xe=>{zd(l,Xe).each(vr)},q=(Xe,Ze)=>{Xe.length>0?I(Xe,Ze):z(Ze)},te=[],me=[],Ie=[],tt=[];return Le(f,Xe=>{switch(Xe.section){case"thead":te.push(Xe);break;case"tbody":me.push(Xe);break;case"tfoot":Ie.push(Xe);break;case"colgroup":tt.push(Xe);break}}),q(tt,"colgroup"),q(te,"thead"),q(me,"tbody"),q(Ie,"tfoot"),{newRows:p,newCells:y}},sx=l=>Gt(l,f=>{const p=Ic(f.element);return Le(f.cells,y=>{const _=Hd(y.element);Yc(_,"colspan",y.colspan,1),Yc(_,"rowspan",y.rowspan,1),Yo(p,_)}),p}),gf=(l,f)=>Gt(l,p=>Va(p,f)),MM=(l,f)=>l[f],hf=(l,f)=>{if(l.length===0)return 0;const p=l[0];return um(l,_=>!f(p.element,_.element)).getOr(l.length)},zm=(l,f,p,y)=>{const _=MM(l,f),A=_.section==="colgroup",I=hf(_.cells.slice(p),y),z=A?1:hf(gf(l.slice(f),p),y);return{colspan:I,rowspan:z}},rx=(l,f)=>{const p=Gt(l,_=>Gt(_.cells,An)),y=(_,A,I,z)=>{for(let q=_;q<_+I;q++)for(let te=A;te<A+z;te++)p[q][te]=!0};return Gt(l,(_,A)=>{const I=_s(_.cells,(z,q)=>{if(p[A][q]===!1){const te=zm(l,A,q,f);return y(A,q,te.rowspan,te.colspan),[yv(z.element,te.rowspan,te.colspan,z.isNew)]}else return[]});return Vd(_.element,I,_.section,_.isNew)})},Um=(l,f,p)=>{const y=[];Le(l.colgroups,_=>{const A=[];for(let I=0;I<l.grid.columns;I++){const z=wn.getColumnAt(l,I).map(q=>La(q.element,p,!1)).getOrThunk(()=>La(f.colGap(),!0,!1));A.push(z)}y.push(Wl(_.element,A,"colgroup",p))});for(let _=0;_<l.grid.rows;_++){const A=[];for(let q=0;q<l.grid.columns;q++){const te=wn.getAt(l,_,q).map(me=>La(me.element,p,me.isLocked)).getOrThunk(()=>La(f.gap(),!0,!1));A.push(te)}const I=l.all[_],z=Wl(I.element,A,I.section,p);y.push(z)}return y},Ak=(l,f)=>Um(l,f,!1),cy=l=>rx(l,Eo),ax=(l,f)=>Or(l.all,p=>L(p.cells,y=>Eo(f,y.element))),cx=(l,f,p)=>{const y=Gt(f.selection,A=>Wd(A).bind(I=>ax(l,I)).filter(p)),_=cl(y);return y1(_.length>0,_)},dr=(l,f,p,y,_)=>(A,I,z,q)=>{const te=wn.fromTable(A),me=se.from(q==null?void 0:q.section).getOrThunk(Vm.fallback);return f(te,I).map(tt=>{const Xe=Ak(te,z),Ze=l(Xe,tt,Eo,_(z),me),bt=Kd(Ze.grid),Pe=cy(Ze.grid);return{info:tt,grid:Pe,cursor:Ze.cursor,lockedColumns:bt}}).bind(tt=>{const Xe=ox(A,tt.grid),Ze=se.from(q==null?void 0:q.sizing).getOrThunk(()=>bh.getTableSize(A)),bt=se.from(q==null?void 0:q.resize).getOrThunk(Jl);return p(A,tt.grid,tt.info,{sizing:Ze,resize:bt,section:me}),y(A),Mo(A,qd),tt.lockedColumns.length>0&&gs(A,qd,tt.lockedColumns.join(",")),se.some({cursor:tt.cursor,newRows:Xe.newRows,newCells:Xe.newCells})})},PM=(l,f)=>Wd(f.element).bind(p=>ax(l,p).map(y=>({...y,generators:f.generators,clipboard:f.clipboard}))),Qu=(l,f)=>cx(l,f,De).map(p=>({cells:p,generators:f.generators,clipboard:f.clipboard})),Rk=(l,f)=>f.mergable,Ql=(l,f)=>f.unmergable,xa=(l,f)=>cx(l,f,De),Mi=(l,f)=>cx(l,f,p=>!p.isLocked),pf=(l,f)=>ax(l,f).exists(p=>!p.isLocked),ix=(l,f)=>So(f,p=>pf(l,p)),Ah=(l,f)=>Rk(l,f).filter(p=>ix(l,p.cells)),ib=(l,f)=>Ql(l,f).filter(p=>ix(l,p)),ed=(l,f,p,y)=>{const _=uo(l).rows;if(_.length===0)return l;for(let A=f.startRow;A<=f.finishRow;A++)for(let I=f.startCol;I<=f.finishCol;I++){const z=_[A],q=Va(z,I).isLocked;os(z,I,La(y(),!1,q))}return l},iy=(l,f,p,y)=>{const _=uo(l).rows;let A=!0;for(let I=0;I<_.length;I++)for(let z=0;z<Vc(_[0]);z++){const q=_[I],te=Va(q,z),me=te.element,Ie=p(me,f);Ie&&!A?os(q,z,La(y(),!0,te.isLocked)):Ie&&(A=!1)}return l},Pi=(l,f)=>Ne(l,(p,y)=>Je(p,_=>f(_.element,y.element))?p:p.concat([y]),[]),vl=(l,f,p,y)=>(f>0&&f<l[0].cells.length&&Le(l,_=>{const A=_.cells[f-1];let I=0;const z=y();for(;_.cells.length>f+I&&p(A.element,_.cells[f+I].element);)os(_,f+I,La(z,!0,_.cells[f+I].isLocked)),I++}),l),Dk=(l,f,p,y)=>{const _=uo(l).rows;if(f>0&&f<_.length){const A=_[f-1].cells,I=Pi(A,p);Le(I,z=>{let q=se.none();for(let te=f;te<_.length;te++)for(let me=0;me<Vc(_[0]);me++){const Ie=_[te],tt=Va(Ie,me);p(tt.element,z.element)&&(q.isNone()&&(q=se.some(y())),q.each(Ze=>{os(Ie,me,La(Ze,!0,tt.isLocked))}))}})}return l},Rs=l=>{const f=A=>A(l),p=Q(l),y=()=>_,_={tag:!0,inner:l,fold:(A,I)=>I(l),isValue:De,isError:An,map:A=>lb.value(A(l)),mapError:y,bind:f,exists:f,forall:f,getOr:p,or:y,getOrThunk:p,orThunk:y,getOrDie:p,each:A=>{A(l)},toOptional:()=>se.some(l)};return _},Rh=l=>{const f=()=>p,p={tag:!1,inner:l,fold:(y,_)=>y(l),isValue:An,isError:De,map:f,mapError:y=>lb.error(y(l)),bind:f,exists:An,forall:De,getOr:Kt,or:Kt,getOrThunk:Go,orThunk:Go,getOrDie:rn(String(l)),each:Se,toOptional:se.none};return p},lb={value:Rs,error:Rh,fromOption:(l,f)=>l.fold(()=>Rh(f),Rs)},ly=(l,f,p)=>{if(l.row>=f.length||l.column>Vc(f[0]))return lb.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const y=f.slice(l.row),_=y[0].cells.slice(l.column),A=Vc(p[0]),I=p.length;return lb.value({rowDelta:y.length-I,colDelta:_.length-A})},bf=(l,f)=>{const p=Vc(l[0]),y=Vc(f[0]);return{rowDelta:0,colDelta:p-y}},td=(l,f)=>{const p=l.length,y=f.length;return{rowDelta:p-y,colDelta:0}},Xc=(l,f,p,y)=>{const _=f.section==="colgroup"?p.col:p.cell;return qo(l,A=>La(_(),!0,y(A)))},vc=(l,f,p,y)=>{const _=l[l.length-1];return l.concat(qo(f,()=>{const A=_.section==="colgroup"?p.colgroup:p.row,I=Si(_,A,Kt),z=Xc(I.cells.length,I,p,q=>Bs(y,q.toString()));return ah(I,z)}))},lx=(l,f,p,y)=>Gt(l,_=>{const A=Xc(f,_,p,An);return Rv(_,y,A)}),Mk=(l,f,p)=>Gt(l,y=>Ne(p,(_,A)=>{const I=Xc(1,y,f,De)[0];return on(_,A,I)},y)),yl=(l,f,p)=>{const y=f.colDelta<0?lx:Kt,_=f.rowDelta<0?vc:Kt,A=Kd(l),I=Vc(l[0]),z=Je(A,me=>me===I-1),q=y(l,Math.abs(f.colDelta),p,z?I-1:I),te=Kd(q);return _(q,Math.abs(f.rowDelta),p,Zt(te,De))},eu=(l,f,p,y)=>{const _=Va(l[f],p),A=ln(y,_.element),I=l[f];return l.length>1&&Vc(I)>1&&(p>0&&A(Ca(I,p-1))||p<I.cells.length-1&&A(Ca(I,p+1))||f>0&&A(Ca(l[f-1],p))||f<l.length-1&&A(Ca(l[f+1],p)))},ub=(l,f,p,y,_,A)=>{const I=l.row,z=l.column,q=p.length,te=Vc(p[0]),me=I+q,Ie=z+te+A.length,tt=Zt(A,De);for(let Xe=I;Xe<me;Xe++){let Ze=0;for(let bt=z;bt<Ie;bt++){if(tt[bt]){Ze++;continue}eu(f,Xe,bt,_)&&iy(f,Ca(f[Xe],bt),_,y.cell);const Pe=bt-z-Ze,je=Va(p[Xe-I],Pe),qe=je.element,Ft=y.replace(qe);os(f[Xe],bt,La(Ft,!0,je.isLocked))}}return f},xn=(l,f,p)=>{const y=Vc(f[0]),_=uo(f).cols.length+l.row,A=qo(y-l.column,z=>z+l.column),I=L(A,z=>So(p,q=>q!==z)).getOr(y-1);return{row:_,column:I}},Cr=(l,f,p)=>ls(p,y=>y>=l.column&&y<=Vc(f[0])+l.column),vf=(l,f,p,y,_)=>{const A=Kd(f),I=xn(l,f,A),z=uo(p).rows,q=Cr(I,z,A);return ly(I,f,z).map(me=>{const Ie={...me,colDelta:me.colDelta-q.length},tt=yl(f,Ie,y),Xe=Kd(tt),Ze=Cr(I,z,Xe);return ub(I,tt,z,y,_,Ze)})},Wm=(l,f,p,y,_)=>{vl(f,l,_,y.cell);const A=td(p,f),I=yl(p,A,y),z=td(f,I),q=yl(f,z,y);return Gt(q,(te,me)=>Rv(te,l,I[me].cells))},so=(l,f,p,y,_)=>{Dk(f,l,_,y.cell);const A=Kd(f),I=bf(f,p),z={...I,colDelta:I.colDelta-A.length},q=yl(f,z,y),{cols:te,rows:me}=uo(q),Ie=Kd(q),tt=bf(p,f),Xe={...tt,colDelta:tt.colDelta+Ie.length},Ze=Mk(p,y,Ie),bt=yl(Ze,Xe,y);return[...te,...me.slice(0,l),...bt,...me.slice(l,me.length)]},yf=(l,f,p,y)=>Si(l,_=>y(_,p),f),tu=(l,f,p,y,_)=>{const{rows:A,cols:I}=uo(l),z=A.slice(0,f),q=A.slice(f),te=yf(A[p],(me,Ie)=>f>0&&f<A.length&&y(Ca(A[f-1],Ie),Ca(A[f],Ie))?Va(A[f],Ie):La(_(me.element,y),!0,me.isLocked),y,_);return[...I,...z,te,...q]},ux=(l,f,p,y,_,A,I)=>{if(p==="colgroup"||!y){const z=Va(l,_);return La(I(z.element,A),!0,!1)}else return Va(l,f)},Pk=(l,f,p,y,_)=>Gt(l,A=>{const I=f>0&&f<Vc(A)&&y(Ca(A,f-1),Ca(A,f)),z=ux(A,f,A.section,I,p,y,_);return on(A,f,z)}),dx=(l,f)=>_s(l,p=>{const y=p.cells,_=ta(f,(A,I)=>I>=0&&I<A.length?A.slice(0,I).concat(A.slice(I+1)):A,y);return _.length>0?[Wl(p.element,_,p.section,p.isNew)]:[]}),ro=(l,f,p)=>{const{rows:y,cols:_}=uo(l);return[..._,...y.slice(0,f),...y.slice(p+1)]},Dh=(l,f,p,y)=>Ca(l[f],p)!==void 0&&f>0&&y(Ca(l[f-1],p),Ca(l[f],p)),Nk=(l,f,p)=>f>0&&p(Ca(l,f-1),Ca(l,f)),fx=(l,f,p,y)=>Dh(l,f,p,y)||Nk(l[f],p,y),Cf=(l,f)=>So(f,Kt)&&ab(l.cells)?De:(y,_,A)=>!(To(y.element)==="th"&&f[A]),Jc=(l,f)=>So(f,Kt)&&ab(l)?De:(y,_,A)=>!(To(y.element)==="th"&&f[_]),Mh=(l,f,p,y)=>{const _=I=>I==="row"?fc(f):dc(f),A=I=>_(I)?`${I}group`:I;return l?Th(f)?A(p):null:y&&Th(f)?A(p==="row"?"col":"row"):null},nu=(l,f)=>(p,y,_)=>se.some(Mh(l,p.element,"col",f[_])),mt=(l,f)=>(p,y)=>se.some(Mh(l,p.element,"row",f[y])),mx=(l,f,p)=>La(p(l.element,f),!0,l.isLocked),db=(l,f,p,y,_,A,I)=>{const z=q=>Je(f,te=>p(q.element,te.element));return Gt(l,(q,te)=>R1(q,(me,Ie)=>{if(z(me)){const tt=I(me,te,Ie)?_(me,p,y):me;return A(tt,te,Ie).each(Xe=>{h1(tt.element,{scope:se.from(Xe)})}),tt}else return me}))},gx=(l,f,p)=>_s(l,(y,_)=>fx(l,_,f,p)?[]:[Va(y,f)]),hx=(l,f,p)=>{const y=l[f];return _s(y.cells,(_,A)=>fx(l,f,A,p)?[]:[_])},uy=(l,f,p,y,_)=>{const A=uo(l).rows,I=_s(f,me=>gx(A,me,y)),z=Gt(A,me=>ab(me.cells)),q=Jc(I,z),te=mt(p,z);return db(l,I,y,_,mx,te,q)},dy=(l,f,p,y,_,A,I)=>{const{cols:z,rows:q}=uo(l),te=q[f[0]],me=_s(f,Pe=>hx(q,Pe,_)),Ie=Gt(te.cells,(Pe,je)=>ab(gx(q,je,_))),tt=[...q];Le(f,Pe=>{tt[Pe]=I.transformRow(q[Pe],p)});const Xe=[...z,...tt],Ze=Cf(te,Ie),bt=nu(y,Ie);return db(Xe,me,_,A,I.transformCell,bt,Ze)},Zm=(l,f,p,y)=>{const _=uo(l).rows,A=Gt(f,I=>Va(_[I.row],I.column));return db(l,A,p,y,mx,se.none,De)},wf={generate:l=>{if(!ge(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const f=[],p={};return Le(l,(y,_)=>{const A=Pt(y);if(A.length!==1)throw new Error("one and only one name per case");const I=A[0],z=y[I];if(p[I]!==void 0)throw new Error("duplicate key detected:"+I);if(I==="cata")throw new Error("cannot have a case named cata (sorry)");if(!ge(z))throw new Error("case arguments must be an array");f.push(I),p[I]=(...q)=>{const te=q.length;if(te!==z.length)throw new Error("Wrong number of arguments to case "+I+". Expected "+z.length+" ("+z+"), got "+te);return{fold:(...Ie)=>{if(Ie.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+Ie.length);return Ie[_].apply(null,q)},match:Ie=>{const tt=Pt(Ie);if(f.length!==tt.length)throw new Error("Wrong number of arguments to match. Expected: "+f.join(",")+`
Actual: `+tt.join(","));if(!So(f,Ze=>is(tt,Ze)))throw new Error("Not all branches were specified when using match. Specified: "+tt.join(", ")+`
Required: `+f.join(", "));return Ie[I].apply(null,q)},log:Ie=>{console.log(Ie,{constructors:f,constructor:I,params:q})}}}}),p}},jm={...wf.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},mb=(l,f)=>l.length===0?jm.none():l.length===1?jm.only(0):f===0?jm.left(0,1):f===l.length-1?jm.right(f-1,f):f>0&&f<l.length-1?jm.middle(f-1,f,f+1):jm.none(),Qc=(l,f,p,y,_)=>{const A=l.slice(0),I=mb(l,f),z=Q(Gt(A,Q(0))),q=tt=>y.singleColumnWidth(A[tt],p),te=(tt,Xe)=>_.calcLeftEdgeDeltas(A,tt,Xe,p,y.minCellWidth(),y.isRelative),me=(tt,Xe,Ze)=>_.calcMiddleDeltas(A,tt,Xe,Ze,p,y.minCellWidth(),y.isRelative),Ie=(tt,Xe)=>_.calcRightEdgeDeltas(A,tt,Xe,p,y.minCellWidth(),y.isRelative);return I.fold(z,q,te,me,Ie)},Bk=(l,f,p)=>{let y=0;for(let _=l;_<f;_++)y+=p[_]!==void 0?p[_]:0;return y},gb=(l,f)=>{const p=wn.justCells(l);return Gt(p,y=>{const _=Bk(y.column,y.column+y.colspan,f);return{element:y.element,width:_,colspan:y.colspan}})},hb=(l,f)=>{const p=wn.justColumns(l);return Gt(p,(y,_)=>({element:y.element,width:f[_],colspan:y.colspan}))},$k=(l,f)=>Gt(l.all,(p,y)=>({element:p.element,height:f[y]})),Ik=l=>ta(l,(f,p)=>f+p,0),px=(l,f)=>wn.hasColumns(l)?hb(l,f):gb(l,f),Nh=(l,f,p)=>{const y=px(l,f);Le(y,_=>{p.setElementWidth(_.element,_.width)})},bx=(l,f,p,y,_)=>{const A=wn.fromTable(l),I=_.getCellDelta(f),z=_.getWidths(A,_),q=p===A.grid.columns-1,te=y.clampTableDelta(z,p,I,_.minCellWidth(),q),me=Qc(z,p,te,_,y),Ie=Gt(me,(tt,Xe)=>tt+z[Xe]);Nh(A,Ie,_),y.resizeTable(_.adjustTableWidth,te,q)},fy=(l,f,p)=>{const y=wn.fromTable(l),_=Hv(y,l),A=Gt(_,(q,te)=>p===te?Math.max(f+q,E1()):q),I=$k(y,A);Le(I,q=>{ql(q.element,q.height)}),Le(wn.justCells(y),q=>{mh(q.element)});const z=Ik(A);ql(l,z)},Fk=(l,f,p,y,_)=>{const A=wn.generate(f),I=y.getWidths(A,y),z=y.pixelWidth(),{newSizes:q,delta:te}=_.calcRedestributedWidths(I,z,p.pixelDelta,y.isRelative);Nh(A,q,y),y.adjustTableWidth(te)},Bh=(l,f,p,y)=>{const _=wn.generate(f),A=y.getWidths(_,y);Nh(_,A,y)},Gm=l=>Ne(l,(p,y)=>Je(p,A=>A.column===y.column)?p:p.concat([y]),[]).sort((p,y)=>p.column-y.column),nd=na("col"),pb=na("colgroup"),my=l=>To(l)==="tr"||pb(l),bb=l=>{const f=Ur(l,"colspan",1),p=Ur(l,"rowspan",1);return{element:l,colspan:f,rowspan:p}},gy=(l,f=bb)=>{const p=z=>nd(z.element)?l.col(z):l.cell(z),y=z=>pb(z.element)?l.colgroup(z):l.row(z),_=z=>{if(my(z))return y({element:z});{const q=z,te=p(f(q));return A=se.some({item:q,replacement:te}),te}};let A=se.none();return{getOrInit:(z,q)=>A.fold(()=>_(z),te=>q(z,te.item)?te.replacement:_(z))}},hy=l=>f=>{const p=[],y=(I,z)=>L(p,q=>z(q.item,I)),_=I=>{const z=l==="td"?{scope:null}:{},q=f.replace(I,l,z);return p.push({item:I,sub:q}),q};return{replaceOrInit:(I,z)=>{if(my(I)||nd(I))return I;{const q=I;return y(q,z).fold(()=>_(q),te=>z(I,te.item)?te.sub:_(q))}}}},py=l=>Ba(l,"scope").map(f=>f.substr(0,3)),Sa={modification:gy,transform:hy,merging:l=>({unmerge:y=>{const _=py(y);return _.each(A=>gs(y,"scope",A)),()=>{const A=l.cell({element:y,colspan:1,rowspan:1});return Ci(A,"width"),Ci(y,"width"),_.each(I=>gs(A,"scope",I)),A}},merge:y=>{const _=()=>{const A=cl(Gt(y,py));if(A.length===0)return se.none();{const I=A[0],z=["row","col"];return Je(A,te=>te!==I&&is(z,te))?se.none():se.from(I)}};return Ci(y[0],"width"),_().fold(()=>Mo(y[0],"scope"),A=>gs(y[0],"scope",A+"group")),Q(y[0])}})},xf=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],yx=(l,f)=>{const p=l.property().name(f);return is(["ol","ul"],p)},od=(l,f)=>{const p=l.property().name(f);return is(xf,p)},Sf=(l,f)=>is(["br","img","hr","input"],l.property().name(f)),by=Kl(),xe=l=>od(by,l),ei=l=>yx(by,l),Ef=l=>Sf(by,l),Lk=l=>{const f=na("br"),p=q=>So(q,te=>f(te)||$d(te)&&zv(te).trim().length===0),y=q=>To(q)==="li"||We(q,ei).isSome(),_=q=>hm(q).map(te=>xe(te)?!0:Ef(te)?To(te)!=="img":!1).getOr(!1),A=q=>Wv(q).bind(te=>{const me=_(te);return Ul(te).map(Ie=>me===!0||y(Ie)||f(te)||xe(Ie)&&!Eo(q,Ie)?[]:[ue.fromTag("br")])}).getOr([]),z=(()=>{const q=_s(l,te=>{const me=oo(te);return p(me)?[]:me.concat(A(te))});return q.length===0?[ue.fromTag("br")]:q})();Fa(l[0]),Ia(l[0],z)},$h=l=>Gu(l,!0),yc=l=>{Pu(l).length===0&&vr(l)},qm=(l,f)=>({grid:l,cursor:f}),Cx=l=>Or(l,f=>Or(f.cells,p=>{const y=p.element;return y1($h(y),y)})),wx=(l,f,p)=>{var y,_;const A=uo(l).rows;return se.from((_=(y=A[f])===null||y===void 0?void 0:y.cells[p])===null||_===void 0?void 0:_.element).filter($h).orThunk(()=>Cx(A))},wr=(l,f,p)=>{const y=wx(l,f,p);return qm(l,y)},vb=l=>Ne(l,(p,y)=>Je(p,A=>A.row===y.row)?p:p.concat([y]),[]).sort((p,y)=>p.row-y.row),xx=(l,f,p,y)=>{const _=f[0].row,A=vb(f),I=ta(A,(z,q)=>({grid:tu(z.grid,_,q.row+z.delta,p,y.getOrInit),delta:z.delta+1}),{grid:l,delta:0}).grid;return wr(I,_,f[0].column)},Hk=(l,f,p,y)=>{const _=vb(f),A=_[_.length-1],I=A.row+A.rowspan,z=ta(_,(q,te)=>tu(q,I,te.row,p,y.getOrInit),l);return wr(z,I,f[0].column)},Sx=(l,f,p,y)=>{const _=f.details,A=Gm(_),I=A[0].column,z=ta(A,(q,te)=>({grid:Pk(q.grid,I,te.column+q.delta,p,y.getOrInit),delta:q.delta+1}),{grid:l,delta:0}).grid;return wr(z,_[0].row,I)},Vk=(l,f,p,y)=>{const _=f.details,A=_[_.length-1],I=A.column+A.colspan,z=Gm(_),q=ta(z,(te,me)=>Pk(te,I,me.column,p,y.getOrInit),l);return wr(q,_[0].row,I)},Ex=(l,f,p,y)=>{const _=Gm(f),A=Gt(_,z=>z.column),I=uy(l,A,!0,p,y.replaceOrInit);return wr(I,f[0].row,f[0].column)},zk=(l,f,p,y)=>{const _=Zm(l,f,p,y.replaceOrInit);return wr(_,f[0].row,f[0].column)},Uk=(l,f,p,y)=>{const _=Gm(f),A=Gt(_,z=>z.column),I=uy(l,A,!1,p,y.replaceOrInit);return wr(I,f[0].row,f[0].column)},_x=(l,f,p,y)=>{const _=Zm(l,f,p,y.replaceOrInit);return wr(_,f[0].row,f[0].column)},Km=(l,f)=>(p,y,_,A,I)=>{const z=vb(y),q=Gt(z,me=>me.row),te=dy(p,q,l,f,_,A.replaceOrInit,I);return wr(te,y[0].row,y[0].column)},Wk=Km("thead",!0),Tx=Km("tbody",!1),Zk=Km("tfoot",!1),_o=(l,f,p,y)=>{const _=Gm(f.details),A=dx(l,Gt(_,z=>z.column)),I=A.length>0?A[0].cells.length-1:0;return wr(A,_[0].row,Math.min(_[0].column,I))},vy=(l,f,p,y)=>{const _=vb(f),A=ro(l,_[0].row,_[_.length-1].row),I=Math.max(uo(A).rows.length-1,0);return wr(A,Math.min(f[0].row,I),f[0].column)},kx=(l,f,p,y)=>{const _=f.cells;Lk(_);const A=ed(l,f.bounds,p,y.merge(_));return qm(A,se.from(_[0]))},Ox=(l,f,p,y)=>{const A=ta(f,(I,z)=>iy(I,z,p,y.unmerge(z)),l);return qm(A,se.from(f[0]))},yy=(l,f,p,y)=>{const A=((q,te)=>{const me=wn.fromTable(q);return Um(me,te,!0)})(f.clipboard,f.generators),I=b1(f.row,f.column);return vf(I,l,A,f.generators,p).fold(()=>qm(l,se.some(f.element)),q=>wr(q,f.row,f.column))},Ds=(l,f,p)=>{const y=k1(l,p.section),_=wn.generate(y);return Um(_,f,!0)},Ga=(l,f,p,y)=>{const _=uo(l).rows,A=f.cells[0].column,I=_[f.cells[0].row],z=Ds(f.clipboard,f.generators,I),q=Wm(A,l,z,f.generators,p);return wr(q,f.cells[0].row,f.cells[0].column)},Ax=(l,f,p,y)=>{const _=uo(l).rows,A=f.cells[f.cells.length-1].column+f.cells[f.cells.length-1].colspan,I=_[f.cells[0].row],z=Ds(f.clipboard,f.generators,I),q=Wm(A,l,z,f.generators,p);return wr(q,f.cells[0].row,A)},Cy=(l,f,p,y)=>{const _=uo(l).rows,A=f.cells[0].row,I=_[A],z=Ds(f.clipboard,f.generators,I),q=so(A,l,z,f.generators,p);return wr(q,f.cells[0].row,f.cells[0].column)},wy=(l,f,p,y)=>{const _=uo(l).rows,A=f.cells[f.cells.length-1].row+f.cells[f.cells.length-1].rowspan,I=_[f.cells[0].row],z=Ds(f.clipboard,f.generators,I),q=so(A,l,z,f.generators,p);return wr(q,A,f.cells[0].column)},jk=(l,f)=>{const p=wn.fromTable(l);return xa(p,f).bind(_=>{const A=_[_.length-1],I=_[0].column,z=A.column+A.colspan,q=yo(Gt(p.all,te=>ls(te.cells,me=>me.column>=I&&me.column<z)));return Lm(q)}).getOr("")},yb=(l,f)=>{const p=wn.fromTable(l);return xa(p,f).bind(Lm).getOr("")},Rx=(l,f)=>{const p=wn.fromTable(l);return xa(p,f).bind(_=>{const A=_[_.length-1],I=_[0].row,z=A.row+A.rowspan,q=p.all.slice(I,z);return tx(q)}).getOr("")},Ih=(l,f,p,y)=>Bh(l,f,p,y.sizing),Dx=(l,f,p,y)=>Fk(l,f,p,y.sizing,y.resize),bs=(l,f)=>Je(f,p=>p.column===0&&p.isLocked),Gk=(l,f)=>Je(f,p=>p.column+p.colspan>=l.grid.columns&&p.isLocked),Cc=(l,f)=>{const p=ch(l),y=Gm(f);return Ne(y,(_,A)=>{const z=p[A.column].map(Gd).getOr(0);return _+z},0)},bo=l=>(f,p)=>xa(f,p).filter(y=>!(l?bs:Gk)(f,y)).map(y=>({details:y,pixelDelta:Cc(f,y)})),Cl=(l,f)=>Mi(l,f).map(p=>({details:p,pixelDelta:-Cc(l,p)})),Ym=l=>(f,p)=>Qu(f,p).filter(y=>!(l?bs:Gk)(f,y.cells)),xy=Sa.transform("th"),Fh=Sa.transform("td"),Mx=dr(xx,xa,Se,Se,Sa.modification),sd=dr(Hk,xa,Se,Se,Sa.modification),fr=dr(Sx,bo(!0),Dx,Se,Sa.modification),wl=dr(Vk,bo(!1),Dx,Se,Sa.modification),Px=dr(_o,Cl,Dx,yc,Sa.modification),qk=dr(vy,xa,Se,yc,Sa.modification),Sy=dr(Ex,Mi,Se,Se,xy),Cb=dr(Uk,Mi,Se,Se,Fh),Ey=dr(Wk,Mi,Se,Se,xy),_y=dr(Tx,Mi,Se,Se,Fh),wb=dr(Zk,Mi,Se,Se,Fh),gt=dr(zk,Mi,Se,Se,xy),Lh=dr(_x,Mi,Se,Se,Fh),Ty=dr(kx,Ah,Ih,Se,Sa.merging),Nx=dr(Ox,ib,Ih,Se,Sa.merging),Kk=dr(yy,PM,Ih,Se,Sa.modification),mr=dr(Ga,Ym(!0),Se,Se,Sa.modification),Bx=dr(Ax,Ym(!1),Se,Se,Sa.modification),rd=dr(Cy,Qu,Se,Se,Sa.modification),$x=dr(wy,Qu,Se,Se,Sa.modification),ky=jk,Ix=yb,gr=Rx,ad=(l,f)=>l.dispatch("NewRow",{node:f}),Oy=(l,f)=>l.dispatch("NewCell",{node:f}),_f=(l,f,p)=>{l.dispatch("TableModified",{...p,table:f})},Yk=(l,f,p,y,_)=>{l.dispatch("TableSelectionChange",{cells:f,start:p,finish:y,otherCells:_})},vs=l=>{l.dispatch("TableSelectionClear")},ys=(l,f,p,y,_)=>{l.dispatch("ObjectResizeStart",{target:f,width:p,height:y,origin:_})},or=(l,f,p,y,_)=>{l.dispatch("ObjectResized",{target:f,width:p,height:y,origin:_})},Cs={structure:!1,style:!0},Ln={structure:!0,style:!1},ds={structure:!0,style:!0},xb=(l,f)=>Oi(l)?bh.percentageSize(f):nr(l)?bh.pixelSize(f):bh.getTableSize(f),Ay=(l,f,p)=>{const y=ws=>To(ia(ws))==="table",_=ws=>!y(l)||mf(ws).rows>1,A=ws=>!y(l)||mf(ws).columns>1,I=Wu(l),z=rf(l)?Se:sb,q=ws=>{switch(es(l)){case"section":return Vm.section();case"sectionCells":return Vm.sectionCells();case"cells":return Vm.cells();default:return Vm.getTableSectionType(ws,"section")}},te=(ws,u0)=>u0.cursor.fold(()=>{const iu=Pu(ws);return _e(iu).filter(Ho).map(an=>{p.clearSelectedCells(ws.dom);const Sr=l.dom.createRng();return Sr.selectNode(an.dom),l.selection.setRng(Sr),gs(an,"data-mce-selected","1"),Sr})},iu=>{const an=$m(iu),Sr=l.dom.createRng();return Sr.setStart(an.element.dom,an.offset),Sr.setEnd(an.element.dom,an.offset),l.selection.setRng(Sr),p.clearSelectedCells(ws.dom),se.some(Sr)}),me=(ws,u0,iu,an)=>(Sr,d0,f0=!1)=>{ja(Sr);const GS=ue.fromDom(l.getDoc()),Cd=Gc(iu,GS,I),jf={sizing:xb(l,Sr),resize:rf(l)?Ju():Jl(),section:q(Sr)};return u0(Sr)?ws(Sr,d0,Cd,jf).bind(m0=>{f.refresh(Sr.dom),Le(m0.newRows,gp=>{ad(l,gp.dom)}),Le(m0.newCells,gp=>{Oy(l,gp.dom)});const Y4=te(Sr,m0);return Ho(Sr)&&(ja(Sr),f0||_f(l,Sr.dom,an)),Y4.map(gp=>({rng:gp,effect:an}))}):se.none()},Ie=me(qk,_,Se,Ln),tt=me(Px,A,Se,Ln),Xe=me(Mx,De,Se,Ln),Ze=me(sd,De,Se,Ln),bt=me(fr,De,z,Ln),Pe=me(wl,De,z,Ln),je=me(Ty,De,Se,Ln),qe=me(Nx,De,Se,Ln),Ft=me(mr,De,Se,Ln),Cn=me(Bx,De,Se,Ln),Wn=me(rd,De,Se,Ln),ao=me($x,De,Se,Ln),xo=me(Kk,De,Se,ds),Qa=me(gt,De,Se,Ln),Fi=me(Lh,De,Se,Ln),Zf=me(Sy,De,Se,Ln),_l=me(Cb,De,Se,Ln),Qn=me(Ey,De,Se,Ln),Yr=me(_y,De,Se,Ln),Xr=me(wb,De,Se,Ln);return{deleteRow:Ie,deleteColumn:tt,insertRowsBefore:Xe,insertRowsAfter:Ze,insertColumnsBefore:bt,insertColumnsAfter:Pe,mergeCells:je,unmergeCells:qe,pasteColsBefore:Ft,pasteColsAfter:Cn,pasteRowsBefore:Wn,pasteRowsAfter:ao,pasteCells:xo,makeCellsHeader:Qa,unmakeCellsHeader:Fi,makeColumnsHeader:Zf,unmakeColumnsHeader:_l,makeRowsHeader:Qn,makeRowsBody:Yr,makeRowsFooter:Xr,getTableRowType:gr,getTableCellType:Ix,getTableColType:ky}},Ry=(l,f,p)=>{const y=Ur(l,f,1);p===1||y<=1?Mo(l,f):gs(l,f,Math.min(p,y))},Dy=(l,f)=>p=>{const y=p.column+p.colspan-1,_=p.column;return y>=l&&_<f},Fx=(l,f,p)=>{if(wn.hasColumns(l)){const y=ls(wn.justColumns(l),Dy(f,p)),_=Gt(y,I=>{const z=Hd(I.element);return Ry(z,"span",p-f),z}),A=ue.fromTag("colgroup");return Ia(A,_),[A]}else return[]},Lx=(l,f,p)=>Gt(l.all,y=>{const _=ls(y.cells,Dy(f,p)),A=Gt(_,z=>{const q=Hd(z.element);return Ry(q,"colspan",p-f),q}),I=ue.fromTag("tr");return Ia(I,A),I}),Hh=(l,f)=>{const p=wn.fromTable(l);return Mi(p,f).map(_=>{const A=_[_.length-1],I=_[0].column,z=A.column+A.colspan,q=Fx(p,I,z),te=Lx(p,I,z);return[...q,...te]})},Sb=(l,f,p)=>{const y=wn.fromTable(l);return xa(y,f).bind(A=>{const I=Um(y,p,!1),q=uo(I).rows.slice(A[0].row,A[A.length-1].row+A[A.length-1].rowspan),te=_s(q,Ie=>{const tt=ls(Ie.cells,Xe=>!Xe.isLocked);return tt.length>0?[{...Ie,cells:tt}]:[]}),me=cy(te);return y1(me.length>0,me)}).map(A=>sx(A))},Vh=wf.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Hx=(l,f,p)=>{const y=p.substring(0,p.length-l.length),_=parseFloat(y);return y===_.toString()?f(_):Vh.invalid(p)},Tf={...Vh,from:l=>Du(l,"%")?Hx("%",Vh.percent,l):Du(l,"px")?Hx("px",Vh.pixels,l):Vh.invalid(l)},Ea=(l,f)=>Gt(l,p=>Tf.from(p).fold(()=>p,_=>_/f*100+"%",_=>_+"%")),Xk=(l,f,p)=>{const y=p/f;return Gt(l,_=>Tf.from(_).fold(()=>_,I=>I*y+"px",I=>I/100*p+"px"))},Jk=(l,f)=>{const p=l.fold(()=>Q(""),y=>{const _=y/f;return Q(_+"px")},()=>{const y=100/f;return Q(y+"%")});return qo(f,p)},wc=(l,f,p)=>l.fold(()=>f,y=>Xk(f,p,y),y=>Ea(f,p)),Xm=(l,f,p)=>{const y=Tf.from(p),_=So(l,A=>A==="0px")?Jk(y,l.length):wc(y,l,f);return My(_)},kf=(l,f)=>l.length===0?f:ta(l,(p,y)=>Tf.from(y).fold(Q(0),Kt,Kt)+p,0),xl=(l,f)=>{const p=Math.floor(l);return{value:p+f,remainder:l-p}},Br=(l,f)=>Tf.from(l).fold(Q(l),p=>p+f+"px",p=>p+f+"%"),My=l=>{if(l.length===0)return l;const f=ta(l,(y,_)=>{const A=Tf.from(_).fold(()=>({value:_,remainder:0}),I=>xl(I,"px"),I=>({value:I+"%",remainder:0}));return{output:[A.value].concat(y.output),remainder:y.remainder+A.remainder}},{output:[],remainder:0}),p=f.output;return p.slice(0,p.length-1).concat([Br(p[p.length-1],Math.round(f.remainder))])},cd=Tf.from,Vx=(l,f,p)=>{Le(f,y=>{const _=l.slice(y.column,y.colspan+y.column),A=kf(_,eh());wo(y.element,"width",A+p)})},Eb=(l,f,p)=>{Le(f,(y,_)=>{const A=kf([l[_]],eh());wo(y.element,"width",A+p)})},Py=(l,f,p)=>{Le(p,y=>{Ci(y.element,"height")}),Le(f,(y,_)=>{wo(y.element,"height",l[_])})},zh=l=>cd(l).fold(Q("px"),Q("px"),Q("%")),_b=(l,f,p)=>{const y=wn.fromTable(l),_=y.all,A=wn.justCells(y),I=wn.justColumns(y);f.each(z=>{const q=zh(z),te=In(l),me=Hs(y,l),Ie=Xm(me,te,z);wn.hasColumns(y)?Eb(Ie,I,q):Vx(Ie,A,q),wo(l,"width",z)}),p.each(z=>{const q=Gl(l),te=ss(y,l),me=Xm(te,q,z);Py(me,_,A),wo(l,"height",z)})},zx=jc,Ux=Fv,Wx=Vu,Uh=l=>{Mo(l,"width"),Mo(l,"height")},Of=l=>{const f=yr(l);_b(l,se.some(f),se.none()),Uh(l)},Wh=l=>{const f=F1(l);_b(l,se.some(f),se.none()),Uh(l)},Qk=l=>{const f=Os(l);_b(l,se.none(),se.some(f)),Uh(l)},Ny=l=>{Ci(l,"width");const f=th(l),p=f.length>0?f:Pu(l);Le(p,y=>{Ci(y,"width"),Uh(y)}),Uh(l)},e4={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Tb=()=>ue.fromTag("th"),t4=()=>ue.fromTag("td"),Zx=()=>ue.fromTag("col"),n4=(l,f,p,y)=>{const _=ue.fromTag("tr");for(let A=0;A<l;A++){const I=y<f||A<p?Tb():t4();A<p&&gs(I,"scope","row"),y<f&&gs(I,"scope","col"),Yo(I,ue.fromTag("br")),Yo(_,I)}return _},jx=l=>{const f=ue.fromTag("colgroup");return qo(l,()=>Yo(f,Zx())),f},Zh=(l,f,p,y)=>qo(l,_=>n4(f,p,y,_)),Gx=(l,f,p,y,_,A=e4)=>{const I=ue.fromTag("table"),z=_!=="cells";Xs(I,A.styles),ol(I,A.attributes),A.colGroups&&Yo(I,jx(f));const q=Math.min(l,p);if(z&&p>0){const Xe=ue.fromTag("thead");Yo(I,Xe);const bt=Zh(p,f,_==="sectionCells"?q:0,y);Ia(Xe,bt)}const te=ue.fromTag("tbody");Yo(I,te);const me=z?l-q:l,tt=Zh(me,f,z?0:p,y);return Ia(te,tt),I},Kr=l=>l.dom.innerHTML,By=l=>{const f=ue.fromTag("div"),p=ue.fromDom(l.dom.cloneNode(!0));return Yo(f,p),Kr(f)},qx=(l,f)=>{l.selection.select(f.dom,!0),l.selection.collapse(!0)},$y=(l,f)=>{yi(f,"td,th").each(ln(qx,l))},jh=(l,f)=>{Le(Lc(f,"tr"),p=>{ad(l,p.dom),Le(Lc(p,"th,td"),y=>{Oy(l,y.dom)})})},o4=l=>Z(l)&&l.indexOf("%")!==-1,s4=(l,f,p,y,_)=>{const A=Y1(l),I={styles:A,attributes:K1(l),colGroups:xk(l)};return l.undoManager.ignore(()=>{const z=Gx(p,f,_,y,es(l),I);gs(z,"data-mce-id","__mce");const q=By(z);l.insertContent(q),l.addVisual()}),yi(ia(l),'table[data-mce-id="__mce"]').map(z=>(nr(l)?Wh(z):Zu(l)?Ny(z):(Oi(l)||o4(A.width))&&Of(z),ja(z),Mo(z,"data-mce-id"),jh(l,z),$y(l,z),z.dom)).getOrNull()},r4=(l,f,p,y={})=>{const _=A=>Vt(A)&&A>0;if(_(f)&&_(p)){const A=y.headerRows||0,I=y.headerColumns||0;return s4(l,p,f,I,A)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var kb=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Kx="x-tinymce/dom-table-",Iy=Kx+"rows",Fy=Kx+"columns",Gh=l=>{const f=kb.FakeClipboardItem(l);kb.write([f])},Ly=l=>{var f;const p=(f=kb.read())!==null&&f!==void 0?f:[];return Or(p,y=>se.from(y.getType(l)))},Yx=l=>{Ly(l).isSome()&&kb.clear()},Xx=l=>{l.fold(a4,f=>Gh({[Iy]:f}))},Jx=()=>Ly(Iy),a4=()=>Yx(Iy),Qx=l=>{l.fold(eS,f=>Gh({[Fy]:f}))},Hy=()=>Ly(Fy),eS=()=>Yx(Fy),id=l=>rs(xh(l),Za(l)).filter(un),tS=l=>nb(xh(l),Za(l)).filter(un),c4=(l,f)=>{const p=Za(l),y=()=>id(l).each(Pe=>{va(Pe,p).filter(oe(p)).each(je=>{const qe=ue.fromText("");if(Ou(je,qe),vr(je),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const Ft=l.dom.createRng();Ft.setStart(qe.dom,0),Ft.setEnd(qe.dom,0),l.selection.setRng(Ft),l.nodeChanged()}})}),_=Pe=>id(l).each(je=>{Zu(l)||nr(l)||Oi(l)||va(je,p).each(Ft=>{Pe==="relative"&&!zx(Ft)?Of(Ft):Pe==="fixed"&&!Ux(Ft)?Wh(Ft):Pe==="responsive"&&!Wx(Ft)&&Ny(Ft),ja(Ft),_f(l,Ft.dom,Ln)})}),A=Pe=>va(Pe,p),I=Pe=>tS(l).bind(je=>A(je).map(qe=>Pe(qe,je))),z=(Pe,je)=>{I(qe=>{l.formatter.toggle("tableclass",{value:je},qe.dom),_f(l,qe.dom,Cs)})},q=(Pe,je)=>{I(qe=>{const Ft=Un(l),Wn=So(Ft,ao=>l.formatter.match("tablecellclass",{value:je},ao.dom))?l.formatter.remove:l.formatter.apply;Le(Ft,ao=>Wn("tablecellclass",{value:je},ao.dom)),_f(l,qe.dom,Cs)})},te=()=>{id(l).each(Pe=>{va(Pe,p).each(je=>{zd(je,"caption").fold(()=>{const qe=ue.fromTag("caption");Yo(qe,ue.fromText("Caption")),ak(je,qe,0),l.selection.setCursorLocation(qe.dom,0)},qe=>{na("caption")(Pe)&&hv("td",je).each(Ft=>l.selection.setCursorLocation(Ft.dom,0)),vr(qe)}),_f(l,je.dom,Ln)})})},me=Pe=>{l.focus()},Ie=(Pe,je=!1)=>I((qe,Ft)=>{const Cn=Xl(Un(l),qe,Ft);Pe(qe,Cn,je).each(me)}),tt=()=>I((Pe,je)=>{const qe=Xl(Un(l),Pe,je),Ft=Gc(Se,ue.fromDom(l.getDoc()),se.none());return Sb(Pe,qe,Ft)}),Xe=()=>I((Pe,je)=>{const qe=Xl(Un(l),Pe,je);return Hh(Pe,qe)}),Ze=(Pe,je)=>je().each(qe=>{const Ft=Gt(qe,Cn=>Hd(Cn));I((Cn,Wn)=>{const ao=qc(ue.fromDom(l.getDoc())),xo=ny(Un(l),Wn,Ft,ao);Pe(Cn,xo).each(me)})}),bt=Pe=>(je,qe)=>f1(qe,"type").each(Ft=>{Ie(Pe(Ft),qe.no_events)});Ko({mceTableSplitCells:()=>Ie(f.unmergeCells),mceTableMergeCells:()=>Ie(f.mergeCells),mceTableInsertRowBefore:()=>Ie(f.insertRowsBefore),mceTableInsertRowAfter:()=>Ie(f.insertRowsAfter),mceTableInsertColBefore:()=>Ie(f.insertColumnsBefore),mceTableInsertColAfter:()=>Ie(f.insertColumnsAfter),mceTableDeleteCol:()=>Ie(f.deleteColumn),mceTableDeleteRow:()=>Ie(f.deleteRow),mceTableCutCol:()=>Xe().each(Pe=>{Qx(Pe),Ie(f.deleteColumn)}),mceTableCutRow:()=>tt().each(Pe=>{Xx(Pe),Ie(f.deleteRow)}),mceTableCopyCol:()=>Xe().each(Pe=>Qx(Pe)),mceTableCopyRow:()=>tt().each(Pe=>Xx(Pe)),mceTablePasteColBefore:()=>Ze(f.pasteColsBefore,Hy),mceTablePasteColAfter:()=>Ze(f.pasteColsAfter,Hy),mceTablePasteRowBefore:()=>Ze(f.pasteRowsBefore,Jx),mceTablePasteRowAfter:()=>Ze(f.pasteRowsAfter,Jx),mceTableDelete:y,mceTableCellToggleClass:q,mceTableToggleClass:z,mceTableToggleCaption:te,mceTableSizingMode:(Pe,je)=>_(je),mceTableCellType:bt(Pe=>Pe==="th"?f.makeCellsHeader:f.unmakeCellsHeader),mceTableColType:bt(Pe=>Pe==="th"?f.makeColumnsHeader:f.unmakeColumnsHeader),mceTableRowType:bt(Pe=>{switch(Pe){case"header":return f.makeRowsHeader;case"footer":return f.makeRowsFooter;default:return f.makeRowsBody}})},(Pe,je)=>l.addCommand(je,Pe)),l.addCommand("mceInsertTable",(Pe,je)=>{r4(l,je.rows,je.columns,je.options)}),l.addCommand("mceTableApplyCellStyle",(Pe,je)=>{const qe=Wn=>"tablecell"+Wn.toLowerCase().replace("-","");if(!J(je))return;const Ft=ls(Un(l),un);if(Ft.length===0)return;const Cn=ic(je,(Wn,ao)=>l.formatter.has(qe(ao))&&Z(Wn));dm(Cn)||(Ko(Cn,(Wn,ao)=>{const xo=qe(ao);Le(Ft,Qa=>{Wn===""?l.formatter.remove(xo,{value:null},Qa.dom,!0):l.formatter.apply(xo,{value:Wn},Qa.dom)})}),A(Ft[0]).each(Wn=>_f(l,Wn.dom,Cs)))})},i4=(l,f)=>{const p=Za(l),y=_=>nb(xh(l)).bind(A=>va(A,p).map(I=>{const z=Xl(Un(l),I,A);return _(I,z)})).getOr("");Ko({mceTableRowType:()=>y(f.getTableRowType),mceTableCellType:()=>y(f.getTableCellType),mceTableColType:()=>y(f.getTableColType)},(_,A)=>l.addQueryValueHandler(A,_))},Ob=wf.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ti=(l,f,p,y)=>l.fold(f,p,y),Ab=l=>l.fold(Kt,Kt,Kt),Rb=Ob.before,Vy=Ob.on,nS=Ob.after,fs={before:Rb,on:Vy,after:nS,cata:ti,getStart:Ab},Jm={create:(l,f)=>({selection:l,kill:f})},ld=(l,f)=>{const p=l.document.createRange();return p.selectNode(f.dom),p},Db=(l,f)=>{const p=l.document.createRange();return sS(p,f),p},sS=(l,f)=>l.selectNodeContents(f.dom),l4=(l,f)=>{f.fold(p=>{l.setStartBefore(p.dom)},(p,y)=>{l.setStart(p.dom,y)},p=>{l.setStartAfter(p.dom)})},u4=(l,f)=>{f.fold(p=>{l.setEndBefore(p.dom)},(p,y)=>{l.setEnd(p.dom,y)},p=>{l.setEndAfter(p.dom)})},rS=(l,f,p)=>{const y=l.document.createRange();return l4(y,f),u4(y,p),y},qh=(l,f,p,y,_)=>{const A=l.document.createRange();return A.setStart(f.dom,p),A.setEnd(y.dom,_),A},zy=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),d4=l=>{const f=l.getClientRects(),p=f.length>0?f[0]:l.getBoundingClientRect();return p.width>0||p.height>0?se.some(p).map(zy):se.none()},Qm=wf.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),aS=(l,f,p)=>f(ue.fromDom(p.startContainer),p.startOffset,ue.fromDom(p.endContainer),p.endOffset),cS=(l,f)=>f.match({domRange:p=>({ltr:Q(p),rtl:se.none}),relative:(p,y)=>({ltr:bm(()=>rS(l,p,y)),rtl:bm(()=>se.some(rS(l,y,p)))}),exact:(p,y,_,A)=>({ltr:bm(()=>qh(l,p,y,_,A)),rtl:bm(()=>se.some(qh(l,_,A,p,y)))})}),iS=(l,f)=>{const p=f.ltr();return p.collapsed?f.rtl().filter(_=>_.collapsed===!1).map(_=>Qm.rtl(ue.fromDom(_.endContainer),_.endOffset,ue.fromDom(_.startContainer),_.startOffset)).getOrThunk(()=>aS(l,Qm.ltr,p)):aS(l,Qm.ltr,p)},Uy=(l,f)=>{const p=cS(l,f);return iS(l,p)},Mb=(l,f)=>Uy(l,f).match({ltr:(y,_,A,I)=>{const z=l.document.createRange();return z.setStart(y.dom,_),z.setEnd(A.dom,I),z},rtl:(y,_,A,I)=>{const z=l.document.createRange();return z.setStart(A.dom,I),z.setEnd(y.dom,_),z}});Qm.ltr,Qm.rtl;const ud={create:(l,f,p,y)=>({start:l,soffset:f,finish:p,foffset:y})},uS={create:(l,f,p,y)=>({start:fs.on(l,f),finish:fs.on(p,y)})},dS=(l,f)=>{const p=Mb(l,f);return ud.create(ue.fromDom(p.startContainer),p.startOffset,ue.fromDom(p.endContainer),p.endOffset)},Pb=uS.create,m4=(l,f,p,y,_,A,I)=>Eo(p,_)&&y===A?se.none():Ys(p,"td,th",f).bind(z=>Ys(_,"td,th",f).bind(q=>Af(l,f,z,q,I))),Af=(l,f,p,y,_)=>Eo(p,y)?se.none():Gr(p,y,f).bind(A=>{const I=A.boxes.getOr([]);return I.length>1?(_(l,I,A.start,A.finish),se.some(Jm.create(se.some(Pb(p,0,p,hc(p))),!0))):se.none()}),Nb=(l,f,p,y,_)=>{const A=I=>(_.clearBeforeUpdate(p),_.selectRange(p,I.boxes,I.start,I.finish),I.boxes);return df(y,l,f,_.firstSelectedSelector,_.lastSelectedSelector).map(A)},Kh=(l,f)=>({item:l,mode:f}),fS=(l,f,p,y=eg)=>l.property().parent(f).map(_=>Kh(_,y)),eg=(l,f,p,y=tg)=>p.sibling(l,f).map(_=>Kh(_,y)),tg=(l,f,p,y=tg)=>{const _=l.property().children(f);return p.first(_).map(I=>Kh(I,y))},g4=[{current:fS,next:eg,fallback:se.none()},{current:eg,next:tg,fallback:se.some(fS)},{current:tg,next:tg,fallback:se.some(eg)}],mS=(l,f,p,y,_=g4)=>L(_,I=>I.current===p).bind(I=>I.current(l,f,y,I.next).orThunk(()=>I.fallback.bind(z=>mS(l,f,z,y)))),ng={left:()=>({sibling:(p,y)=>p.query().prevSibling(y),first:p=>p.length>0?se.some(p[p.length-1]):se.none()}),right:()=>({sibling:(p,y)=>p.query().nextSibling(y),first:p=>p.length>0?se.some(p[0]):se.none()})},Wy=(l,f,p,y,_,A)=>mS(l,f,y,_).bind(z=>A(z.item)?se.none():p(z.item)?se.some(z.item):Wy(l,z.item,p,z.mode,_,A)),Zy=(l,f,p,y)=>Wy(l,f,p,eg,ng.left(),y),p4=(l,f,p,y)=>Wy(l,f,p,eg,ng.right(),y),jy=l=>f=>l.property().children(f).length===0,gS=(l,f,p)=>og(l,f,jy(l),p),hS=(l,f,p)=>pS(l,f,jy(l),p),og=Zy,pS=p4,Bb=Kl(),dd=(l,f)=>gS(Bb,l,f),ou=(l,f)=>hS(Bb,l,f),Yh=(l,f,p)=>og(Bb,l,f,p),Xh=(l,f,p)=>pS(Bb,l,f,p),b4=(l,f,p)=>We(l,f,p).isSome(),_a=wf.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Ni=(l,f,p)=>{const y=l.getRect(f),_=l.getRect(p);return _.right>y.left&&_.left<y.right},Gy=l=>Ys(l,"tr"),fd={..._a,verify:(l,f,p,y,_,A,I)=>Ys(y,"td,th",I).bind(z=>Ys(f,"td,th",I).map(q=>Eo(z,q)?Eo(y,z)&&hc(z)===_?A(q):_a.none("in same cell"):uf(Gy,[z,q]).fold(()=>Ni(l,q,z)?_a.success():A(q),te=>A(q)))).getOr(_a.none("default")),cata:(l,f,p,y,_)=>l.fold(f,p,y,_)},sg=(l,f,p,y)=>({parent:l,children:f,element:p,index:y}),sr=l=>Ul(l).bind(f=>{const p=oo(f);return qy(p,l).map(y=>sg(f,p,l,y))}),qy=(l,f)=>um(l,ln(Eo,f)),$b=na("br"),Df=(l,f,p)=>f(l,p).bind(y=>$d(y)&&zv(y).trim().length===0?Df(y,f,p):se.some(y)),Jh=(l,f,p)=>p.traverse(f).orThunk(()=>Df(f,p.gather,l)).map(p.relative),y4=(l,f)=>$a(l,f).filter($b).orThunk(()=>$a(l,f-1).filter($b)),Ky=(l,f,p,y)=>y4(f,p).bind(_=>y.traverse(_).fold(()=>Df(_,y.gather,l).map(y.relative),A=>sr(A).map(I=>fs.on(I.parent,I.index)))),Qh=(l,f,p,y)=>($b(f)?Jh(l,f,y):Ky(l,f,p,y)).map(A=>({start:A,finish:A})),rr=l=>fd.cata(l,f=>se.none(),()=>se.none(),f=>se.some(ob(f,0)),f=>se.some(ob(f,hc(f)))),Yy=(l,f)=>({left:l.left,top:l.top+f,right:l.right,bottom:l.bottom+f}),xc=(l,f)=>({left:l.left,top:l.top-f,right:l.right,bottom:l.bottom-f}),Xy=(l,f,p)=>({left:l.left+f,top:l.top+p,right:l.right+f,bottom:l.bottom+p}),rg=l=>l.top,ag=l=>l.bottom,Jy=(l,f,p)=>p>=0&&p<hc(f)?l.getRangedRect(f,p,f,p+1):p>0?l.getRangedRect(f,p-1,f,p):se.none(),su=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),Qy=(l,f)=>se.some(l.getRect(f)),e2=(l,f,p)=>pa(f)?Qy(l,f).map(su):$d(f)?Jy(l,f,p).map(su):se.none(),t2=(l,f)=>pa(f)?Qy(l,f).map(su):$d(f)?l.getRangedRect(f,0,f,hc(f)).map(su):se.none(),Sl=5,Ib=100,hr=wf.generate([{none:[]},{retry:["caret"]}]),bS=(l,f)=>l.left<f.left||Math.abs(f.right-l.left)<1||l.left>f.right,n2=(l,f,p)=>Xo(f,xe).fold(An,y=>t2(l,y).exists(_=>bS(p,_))),o2=(l,f,p,y,_)=>{const A=Yy(_,Sl);return Math.abs(p.bottom-y.bottom)<1||p.top>_.bottom?hr.retry(A):p.top===_.bottom?hr.retry(Yy(_,1)):n2(l,f,_)?hr.retry(Xy(A,Sl,0)):hr.none()},s2={point:rg,adjuster:(l,f,p,y,_)=>{const A=xc(_,Sl);return Math.abs(p.top-y.top)<1||p.bottom<_.top?hr.retry(A):p.bottom===_.top?hr.retry(xc(_,1)):n2(l,f,_)?hr.retry(Xy(A,Sl,0)):hr.none()},move:xc,gather:dd},yS={point:ag,adjuster:o2,move:Yy,gather:ou},CS=(l,f,p)=>l.elementFromPoint(f,p).filter(y=>To(y)==="table").isSome(),qa=(l,f,p,y,_)=>md(l,f,p,f.move(y,Sl),_),md=(l,f,p,y,_)=>_===0?se.some(y):CS(l,y.left,f.point(y))?qa(l,f,p,y,_-1):l.situsFromPoint(y.left,f.point(y)).bind(A=>A.start.fold(se.none,I=>t2(l,I).bind(z=>f.adjuster(l,I,z,p,y).fold(se.none,q=>md(l,f,p,q,_-1))).orThunk(()=>se.some(y)),se.none)),wS=(l,f,p)=>l.point(f)>p.getInnerHeight()?se.some(l.point(f)-p.getInnerHeight()):l.point(f)<0?se.some(-l.point(f)):se.none(),Mf=(l,f,p)=>{const y=l.move(p,Sl),_=md(f,l,p,y,Ib).getOr(y);return wS(l,_,f).fold(()=>f.situsFromPoint(_.left,l.point(_)),A=>(f.scrollBy(0,A),f.situsFromPoint(_.left,l.point(_)-A)))},$r={tryUp:ln(Mf,s2),tryDown:ln(Mf,yS),getJumpSize:Q(Sl)},Ta=20,Ir=(l,f,p)=>l.getSelection().bind(y=>Qh(f,y.finish,y.foffset,p).fold(()=>se.some(ob(y.finish,y.foffset)),_=>{const A=l.fromSitus(_),I=fd.verify(l,y.finish,y.foffset,A.finish,A.foffset,p.failure,f);return rr(I)})),Ka=(l,f,p,y,_,A)=>A===0?se.none():Pf(l,f,p,y,_).bind(I=>{const z=l.fromSitus(I),q=fd.verify(l,p,y,z.finish,z.foffset,_.failure,f);return fd.cata(q,()=>se.none(),()=>se.some(I),te=>Eo(p,te)&&y===0?Fb(l,p,y,xc,_):Ka(l,f,te,0,_,A-1),te=>Eo(p,te)&&y===hc(te)?Fb(l,p,y,Yy,_):Ka(l,f,te,hc(te),_,A-1))}),Fb=(l,f,p,y,_)=>e2(l,f,p).bind(A=>Ya(l,_,y(A,$r.getJumpSize()))),Ya=(l,f,p)=>{const y=ko().browser;return y.isChromium()||y.isSafari()||y.isFirefox()?f.retry(l,p):se.none()},Pf=(l,f,p,y,_)=>e2(l,p,y).bind(A=>Ya(l,_,A)),xS=(l,f,p)=>Ir(l,f,p).bind(y=>Ka(l,f,y.element,y.offset,p,Ta).map(l.fromSitus)),$M=(l,f)=>b4(l,p=>Ul(p).exists(y=>Eo(y,f))),C4=(l,f,p,y,_)=>Ys(y,"td,th",f).bind(A=>Ys(A,"table",f).bind(I=>$M(_,I)?xS(l,f,p).bind(z=>Ys(z.finish,"td,th",f).map(q=>({start:A,finish:q,range:z}))):se.none())),r2=(l,f,p,y,_,A)=>A(y,f).orThunk(()=>C4(l,f,p,y,_).map(I=>{const z=I.range;return Jm.create(se.some(Pb(z.start,z.soffset,z.finish,z.foffset)),!0)})),w4=(l,f)=>Ys(l,"tr",f).bind(p=>Ys(p,"table",f).bind(y=>{const _=Lc(y,"tr");return Eo(p,_[0])?Yh(y,A=>Wv(A).isSome(),f).map(A=>{const I=hc(A);return Jm.create(se.some(Pb(A,I,A,I)),!0)}):se.none()})),Lb=(l,f)=>Ys(l,"tr",f).bind(p=>Ys(p,"table",f).bind(y=>{const _=Lc(y,"tr");return Eo(p,_[_.length-1])?Xh(y,A=>Uw(A).isSome(),f).map(A=>Jm.create(se.some(Pb(A,0,A,0)),!0)):se.none()})),ar=(l,f,p,y,_,A,I)=>C4(l,p,y,_,A).bind(z=>Af(f,p,z.start,z.finish,I)),ep=l=>{let f=l;return{get:()=>f,set:_=>{f=_}}},tp=l=>{const f=ep(se.none()),p=()=>f.get().each(l);return{clear:()=>{p(),f.set(se.none())},isSet:()=>f.get().isSome(),get:()=>f.get(),set:z=>{p(),f.set(se.some(z))}}},gd=()=>{const l=tp(Se);return{...l,on:p=>l.get().each(p)}},a2=(l,f)=>Ys(l,"td,th",f),Hb=l=>$c(l).exists(Gu),c2=(l,f,p,y)=>{const _=gd(),A=_.clear,I=me=>{_.on(Ie=>{y.clearBeforeUpdate(f),a2(me.target,p).each(tt=>{Gr(Ie,tt,p).each(Xe=>{const Ze=Xe.boxes.getOr([]);if(Ze.length===1){const bt=Ze[0],Pe=af(bt)==="false",je=ps(Zw(me.target),bt,Eo);Pe&&je&&y.selectRange(f,Ze,bt,bt)}else Ze.length>1&&(y.selectRange(f,Ze,Xe.start,Xe.finish),l.selectContents(tt))})})})};return{clearstate:A,mousedown:me=>{y.clear(f),a2(me.target,p).filter(Hb).each(_.set)},mouseover:me=>{I(me)},mouseup:me=>{I(me),A()}}},Vb={traverse:hm,gather:ou,relative:fs.before,retry:$r.tryDown,failure:fd.failedDown},i2={traverse:Qg,gather:dd,relative:fs.before,retry:$r.tryUp,failure:fd.failedUp},cg=l=>f=>f===l,ru=cg(38),np=cg(40),Nf=l=>l>=37&&l<=40,au={isBackward:cg(37),isForward:cg(39)},SS={isBackward:cg(39),isForward:cg(37)},ka=l=>{const f=l!==void 0?l.dom:document,p=f.body.scrollLeft||f.documentElement.scrollLeft,y=f.body.scrollTop||f.documentElement.scrollTop;return ul(p,y)},l2=(l,f,p)=>{const _=(p!==void 0?p.dom:document).defaultView;_&&_.scrollBy(l,f)},hd=wf.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Bf=l=>hd.exact(l.start,l.soffset,l.finish,l.foffset),zb=l=>l.match({domRange:f=>ue.fromDom(f.startContainer),relative:(f,p)=>fs.getStart(f),exact:(f,p,y,_)=>f}),Ub=hd.domRange,x4=hd.relative,S4=hd.exact,ES=l=>{const f=zb(l);return hs(f)},_S=ud.create,$f={domRange:Ub,relative:x4,exact:S4,exactFromRange:Bf,getWin:ES,range:_S},ig=(l,f,p)=>{var y;return se.from((y=l.caretPositionFromPoint)===null||y===void 0?void 0:y.call(l,f,p)).bind(_=>{if(_.offsetNode===null)return se.none();const A=l.createRange();return A.setStart(_.offsetNode,_.offset),A.collapse(),se.some(A)})},op=(l,f,p)=>{var y;return se.from((y=l.caretRangeFromPoint)===null||y===void 0?void 0:y.call(l,f,p))},E4=(l,f,p)=>l.caretPositionFromPoint?ig(l,f,p):l.caretRangeFromPoint?op(l,f,p):se.none(),TS=(l,f,p)=>{const y=l.document;return E4(y,f,p).map(_=>ud.create(ue.fromDom(_.startContainer),_.startOffset,ue.fromDom(_.endContainer),_.endOffset))},sp=(l,f)=>{const p=To(l);return p==="input"?fs.after(l):is(["br","img"],p)?f===0?fs.before(l):fs.after(l):fs.on(l,f)},Wb=(l,f)=>{const p=l.fold(fs.before,sp,fs.after),y=f.fold(fs.before,sp,fs.after);return $f.relative(p,y)},u2=(l,f,p,y)=>{const _=sp(l,f),A=sp(p,y);return $f.relative(_,A)},kS=(l,f,p,y)=>{const A=Jg(l).dom.createRange();return A.setStart(l.dom,f),A.setEnd(p.dom,y),A},Zb=(l,f,p,y)=>{const _=kS(l,f,p,y),A=Eo(l,p)&&f===y;return _.collapsed&&!A},lg=l=>se.from(l.getSelection()),OS=(l,f)=>{lg(l).each(p=>{p.removeAllRanges(),p.addRange(f)})},If=(l,f,p,y,_)=>{const A=qh(l,f,p,y,_);OS(l,A)},_n=(l,f,p,y,_,A)=>{f.collapse(p.dom,y),f.extend(_.dom,A)},cu=(l,f)=>Uy(l,f).match({ltr:(p,y,_,A)=>{If(l,p,y,_,A)},rtl:(p,y,_,A)=>{lg(l).each(I=>{if(I.setBaseAndExtent)I.setBaseAndExtent(p.dom,y,_.dom,A);else if(I.extend)try{_n(l,I,p,y,_,A)}catch{If(l,_,A,p,y)}else If(l,_,A,p,y)})}}),pd=(l,f,p,y,_)=>{const A=u2(f,p,y,_);cu(l,A)},jb=(l,f,p)=>{const y=Wb(f,p);cu(l,y)},d2=l=>{if(l.rangeCount>0){const f=l.getRangeAt(0),p=l.getRangeAt(l.rangeCount-1);return se.some(ud.create(ue.fromDom(f.startContainer),f.startOffset,ue.fromDom(p.endContainer),p.endOffset))}else return se.none()},rp=l=>{if(l.anchorNode===null||l.focusNode===null)return d2(l);{const f=ue.fromDom(l.anchorNode),p=ue.fromDom(l.focusNode);return Zb(f,l.anchorOffset,p,l.focusOffset)?se.some(ud.create(f,l.anchorOffset,p,l.focusOffset)):d2(l)}},Ff=(l,f,p=!0)=>{const _=(p?Db:ld)(l,f);OS(l,_)},ap=l=>lg(l).filter(f=>f.rangeCount>0).bind(rp),Gb=l=>ap(l).map(f=>$f.exact(f.start,f.soffset,f.finish,f.foffset)),AS=(l,f)=>{const p=Mb(l,f);return d4(p)},_4=(l,f,p)=>TS(l,f,p),Lf=l=>{lg(l).each(f=>f.removeAllRanges())},qb=l=>({elementFromPoint:(Pe,je)=>ue.fromPoint(ue.fromDom(l.document),Pe,je),getRect:Pe=>Pe.dom.getBoundingClientRect(),getRangedRect:(Pe,je,qe,Ft)=>{const Cn=$f.exact(Pe,je,qe,Ft);return AS(l,Cn)},getSelection:()=>Gb(l).map(Pe=>dS(l,Pe)),fromSitus:Pe=>{const je=$f.relative(Pe.start,Pe.finish);return dS(l,je)},situsFromPoint:(Pe,je)=>_4(l,Pe,je).map(qe=>uS.create(qe.start,qe.soffset,qe.finish,qe.foffset)),clearSelection:()=>{Lf(l)},collapseSelection:(Pe=!1)=>{Gb(l).each(je=>je.fold(qe=>qe.collapse(Pe),(qe,Ft)=>{const Cn=Pe?qe:Ft;jb(l,Cn,Cn)},(qe,Ft,Cn,Wn)=>{const ao=Pe?qe:Cn,xo=Pe?Ft:Wn;pd(l,ao,xo,ao,xo)}))},setSelection:Pe=>{pd(l,Pe.start,Pe.soffset,Pe.finish,Pe.foffset)},setRelativeSelection:(Pe,je)=>{jb(l,Pe,je)},selectNode:Pe=>{Ff(l,Pe,!1)},selectContents:Pe=>{Ff(l,Pe)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>ka(ue.fromDom(l.document)).top,scrollBy:(Pe,je)=>{l2(Pe,je,ue.fromDom(l.document))}}),bd=(l,f)=>({rows:l,cols:f}),f2=(l,f,p,y)=>{const _=qb(l),A=c2(_,f,p,y);return{clearstate:A.clearstate,mousedown:A.mousedown,mouseover:A.mouseover,mouseup:A.mouseup}},m2=l=>Xo(l,It).exists(Gu),Hf=(l,f)=>m2(l)||m2(f),g2=(l,f,p,y)=>{const _=qb(l),A=()=>(y.clear(f),se.none());return{keydown:(q,te,me,Ie,tt,Xe)=>{const Ze=q.raw,bt=Ze.which,Pe=Ze.shiftKey===!0;return Mm(f,y.selectedSelector).fold(()=>(Nf(bt)&&!Pe&&y.clearBeforeUpdate(f),Nf(bt)&&Pe&&!Hf(te,Ie)?se.none:np(bt)&&Pe?ln(ar,_,f,p,Vb,Ie,te,y.selectRange):ru(bt)&&Pe?ln(ar,_,f,p,i2,Ie,te,y.selectRange):np(bt)?ln(r2,_,p,Vb,Ie,te,Lb):ru(bt)?ln(r2,_,p,i2,Ie,te,w4):se.none),qe=>{const Ft=Cn=>()=>Or(Cn,ao=>Nb(ao.rows,ao.cols,f,qe,y)).fold(()=>Yu(f,y.firstSelectedSelector,y.lastSelectedSelector).map(ao=>{const xo=np(bt)||Xe.isForward(bt)?fs.after:fs.before;return _.setRelativeSelection(fs.on(ao.first,0),xo(ao.table)),y.clear(f),Jm.create(se.none(),!0)}),ao=>se.some(Jm.create(se.none(),!0)));return Nf(bt)&&Pe&&!Hf(te,Ie)?se.none:np(bt)&&Pe?Ft([bd(1,0)]):ru(bt)&&Pe?Ft([bd(-1,0)]):Xe.isBackward(bt)&&Pe?Ft([bd(0,-1),bd(-1,0)]):Xe.isForward(bt)&&Pe?Ft([bd(0,1),bd(1,0)]):Nf(bt)&&!Pe?A:se.none})()},keyup:(q,te,me,Ie,tt)=>Mm(f,y.selectedSelector).fold(()=>{const Xe=q.raw,Ze=Xe.which;return Xe.shiftKey===!0&&Nf(Ze)&&Hf(te,Ie)?m4(f,p,te,me,Ie,tt,y.selectRange):se.none()},se.none)}},RS=(l,f,p,y)=>{const _=qb(l);return(A,I)=>{y.clearBeforeUpdate(f),Gr(A,I,p).each(z=>{const q=z.boxes.getOr([]);y.selectRange(f,q,z.start,z.finish),_.selectContents(I),_.collapseSelection()})}},DS=(l,f)=>{const p=Vl(l,f);return p===void 0||p===""?[]:p.split(" ")},El=(l,f,p)=>{const _=DS(l,f).concat([p]);return gs(l,f,_.join(" ")),!0},MS=(l,f,p)=>{const y=ls(DS(l,f),_=>_!==p);return y.length>0?gs(l,f,y.join(" ")):Mo(l,f),!1},Kb=l=>l.dom.classList!==void 0,Sc=l=>DS(l,"class"),Us=(l,f)=>El(l,"class",f),T4=(l,f)=>MS(l,"class",f),Bi=(l,f)=>{Kb(l)?l.dom.classList.add(f):Us(l,f)},k4=l=>{(Kb(l)?l.dom.classList:Sc(l)).length===0&&Mo(l,"class")},PS=(l,f)=>{Kb(l)?l.dom.classList.remove(f):T4(l,f),k4(l)},cp=(l,f)=>Kb(l)&&l.dom.classList.contains(f),ug=(l,f)=>{Le(f,p=>{PS(l,p)})},NS=l=>f=>{Bi(f,l)},BS=l=>f=>{ug(f,l)},$S={byClass:l=>{const f=NS(l.selected),p=BS([l.selected,l.lastSelected,l.firstSelected]),y=A=>{const I=Lc(A,l.selectedSelector);Le(I,p)};return{clearBeforeUpdate:y,clear:y,selectRange:(A,I,z,q)=>{y(A),Le(I,f),Bi(z,l.firstSelected),Bi(q,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,f,p)=>{const y=q=>{Mo(q,l.selected),Mo(q,l.firstSelected),Mo(q,l.lastSelected)},_=q=>{gs(q,l.selected,"1")},A=q=>{I(q),p()},I=q=>{const te=Lc(q,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);Le(te,y)};return{clearBeforeUpdate:I,clear:A,selectRange:(q,te,me,Ie)=>{A(q),Le(te,_),gs(me,l.firstSelected,"1"),gs(Ie,l.lastSelected,"1"),f(te,me,Ie)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},rt=(l,f,p,y)=>{switch(l.tag){case"none":return f();case"single":return y(l.element);case"multiple":return p(l.elements)}},Ws=()=>({tag:"none"}),Yb=l=>({tag:"multiple",elements:l}),Zs=l=>({tag:"single",element:l}),Ec=(l,f,p)=>({get:()=>tb(l(),p).fold(()=>f().fold(Ws,Zs),Yb)}),h2=(l,f)=>{const p=l.slice(0,f[f.length-1].row+1),y=cy(p);return _s(y,_=>{const A=_.cells.slice(0,f[f.length-1].column+1);return Gt(A,I=>I.element)})},ip=(l,f)=>{const p=l.slice(f[0].row+f[0].rowspan-1,l.length),y=cy(p);return _s(y,_=>{const A=_.cells.slice(f[0].column+f[0].colspan-1,_.cells.length);return Gt(A,I=>I.element)})},dg=(l,f,p)=>{const y=wn.fromTable(l);return xa(y,f).map(A=>{const I=Um(y,p,!1),{rows:z}=uo(I),q=h2(z,A),te=ip(z,A);return{upOrLeftCells:q,downOrRightCells:te}})},IS=(l,f,p,y,_,A,I)=>({target:l,x:f,y:p,stop:y,prevent:_,kill:A,raw:I}),vd=l=>{const f=ue.fromDom(bw(l).getOr(l.target)),p=()=>l.stopPropagation(),y=()=>l.preventDefault(),_=sn(y,p);return IS(f,l.clientX,l.clientY,p,y,_,l)},fg=(l,f)=>p=>{l(p)&&f(vd(p))},O4=(l,f,p,y,_)=>{const A=fg(p,y);return l.dom.addEventListener(f,A,_),{unbind:ln(R4,l,f,A,_)}},A4=(l,f,p,y)=>O4(l,f,p,y,!1),R4=(l,f,p,y)=>{l.dom.removeEventListener(f,p,y)},FS=De,Vf=(l,f,p)=>A4(l,f,FS,p),mg=vd,zf=l=>!cp(ue.fromDom(l.target),"ephox-snooker-resizer-bar"),Xb=(l,f)=>{const p=Ec(()=>ue.fromDom(l.getBody()),()=>nb(xh(l),Za(l)),ff.selectedSelector),y=(q,te,me)=>{va(te).each(tt=>{const Xe=Gt(q,qe=>qe.dom),Ze=Wu(l),bt=Gc(Se,ue.fromDom(l.getDoc()),Ze),Pe=Un(l),je=dg(tt,{selection:Pe},bt).map(qe=>Yg(qe,Ft=>Gt(Ft,Cn=>Cn.dom))).getOrUndefined();Yk(l,Xe,te.dom,me.dom,je)})},_=()=>vs(l),A=$S.byAttr(ff,y,_);return l.on("init",q=>{const te=l.getWin(),me=ia(l),Ie=Za(l),tt=()=>{const Qn=l.selection,Yr=ue.fromDom(Qn.getStart()),Xr=ue.fromDom(Qn.getEnd());uf(va,[Yr,Xr]).fold(()=>A.clear(me),Se)},Xe=f2(te,me,Ie,A),Ze=g2(te,me,Ie,A),bt=RS(te,me,Ie,A),Pe=Qn=>Qn.raw.shiftKey===!0;l.on("TableSelectorChange",Qn=>bt(Qn.start,Qn.finish));const je=(Qn,Yr)=>{Pe(Qn)&&(Yr.kill&&Qn.kill(),Yr.selection.each(Xr=>{const Tc=$f.relative(Xr.start,Xr.finish),en=Mb(te,Tc);l.selection.setRng(en)}))},qe=Qn=>{const Yr=mg(Qn);if(Yr.raw.shiftKey&&Nf(Yr.raw.which)){const Xr=l.selection.getRng(),Tc=ue.fromDom(Xr.startContainer),en=ue.fromDom(Xr.endContainer);Ze.keyup(Yr,Tc,Xr.startOffset,en,Xr.endOffset).each(la=>{je(Yr,la)})}},Ft=Qn=>{const Yr=mg(Qn);f.hide();const Xr=l.selection.getRng(),Tc=ue.fromDom(Xr.startContainer),en=ue.fromDom(Xr.endContainer),la=P1(au,SS)(ue.fromDom(l.selection.getStart()));Ze.keydown(Yr,Tc,Xr.startOffset,en,Xr.endOffset,la).each(ws=>{je(Yr,ws)}),f.show()},Cn=Qn=>Qn.button===0,Wn=Qn=>Qn.buttons===void 0?!0:(Qn.buttons&1)!==0,ao=Qn=>{Xe.clearstate()},xo=Qn=>{Cn(Qn)&&zf(Qn)&&Xe.mousedown(mg(Qn))},Qa=Qn=>{Wn(Qn)&&zf(Qn)&&Xe.mouseover(mg(Qn))},Fi=Qn=>{Cn(Qn)&&zf(Qn)&&Xe.mouseup(mg(Qn))},_l=(()=>{const Qn=ep(ue.fromDom(me)),Yr=ep(0);return{touchEnd:Tc=>{const en=ue.fromDom(Tc.target);if(na("td")(en)||na("th")(en)){const la=Qn.get(),ws=Yr.get();Eo(la,en)&&Tc.timeStamp-ws<300&&(Tc.preventDefault(),bt(en,en))}Qn.set(en),Yr.set(Tc.timeStamp)}}})();l.on("dragstart",ao),l.on("mousedown",xo),l.on("mouseover",Qa),l.on("mouseup",Fi),l.on("touchend",_l.touchEnd),l.on("keyup",qe),l.on("keydown",Ft),l.on("NodeChange",tt)}),l.on("PreInit",()=>{l.serializer.addTempAttr(ff.firstSelected),l.serializer.addTempAttr(ff.lastSelected)}),{getSelectedCells:()=>rt(p.get(),Q([]),q=>Gt(q,te=>te.dom),q=>[q.dom]),clearSelectedCells:q=>A.clear(ue.fromDom(q))}},Xa=l=>{let f=[];return{bind:A=>{if(A===void 0)throw new Error("Event bind error: undefined handler");f.push(A)},unbind:A=>{f=ls(f,I=>I!==A)},trigger:(...A)=>{const I={};Le(l,(z,q)=>{I[z]=A[q]}),Le(f,z=>{z(I)})}}},$i=l=>{const f=Yg(l,y=>({bind:y.bind,unbind:y.unbind})),p=Yg(l,y=>y.trigger);return{registry:f,trigger:p}},Uf=(l,f)=>{let p=null;const y=()=>{Re(p)||(clearTimeout(p),p=null)};return{cancel:y,throttle:(...A)=>{y(),p=setTimeout(()=>{p=null,l.apply(null,A)},f)}}},gg=l=>l.slice(0).sort(),Jb=(l,f)=>{throw new Error("All required keys ("+gg(l).join(", ")+") were not specified. Specified keys were: "+gg(f).join(", ")+".")},Qb=l=>{throw new Error("Unsupported keys for object: "+gg(l).join(", "))},D4=(l,f)=>{if(!ge(f))throw new Error("The "+l+" fields must be an array. Was: "+f+".");Le(f,p=>{if(!Z(p))throw new Error("The value "+p+" in the "+l+" fields was not a string.")})},M4=(l,f)=>{throw new Error("All values need to be of type: "+f+". Keys ("+gg(l).join(", ")+") were not.")},P4=l=>{const f=gg(l);L(f,(y,_)=>_<f.length-1&&y===f[_+1]).each(y=>{throw new Error("The field: "+y+" occurs more than once in the combined fields: ["+f.join(", ")+"].")})},N4=(l,f)=>LS(l,f,{validate:Ht,label:"function"}),LS=(l,f,p)=>{if(f.length===0)throw new Error("You must specify at least one required field.");return D4("required",f),P4(f),y=>{const _=Pt(y);So(f,z=>is(_,z))||Jb(f,_),l(f,_);const I=ls(f,z=>!p.validate(y[z],z));return I.length>0&&M4(I,p.label),y}},HS=(l,f)=>{const p=ls(f,y=>!is(l,y));p.length>0&&Qb(p)},p2=l=>N4(HS,l),e0=p2(["compare","extract","mutate","sink"]),xr=p2(["element","start","stop","destroy"]),_c=p2(["forceDrop","drop","move","delayDrop"]),Ja=()=>{let l=se.none();const f=()=>{l=se.none()},p=(A,I)=>{const z=l.map(q=>A.compare(q,I));return l=se.some(I),z},y=(A,I)=>{I.extract(A).each(q=>{p(I,q).each(me=>{_.trigger.move(me)})})},_=$i({move:Xa(["info"])});return{onEvent:y,reset:f,events:_.registry}},lp=()=>{const l=$i({move:Xa(["info"])});return{onEvent:Se,reset:Se,events:l.registry}},b2=()=>{const l=lp(),f=Ja();let p=l;return{on:()=>{p.reset(),p=f},off:()=>{p.reset(),p=l},isOn:()=>p===f,onEvent:(z,q)=>{p.onEvent(z,q)},events:f.events}},VS=(l,f,p)=>{let y=!1;const _=$i({start:Xa([]),stop:Xa([])}),A=b2(),I=()=>{Ze.stop(),A.isOn()&&(A.off(),_.trigger.stop())},z=Uf(I,200),q=Pe=>{Ze.start(Pe),A.on(),_.trigger.start()},te=Pe=>{z.cancel(),A.onEvent(Pe,f)};A.events.move.bind(Pe=>{f.mutate(l,Pe.info)});const me=()=>{y=!0},Ie=()=>{y=!1},tt=()=>y,Xe=Pe=>(...je)=>{y&&Pe.apply(null,je)},Ze=f.sink(_c({forceDrop:I,drop:Xe(I),move:Xe(te),delayDrop:Xe(z.throttle)}),p),bt=()=>{Ze.destroy()};return{element:Ze.element,go:q,on:me,off:Ie,isActive:tt,destroy:bt,events:_.registry}},t0=l=>{const f=l.replace(/\./g,"-");return{resolve:y=>f+"-"+y}},n0=t0("ephox-dragster").resolve,$4=l=>{const f={layerClass:n0("blocker"),...l},p=ue.fromTag("div");return gs(p,"role","presentation"),Xs(p,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Bi(p,n0("blocker")),Bi(p,f.layerClass),{element:Q(p),destroy:()=>{vr(p)}}};var s0=e0({compare:(l,f)=>ul(f.left-l.left,f.top-l.top),extract:l=>se.some(ul(l.x,l.y)),sink:(l,f)=>{const p=$4(f),y=Vf(p.element(),"mousedown",l.forceDrop),_=Vf(p.element(),"mouseup",l.drop),A=Vf(p.element(),"mousemove",l.move),I=Vf(p.element(),"mouseout",l.delayDrop),z=()=>{p.destroy(),_.unbind(),A.unbind(),I.unbind(),y.unbind()},q=me=>{Yo(me,p.element())},te=()=>{vr(p.element())};return xr({element:p.element,start:q,stop:te,destroy:z})},mutate:(l,f)=>{l.mutate(f.left,f.top)}});const Jn=(l,f={})=>{var p;const y=(p=f.mode)!==null&&p!==void 0?p:s0;return VS(l,y,f)},Ii=t0("ephox-snooker").resolve,US=()=>{const l=$i({drag:Xa(["xDelta","yDelta"])});return{mutate:(p,y)=>{l.trigger.drag(p,y)},events:l.registry}},v2=()=>{const l=$i({drag:Xa(["xDelta","yDelta","target"])});let f=se.none();const p=US();return p.events.drag.bind(A=>{f.each(I=>{l.trigger.drag(A.xDelta,A.yDelta,I)})}),{assign:A=>{f=se.some(A)},get:()=>f,mutate:p.mutate,events:l.registry}},hg=(l,f,p,y,_)=>{const A=ue.fromTag("div");return Xs(A,{position:"absolute",left:f-y/2+"px",top:p+"px",height:_+"px",width:y+"px"}),ol(A,{"data-column":l,role:"presentation"}),A},r0=(l,f,p,y,_)=>{const A=ue.fromTag("div");return Xs(A,{position:"absolute",left:f+"px",top:p-_/2+"px",height:_+"px",width:y+"px"}),ol(A,{"data-row":l,role:"presentation"}),A},up=Ii("resizer-bar"),y2=Ii("resizer-rows"),WS=Ii("resizer-cols"),C2=7,ZS=(l,f)=>_s(l.all,(p,y)=>f(p.element)?[y]:[]),dp=(l,f)=>{const p=[];return qo(l.grid.columns,y=>{wn.getColumnAt(l,y).map(A=>A.element).forall(f)&&p.push(y)}),ls(p,y=>{const _=wn.filterItems(l,A=>A.column===y);return So(_,A=>f(A.element))})},Wf=l=>{const f=Lc(l.parent(),"."+up);Le(f,vr)},a0=(l,f,p)=>{const y=l.origin();Le(f,_=>{_.each(A=>{const I=p(y,A);Bi(I,up),Yo(l.parent(),I)})})},L4=(l,f,p,y)=>{a0(l,f,(_,A)=>{const I=hg(A.col,A.x-_.left,p.top-_.top,C2,y);return Bi(I,WS),I})},H4=(l,f,p,y)=>{a0(l,f,(_,A)=>{const I=r0(A.row,p.left-_.left,A.y-_.top,y,C2);return Bi(I,y2),I})},V4=(l,f,p,y,_)=>{const A=Em(p),I=f.isResizable,z=y.length>0?At.positions(y,p):[],q=z.length>0?ZS(l,I):[],te=ls(z,(Xe,Ze)=>Je(q,bt=>Ze===bt));H4(f,te,A,Gd(p));const me=_.length>0?dh.positions(_,p):[],Ie=me.length>0?dp(l,I):[],tt=ls(me,(Xe,Ze)=>Je(Ie,bt=>Ze===bt));L4(f,tt,A,N1(p))},Oa=(l,f)=>{if(Wf(l),l.isResizable(f)){const p=wn.fromTable(f),y=Pw(p),_=ch(p);V4(p,l,f,y,_)}},pr=(l,f)=>{const p=Lc(l.parent(),"."+up);Le(p,f)},pg=l=>{pr(l,f=>{wo(f,"display","none")})},LM=l=>{pr(l,f=>{wo(f,"display","block")})},z4=l=>cp(l,y2),U4=l=>cp(l,WS),yn=Ii("resizer-bar-dragging"),W4=l=>{const f=v2(),p=Jn(f,{});let y=se.none();const _=(Ze,bt)=>se.from(Vl(Ze,bt));f.events.drag.bind(Ze=>{_(Ze.target,"data-row").each(bt=>{const Pe=$s(Ze.target,"top");wo(Ze.target,"top",Pe+Ze.yDelta+"px")}),_(Ze.target,"data-column").each(bt=>{const Pe=$s(Ze.target,"left");wo(Ze.target,"left",Pe+Ze.xDelta+"px")})});const A=(Ze,bt)=>{const Pe=$s(Ze,bt),je=Ur(Ze,"data-initial-"+bt,0);return Pe-je};p.events.stop.bind(()=>{f.get().each(Ze=>{y.each(bt=>{_(Ze,"data-row").each(Pe=>{const je=A(Ze,"top");Mo(Ze,"data-initial-top"),Xe.trigger.adjustHeight(bt,je,parseInt(Pe,10))}),_(Ze,"data-column").each(Pe=>{const je=A(Ze,"left");Mo(Ze,"data-initial-left"),Xe.trigger.adjustWidth(bt,je,parseInt(Pe,10))}),Oa(l,bt)})})});const I=(Ze,bt)=>{Xe.trigger.startAdjust(),f.assign(Ze),gs(Ze,"data-initial-"+bt,$s(Ze,bt)),Bi(Ze,yn),wo(Ze,"opacity","0.2"),p.go(l.parent())},z=Vf(l.parent(),"mousedown",Ze=>{z4(Ze.target)&&I(Ze.target,"top"),U4(Ze.target)&&I(Ze.target,"left")}),q=Ze=>Eo(Ze,l.view()),te=Ze=>Ys(Ze,"table",q).filter(Gu),me=Vf(l.view(),"mouseover",Ze=>{te(Ze.target).fold(()=>{Ho(Ze.target)&&Wf(l)},bt=>{p.isActive()&&(y=se.some(bt),Oa(l,bt))})}),Ie=()=>{z.unbind(),me.unbind(),p.destroy(),Wf(l)},tt=Ze=>{Oa(l,Ze)},Xe=$i({adjustHeight:Xa(["table","delta","row"]),adjustWidth:Xa(["table","delta","column"]),startAdjust:Xa([])});return{destroy:Ie,refresh:tt,on:p.on,off:p.off,hideBars:ln(pg,l),showBars:ln(LM,l),events:Xe.registry}},w2={create:(l,f,p)=>{const y=At,_=dh,A=W4(l),I=$i({beforeResize:Xa(["table","type"]),afterResize:Xa(["table","type"]),startDrag:Xa([])});return A.events.adjustHeight.bind(z=>{const q=z.table;I.trigger.beforeResize(q,"row");const te=y.delta(z.delta,q);fy(q,te,z.row),I.trigger.afterResize(q,"row")}),A.events.startAdjust.bind(z=>{I.trigger.startDrag()}),A.events.adjustWidth.bind(z=>{const q=z.table;I.trigger.beforeResize(q,"col");const te=_.delta(z.delta,q),me=p(q);bx(q,te,z.column,f,me),I.trigger.afterResize(q,"col")}),{on:A.on,off:A.off,refreshBars:A.refresh,hideBars:A.hideBars,showBars:A.showBars,destroy:A.destroy,events:I.registry}}},fp={only:(l,f)=>{const p=g1(l)?br(l):l;return{parent:Q(p),view:Q(l),origin:Q(ul(0,0)),isResizable:f}},detached:(l,f,p)=>{const y=()=>Em(f);return{parent:Q(f),view:Q(l),origin:y,isResizable:p}},body:(l,f,p)=>({parent:Q(f),view:Q(l),origin:Q(ul(0,0)),isResizable:p})},j4=()=>{const l=ue.fromTag("div");return Xs(l,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Yo(wv(),l),l},G4=(l,f)=>l.inline?fp.body(ue.fromDom(l.getBody()),j4(),f):fp.only(ue.fromDom(l.getDoc()),f),x2=(l,f)=>{l.inline&&vr(f.parent())},c0=l=>bn(l)&&l.nodeName==="TABLE",i0="bar-",zM=l=>Vl(l,"data-mce-resize")!=="false",q4=l=>{const f=wn.fromTable(l);wn.hasColumns(f)||Le(Pu(l),p=>{const y=Mu(p,"width");wo(p,"width",y),Mo(p,"width")})},mp=l=>Ru(l,"corner-"),S2=l=>C1(l,"corner-"),K4=l=>{const f=gd(),p=gd(),y=gd();let _,A,I,z;const q=je=>xb(l,je),te=()=>ki(l)?Jl():Ju(),me=je=>mf(je).columns,Ie=je=>mf(je).rows,tt=(je,qe,Ft,Cn)=>{const Wn=S2(qe),ao=Du(Wn,"e"),xo=Ru(Wn,"n");if(A===""&&Of(je),z===""&&Qk(je),Ft!==_&&A!==""){wo(je,"width",A);const Qa=te(),Fi=q(je),Zf=ki(l)||ao?me(je)-1:0;bx(je,Ft-_,Zf,Qa,Fi)}else if(jv(A)){const Qa=parseFloat(A.replace("%","")),Fi=Ft*Qa/_;wo(je,"width",Fi+"%")}if(Rm(A)&&q4(je),Cn!==I&&z!==""){wo(je,"height",z);const Qa=xo?0:Ie(je)-1;fy(je,Cn-I,Qa)}},Xe=()=>{p.on(je=>{je.destroy()}),y.on(je=>{x2(l,je)})};return l.on("init",()=>{const je=G4(l,zM);if(y.set(je),wk(l)&&q1(l)){const qe=te(),Ft=w2.create(je,qe,q);l.mode.isReadOnly()||Ft.on(),Ft.events.startDrag.bind(Cn=>{f.set(l.selection.getRng())}),Ft.events.beforeResize.bind(Cn=>{const Wn=Cn.table.dom;ys(l,Wn,Sh(Wn),Am(Wn),i0+Cn.type)}),Ft.events.afterResize.bind(Cn=>{const Wn=Cn.table,ao=Wn.dom;ja(Wn),f.on(xo=>{l.selection.setRng(xo),l.focus()}),or(l,ao,Sh(ao),Am(ao),i0+Cn.type),l.undoManager.add()}),p.set(Ft)}}),l.on("ObjectResizeStart",je=>{const qe=je.target;if(c0(qe)&&!l.mode.isReadOnly()){const Ft=ue.fromDom(qe);Le(l.dom.select(".mce-clonedresizable"),Cn=>{l.dom.addClass(Cn,"mce-"+G1(l)+"-columns")}),!Ux(Ft)&&nr(l)?Wh(Ft):!zx(Ft)&&Oi(l)&&Of(Ft),Wx(Ft)&&Ru(je.origin,i0)&&Of(Ft),_=je.width,A=Zu(l)?"":jw(l,qe).getOr(""),I=je.height,z=Gw(l,qe).getOr("")}}),l.on("ObjectResized",je=>{const qe=je.target;if(c0(qe)){const Ft=ue.fromDom(qe),Cn=je.origin;mp(Cn)&&tt(Ft,Cn,je.width,je.height),ja(Ft),_f(l,Ft.dom,Cs)}}),l.on("SwitchMode",()=>{p.on(je=>{l.mode.isReadOnly()?(je.off(),je.hideBars()):(je.on(),je.showBars())})}),l.on("dragstart dragend",je=>{p.on(qe=>{je.type==="dragstart"?(qe.hideBars(),qe.off()):(qe.on(),qe.showBars())})}),l.on("remove",()=>{Xe()}),{refresh:je=>{p.on(qe=>qe.refreshBars(ue.fromDom(je)))},hide:()=>{p.on(je=>je.hideBars())},show:()=>{p.on(je=>je.showBars())}}},jS=l=>{Ch(l);const f=K4(l),p=Xb(l,f),y=Ay(l,f,p);return c4(l,y),i4(l,y),AM(l,y),{getSelectedCells:p.getSelectedCells,clearSelectedCells:p.clearSelectedCells}},Bt=l=>({table:jS(l)});var l0=()=>{b.add("dom",Bt)};l0()})();var bq=!1,vq=!1,aw=[],yq=-1;function Mee(b){Pee(b)}function Pee(b){aw.includes(b)||aw.push(b),Bee()}function Nee(b){let x=aw.indexOf(b);x!==-1&&x>yq&&aw.splice(x,1)}function Bee(){!vq&&!bq&&(bq=!0,queueMicrotask($ee))}function $ee(){bq=!1,vq=!0;for(let b=0;b<aw.length;b++)aw[b](),yq=b;aw.length=0,yq=-1,vq=!1}var XT,fw,JT,PX,Cq=!0;function Iee(b){Cq=!1,b(),Cq=!0}function Fee(b){XT=b.reactive,JT=b.release,fw=x=>b.effect(x,{scheduler:k=>{Cq?Mee(k):k()}}),PX=b.raw}function KY(b){fw=b}function Lee(b){let x=()=>{};return[D=>{let $=fw(D);return b._x_effects||(b._x_effects=new Set,b._x_runEffects=()=>{b._x_effects.forEach(H=>H())}),b._x_effects.add($),x=()=>{$!==void 0&&(b._x_effects.delete($),JT($))},$},()=>{x()}]}function NX(b,x){let k=!0,D,$=fw(()=>{let H=b();JSON.stringify(H),k?D=H:queueMicrotask(()=>{x(H,D),D=H}),k=!1});return()=>JT($)}var BX=[],$X=[],IX=[];function Hee(b){IX.push(b)}function Lq(b,x){typeof x=="function"?(b._x_cleanups||(b._x_cleanups=[]),b._x_cleanups.push(x)):(x=b,$X.push(x))}function FX(b){BX.push(b)}function LX(b,x,k){b._x_attributeCleanups||(b._x_attributeCleanups={}),b._x_attributeCleanups[x]||(b._x_attributeCleanups[x]=[]),b._x_attributeCleanups[x].push(k)}function HX(b,x){b._x_attributeCleanups&&Object.entries(b._x_attributeCleanups).forEach(([k,D])=>{(x===void 0||x.includes(k))&&(D.forEach($=>$()),delete b._x_attributeCleanups[k])})}function Vee(b){var x,k;for((x=b._x_effects)==null||x.forEach(Nee);(k=b._x_cleanups)!=null&&k.length;)b._x_cleanups.pop()()}var Hq=new MutationObserver(Wq),Vq=!1;function zq(){Hq.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),Vq=!0}function VX(){zee(),Hq.disconnect(),Vq=!1}var mM=[];function zee(){let b=Hq.takeRecords();mM.push(()=>b.length>0&&Wq(b));let x=mM.length;queueMicrotask(()=>{if(mM.length===x)for(;mM.length>0;)mM.shift()()})}function kr(b){if(!Vq)return b();VX();let x=b();return zq(),x}var Uq=!1,PL=[];function Uee(){Uq=!0}function Wee(){Uq=!1,Wq(PL),PL=[]}function Wq(b){if(Uq){PL=PL.concat(b);return}let x=new Set,k=new Set,D=new Map,$=new Map;for(let H=0;H<b.length;H++)if(!b[H].target._x_ignoreMutationObserver&&(b[H].type==="childList"&&(b[H].addedNodes.forEach(Z=>Z.nodeType===1&&x.add(Z)),b[H].removedNodes.forEach(Z=>Z.nodeType===1&&k.add(Z))),b[H].type==="attributes")){let Z=b[H].target,J=b[H].attributeName,ge=b[H].oldValue,Re=()=>{D.has(Z)||D.set(Z,[]),D.get(Z).push({name:J,value:Z.getAttribute(J)})},Be=()=>{$.has(Z)||$.set(Z,[]),$.get(Z).push(J)};Z.hasAttribute(J)&&ge===null?Re():Z.hasAttribute(J)?(Be(),Re()):Be()}$.forEach((H,Z)=>{HX(Z,H)}),D.forEach((H,Z)=>{BX.forEach(J=>J(Z,H))});for(let H of k)x.has(H)||$X.forEach(Z=>Z(H));x.forEach(H=>{H._x_ignoreSelf=!0,H._x_ignore=!0});for(let H of x)k.has(H)||H.isConnected&&(delete H._x_ignoreSelf,delete H._x_ignore,IX.forEach(Z=>Z(H)),H._x_ignore=!0,H._x_ignoreSelf=!0);x.forEach(H=>{delete H._x_ignoreSelf,delete H._x_ignore}),x=null,k=null,D=null,$=null}function zX(b){return EM(GT(b))}function SM(b,x,k){return b._x_dataStack=[x,...GT(k||b)],()=>{b._x_dataStack=b._x_dataStack.filter(D=>D!==x)}}function GT(b){return b._x_dataStack?b._x_dataStack:typeof ShadowRoot=="function"&&b instanceof ShadowRoot?GT(b.host):b.parentNode?GT(b.parentNode):[]}function EM(b){return new Proxy({objects:b},Zee)}var Zee={ownKeys({objects:b}){return Array.from(new Set(b.flatMap(x=>Object.keys(x))))},has({objects:b},x){return x==Symbol.unscopables?!1:b.some(k=>Object.prototype.hasOwnProperty.call(k,x)||Reflect.has(k,x))},get({objects:b},x,k){return x=="toJSON"?jee:Reflect.get(b.find(D=>Reflect.has(D,x))||{},x,k)},set({objects:b},x,k,D){const $=b.find(Z=>Object.prototype.hasOwnProperty.call(Z,x))||b[b.length-1],H=Object.getOwnPropertyDescriptor($,x);return H!=null&&H.set&&(H!=null&&H.get)?H.set.call(D,k)||!0:Reflect.set($,x,k)}};function jee(){return Reflect.ownKeys(this).reduce((x,k)=>(x[k]=Reflect.get(this,k),x),{})}function UX(b){let x=D=>typeof D=="object"&&!Array.isArray(D)&&D!==null,k=(D,$="")=>{Object.entries(Object.getOwnPropertyDescriptors(D)).forEach(([H,{value:Z,enumerable:J}])=>{if(J===!1||Z===void 0||typeof Z=="object"&&Z!==null&&Z.__v_skip)return;let ge=$===""?H:`${$}.${H}`;typeof Z=="object"&&Z!==null&&Z._x_interceptor?D[H]=Z.initialize(b,ge,H):x(Z)&&Z!==D&&!(Z instanceof Element)&&k(Z,ge)})};return k(b)}function WX(b,x=()=>{}){let k={initialValue:void 0,_x_interceptor:!0,initialize(D,$,H){return b(this.initialValue,()=>Gee(D,$),Z=>wq(D,$,Z),$,H)}};return x(k),D=>{if(typeof D=="object"&&D!==null&&D._x_interceptor){let $=k.initialize.bind(k);k.initialize=(H,Z,J)=>{let ge=D.initialize(H,Z,J);return k.initialValue=ge,$(H,Z,J)}}else k.initialValue=D;return k}}function Gee(b,x){return x.split(".").reduce((k,D)=>k[D],b)}function wq(b,x,k){if(typeof x=="string"&&(x=x.split(".")),x.length===1)b[x[0]]=k;else{if(x.length===0)throw error;return b[x[0]]||(b[x[0]]={}),wq(b[x[0]],x.slice(1),k)}}var ZX={};function lm(b,x){ZX[b]=x}function xq(b,x){let k=qee(x);return Object.entries(ZX).forEach(([D,$])=>{Object.defineProperty(b,`$${D}`,{get(){return $(x,k)},enumerable:!1})}),b}function qee(b){let[x,k]=XX(b),D={interceptor:WX,...x};return Lq(b,k),D}function Kee(b,x,k,...D){try{return k(...D)}catch($){CM($,b,x)}}function CM(b,x,k=void 0){b=Object.assign(b??{message:"No error message given."},{el:x,expression:k}),console.warn(`Alpine Expression Error: ${b.message}

${k?'Expression: "'+k+`"

`:""}`,x),setTimeout(()=>{throw b},0)}var AL=!0;function jX(b){let x=AL;AL=!1;let k=b();return AL=x,k}function cw(b,x,k={}){let D;return nl(b,x)($=>D=$,k),D}function nl(...b){return GX(...b)}var GX=qX;function Yee(b){GX=b}function qX(b,x){let k={};xq(k,b);let D=[k,...GT(b)],$=typeof x=="function"?Xee(D,x):Qee(D,x,b);return Kee.bind(null,b,x,$)}function Xee(b,x){return(k=()=>{},{scope:D={},params:$=[]}={})=>{let H=x.apply(EM([D,...b]),$);NL(k,H)}}var rq={};function Jee(b,x){if(rq[b])return rq[b];let k=Object.getPrototypeOf(async function(){}).constructor,D=/^[\n\s]*if.*\(.*\)/.test(b.trim())||/^(let|const)\s/.test(b.trim())?`(async()=>{ ${b} })()`:b,H=(()=>{try{let Z=new k(["__self","scope"],`with (scope) { __self.result = ${D} }; __self.finished = true; return __self.result;`);return Object.defineProperty(Z,"name",{value:`[Alpine] ${b}`}),Z}catch(Z){return CM(Z,x,b),Promise.resolve()}})();return rq[b]=H,H}function Qee(b,x,k){let D=Jee(x,k);return($=()=>{},{scope:H={},params:Z=[]}={})=>{D.result=void 0,D.finished=!1;let J=EM([H,...b]);if(typeof D=="function"){let ge=D(D,J).catch(Re=>CM(Re,k,x));D.finished?(NL($,D.result,J,Z,k),D.result=void 0):ge.then(Re=>{NL($,Re,J,Z,k)}).catch(Re=>CM(Re,k,x)).finally(()=>D.result=void 0)}}}function NL(b,x,k,D,$){if(AL&&typeof x=="function"){let H=x.apply(k,D);H instanceof Promise?H.then(Z=>NL(b,Z,k,D)).catch(Z=>CM(Z,$,x)):b(H)}else typeof x=="object"&&x instanceof Promise?x.then(H=>b(H)):b(x)}var Zq="x-";function QT(b=""){return Zq+b}function ete(b){Zq=b}var BL={};function da(b,x){return BL[b]=x,{before(k){if(!BL[k]){console.warn(String.raw`Cannot find directive \`${k}\`. \`${b}\` will use the default order of execution`);return}const D=sw.indexOf(k);sw.splice(D>=0?D:sw.indexOf("DEFAULT"),0,b)}}}function tte(b){return Object.keys(BL).includes(b)}function jq(b,x,k){if(x=Array.from(x),b._x_virtualDirectives){let H=Object.entries(b._x_virtualDirectives).map(([J,ge])=>({name:J,value:ge})),Z=KX(H);H=H.map(J=>Z.find(ge=>ge.name===J.name)?{name:`x-bind:${J.name}`,value:`"${J.value}"`}:J),x=x.concat(H)}let D={};return x.map(eJ((H,Z)=>D[H]=Z)).filter(nJ).map(ste(D,k)).sort(rte).map(H=>ote(b,H))}function KX(b){return Array.from(b).map(eJ()).filter(x=>!nJ(x))}var Sq=!1,pM=new Map,YX=Symbol();function nte(b){Sq=!0;let x=Symbol();YX=x,pM.set(x,[]);let k=()=>{for(;pM.get(x).length;)pM.get(x).shift()();pM.delete(x)},D=()=>{Sq=!1,k()};b(k),D()}function XX(b){let x=[],k=J=>x.push(J),[D,$]=Lee(b);return x.push($),[{Alpine:TM,effect:D,cleanup:k,evaluateLater:nl.bind(nl,b),evaluate:cw.bind(cw,b)},()=>x.forEach(J=>J())]}function ote(b,x){let k=()=>{},D=BL[x.type]||k,[$,H]=XX(b);LX(b,x.original,H);let Z=()=>{b._x_ignore||b._x_ignoreSelf||(D.inline&&D.inline(b,x,$),D=D.bind(D,b,x,$),Sq?pM.get(YX).push(D):D())};return Z.runCleanups=H,Z}var JX=(b,x)=>({name:k,value:D})=>(k.startsWith(b)&&(k=k.replace(b,x)),{name:k,value:D}),QX=b=>b;function eJ(b=()=>{}){return({name:x,value:k})=>{let{name:D,value:$}=tJ.reduce((H,Z)=>Z(H),{name:x,value:k});return D!==x&&b(D,x),{name:D,value:$}}}var tJ=[];function Gq(b){tJ.push(b)}function nJ({name:b}){return oJ().test(b)}var oJ=()=>new RegExp(`^${Zq}([^:^.]+)\\b`);function ste(b,x){return({name:k,value:D})=>{let $=k.match(oJ()),H=k.match(/:([a-zA-Z0-9\-_:]+)/),Z=k.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],J=x||b[k]||k;return{type:$?$[1]:null,value:H?H[1]:null,modifiers:Z.map(ge=>ge.replace(".","")),expression:D,original:J}}}var Eq="DEFAULT",sw=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",Eq,"teleport"];function rte(b,x){let k=sw.indexOf(b.type)===-1?Eq:b.type,D=sw.indexOf(x.type)===-1?Eq:x.type;return sw.indexOf(k)-sw.indexOf(D)}function bM(b,x,k={}){b.dispatchEvent(new CustomEvent(x,{detail:k,bubbles:!0,composed:!0,cancelable:!0}))}function dw(b,x){if(typeof ShadowRoot=="function"&&b instanceof ShadowRoot){Array.from(b.children).forEach($=>dw($,x));return}let k=!1;if(x(b,()=>k=!0),k)return;let D=b.firstElementChild;for(;D;)dw(D,x),D=D.nextElementSibling}function Md(b,...x){console.warn(`Alpine Warning: ${b}`,...x)}var YY=!1;function ate(){YY&&Md("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),YY=!0,document.body||Md("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),bM(document,"alpine:init"),bM(document,"alpine:initializing"),zq(),Hee(x=>u1(x,dw)),Lq(x=>ek(x)),FX((x,k)=>{jq(x,k).forEach(D=>D())});let b=x=>!zL(x.parentElement,!0);Array.from(document.querySelectorAll(aJ().join(","))).filter(b).forEach(x=>{u1(x)}),bM(document,"alpine:initialized"),setTimeout(()=>{lte()})}var qq=[],sJ=[];function rJ(){return qq.map(b=>b())}function aJ(){return qq.concat(sJ).map(b=>b())}function cJ(b){qq.push(b)}function iJ(b){sJ.push(b)}function zL(b,x=!1){return _M(b,k=>{if((x?aJ():rJ()).some($=>k.matches($)))return!0})}function _M(b,x){if(b){if(x(b))return b;if(b._x_teleportBack&&(b=b._x_teleportBack),!!b.parentElement)return _M(b.parentElement,x)}}function cte(b){return rJ().some(x=>b.matches(x))}var lJ=[];function ite(b){lJ.push(b)}function u1(b,x=dw,k=()=>{}){nte(()=>{x(b,(D,$)=>{k(D,$),lJ.forEach(H=>H(D,$)),jq(D,D.attributes).forEach(H=>H()),D._x_ignore&&$()})})}function ek(b,x=dw){x(b,k=>{Vee(k),HX(k)})}function lte(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([x,k,D])=>{tte(k)||D.some($=>{if(document.querySelector($))return Md(`found "${$}", but missing ${x} plugin`),!0})})}var _q=[],Kq=!1;function Yq(b=()=>{}){return queueMicrotask(()=>{Kq||setTimeout(()=>{Tq()})}),new Promise(x=>{_q.push(()=>{b(),x()})})}function Tq(){for(Kq=!1;_q.length;)_q.shift()()}function ute(){Kq=!0}function Xq(b,x){return Array.isArray(x)?XY(b,x.join(" ")):typeof x=="object"&&x!==null?dte(b,x):typeof x=="function"?Xq(b,x()):XY(b,x)}function XY(b,x){let k=$=>$.split(" ").filter(H=>!b.classList.contains(H)).filter(Boolean),D=$=>(b.classList.add(...$),()=>{b.classList.remove(...$)});return x=x===!0?x="":x||"",D(k(x))}function dte(b,x){let k=J=>J.split(" ").filter(Boolean),D=Object.entries(x).flatMap(([J,ge])=>ge?k(J):!1).filter(Boolean),$=Object.entries(x).flatMap(([J,ge])=>ge?!1:k(J)).filter(Boolean),H=[],Z=[];return $.forEach(J=>{b.classList.contains(J)&&(b.classList.remove(J),Z.push(J))}),D.forEach(J=>{b.classList.contains(J)||(b.classList.add(J),H.push(J))}),()=>{Z.forEach(J=>b.classList.add(J)),H.forEach(J=>b.classList.remove(J))}}function UL(b,x){return typeof x=="object"&&x!==null?fte(b,x):mte(b,x)}function fte(b,x){let k={};return Object.entries(x).forEach(([D,$])=>{k[D]=b.style[D],D.startsWith("--")||(D=gte(D)),b.style.setProperty(D,$)}),setTimeout(()=>{b.style.length===0&&b.removeAttribute("style")}),()=>{UL(b,k)}}function mte(b,x){let k=b.getAttribute("style",x);return b.setAttribute("style",x),()=>{b.setAttribute("style",k||"")}}function gte(b){return b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function kq(b,x=()=>{}){let k=!1;return function(){k?x.apply(this,arguments):(k=!0,b.apply(this,arguments))}}da("transition",(b,{value:x,modifiers:k,expression:D},{evaluate:$})=>{typeof D=="function"&&(D=$(D)),D!==!1&&(!D||typeof D=="boolean"?pte(b,k,x):hte(b,D,x))});function hte(b,x,k){uJ(b,Xq,""),{enter:$=>{b._x_transition.enter.during=$},"enter-start":$=>{b._x_transition.enter.start=$},"enter-end":$=>{b._x_transition.enter.end=$},leave:$=>{b._x_transition.leave.during=$},"leave-start":$=>{b._x_transition.leave.start=$},"leave-end":$=>{b._x_transition.leave.end=$}}[k](x)}function pte(b,x,k){uJ(b,UL);let D=!x.includes("in")&&!x.includes("out")&&!k,$=D||x.includes("in")||["enter"].includes(k),H=D||x.includes("out")||["leave"].includes(k);x.includes("in")&&!D&&(x=x.filter((sn,En)=>En<x.indexOf("out"))),x.includes("out")&&!D&&(x=x.filter((sn,En)=>En>x.indexOf("out")));let Z=!x.includes("opacity")&&!x.includes("scale"),J=Z||x.includes("opacity"),ge=Z||x.includes("scale"),Re=J?0:1,Be=ge?gM(x,"scale",95)/100:1,pt=gM(x,"delay",0)/1e3,Xt=gM(x,"origin","center"),bn="opacity, transform",Ht=gM(x,"duration",150)/1e3,Vt=gM(x,"duration",75)/1e3,Se="cubic-bezier(0.4, 0.0, 0.2, 1)";$&&(b._x_transition.enter.during={transformOrigin:Xt,transitionDelay:`${pt}s`,transitionProperty:bn,transitionDuration:`${Ht}s`,transitionTimingFunction:Se},b._x_transition.enter.start={opacity:Re,transform:`scale(${Be})`},b._x_transition.enter.end={opacity:1,transform:"scale(1)"}),H&&(b._x_transition.leave.during={transformOrigin:Xt,transitionDelay:`${pt}s`,transitionProperty:bn,transitionDuration:`${Vt}s`,transitionTimingFunction:Se},b._x_transition.leave.start={opacity:1,transform:"scale(1)"},b._x_transition.leave.end={opacity:Re,transform:`scale(${Be})`})}function uJ(b,x,k={}){b._x_transition||(b._x_transition={enter:{during:k,start:k,end:k},leave:{during:k,start:k,end:k},in(D=()=>{},$=()=>{}){Oq(b,x,{during:this.enter.during,start:this.enter.start,end:this.enter.end},D,$)},out(D=()=>{},$=()=>{}){Oq(b,x,{during:this.leave.during,start:this.leave.start,end:this.leave.end},D,$)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(b,x,k,D){const $=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let H=()=>$(k);if(x){b._x_transition&&(b._x_transition.enter||b._x_transition.leave)?b._x_transition.enter&&(Object.entries(b._x_transition.enter.during).length||Object.entries(b._x_transition.enter.start).length||Object.entries(b._x_transition.enter.end).length)?b._x_transition.in(k):H():b._x_transition?b._x_transition.in(k):H();return}b._x_hidePromise=b._x_transition?new Promise((Z,J)=>{b._x_transition.out(()=>{},()=>Z(D)),b._x_transitioning&&b._x_transitioning.beforeCancel(()=>J({isFromCancelledTransition:!0}))}):Promise.resolve(D),queueMicrotask(()=>{let Z=dJ(b);Z?(Z._x_hideChildren||(Z._x_hideChildren=[]),Z._x_hideChildren.push(b)):$(()=>{let J=ge=>{let Re=Promise.all([ge._x_hidePromise,...(ge._x_hideChildren||[]).map(J)]).then(([Be])=>Be==null?void 0:Be());return delete ge._x_hidePromise,delete ge._x_hideChildren,Re};J(b).catch(ge=>{if(!ge.isFromCancelledTransition)throw ge})})})};function dJ(b){let x=b.parentNode;if(x)return x._x_hidePromise?x:dJ(x)}function Oq(b,x,{during:k,start:D,end:$}={},H=()=>{},Z=()=>{}){if(b._x_transitioning&&b._x_transitioning.cancel(),Object.keys(k).length===0&&Object.keys(D).length===0&&Object.keys($).length===0){H(),Z();return}let J,ge,Re;bte(b,{start(){J=x(b,D)},during(){ge=x(b,k)},before:H,end(){J(),Re=x(b,$)},after:Z,cleanup(){ge(),Re()}})}function bte(b,x){let k,D,$,H=kq(()=>{kr(()=>{k=!0,D||x.before(),$||(x.end(),Tq()),x.after(),b.isConnected&&x.cleanup(),delete b._x_transitioning})});b._x_transitioning={beforeCancels:[],beforeCancel(Z){this.beforeCancels.push(Z)},cancel:kq(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();H()}),finish:H},kr(()=>{x.start(),x.during()}),ute(),requestAnimationFrame(()=>{if(k)return;let Z=Number(getComputedStyle(b).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,J=Number(getComputedStyle(b).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;Z===0&&(Z=Number(getComputedStyle(b).animationDuration.replace("s",""))*1e3),kr(()=>{x.before()}),D=!0,requestAnimationFrame(()=>{k||(kr(()=>{x.end()}),Tq(),setTimeout(b._x_transitioning.finish,Z+J),$=!0)})})}function gM(b,x,k){if(b.indexOf(x)===-1)return k;const D=b[b.indexOf(x)+1];if(!D||x==="scale"&&isNaN(D))return k;if(x==="duration"||x==="delay"){let $=D.match(/([0-9]+)ms/);if($)return $[1]}return x==="origin"&&["top","right","left","center","bottom"].includes(b[b.indexOf(x)+2])?[D,b[b.indexOf(x)+2]].join(" "):D}var uv=!1;function fv(b,x=()=>{}){return(...k)=>uv?x(...k):b(...k)}function vte(b){return(...x)=>uv&&b(...x)}var fJ=[];function WL(b){fJ.push(b)}function yte(b,x){fJ.forEach(k=>k(b,x)),uv=!0,mJ(()=>{u1(x,(k,D)=>{D(k,()=>{})})}),uv=!1}var Aq=!1;function Cte(b,x){x._x_dataStack||(x._x_dataStack=b._x_dataStack),uv=!0,Aq=!0,mJ(()=>{wte(x)}),uv=!1,Aq=!1}function wte(b){let x=!1;u1(b,(D,$)=>{dw(D,(H,Z)=>{if(x&&cte(H))return Z();x=!0,$(H,Z)})})}function mJ(b){let x=fw;KY((k,D)=>{let $=x(k);return JT($),()=>{}}),b(),KY(x)}function gJ(b,x,k,D=[]){switch(b._x_bindings||(b._x_bindings=XT({})),b._x_bindings[x]=k,x=D.includes("camel")?Ate(x):x,x){case"value":xte(b,k);break;case"style":Ete(b,k);break;case"class":Ste(b,k);break;case"selected":case"checked":_te(b,x,k);break;default:hJ(b,x,k);break}}function xte(b,x){if(vJ(b))b.attributes.value===void 0&&(b.value=x),window.fromModel&&(typeof x=="boolean"?b.checked=RL(b.value)===x:b.checked=JY(b.value,x));else if(Jq(b))Number.isInteger(x)?b.value=x:!Array.isArray(x)&&typeof x!="boolean"&&![null,void 0].includes(x)?b.value=String(x):Array.isArray(x)?b.checked=x.some(k=>JY(k,b.value)):b.checked=!!x;else if(b.tagName==="SELECT")Ote(b,x);else{if(b.value===x)return;b.value=x===void 0?"":x}}function Ste(b,x){b._x_undoAddedClasses&&b._x_undoAddedClasses(),b._x_undoAddedClasses=Xq(b,x)}function Ete(b,x){b._x_undoAddedStyles&&b._x_undoAddedStyles(),b._x_undoAddedStyles=UL(b,x)}function _te(b,x,k){hJ(b,x,k),kte(b,x,k)}function hJ(b,x,k){[null,void 0,!1].includes(k)&&Dte(x)?b.removeAttribute(x):(pJ(x)&&(k=x),Tte(b,x,k))}function Tte(b,x,k){b.getAttribute(x)!=k&&b.setAttribute(x,k)}function kte(b,x,k){b[x]!==k&&(b[x]=k)}function Ote(b,x){const k=[].concat(x).map(D=>D+"");Array.from(b.options).forEach(D=>{D.selected=k.includes(D.value)})}function Ate(b){return b.toLowerCase().replace(/-(\w)/g,(x,k)=>k.toUpperCase())}function JY(b,x){return b==x}function RL(b){return[1,"1","true","on","yes",!0].includes(b)?!0:[0,"0","false","off","no",!1].includes(b)?!1:b?!!b:null}var Rte=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function pJ(b){return Rte.has(b)}function Dte(b){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(b)}function Mte(b,x,k){return b._x_bindings&&b._x_bindings[x]!==void 0?b._x_bindings[x]:bJ(b,x,k)}function Pte(b,x,k,D=!0){if(b._x_bindings&&b._x_bindings[x]!==void 0)return b._x_bindings[x];if(b._x_inlineBindings&&b._x_inlineBindings[x]!==void 0){let $=b._x_inlineBindings[x];return $.extract=D,jX(()=>cw(b,$.expression))}return bJ(b,x,k)}function bJ(b,x,k){let D=b.getAttribute(x);return D===null?typeof k=="function"?k():k:D===""?!0:pJ(x)?!![x,"true"].includes(D):D}function Jq(b){return b.type==="checkbox"||b.localName==="ui-checkbox"||b.localName==="ui-switch"}function vJ(b){return b.type==="radio"||b.localName==="ui-radio"}function yJ(b,x){var k;return function(){var D=this,$=arguments,H=function(){k=null,b.apply(D,$)};clearTimeout(k),k=setTimeout(H,x)}}function CJ(b,x){let k;return function(){let D=this,$=arguments;k||(b.apply(D,$),k=!0,setTimeout(()=>k=!1,x))}}function wJ({get:b,set:x},{get:k,set:D}){let $=!0,H,Z=fw(()=>{let J=b(),ge=k();if($)D(aq(J)),$=!1;else{let Re=JSON.stringify(J),Be=JSON.stringify(ge);Re!==H?D(aq(J)):Re!==Be&&x(aq(ge))}H=JSON.stringify(b()),JSON.stringify(k())});return()=>{JT(Z)}}function aq(b){return typeof b=="object"?JSON.parse(JSON.stringify(b)):b}function Nte(b){(Array.isArray(b)?b:[b]).forEach(k=>k(TM))}var nw={},QY=!1;function Bte(b,x){if(QY||(nw=XT(nw),QY=!0),x===void 0)return nw[b];nw[b]=x,UX(nw[b]),typeof x=="object"&&x!==null&&x.hasOwnProperty("init")&&typeof x.init=="function"&&nw[b].init()}function $te(){return nw}var xJ={};function Ite(b,x){let k=typeof x!="function"?()=>x:x;return b instanceof Element?SJ(b,k()):(xJ[b]=k,()=>{})}function Fte(b){return Object.entries(xJ).forEach(([x,k])=>{Object.defineProperty(b,x,{get(){return(...D)=>k(...D)}})}),b}function SJ(b,x,k){let D=[];for(;D.length;)D.pop()();let $=Object.entries(x).map(([Z,J])=>({name:Z,value:J})),H=KX($);return $=$.map(Z=>H.find(J=>J.name===Z.name)?{name:`x-bind:${Z.name}`,value:`"${Z.value}"`}:Z),jq(b,$,k).map(Z=>{D.push(Z.runCleanups),Z()}),()=>{for(;D.length;)D.pop()()}}var EJ={};function Lte(b,x){EJ[b]=x}function Hte(b,x){return Object.entries(EJ).forEach(([k,D])=>{Object.defineProperty(b,k,{get(){return(...$)=>D.bind(x)(...$)},enumerable:!1})}),b}var Vte={get reactive(){return XT},get release(){return JT},get effect(){return fw},get raw(){return PX},version:"3.14.3",flushAndStopDeferringMutations:Wee,dontAutoEvaluateFunctions:jX,disableEffectScheduling:Iee,startObservingMutations:zq,stopObservingMutations:VX,setReactivityEngine:Fee,onAttributeRemoved:LX,onAttributesAdded:FX,closestDataStack:GT,skipDuringClone:fv,onlyDuringClone:vte,addRootSelector:cJ,addInitSelector:iJ,interceptClone:WL,addScopeToNode:SM,deferMutations:Uee,mapAttributes:Gq,evaluateLater:nl,interceptInit:ite,setEvaluator:Yee,mergeProxies:EM,extractProp:Pte,findClosest:_M,onElRemoved:Lq,closestRoot:zL,destroyTree:ek,interceptor:WX,transition:Oq,setStyles:UL,mutateDom:kr,directive:da,entangle:wJ,throttle:CJ,debounce:yJ,evaluate:cw,initTree:u1,nextTick:Yq,prefixed:QT,prefix:ete,plugin:Nte,magic:lm,store:Bte,start:ate,clone:Cte,cloneNode:yte,bound:Mte,$data:zX,watch:NX,walk:dw,data:Lte,bind:Ite},TM=Vte;function zte(b,x){const k=Object.create(null),D=b.split(",");for(let $=0;$<D.length;$++)k[D[$]]=!0;return $=>!!k[$]}var Ute=Object.freeze({}),Wte=Object.prototype.hasOwnProperty,ZL=(b,x)=>Wte.call(b,x),iw=Array.isArray,vM=b=>_J(b)==="[object Map]",Zte=b=>typeof b=="string",Qq=b=>typeof b=="symbol",jL=b=>b!==null&&typeof b=="object",jte=Object.prototype.toString,_J=b=>jte.call(b),TJ=b=>_J(b).slice(8,-1),eK=b=>Zte(b)&&b!=="NaN"&&b[0]!=="-"&&""+parseInt(b,10)===b,Gte=b=>{const x=Object.create(null);return k=>x[k]||(x[k]=b(k))},qte=Gte(b=>b.charAt(0).toUpperCase()+b.slice(1)),kJ=(b,x)=>b!==x&&(b===b||x===x),Rq=new WeakMap,hM=[],Kg,lw=Symbol("iterate"),Dq=Symbol("Map key iterate");function Kte(b){return b&&b._isEffect===!0}function Yte(b,x=Ute){Kte(b)&&(b=b.raw);const k=Qte(b,x);return x.lazy||k(),k}function Xte(b){b.active&&(OJ(b),b.options.onStop&&b.options.onStop(),b.active=!1)}var Jte=0;function Qte(b,x){const k=function(){if(!k.active)return b();if(!hM.includes(k)){OJ(k);try{return tne(),hM.push(k),Kg=k,b()}finally{hM.pop(),AJ(),Kg=hM[hM.length-1]}}};return k.id=Jte++,k.allowRecurse=!!x.allowRecurse,k._isEffect=!0,k.active=!0,k.raw=b,k.deps=[],k.options=x,k}function OJ(b){const{deps:x}=b;if(x.length){for(let k=0;k<x.length;k++)x[k].delete(b);x.length=0}}var qT=!0,tK=[];function ene(){tK.push(qT),qT=!1}function tne(){tK.push(qT),qT=!0}function AJ(){const b=tK.pop();qT=b===void 0?!0:b}function cm(b,x,k){if(!qT||Kg===void 0)return;let D=Rq.get(b);D||Rq.set(b,D=new Map);let $=D.get(k);$||D.set(k,$=new Set),$.has(Kg)||($.add(Kg),Kg.deps.push($),Kg.options.onTrack&&Kg.options.onTrack({effect:Kg,target:b,type:x,key:k}))}function dv(b,x,k,D,$,H){const Z=Rq.get(b);if(!Z)return;const J=new Set,ge=Be=>{Be&&Be.forEach(pt=>{(pt!==Kg||pt.allowRecurse)&&J.add(pt)})};if(x==="clear")Z.forEach(ge);else if(k==="length"&&iw(b))Z.forEach((Be,pt)=>{(pt==="length"||pt>=D)&&ge(Be)});else switch(k!==void 0&&ge(Z.get(k)),x){case"add":iw(b)?eK(k)&&ge(Z.get("length")):(ge(Z.get(lw)),vM(b)&&ge(Z.get(Dq)));break;case"delete":iw(b)||(ge(Z.get(lw)),vM(b)&&ge(Z.get(Dq)));break;case"set":vM(b)&&ge(Z.get(lw));break}const Re=Be=>{Be.options.onTrigger&&Be.options.onTrigger({effect:Be,target:b,key:k,type:x,newValue:D,oldValue:$,oldTarget:H}),Be.options.scheduler?Be.options.scheduler(Be):Be()};J.forEach(Re)}var nne=zte("__proto__,__v_isRef,__isVue"),RJ=new Set(Object.getOwnPropertyNames(Symbol).map(b=>Symbol[b]).filter(Qq)),one=DJ(),sne=DJ(!0),eX=rne();function rne(){const b={};return["includes","indexOf","lastIndexOf"].forEach(x=>{b[x]=function(...k){const D=cr(this);for(let H=0,Z=this.length;H<Z;H++)cm(D,"get",H+"");const $=D[x](...k);return $===-1||$===!1?D[x](...k.map(cr)):$}}),["push","pop","shift","unshift","splice"].forEach(x=>{b[x]=function(...k){ene();const D=cr(this)[x].apply(this,k);return AJ(),D}}),b}function DJ(b=!1,x=!1){return function(D,$,H){if($==="__v_isReactive")return!b;if($==="__v_isReadonly")return b;if($==="__v_raw"&&H===(b?x?yne:BJ:x?vne:NJ).get(D))return D;const Z=iw(D);if(!b&&Z&&ZL(eX,$))return Reflect.get(eX,$,H);const J=Reflect.get(D,$,H);return(Qq($)?RJ.has($):nne($))||(b||cm(D,"get",$),x)?J:Mq(J)?!Z||!eK($)?J.value:J:jL(J)?b?$J(J):rK(J):J}}var ane=cne();function cne(b=!1){return function(k,D,$,H){let Z=k[D];if(!b&&($=cr($),Z=cr(Z),!iw(k)&&Mq(Z)&&!Mq($)))return Z.value=$,!0;const J=iw(k)&&eK(D)?Number(D)<k.length:ZL(k,D),ge=Reflect.set(k,D,$,H);return k===cr(H)&&(J?kJ($,Z)&&dv(k,"set",D,$,Z):dv(k,"add",D,$)),ge}}function ine(b,x){const k=ZL(b,x),D=b[x],$=Reflect.deleteProperty(b,x);return $&&k&&dv(b,"delete",x,void 0,D),$}function lne(b,x){const k=Reflect.has(b,x);return(!Qq(x)||!RJ.has(x))&&cm(b,"has",x),k}function une(b){return cm(b,"iterate",iw(b)?"length":lw),Reflect.ownKeys(b)}var dne={get:one,set:ane,deleteProperty:ine,has:lne,ownKeys:une},fne={get:sne,set(b,x){return console.warn(`Set operation on key "${String(x)}" failed: target is readonly.`,b),!0},deleteProperty(b,x){return console.warn(`Delete operation on key "${String(x)}" failed: target is readonly.`,b),!0}},nK=b=>jL(b)?rK(b):b,oK=b=>jL(b)?$J(b):b,sK=b=>b,GL=b=>Reflect.getPrototypeOf(b);function xL(b,x,k=!1,D=!1){b=b.__v_raw;const $=cr(b),H=cr(x);x!==H&&!k&&cm($,"get",x),!k&&cm($,"get",H);const{has:Z}=GL($),J=D?sK:k?oK:nK;if(Z.call($,x))return J(b.get(x));if(Z.call($,H))return J(b.get(H));b!==$&&b.get(x)}function SL(b,x=!1){const k=this.__v_raw,D=cr(k),$=cr(b);return b!==$&&!x&&cm(D,"has",b),!x&&cm(D,"has",$),b===$?k.has(b):k.has(b)||k.has($)}function EL(b,x=!1){return b=b.__v_raw,!x&&cm(cr(b),"iterate",lw),Reflect.get(b,"size",b)}function tX(b){b=cr(b);const x=cr(this);return GL(x).has.call(x,b)||(x.add(b),dv(x,"add",b,b)),this}function nX(b,x){x=cr(x);const k=cr(this),{has:D,get:$}=GL(k);let H=D.call(k,b);H?PJ(k,D,b):(b=cr(b),H=D.call(k,b));const Z=$.call(k,b);return k.set(b,x),H?kJ(x,Z)&&dv(k,"set",b,x,Z):dv(k,"add",b,x),this}function oX(b){const x=cr(this),{has:k,get:D}=GL(x);let $=k.call(x,b);$?PJ(x,k,b):(b=cr(b),$=k.call(x,b));const H=D?D.call(x,b):void 0,Z=x.delete(b);return $&&dv(x,"delete",b,void 0,H),Z}function sX(){const b=cr(this),x=b.size!==0,k=vM(b)?new Map(b):new Set(b),D=b.clear();return x&&dv(b,"clear",void 0,void 0,k),D}function _L(b,x){return function(D,$){const H=this,Z=H.__v_raw,J=cr(Z),ge=x?sK:b?oK:nK;return!b&&cm(J,"iterate",lw),Z.forEach((Re,Be)=>D.call($,ge(Re),ge(Be),H))}}function TL(b,x,k){return function(...D){const $=this.__v_raw,H=cr($),Z=vM(H),J=b==="entries"||b===Symbol.iterator&&Z,ge=b==="keys"&&Z,Re=$[b](...D),Be=k?sK:x?oK:nK;return!x&&cm(H,"iterate",ge?Dq:lw),{next(){const{value:pt,done:Xt}=Re.next();return Xt?{value:pt,done:Xt}:{value:J?[Be(pt[0]),Be(pt[1])]:Be(pt),done:Xt}},[Symbol.iterator](){return this}}}}function lv(b){return function(...x){{const k=x[0]?`on key "${x[0]}" `:"";console.warn(`${qte(b)} operation ${k}failed: target is readonly.`,cr(this))}return b==="delete"?!1:this}}function mne(){const b={get(H){return xL(this,H)},get size(){return EL(this)},has:SL,add:tX,set:nX,delete:oX,clear:sX,forEach:_L(!1,!1)},x={get(H){return xL(this,H,!1,!0)},get size(){return EL(this)},has:SL,add:tX,set:nX,delete:oX,clear:sX,forEach:_L(!1,!0)},k={get(H){return xL(this,H,!0)},get size(){return EL(this,!0)},has(H){return SL.call(this,H,!0)},add:lv("add"),set:lv("set"),delete:lv("delete"),clear:lv("clear"),forEach:_L(!0,!1)},D={get(H){return xL(this,H,!0,!0)},get size(){return EL(this,!0)},has(H){return SL.call(this,H,!0)},add:lv("add"),set:lv("set"),delete:lv("delete"),clear:lv("clear"),forEach:_L(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(H=>{b[H]=TL(H,!1,!1),k[H]=TL(H,!0,!1),x[H]=TL(H,!1,!0),D[H]=TL(H,!0,!0)}),[b,k,x,D]}var[gne,hne,Hne,Vne]=mne();function MJ(b,x){const k=b?hne:gne;return(D,$,H)=>$==="__v_isReactive"?!b:$==="__v_isReadonly"?b:$==="__v_raw"?D:Reflect.get(ZL(k,$)&&$ in D?k:D,$,H)}var pne={get:MJ(!1)},bne={get:MJ(!0)};function PJ(b,x,k){const D=cr(k);if(D!==k&&x.call(b,D)){const $=TJ(b);console.warn(`Reactive ${$} contains both the raw and reactive versions of the same object${$==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var NJ=new WeakMap,vne=new WeakMap,BJ=new WeakMap,yne=new WeakMap;function Cne(b){switch(b){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wne(b){return b.__v_skip||!Object.isExtensible(b)?0:Cne(TJ(b))}function rK(b){return b&&b.__v_isReadonly?b:IJ(b,!1,dne,pne,NJ)}function $J(b){return IJ(b,!0,fne,bne,BJ)}function IJ(b,x,k,D,$){if(!jL(b))return console.warn(`value cannot be made reactive: ${String(b)}`),b;if(b.__v_raw&&!(x&&b.__v_isReactive))return b;const H=$.get(b);if(H)return H;const Z=wne(b);if(Z===0)return b;const J=new Proxy(b,Z===2?D:k);return $.set(b,J),J}function cr(b){return b&&cr(b.__v_raw)||b}function Mq(b){return!!(b&&b.__v_isRef===!0)}lm("nextTick",()=>Yq);lm("dispatch",b=>bM.bind(bM,b));lm("watch",(b,{evaluateLater:x,cleanup:k})=>(D,$)=>{let H=x(D),J=NX(()=>{let ge;return H(Re=>ge=Re),ge},$);k(J)});lm("store",$te);lm("data",b=>zX(b));lm("root",b=>zL(b));lm("refs",b=>(b._x_refs_proxy||(b._x_refs_proxy=EM(xne(b))),b._x_refs_proxy));function xne(b){let x=[];return _M(b,k=>{k._x_refs&&x.push(k._x_refs)}),x}var cq={};function FJ(b){return cq[b]||(cq[b]=0),++cq[b]}function Sne(b,x){return _M(b,k=>{if(k._x_ids&&k._x_ids[x])return!0})}function Ene(b,x){b._x_ids||(b._x_ids={}),b._x_ids[x]||(b._x_ids[x]=FJ(x))}lm("id",(b,{cleanup:x})=>(k,D=null)=>{let $=`${k}${D?`-${D}`:""}`;return _ne(b,$,x,()=>{let H=Sne(b,k),Z=H?H._x_ids[k]:FJ(k);return D?`${k}-${Z}-${D}`:`${k}-${Z}`})});WL((b,x)=>{b._x_id&&(x._x_id=b._x_id)});function _ne(b,x,k,D){if(b._x_id||(b._x_id={}),b._x_id[x])return b._x_id[x];let $=D();return b._x_id[x]=$,k(()=>{delete b._x_id[x]}),$}lm("el",b=>b);LJ("Focus","focus","focus");LJ("Persist","persist","persist");function LJ(b,x,k){lm(x,D=>Md(`You can't use [$${x}] without first installing the "${b}" plugin here: https://alpinejs.dev/plugins/${k}`,D))}da("modelable",(b,{expression:x},{effect:k,evaluateLater:D,cleanup:$})=>{let H=D(x),Z=()=>{let Be;return H(pt=>Be=pt),Be},J=D(`${x} = __placeholder`),ge=Be=>J(()=>{},{scope:{__placeholder:Be}}),Re=Z();ge(Re),queueMicrotask(()=>{if(!b._x_model)return;b._x_removeModelListeners.default();let Be=b._x_model.get,pt=b._x_model.set,Xt=wJ({get(){return Be()},set(bn){pt(bn)}},{get(){return Z()},set(bn){ge(bn)}});$(Xt)})});da("teleport",(b,{modifiers:x,expression:k},{cleanup:D})=>{b.tagName.toLowerCase()!=="template"&&Md("x-teleport can only be used on a <template> tag",b);let $=rX(k),H=b.content.cloneNode(!0).firstElementChild;b._x_teleport=H,H._x_teleportBack=b,b.setAttribute("data-teleport-template",!0),H.setAttribute("data-teleport-target",!0),b._x_forwardEvents&&b._x_forwardEvents.forEach(J=>{H.addEventListener(J,ge=>{ge.stopPropagation(),b.dispatchEvent(new ge.constructor(ge.type,ge))})}),SM(H,{},b);let Z=(J,ge,Re)=>{Re.includes("prepend")?ge.parentNode.insertBefore(J,ge):Re.includes("append")?ge.parentNode.insertBefore(J,ge.nextSibling):ge.appendChild(J)};kr(()=>{Z(H,$,x),fv(()=>{u1(H),H._x_ignore=!0})()}),b._x_teleportPutBack=()=>{let J=rX(k);kr(()=>{Z(b._x_teleport,J,x)})},D(()=>kr(()=>{H.remove(),ek(H)}))});var Tne=document.createElement("div");function rX(b){let x=fv(()=>document.querySelector(b),()=>Tne)();return x||Md(`Cannot find x-teleport element for selector: "${b}"`),x}var HJ=()=>{};HJ.inline=(b,{modifiers:x},{cleanup:k})=>{x.includes("self")?b._x_ignoreSelf=!0:b._x_ignore=!0,k(()=>{x.includes("self")?delete b._x_ignoreSelf:delete b._x_ignore})};da("ignore",HJ);da("effect",fv((b,{expression:x},{effect:k})=>{k(nl(b,x))}));function Pq(b,x,k,D){let $=b,H=ge=>D(ge),Z={},J=(ge,Re)=>Be=>Re(ge,Be);if(k.includes("dot")&&(x=kne(x)),k.includes("camel")&&(x=One(x)),k.includes("passive")&&(Z.passive=!0),k.includes("capture")&&(Z.capture=!0),k.includes("window")&&($=window),k.includes("document")&&($=document),k.includes("debounce")){let ge=k[k.indexOf("debounce")+1]||"invalid-wait",Re=$L(ge.split("ms")[0])?Number(ge.split("ms")[0]):250;H=yJ(H,Re)}if(k.includes("throttle")){let ge=k[k.indexOf("throttle")+1]||"invalid-wait",Re=$L(ge.split("ms")[0])?Number(ge.split("ms")[0]):250;H=CJ(H,Re)}return k.includes("prevent")&&(H=J(H,(ge,Re)=>{Re.preventDefault(),ge(Re)})),k.includes("stop")&&(H=J(H,(ge,Re)=>{Re.stopPropagation(),ge(Re)})),k.includes("once")&&(H=J(H,(ge,Re)=>{ge(Re),$.removeEventListener(x,H,Z)})),(k.includes("away")||k.includes("outside"))&&($=document,H=J(H,(ge,Re)=>{b.contains(Re.target)||Re.target.isConnected!==!1&&(b.offsetWidth<1&&b.offsetHeight<1||b._x_isShown!==!1&&ge(Re))})),k.includes("self")&&(H=J(H,(ge,Re)=>{Re.target===b&&ge(Re)})),(Rne(x)||VJ(x))&&(H=J(H,(ge,Re)=>{Dne(Re,k)||ge(Re)})),$.addEventListener(x,H,Z),()=>{$.removeEventListener(x,H,Z)}}function kne(b){return b.replace(/-/g,".")}function One(b){return b.toLowerCase().replace(/-(\w)/g,(x,k)=>k.toUpperCase())}function $L(b){return!Array.isArray(b)&&!isNaN(b)}function Ane(b){return[" ","_"].includes(b)?b:b.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function Rne(b){return["keydown","keyup"].includes(b)}function VJ(b){return["contextmenu","click","mouse"].some(x=>b.includes(x))}function Dne(b,x){let k=x.filter(H=>!["window","document","prevent","stop","once","capture","self","away","outside","passive"].includes(H));if(k.includes("debounce")){let H=k.indexOf("debounce");k.splice(H,$L((k[H+1]||"invalid-wait").split("ms")[0])?2:1)}if(k.includes("throttle")){let H=k.indexOf("throttle");k.splice(H,$L((k[H+1]||"invalid-wait").split("ms")[0])?2:1)}if(k.length===0||k.length===1&&aX(b.key).includes(k[0]))return!1;const $=["ctrl","shift","alt","meta","cmd","super"].filter(H=>k.includes(H));return k=k.filter(H=>!$.includes(H)),!($.length>0&&$.filter(Z=>((Z==="cmd"||Z==="super")&&(Z="meta"),b[`${Z}Key`])).length===$.length&&(VJ(b.type)||aX(b.key).includes(k[0])))}function aX(b){if(!b)return[];b=Ane(b);let x={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return x[b]=b,Object.keys(x).map(k=>{if(x[k]===b)return k}).filter(k=>k)}da("model",(b,{modifiers:x,expression:k},{effect:D,cleanup:$})=>{let H=b;x.includes("parent")&&(H=b.parentNode);let Z=nl(H,k),J;typeof k=="string"?J=nl(H,`${k} = __placeholder`):typeof k=="function"&&typeof k()=="string"?J=nl(H,`${k()} = __placeholder`):J=()=>{};let ge=()=>{let Xt;return Z(bn=>Xt=bn),cX(Xt)?Xt.get():Xt},Re=Xt=>{let bn;Z(Ht=>bn=Ht),cX(bn)?bn.set(Xt):J(()=>{},{scope:{__placeholder:Xt}})};typeof k=="string"&&b.type==="radio"&&kr(()=>{b.hasAttribute("name")||b.setAttribute("name",k)});var Be=b.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(b.type)||x.includes("lazy")?"change":"input";let pt=uv?()=>{}:Pq(b,Be,x,Xt=>{Re(iq(b,x,Xt,ge()))});if(x.includes("fill")&&([void 0,null,""].includes(ge())||Jq(b)&&Array.isArray(ge())||b.tagName.toLowerCase()==="select"&&b.multiple)&&Re(iq(b,x,{target:b},ge())),b._x_removeModelListeners||(b._x_removeModelListeners={}),b._x_removeModelListeners.default=pt,$(()=>b._x_removeModelListeners.default()),b.form){let Xt=Pq(b.form,"reset",[],bn=>{Yq(()=>b._x_model&&b._x_model.set(iq(b,x,{target:b},ge())))});$(()=>Xt())}b._x_model={get(){return ge()},set(Xt){Re(Xt)}},b._x_forceModelUpdate=Xt=>{Xt===void 0&&typeof k=="string"&&k.match(/\./)&&(Xt=""),window.fromModel=!0,kr(()=>gJ(b,"value",Xt)),delete window.fromModel},D(()=>{let Xt=ge();x.includes("unintrusive")&&document.activeElement.isSameNode(b)||b._x_forceModelUpdate(Xt)})});function iq(b,x,k,D){return kr(()=>{if(k instanceof CustomEvent&&k.detail!==void 0)return k.detail!==null&&k.detail!==void 0?k.detail:k.target.value;if(Jq(b))if(Array.isArray(D)){let $=null;return x.includes("number")?$=lq(k.target.value):x.includes("boolean")?$=RL(k.target.value):$=k.target.value,k.target.checked?D.includes($)?D:D.concat([$]):D.filter(H=>!Mne(H,$))}else return k.target.checked;else{if(b.tagName.toLowerCase()==="select"&&b.multiple)return x.includes("number")?Array.from(k.target.selectedOptions).map($=>{let H=$.value||$.text;return lq(H)}):x.includes("boolean")?Array.from(k.target.selectedOptions).map($=>{let H=$.value||$.text;return RL(H)}):Array.from(k.target.selectedOptions).map($=>$.value||$.text);{let $;return vJ(b)?k.target.checked?$=k.target.value:$=D:$=k.target.value,x.includes("number")?lq($):x.includes("boolean")?RL($):x.includes("trim")?$.trim():$}}})}function lq(b){let x=b?parseFloat(b):null;return Pne(x)?x:b}function Mne(b,x){return b==x}function Pne(b){return!Array.isArray(b)&&!isNaN(b)}function cX(b){return b!==null&&typeof b=="object"&&typeof b.get=="function"&&typeof b.set=="function"}da("cloak",b=>queueMicrotask(()=>kr(()=>b.removeAttribute(QT("cloak")))));iJ(()=>`[${QT("init")}]`);da("init",fv((b,{expression:x},{evaluate:k})=>typeof x=="string"?!!x.trim()&&k(x,{},!1):k(x,{},!1)));da("text",(b,{expression:x},{effect:k,evaluateLater:D})=>{let $=D(x);k(()=>{$(H=>{kr(()=>{b.textContent=H})})})});da("html",(b,{expression:x},{effect:k,evaluateLater:D})=>{let $=D(x);k(()=>{$(H=>{kr(()=>{b.innerHTML=H,b._x_ignoreSelf=!0,u1(b),delete b._x_ignoreSelf})})})});Gq(JX(":",QX(QT("bind:"))));var zJ=(b,{value:x,modifiers:k,expression:D,original:$},{effect:H,cleanup:Z})=>{if(!x){let ge={};Fte(ge),nl(b,D)(Be=>{SJ(b,Be,$)},{scope:ge});return}if(x==="key")return Nne(b,D);if(b._x_inlineBindings&&b._x_inlineBindings[x]&&b._x_inlineBindings[x].extract)return;let J=nl(b,D);H(()=>J(ge=>{ge===void 0&&typeof D=="string"&&D.match(/\./)&&(ge=""),kr(()=>gJ(b,x,ge,k))})),Z(()=>{b._x_undoAddedClasses&&b._x_undoAddedClasses(),b._x_undoAddedStyles&&b._x_undoAddedStyles()})};zJ.inline=(b,{value:x,modifiers:k,expression:D})=>{x&&(b._x_inlineBindings||(b._x_inlineBindings={}),b._x_inlineBindings[x]={expression:D,extract:!1})};da("bind",zJ);function Nne(b,x){b._x_keyExpression=x}cJ(()=>`[${QT("data")}]`);da("data",(b,{expression:x},{cleanup:k})=>{if(Bne(b))return;x=x===""?"{}":x;let D={};xq(D,b);let $={};Hte($,D);let H=cw(b,x,{scope:$});(H===void 0||H===!0)&&(H={}),xq(H,b);let Z=XT(H);UX(Z);let J=SM(b,Z);Z.init&&cw(b,Z.init),k(()=>{Z.destroy&&cw(b,Z.destroy),J()})});WL((b,x)=>{b._x_dataStack&&(x._x_dataStack=b._x_dataStack,x.setAttribute("data-has-alpine-state",!0))});function Bne(b){return uv?Aq?!0:b.hasAttribute("data-has-alpine-state"):!1}da("show",(b,{modifiers:x,expression:k},{effect:D})=>{let $=nl(b,k);b._x_doHide||(b._x_doHide=()=>{kr(()=>{b.style.setProperty("display","none",x.includes("important")?"important":void 0)})}),b._x_doShow||(b._x_doShow=()=>{kr(()=>{b.style.length===1&&b.style.display==="none"?b.removeAttribute("style"):b.style.removeProperty("display")})});let H=()=>{b._x_doHide(),b._x_isShown=!1},Z=()=>{b._x_doShow(),b._x_isShown=!0},J=()=>setTimeout(Z),ge=kq(pt=>pt?Z():H(),pt=>{typeof b._x_toggleAndCascadeWithTransitions=="function"?b._x_toggleAndCascadeWithTransitions(b,pt,Z,H):pt?J():H()}),Re,Be=!0;D(()=>$(pt=>{!Be&&pt===Re||(x.includes("immediate")&&(pt?J():H()),ge(pt),Re=pt,Be=!1)}))});da("for",(b,{expression:x},{effect:k,cleanup:D})=>{let $=Ine(x),H=nl(b,$.items),Z=nl(b,b._x_keyExpression||"index");b._x_prevKeys=[],b._x_lookup={},k(()=>$ne(b,$,H,Z)),D(()=>{Object.values(b._x_lookup).forEach(J=>kr(()=>{ek(J),J.remove()})),delete b._x_prevKeys,delete b._x_lookup})});function $ne(b,x,k,D){let $=Z=>typeof Z=="object"&&!Array.isArray(Z),H=b;k(Z=>{Fne(Z)&&Z>=0&&(Z=Array.from(Array(Z).keys(),Se=>Se+1)),Z===void 0&&(Z=[]);let J=b._x_lookup,ge=b._x_prevKeys,Re=[],Be=[];if($(Z))Z=Object.entries(Z).map(([Se,sn])=>{let En=iX(x,sn,Se,Z);D(Q=>{Be.includes(Q)&&Md("Duplicate key on x-for",b),Be.push(Q)},{scope:{index:Se,...En}}),Re.push(En)});else for(let Se=0;Se<Z.length;Se++){let sn=iX(x,Z[Se],Se,Z);D(En=>{Be.includes(En)&&Md("Duplicate key on x-for",b),Be.push(En)},{scope:{index:Se,...sn}}),Re.push(sn)}let pt=[],Xt=[],bn=[],Ht=[];for(let Se=0;Se<ge.length;Se++){let sn=ge[Se];Be.indexOf(sn)===-1&&bn.push(sn)}ge=ge.filter(Se=>!bn.includes(Se));let Vt="template";for(let Se=0;Se<Be.length;Se++){let sn=Be[Se],En=ge.indexOf(sn);if(En===-1)ge.splice(Se,0,sn),pt.push([Vt,Se]);else if(En!==Se){let Q=ge.splice(Se,1)[0],Kt=ge.splice(En-1,1)[0];ge.splice(Se,0,Kt),ge.splice(En,0,Q),Xt.push([Q,Kt])}else Ht.push(sn);Vt=sn}for(let Se=0;Se<bn.length;Se++){let sn=bn[Se];sn in J&&(kr(()=>{ek(J[sn]),J[sn].remove()}),delete J[sn])}for(let Se=0;Se<Xt.length;Se++){let[sn,En]=Xt[Se],Q=J[sn],Kt=J[En],$o=document.createElement("div");kr(()=>{Kt||Md('x-for ":key" is undefined or invalid',H,En,J),Kt.after($o),Q.after(Kt),Kt._x_currentIfEl&&Kt.after(Kt._x_currentIfEl),$o.before(Q),Q._x_currentIfEl&&Q.after(Q._x_currentIfEl),$o.remove()}),Kt._x_refreshXForScope(Re[Be.indexOf(En)])}for(let Se=0;Se<pt.length;Se++){let[sn,En]=pt[Se],Q=sn==="template"?H:J[sn];Q._x_currentIfEl&&(Q=Q._x_currentIfEl);let Kt=Re[En],$o=Be[En],ln=document.importNode(H.content,!0).firstElementChild,oe=XT(Kt);SM(ln,oe,H),ln._x_refreshXForScope=rn=>{Object.entries(rn).forEach(([Go,An])=>{oe[Go]=An})},kr(()=>{Q.after(ln),fv(()=>u1(ln))()}),typeof $o=="object"&&Md("x-for key cannot be an object, it must be a string or an integer",H),J[$o]=ln}for(let Se=0;Se<Ht.length;Se++)J[Ht[Se]]._x_refreshXForScope(Re[Be.indexOf(Ht[Se])]);H._x_prevKeys=Be})}function Ine(b){let x=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,k=/^\s*\(|\)\s*$/g,D=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,$=b.match(D);if(!$)return;let H={};H.items=$[2].trim();let Z=$[1].replace(k,"").trim(),J=Z.match(x);return J?(H.item=Z.replace(x,"").trim(),H.index=J[1].trim(),J[2]&&(H.collection=J[2].trim())):H.item=Z,H}function iX(b,x,k,D){let $={};return/^\[.*\]$/.test(b.item)&&Array.isArray(x)?b.item.replace("[","").replace("]","").split(",").map(Z=>Z.trim()).forEach((Z,J)=>{$[Z]=x[J]}):/^\{.*\}$/.test(b.item)&&!Array.isArray(x)&&typeof x=="object"?b.item.replace("{","").replace("}","").split(",").map(Z=>Z.trim()).forEach(Z=>{$[Z]=x[Z]}):$[b.item]=x,b.index&&($[b.index]=k),b.collection&&($[b.collection]=D),$}function Fne(b){return!Array.isArray(b)&&!isNaN(b)}function UJ(){}UJ.inline=(b,{expression:x},{cleanup:k})=>{let D=zL(b);D._x_refs||(D._x_refs={}),D._x_refs[x]=b,k(()=>delete D._x_refs[x])};da("ref",UJ);da("if",(b,{expression:x},{effect:k,cleanup:D})=>{b.tagName.toLowerCase()!=="template"&&Md("x-if can only be used on a <template> tag",b);let $=nl(b,x),H=()=>{if(b._x_currentIfEl)return b._x_currentIfEl;let J=b.content.cloneNode(!0).firstElementChild;return SM(J,{},b),kr(()=>{b.after(J),fv(()=>u1(J))()}),b._x_currentIfEl=J,b._x_undoIf=()=>{kr(()=>{ek(J),J.remove()}),delete b._x_currentIfEl},J},Z=()=>{b._x_undoIf&&(b._x_undoIf(),delete b._x_undoIf)};k(()=>$(J=>{J?H():Z()})),D(()=>b._x_undoIf&&b._x_undoIf())});da("id",(b,{expression:x},{evaluate:k})=>{k(x).forEach($=>Ene(b,$))});WL((b,x)=>{b._x_ids&&(x._x_ids=b._x_ids)});Gq(JX("@",QX(QT("on:"))));da("on",fv((b,{value:x,modifiers:k,expression:D},{cleanup:$})=>{let H=D?nl(b,D):()=>{};b.tagName.toLowerCase()==="template"&&(b._x_forwardEvents||(b._x_forwardEvents=[]),b._x_forwardEvents.includes(x)||b._x_forwardEvents.push(x));let Z=Pq(b,x,k,J=>{H(()=>{},{scope:{$event:J},params:[J]})});$(()=>Z())}));qL("Collapse","collapse","collapse");qL("Intersect","intersect","intersect");qL("Focus","trap","focus");qL("Mask","mask","mask");function qL(b,x,k){da(x,D=>Md(`You can't use [x-${x}] without first installing the "${b}" plugin here: https://alpinejs.dev/plugins/${k}`,D))}TM.setEvaluator(qX);TM.setReactivityEngine({reactive:rK,effect:Yte,release:Xte,raw:cr});var Lne=TM,WJ=Lne;window.addEventListener("DOMContentLoaded",()=>{tinymce.init({selector:"textarea",skin:!1,content_css:!1})});window.Alpine=WJ;WJ.start();
